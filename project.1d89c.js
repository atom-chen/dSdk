window.__require=function e(t,n,o){function a(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return a(t[r][1][e]||e)},u,u.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({Callback:[function(e,t,n){"use strict";cc._RF.push(t,"6db2e/tWP9PMIBGOB7obvi7","Callback"),Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.callback=t,this.thisObj=n},cc._RF.pop()},{}],Command:[function(e,t,n){"use strict";cc._RF.push(t,"1d507qdRZdPcatgBlQHTkCv","Command");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,l=(s.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._prefabURL=null}return o(e,[{key:"loadPrefab",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._prefabURL)if(i.prefabMap[this._prefabURL])null!=e&&e.call(null);else{var t=this,n=this._prefabURL;n=n.replace(/^\/?resources\//,""),console.log("[Command] load prefab "+n),cc.loader.loadRes(n,function(n,o){console.log("[Command] prefab loaded",n,o),o?i.prefabMap[t._prefabURL]=o:console.log("[Command] prefab load fail:"+t._prefabURL),null!=e&&e.call(null)})}else null!=e&&e.call(null)}},{key:"execute",value:function(){}},{key:"destoryPrefab",value:function(){this._prefabURL&&(cc.loader.releaseRes(this._prefabURL),delete i.prefabMap[this._prefabURL],this._prefabURL=null)}},{key:"data",get:function(){return this.event.data}},{key:"prefabURL",get:function(){return this._prefabURL}},{key:"prefab",get:function(){return this._prefabURL?i.prefabMap[this._prefabURL]:null}}]),e}());l.prefabMap={},l=i=r([c],l),n.default=l,cc._RF.pop()},{}],Comp_AvatarImage:[function(e,t,n){"use strict";cc._RF.push(t,"832d8Qtp+NITIaQvYWXNhzb","Comp_AvatarImage");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../wechat/WXImage"),s=e("../wechat/WXUser"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.imageURL="https://deer-cdn.youkongwan.com/common/gamesdeer2_128.png",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this._sprite=this.node.getComponent(cc.Sprite),this._sprite||(this._sprite=this.node.addComponent(cc.Sprite)),this.refreshImage(),s.default.userInfo||s.default.onUserInfo(this.userInfoCallback.bind(this))}},{key:"userInfoCallback",value:function(){s.default.offUserInfo(this.userInfoCallback.bind(this)),this.refreshImage()}},{key:"refreshImage",value:function(){s.default.userInfo&&s.default.userInfo.avatarUrl?this._sprite.spriteFrame=r.default.createImage(s.default.userInfo.avatarUrl):this.imageURL&&(this._sprite.spriteFrame=r.default.createImage(this.imageURL))}},{key:"onDestroy",value:function(){s.default.offUserInfo(this.userInfoCallback.bind(this))}}]),t}();i([u({displayName:"\u9ed8\u8ba4\u5934\u50cfURL"})],d.prototype,"imageURL",void 0),d=i([l],d),n.default=d,cc._RF.pop()},{"../wechat/WXImage":"WXImage","../wechat/WXUser":"WXUser"}],Comp_DeerIconAd:[function(e,t,n){"use strict";cc._RF.push(t,"1273eYaKCRP57VahVc3tFMM","Comp_DeerIconAd");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,l=s.property,u=i=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.adSprite=null,e.adNameLabel=null,e.renewWhenTap=!0,e.enableEffect=!1,e._isFirstTimeShow=!0,e._needToRenew=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"onLoad",value:function(){this.enableEffect&&(this.node.opacity=0)}},{key:"start",value:function(){this.adSprite||(this.adSprite=this.node.getComponent(cc.Sprite),this.adSprite||(this.adSprite=this.node.addComponent(cc.Sprite))),this._adOriginalHeight=this.adSprite.node.height,this._adOriginalWidth=this.adSprite.node.width,this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this),this._data&&this.showAd(),"undefined"!=typeof wx&&wx.onShow(this.wxOnShowCallback.bind(this))}},{key:"touchEndHandler",value:function(e){this._data&&(this._data.navigate(),this.renewWhenTap&&this.tryRenew())}},{key:"tryRenew",value:function(){this._needToRenew=!0}},{key:"renew",value:function(){this._needToRenew=!1,i._adPool&&i._adPool.length>0&&(this.data=i._adPool[0])}},{key:"showAd",value:function(){if(this._isOnLoadCalled&&this._data){var e=this;if(cc.loader.load({url:this._data.icon,type:"png"},function(t,n){if(n&&e.adSprite&&(e.adSprite.spriteFrame=new cc.SpriteFrame(n),e.adSprite.node.width=e._adOriginalWidth,e.adSprite.node.height=e._adOriginalHeight,e._isFirstTimeShow&&e.enableEffect)){e._isFirstTimeShow=!1;var o=.1;e.data.index&&(o+=.1*e.data.index),e.node.scale=.8,e.node.opacity=1,e.node.runAction(cc.sequence(cc.delayTime(o),cc.spawn(cc.fadeTo(.5,255),cc.scaleTo(.5,1,1).easing(cc.easeBackOut()))))}e._data&&e._data.reportShown()}),this.adNameLabel&&(this.adNameLabel.string=""+this._data.name),i._adPool){var t=i._adPool.indexOf(this._data);i._adPool.splice(t,1)}}}},{key:"wxOnShowCallback",value:function(){this._needToRenew&&this.renew()}},{key:"onDestroy",value:function(){"undefined"!=typeof wx&&wx.offShow(this.wxOnShowCallback.bind(this))}},{key:"data",set:function(e){this._data!=e&&(this._data=e,this.showAd())},get:function(){return this._data}}],[{key:"adPool",set:function(e){e&&(i._adPool=e.concat())}}]),t}();r([l({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Sprite})],u.prototype,"adSprite",void 0),r([l({displayName:"\u5e7f\u544a\u540d\u79f0",type:cc.Label})],u.prototype,"adNameLabel",void 0),r([l({displayName:"\u70b9\u51fb\u540e\u66f4\u6362"})],u.prototype,"renewWhenTap",void 0),r([l({displayName:"\u5f00\u542f\u7f13\u52a8\u6548\u679c"})],u.prototype,"enableEffect",void 0),u=i=r([c],u),n.default=u,cc._RF.pop()},{}],Comp_DeerRecommendAdList:[function(e,t,n){"use strict";cc._RF.push(t,"ff079K2T5ZPCp3caF8E0OQS","Comp_DeerRecommendAdList");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./DeerSDK"),s=e("./DeerSDKEventNames"),c=e("./Comp_DeerIconAd"),l=cc._decorator,u=l.ccclass,d=l.property,f=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.adSize=100,e.adMaxCount=0,e.gapH=10,e.renewAd=!1,e.adItemPrefab=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"onLoad",value:function(){this.node.opacity=0}},{key:"start",value:function(){r.default.instance.isReady?this.loadAdData():r.default.instance.addEventListener(s.default.READY,this.deerSDKReadyHandler,this)}},{key:"deerSDKReadyHandler",value:function(e){this.loadAdData()}},{key:"loadAdData",value:function(){var e=this;r.default.instance.removeEventListener(s.default.READY,this.deerSDKReadyHandler,this),r.default.instance.ad_getAdData(r.DeerAdType.RECOMMEND,function(t){e.showAds(t)})}},{key:"showAds",value:function(e){if(e&&0!=e.length){this.renewAd&&(c.default.adPool=e),this.node.opacity=255;var t=e.length;this.adMaxCount>0&&(t=Math.min(t,this.adMaxCount));for(var n=0;n<t;n++){var o=cc.instantiate(this.adItemPrefab);o.width=this.adSize,o.height=this.adSize,o.x=(o.width+this.gapH)*n+o.width/2+this.gapH;var a=e[n];a.index=n,o.getComponent(c.default).data=a,this.node.addChild(o)}this.node.width=(this.adSize+this.gapH)*t+this.gapH}}},{key:"onDestroy",value:function(){r.default.instance.removeEventListener(s.default.READY,this.deerSDKReadyHandler,this)}}]),t}();i([d({displayName:"\u5e7f\u544a\u663e\u793a\u5927\u5c0f"})],f.prototype,"adSize",void 0),i([d({displayName:"\u5e7f\u544a\u663e\u793a\u6570"})],f.prototype,"adMaxCount",void 0),i([d({displayName:"\u6c34\u5e73\u95f4\u8ddd"})],f.prototype,"gapH",void 0),i([d({displayName:"\u81ea\u52a8\u66f4\u65b0\u5e7f\u544a",tooltip:"\u542f\u7528\u540e\uff0c\u88ab\u70b9\u51fb\u7684\u5e7f\u544a\u4f1a\u81ea\u52a8\u66f4\u65b0\u663e\u793a\u53e6\u5916\u7684\u5e7f\u544a"})],f.prototype,"renewAd",void 0),i([d({type:cc.Prefab,displayName:"\u5355\u4e2a\u5e7f\u544a\u9884\u5236\u4f53"})],f.prototype,"adItemPrefab",void 0),f=i([u],f),n.default=f,cc._RF.pop()},{"./Comp_DeerIconAd":"Comp_DeerIconAd","./DeerSDK":"DeerSDK","./DeerSDKEventNames":"DeerSDKEventNames"}],Comp_DeerSpineAd:[function(e,t,n){"use strict";cc._RF.push(t,"ec614+TuKBJL5BGI1CEs/aX","Comp_DeerSpineAd");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./DeerSDKEventNames"),c=e("./DeerSDK"),l=cc._decorator,u=l.ccclass,d=l.property,f=i=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.adInterval=12,e.adRandom=!0,e._data=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){c.default.instance.isReady?this.loadAdData():c.default.instance.addEventListener(s.default.READY,this.sdkReadyHandler,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this)}},{key:"sdkReadyHandler",value:function(e){c.default.instance.removeEventListener(s.default.READY,this.sdkReadyHandler,this),this.loadAdData()}},{key:"touchEndHandler",value:function(e){this._currentAd&&this._currentAd.navigate()}},{key:"loadAdData",value:function(){var e=this;c.default.instance.ad_getAdData(c.DeerAdType.ANIMATION,function(t){e.data=t})}},{key:"clear",value:function(){this._currentAd=null,this._lastAdNode&&(this._lastAdNode.destroy(),this._lastAdNode=null)}},{key:"showNextAd",value:function(){if(this._data&&0!=this._data.length){var e=this._data.indexOf(this._currentAd);if(this.adRandom&&this._data.length>1){for(var t=20;t-- >0;){var n=Math.floor(Math.random()*this._data.length);if(n!=e&&n!=i._lastAdIndex){e=n;break}}i._lastAdIndex=e}else++e>=this._data.length&&(e=0);this.showAd(this._data[e])}}},{key:"showAd",value:function(e){var t=this;if(e&&this._currentAd!=e&&(this._currentAd=e,this._currentAd.spine)){this._currentAd.reportShown();var n=[this._currentAd.spine.png,this._currentAd.spine.atlas,this._currentAd.spine.aniJson];cc.loader.load(n,function(e,n){var o=new cc.Node,a=o.addComponent(sp.Skeleton);try{n.getContent(t._currentAd.spine.png);var i=new sp.SkeletonData;cc.ENGINE_VERSION>="2.0.0"?i.textures=[n.getContent(t._currentAd.spine.png)]:i.textures=[t._currentAd.spine.png];var r=t._currentAd.spine.png.split("/").pop();i.textureNames=[r],i.atlasText=n.getContent(t._currentAd.spine.atlas);var s=i.atlasText.match(/\n(.+?\.png)\n/);if(s){var c=s[1];i.atlasText=i.atlasText.replace("\n"+c+"\n","\n"+r+"\n")}if(i.skeletonJson=n.getContent(t._currentAd.spine.aniJson),a.skeletonData=i,a.defaultSkin="default",a.premultipliedAlpha=!1,i._skeletonJson&&i._skeletonJson.animations){var l=Object.keys(i._skeletonJson.animations);l.length>0&&(a.animation=l[0])}t._lastAdNode&&t._lastAdNode.destroy(),t._lastAdNode=o,t._lastAdNode.scaleX=t.node.width/256,t._lastAdNode.scaleY=t.node.height/256,t.node.addChild(t._lastAdNode)}catch(e){}})}}},{key:"data",set:function(e){this._data!=e&&(this._data=e,this.showNextAd(),this.unschedule(this.showNextAd),this.adInterval>0&&this.schedule(this.showNextAd,this.adInterval))},get:function(){return this._data}},{key:"currentAd",get:function(){return this._currentAd}}]),t}();f._lastAdIndex=-1,r([d({displayName:"\u8f6e\u64ad\u95f4\u9694(\u79d2)",tooltip:"0\u8868\u793a\u4e0d\u8f6e\u64ad"})],f.prototype,"adInterval",void 0),r([d({displayName:"\u662f\u5426\u968f\u673a"})],f.prototype,"adRandom",void 0),f=i=r([u],f),n.default=f,cc._RF.pop()},{"./DeerSDK":"DeerSDK","./DeerSDKEventNames":"DeerSDKEventNames"}],Comp_EffectFadeInAndOut:[function(e,t,n){"use strict";cc._RF.push(t,"110eeaCv1dM37MIcLR0dnt3","Comp_EffectFadeInAndOut");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.duration=1.5,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.play()}},{key:"play",value:function(){this._theAction||(this._theAction=this.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(this.duration,100),cc.fadeTo(this.duration,255),cc.delayTime(.1)))))}},{key:"stop",value:function(){this._theAction&&(this.node.stopAction(this._theAction),this._theAction=null)}},{key:"onDestroy",value:function(){this.stop()}}]),t}();i([c({displayName:"\u6de1\u9690\u7279\u6548\u65f6\u957f(\u79d2)"})],l.prototype,"duration",void 0),l=i([s],l),n.default=l,cc._RF.pop()},{}],Comp_EffectFloat:[function(e,t,n){"use strict";cc._RF.push(t,"7fa60J7eyhEa4Rw0/ehB8Nn","Comp_EffectFloat");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.duration=1.5,e.delay=2,e.distanceY=20,e.distanceX=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.play()}},{key:"play",value:function(){this._theAction&&this.node.stopAction(this._theAction),this.unschedule(this.play),this._theAction=this.node.runAction(cc.sequence(cc.moveTo(this.duration,this.node.x+this.distanceX,this.node.y+this.distanceY).easing(cc.easeOut(1)),cc.moveTo(this.duration,this.node.x,this.node.y).easing(cc.easeBackIn()),cc.callFunc(this.effectCompleteCallback,this)))}},{key:"effectCompleteCallback",value:function(){this._theAction=null;var e=this.delay*Math.random()/2+this.delay/2;this.schedule(this.play,e,1)}},{key:"stop",value:function(){this.unschedule(this.play),this._theAction&&(this.node.stopAction(this._theAction),this._theAction=null)}},{key:"onDestroy",value:function(){this.stop()}}]),t}();i([c({displayName:"\u6d6e\u52a8\u7279\u6548\u65f6\u957f(\u79d2)"})],l.prototype,"duration",void 0),i([c({displayName:"\u6d6e\u52a8\u95f4\u9694\u65f6\u957f(\u79d2)"})],l.prototype,"delay",void 0),i([c({displayName:"\u6d6e\u52a8\u8ddd\u79bb(y)"})],l.prototype,"distanceY",void 0),i([c({displayName:"\u6d6e\u52a8\u8ddd\u79bb(x)"})],l.prototype,"distanceX",void 0),l=i([s],l),n.default=l,cc._RF.pop()},{}],Comp_EffectFlyTo:[function(e,t,n){"use strict";cc._RF.push(t,"1485fj6u4tIjIGpn+4Y3Q51","Comp_EffectFlyTo");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.hasRandom=!0,e.height=100,e.distance=100,e.duration=1,e.startDelay=.5,e.flyDeltaDistance=50,e.destroyWhenComplete=!0,e.data=null,e._isFlying=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.destination&&this.go()}},{key:"go",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._isFlying){this._isFlying=!0,t&&(this.destination=t);var n=this.startDelay;this.hasRandom&&(n+=Math.min(.5,this.startDelay/3*Math.random())),this.height<=0?this.scheduleOnce(this.flyToDestination,n):this.node.runAction(cc.sequence(cc.delayTime(n),cc.spawn(cc.moveBy(this.duration,0,-this.height).easing(cc.easeBounceOut()),cc.moveBy(this.duration,this.distance,0)),cc.delayTime(.5+.5*Math.random()),cc.callFunc(function(){e.flyToDestination()})))}}},{key:"flyToDestination",value:function(){var e=this,t=this.destination;if(t){var n=new cc.Vec2(0,0);n=this.node.convertToWorldSpaceAR(n),this.node.x=n.x,this.node.y=n.y,this.node.removeFromParent(!1),cc.director.getScene().addChild(this.node);var o=this.flyDeltaDistance;this.hasRandom&&(o+=this.flyDeltaDistance/3*Math.random());var a=.3*Math.random()+.6;this.node.runAction(cc.sequence(cc.spawn(cc.sequence(cc.moveBy(a/2,t.x-this.node.x+o,0).easing(cc.easeCubicActionOut()),cc.moveBy(a/2,-o,0).easing(cc.easeCubicActionIn())),cc.moveBy(a,0,t.y-this.node.y).easing(cc.easeQuadraticActionIn())),cc.scaleTo(.2,1.3,1.3),cc.scaleTo(.2,1,1),cc.callFunc(function(){e.doComplete()})))}else this.doComplete()}},{key:"doComplete",value:function(){if(null!=this.completeCallback)try{this.completeCallback(this.data)}catch(e){}this.destroyWhenComplete&&this.node.destroy()}},{key:"onDestroy",value:function(){this.completeCallback=null,this.data=null,this.destination=null}},{key:"isFlying",get:function(){return this._isFlying}}]),t}();i([c({displayName:"\u5f00\u542f\u5c0f\u968f\u673a"})],l.prototype,"hasRandom",void 0),i([c({displayName:"\u6389\u843d\u9ad8\u5ea6",tooltip:"0\u6216\u8005\u5c0f\u4e8e0\uff0c\u5219\u4e0d\u6389\u843d\uff0c\u76f4\u63a5\u98de\u5411\u76ee\u7684\u5730"})],l.prototype,"height",void 0),i([c({displayName:"\u6389\u843d\u8ddd\u79bb"})],l.prototype,"distance",void 0),i([c({displayName:"\u6389\u843d\u65f6\u957f"})],l.prototype,"duration",void 0),i([c({displayName:"\u5f00\u59cb\u5ef6\u8fdf\u65f6\u95f4"})],l.prototype,"startDelay",void 0),i([c({displayName:"\u98de\u56de\u7684x\u589e\u91cf"})],l.prototype,"flyDeltaDistance",void 0),i([c({displayName:"\u81ea\u52a8\u9500\u6bc1",tooltip:"\u5230\u8fbe\u76ee\u7684\u540e\uff0c\u662f\u5426\u81ea\u52a8\u9500\u6bc1"})],l.prototype,"destroyWhenComplete",void 0),l=i([s],l),n.default=l,cc._RF.pop()},{}],Comp_EffectShake:[function(e,t,n){"use strict";cc._RF.push(t,"d342fUO6VhA5LnA4b5QqSeL","Comp_EffectShake");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.duration=3,e.delay=5,e.randomDelay=!0,e._isActing=!1,e.shakeAngle=15,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.duration=Math.max(.5,this.duration),this.playEffect()}},{key:"playEffect",value:function(){!0!==this._isActing&&(this._isActing=!0,this.node.runAction(cc.sequence(cc.rotateTo(.2,-this.shakeAngle),cc.rotateTo(.2,this.shakeAngle),cc.rotateTo(.15,.8*-this.shakeAngle),cc.rotateTo(.15,.8*this.shakeAngle),cc.rotateTo(.1,.6*-this.shakeAngle),cc.rotateTo(.1,.6*this.shakeAngle),cc.rotateTo(this.duration-.9,0).easing(cc.easeElasticOut(.1)),cc.callFunc(this.play_complete,this))))}},{key:"play_complete",value:function(){this._isActing=!1;var e=this.delay;this.randomDelay&&(e+=.5-Math.random()),this.scheduleOnce(this.playEffect,e)}},{key:"isActing",get:function(){return this._isActing}}]),t}();i([c({displayName:"\u7279\u6548\u65f6\u957f(\u79d2)"})],l.prototype,"duration",void 0),i([c({displayName:"\u7279\u6548\u95f4\u9694(\u79d2)"})],l.prototype,"delay",void 0),i([c({displayName:"\u968f\u673a\u95f4\u9694\u65f6\u95f4",tooltip:"\u52fe\u9009\u540e\uff0c\u7279\u6548\u95f4\u9694\u65f6\u95f4\u6709\u4e00\u5b9a\u5e45\u5ea6\u7684\u5c0f\u968f\u673a"})],l.prototype,"randomDelay",void 0),i([c({displayName:"\u6296\u52a8\u89d2\u5ea6"})],l.prototype,"shakeAngle",void 0),l=i([s],l),n.default=l,cc._RF.pop()},{}],Comp_EffectZoom:[function(e,t,n){"use strict";cc._RF.push(t,"874793Zj9dE1J7eAc9IvKdI","Comp_EffectZoom");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.duration=1,e.delay=3,e.randomDelay=!0,e._isActing=!1,e.zoomInFactor=1.2,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.duration=Math.max(.5,this.duration),this.playEffect()}},{key:"playEffect",value:function(){if(!0!==this._isActing){this._isActing=!0;var e=this.node.scaleX,t=this.node.scaleY,n=this.node.scaleX*this.zoomInFactor,o=this.node.scaleY*this.zoomInFactor;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(this.duration/2,n,o).easing(cc.easeQuarticActionIn()),cc.scaleTo(this.duration/2,e,t).easing(cc.easeQuarticActionOut()),cc.callFunc(this.play_complete,this)))}}},{key:"play_complete",value:function(){this._isActing=!1;var e=this.delay;this.randomDelay&&(e+=.5-Math.random()),e>0?this.scheduleOnce(this.playEffect,e):this.playEffect()}},{key:"isActing",get:function(){return this._isActing}}]),t}();i([c({displayName:"\u7279\u6548\u65f6\u957f(\u79d2)"})],l.prototype,"duration",void 0),i([c({displayName:"\u7279\u6548\u95f4\u9694(\u79d2)"})],l.prototype,"delay",void 0),i([c({displayName:"\u968f\u673a\u95f4\u9694\u65f6\u95f4",tooltip:"\u52fe\u9009\u540e\uff0c\u7279\u6548\u95f4\u9694\u65f6\u95f4\u6709\u4e00\u5b9a\u5e45\u5ea6\u7684\u5c0f\u968f\u673a"})],l.prototype,"randomDelay",void 0),i([c({displayName:"\u653e\u5927\u7cfb\u6570"})],l.prototype,"zoomInFactor",void 0),l=i([s],l),n.default=l,cc._RF.pop()},{}],Comp_GameClubButton:[function(e,t,n){"use strict";cc._RF.push(t,"a03192NFZ9GQolS8SDbJFn2","Comp_GameClubButton");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../base/GameValues"),s=e("../managers/Utils"),c=e("../managers/GameManager"),l=cc._decorator,u=l.ccclass,d=l.property,f=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.buttonBG="https://deer-cdn.youkongwan.com/common/blank.png",e.hideWhenHasPopUp=!0,e.delay=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){r.default.isDebug&&(this.buttonBG="https://deer-cdn.youkongwan.com/common/blank_debug.png"),this._lastPosition=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0)),this.delay<=0?this.createButton():this.scheduleOnce(this.createButton,this.delay)}},{key:"createButton",value:function(){if("undefined"!=typeof wx){var e=this.node.getBoundingBoxToWorld();e=s.default.toScreenRect(e),this._button=wx.createGameClubButton({type:"image",image:this.buttonBG,style:{left:e.xMin,top:e.yMin,width:e.width,height:e.height,lineHeight:40}})}}},{key:"refresh",value:function(){this._button&&(this._button.destroy(),this._button=null,this.createButton())}},{key:"update",value:function(e){cc.director.getTotalFrames()%60==0&&this.updateButton(!0)}},{key:"onDisable",value:function(){this.updateButton(!1)}},{key:"updateButton",value:function(e){if(this._button){var t=e;this.hideWhenHasPopUp&&c.default.popUpManager.popUpCount>0&&(t=!1),t&&(t=this.enabled),console.log("RESULT","toshow",t);var n=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0));if(t&&(n.x<0||n.x>cc.winSize.width||n.y<0||n.y>cc.winSize.height)&&(t=!1),t)Math.sqrt((n.x-this._lastPosition.x)*(n.x-this._lastPosition.x)+(n.y-this._lastPosition.y)*(n.y-this._lastPosition.y))>10?this.refresh():this._button&&this._button.show(),this._lastPosition=n;else this._button&&this._button.hide()}}},{key:"onDestroy",value:function(){this._button&&(this._button.destroy(),this._button=null)}}]),t}();i([d({displayName:"\u56fe\u7247URL"})],f.prototype,"buttonBG",void 0),i([d({displayName:"\u6709\u5f39\u51fa\u5c42\u65f6\u81ea\u52a8\u9690\u85cf"})],f.prototype,"hideWhenHasPopUp",void 0),i([d({displayName:"\u5ef6\u8fdf\u65f6\u95f4"})],f.prototype,"delay",void 0),f=i([u],f),n.default=f,cc._RF.pop()},{"../base/GameValues":"GameValues","../managers/GameManager":"GameManager","../managers/Utils":"Utils"}],Comp_ListRenderer:[function(e,t,n){"use strict";cc._RF.push(t,"4a7a6gottdMHqKrVM74t9Xq","Comp_ListRenderer");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.index=-1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){}},{key:"refreshUI",value:function(){}},{key:"data",set:function(e){this._data!=e&&(this._data=e,this.refreshUI())},get:function(){return this._data}}]),t}());c=i([s],c),n.default=c,cc._RF.pop()},{}],Comp_List:[function(e,t,n){"use strict";cc._RF.push(t,"9d0e7m7cpNFR7fqfXi8JcMs","Comp_List");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./Comp_ListRenderer"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){i(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.rendererPrefab=null,e._rendererWidth=0,e._rendererHeight=0,e.gapV=10,e.gapH=10,e.columnCount=1,e.topPadding=0,e.bottomPadding=0,e.leftPadding=0,e.rightPadding=0,e.bufferSize=3,e._itemPool=new cc.NodePool(s.default),e._virtualNodes=[],e._lastY=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"onLoad",value:function(){this.columnCount<1&&(this.columnCount=1)}},{key:"start",value:function(){this.refreshUI()}},{key:"update",value:function(e){cc.director.getTotalFrames()%10==0&&Math.abs(this.node.y-this._lastY)>this._rendererHeight/2&&(this._lastY=this.node.y,this.refreshUI())}},{key:"refreshVirtualNodes",value:function(){for(0==this._rendererHeight&&this.moreItems();this.node.children.length>0;){var e=this.node.children[0];this._itemPool.put(e),e.removeFromParent(!1)}if(this._virtualNodes=[],this._data){var t=Math.ceil(this._data.length/this.columnCount);this.node.height=(this._rendererHeight+this.gapV)*t-this.gapV+this.topPadding+this.bottomPadding;for(var n=0;n<this._data.length;n++){var o=new f;o.index=n,o.data=this._data[n],o.width=this._rendererWidth,o.height=this._rendererHeight;var a=Math.ceil((n+1)/this.columnCount),i=n%this.columnCount+1;o.y=-(a-1)*(this._rendererHeight+this.gapV)-this._rendererHeight/2-this.topPadding,o.x=(i-1)*(this._rendererWidth+this.gapH)+this._rendererWidth/2+this.leftPadding-this.node.width*this.node.anchorX,o.activeChangeCallback=this.virtualNodeActiveChangeCallback.bind(this),this._virtualNodes.push(o)}}}},{key:"refreshUI",value:function(){var e=this;if(this.node&&this.node.getParent()){var t=this.node.getParent();this._viewRect=new cc.Rect(-t.width*t.anchorX-this._rendererWidth,-t.height*t.anchorY-this._rendererHeight*this.bufferSize,t.width+2*this._rendererWidth,t.height+2*this._rendererHeight*this.bufferSize)}var n=0;this._firstActiveItemData=null,this._virtualNodes.forEach(function(t){var o=t.y+e.node.y+e._rendererHeight/2+e.gapV;if(t.y+e.node.y-e._rendererHeight/2-e.gapV>e._viewRect.yMax||o<e._viewRect.yMin)t.unactive();else{null==e._firstActiveItemData&&1==n&&(e._firstActiveItemData=t.data),t.active();var a=t.ui.getComponent(s.default);a?(a.index=t.index,a.data=t.data):console.log("\u6e32\u67d3item\u8bf7\u7ed1\u5b9aComp_ListRenderer\u7ec4\u4ef6\uff08\u6216\u5b50\u7ec4\u4ef6\uff09"),n++}})}},{key:"virtualNodeActiveChangeCallback",value:function(e){console.log("item\u663e\u793a\u3001\u5f71\u85cf",e.index,e.isActived),e.isActived?(e.ui||(this._itemPool.size()<=0&&this.moreItems(),e.ui=this._itemPool.get(),this.node.addChild(e.ui)),e.ui.x=e.x,e.ui.y=e.y):e.ui&&(e.ui.removeFromParent(!1),console.log("\u3010comp_list\u3011\u56de\u6536 "+e.ui.uuid),this._itemPool.put(e.ui),e.ui=null)}},{key:"moreItems",value:function(){var e=(this.node.width-this.gapH*(this.columnCount-1)-this.leftPadding-this.rightPadding)/this.columnCount;e<1&&(e=1),console.log("\u3010comp_list\u3011more 5 items");for(var t=0;t<5;++t){var n=cc.instantiate(this.rendererPrefab);this._itemPool.put(n),n.scale=e/n.width,0==this._rendererWidth&&(this._rendererWidth=e,this._rendererHeight=n.height*n.scale)}}},{key:"onDestroy",value:function(){this._itemPool&&(this._itemPool.clear(),this._itemPool=null)}},{key:"data",set:function(e){this._data!=e&&(this._data=e,this.refreshVirtualNodes(),this.refreshUI())},get:function(){return this._data}},{key:"firstActiveItemData",get:function(){return this._firstActiveItemData},set:function(e){if(this._virtualNodes)for(var t=0,n=this._virtualNodes.length;t<n;t++){var o=this._virtualNodes[t];if(o.data==e){this._firstActiveItemData=e;try{this.node.getParent().getParent().getComponent(cc.ScrollView).scrollToOffset(new cc.Vec2(0,-o.y-this._rendererHeight/2-this.gapV),1)}catch(e){}break}}}}]),t}();r([u({type:cc.Prefab,displayName:"Renderer Prefab"})],d.prototype,"rendererPrefab",void 0),r([u({displayName:"\u5782\u76f4\u95f4\u8ddd"})],d.prototype,"gapV",void 0),r([u({displayName:"\u6c34\u5e73\u95f4\u8ddd"})],d.prototype,"gapH",void 0),r([u({displayName:"\u5217\u6570"})],d.prototype,"columnCount",void 0),r([u({displayName:"\u9876\u90e8\u95f4\u9694"})],d.prototype,"topPadding",void 0),r([u({displayName:"\u5e95\u90e8\u95f4\u9694"})],d.prototype,"bottomPadding",void 0),r([u({displayName:"\u5de6\u8fb9\u95f4\u9694"})],d.prototype,"leftPadding",void 0),r([u({displayName:"\u53f3\u8fb9\u95f4\u9694"})],d.prototype,"rightPadding",void 0),r([u({displayName:"\u7f13\u51b2\u5927\u5c0f",tooltip:"\u4e0d\u5728\u53ef\u89c6\u533a\u57df\u4e2ditem\u4e2a\u6570"})],d.prototype,"bufferSize",void 0),d=r([l],d),n.default=d;var f=function(){function e(){i(this,e),this.index=0,this.x=0,this.y=0,this.width=0,this.height=0,this._isActived=!1}return o(e,[{key:"active",value:function(){!0!==this._isActived&&(this._isActived=!0,this.activeChangeCallback.call(null,this))}},{key:"unactive",value:function(){!1!==this._isActived&&(this._isActived=!1,this.activeChangeCallback&&this.activeChangeCallback(this))}},{key:"isActived",get:function(){return this._isActived}}]),e}();cc._RF.pop()},{"./Comp_ListRenderer":"Comp_ListRenderer"}],Comp_LoadingSceneMain:[function(e,t,n){"use strict";cc._RF.push(t,"96a0dYdub9Df6HApCDb56xK","Comp_LoadingSceneMain");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../managers/GameManager"),s=e("../GameCoreEventNames"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.titleNode=null,e.iconNode=null,e.logoNode=null,e.progress=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.iconNode&&(this.iconNode.opacity=0,this.iconNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.5,255)))),this.logoNode&&(this.logoNode.opacity=0,this.logoNode.runAction(cc.fadeTo(.3,255))),r.default.eventManager.addEventListener(s.default.RES_PROGRESS,this.onProgress,this)}},{key:"onProgress",value:function(e){this.progress&&(this.progress.progress=e.data.min/e.data.max),this.titleNode}},{key:"doPreDestory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(e<=0)){if(this.titleNode&&(this.titleNode.stopAllActions(),this.titleNode.runAction(cc.fadeTo(e,0))),this.iconNode&&(this.iconNode.stopAllActions(),this.iconNode.runAction(cc.fadeTo(e,0))),this.logoNode){this.logoNode.stopAllActions();var t=cc.winSize;this.logoNode.runAction(cc.moveTo(e,this.logoNode.x,-t.height/2-this.logoNode.height))}r.default.eventManager.removeEventListener(s.default.RES_PROGRESS,this.onProgress,this)}}},{key:"onDestroy",value:function(){this.node.stopAllActions(),this.titleNode&&this.titleNode.stopAllActions(),this.iconNode&&this.iconNode.stopAllActions(),this.logoNode&&this.logoNode.stopAllActions()}}]),t}();i([u({type:cc.Node,displayName:"title\u8282\u70b9"})],d.prototype,"titleNode",void 0),i([u({type:cc.Node,displayName:"icon\u8282\u70b9"})],d.prototype,"iconNode",void 0),i([u({type:cc.Node,displayName:"logo\u8282\u70b9"})],d.prototype,"logoNode",void 0),i([u({type:cc.ProgressBar,displayName:"\u52a0\u8f7d\u8fdb\u5ea6\u8282\u70b9"})],d.prototype,"progress",void 0),d=i([l],d),n.default=d,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","../managers/GameManager":"GameManager"}],Comp_MoveButton:[function(e,t,n){"use strict";cc._RF.push(t,"31620Ap7XZMyICGg6l0DN9E","Comp_MoveButton");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.jude=!1,e.delx=0,e.dely=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"onLoad",value:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.setTouchStart,this)}},{key:"start",value:function(){this.maxx=cc.winSize.width/2-this.node.width/2,this.maxy=cc.winSize.height/2-this.node.height/2}},{key:"addEvends",value:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.setTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.setTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.setTouchCancel,this)}},{key:"removeEvends",value:function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.setTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.setTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.setTouchCancel,this)}},{key:"setTouchStart",value:function(){this.delx=0,this.dely=0,this.addEvends()}},{key:"setTouchEnd",value:function(e){1==this.jude&&(e.stopPropagationImmediate(),e.stopPropagation()),this.startMove(),this.removeEvends()}},{key:"setTouchCancel",value:function(e){this.startMove()}},{key:"startMove",value:function(){var e=this.node.x,t=this.node.y;t>0?t>this.maxy&&(t=this.maxy):t<-this.maxy&&(t=-this.maxy);var n=cc.v2(this.maxx,t);e<0&&(n=cc.v2(-this.maxx,t));var o=cc.moveTo(.3,n).easing(cc.easeIn(.3)),a=this,i=cc.sequence(o,cc.callFunc(function(){a.jude=!1}));this.node.runAction(i)}},{key:"setTouchMove",value:function(e){var t=e.getDeltaX(),n=e.getDeltaY();this.node.x+=t,this.node.y+=n,this.delx+=t,this.dely+=n,Math.abs(Math.max(this.delx,this.dely))>10&&(this.jude=!0)}},{key:"onDestroy",value:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.setTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.setTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.setTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.setTouchCancel,this)}}]),t}());c=i([s],c),n.default=c,cc._RF.pop()},{}],Comp_MusicButton:[function(e,t,n){"use strict";cc._RF.push(t,"2fb16nYRrBF+aBTTlNAl5L+","Comp_MusicButton");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../managers/GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.muteSpriteFrame=null,e.unmuteSpriteFrame=null,e.controlSound=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this),this.refreshU()}},{key:"tapHandler",value:function(e){r.default.soundsManager.playTapSound(),r.default.soundsManager.musicMuted?(r.default.soundsManager.unmuteMusic(),this.controlSound&&r.default.soundsManager.unmuteSound()):(r.default.soundsManager.muteMusic(),this.controlSound&&r.default.soundsManager.muteSound()),this.refreshU()}},{key:"refreshU",value:function(){var e=this.node.getComponent(cc.Sprite);e&&(r.default.soundsManager.musicMuted?e.spriteFrame=this.muteSpriteFrame:e.spriteFrame=this.unmuteSpriteFrame)}}]),t}();i([l({type:cc.SpriteFrame,displayName:"\u97f3\u4e50\u5df2\u5173\u95ed"})],u.prototype,"muteSpriteFrame",void 0),i([l({type:cc.SpriteFrame,displayName:"\u97f3\u4e50\u5df2\u5f00\u542f"})],u.prototype,"unmuteSpriteFrame",void 0),i([l({displayName:"\u540c\u6b65\u63a7\u5236\u97f3\u6548"})],u.prototype,"controlSound",void 0),u=i([c],u),n.default=u,cc._RF.pop()},{"../managers/GameManager":"GameManager"}],Comp_NearToMenuButton:[function(e,t,n){"use strict";cc._RF.push(t,"e9ec8Hwg0hMRb+grXvdrOMP","Comp_NearToMenuButton");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./WXUtils"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.distanceToMenu=10,e.layoutDelay=.8,e._adIsShowing=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"onLoad",value:function(){}},{key:"start",value:function(){var e=this;this.layoutDelay>0?this.scheduleOnce(function(){e.relayout()},this.layoutDelay):this.relayout()}},{key:"relayout",value:function(){var e=new cc.Vec2(cc.winSize.width-10,cc.winSize.height-10),t=r.default.getMenuButtonLayout();t&&t.width>0&&(e=new cc.Vec2(t.x,t.y)),e=this.node.getParent().convertToNodeSpaceAR(e),this.node.y=e.y-this.node.height*(1-this.node.anchorY)-this.distanceToMenu}}]),t}();i([l({displayName:"\u95f4\u9694\u8ddd\u79bb"})],u.prototype,"distanceToMenu",void 0),i([l({displayName:"\u8c03\u6574\u4f4d\u7f6e\u5ef6\u8fdf"})],u.prototype,"layoutDelay",void 0),u=i([c],u),n.default=u,cc._RF.pop()},{"./WXUtils":"WXUtils"}],Comp_NearToWXBannerAd:[function(e,t,n){"use strict";cc._RF.push(t,"f8279AejqpB7Lw5Mzxs0Lp1","Comp_NearToWXBannerAd");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./WXBannerAd"),s=e("../managers/Utils"),c=e("./WXEventNames"),l=cc._decorator,u=l.ccclass,d=l.property,f=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.distanceToAd=0,e.layoutDelay=.8,e.useAction=!1,e.hideBeforeRelayout=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"onLoad",value:function(){this._originalOpacity=this.node.opacity,this.hideBeforeRelayout&&(this.node.opacity=0)}},{key:"start",value:function(){var e=this;this.layoutDelay>0?this.scheduleOnce(function(){e.init()},this.layoutDelay):this.init()}},{key:"init",value:function(){this.node.opacity=this._originalOpacity,this.checkBannerAd()}},{key:"checkBannerAd",value:function(){r.default.currentAd?(r.default.currentAd.addEventListener(c.default.BANNER_AD_RESIZE,this.bannerAdEventsHandler,this),r.default.currentAd.addEventListener(c.default.BANNER_AD_SHOW,this.bannerAdEventsHandler,this),r.default.currentAd.isShowing&&this.relayout()):this.scheduleOnce(this.checkBannerAd,.1)}},{key:"bannerAdEventsHandler",value:function(e){this.relayout()}},{key:"relayout",value:function(){var e=r.default.currentAd;if(e){var t=e.adRect;if(t){t=s.default.fromScreenRect(t);var n=new cc.Vec2(t.x+t.width/2,t.y+t.height);n=this.node.getParent().convertToNodeSpaceAR(n);var o=void 0;o=e.isShowing?n.y+this.node.height*this.node.anchorY+this.distanceToAd:n.y-this.node.height*(1-this.node.anchorY)-this.distanceToAd,this.useAction?(this.node.stopAllActions(),this.node.runAction(cc.moveTo(.5,this.node.x,o))):this.node.y=o}}}},{key:"onDestroy",value:function(){r.default.currentAd&&(r.default.currentAd.removeEventListener(c.default.BANNER_AD_RESIZE,this.bannerAdEventsHandler,this),r.default.currentAd.removeEventListener(c.default.BANNER_AD_SHOW,this.bannerAdEventsHandler,this))}}]),t}();i([d({displayName:"\u95f4\u9694\u8ddd\u79bb"})],f.prototype,"distanceToAd",void 0),i([d({displayName:"\u5ef6\u8fdf\u65f6\u95f4",tooltip:"\u7528\u6237\u9762\u677f\u4e2d\u5143\u7d20\u5ef6\u8fdf\u5904\u7406"})],f.prototype,"layoutDelay",void 0),i([d({displayName:"\u7f13\u52a8\u6548\u679c"})],f.prototype,"useAction",void 0),i([d({displayName:"\u9ed8\u8ba4\u4e0d\u663e\u793a"})],f.prototype,"hideBeforeRelayout",void 0),f=i([u],f),n.default=f,cc._RF.pop()},{"../managers/Utils":"Utils","./WXBannerAd":"WXBannerAd","./WXEventNames":"WXEventNames"}],Comp_PlatformContent:[function(e,t,n){"use strict";cc._RF.push(t,"ad6a0OOhUhFwKdD3E3jHi3q","Comp_PlatformContent");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../base/GameValues"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.weiXinNodes=[],e.touTiaoNodes=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"onLoad",value:function(){this.weiXinNodes.forEach(function(e){e&&(e.active=1==r.default.currentPlatform)}),this.touTiaoNodes.forEach(function(e){e&&(e.active=2==r.default.currentPlatform)})}},{key:"start",value:function(){}}]),t}();i([l({type:[cc.Node],displayName:"\u5fae\u4fe1\u5185\u5bb9"})],u.prototype,"weiXinNodes",void 0),i([l({type:[cc.Node],displayName:"\u4eca\u65e5\u5934\u6761\u5185\u5bb9"})],u.prototype,"touTiaoNodes",void 0),u=i([c],u),n.default=u,cc._RF.pop()},{"../base/GameValues":"GameValues"}],Comp_RemoteImage:[function(e,t,n){"use strict";cc._RF.push(t,"32681cSg4xDVb4//GN2/uSH","Comp_RemoteImage");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../wechat/WXImage"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.imageURL="",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this._sprite=this.node.getComponent(cc.Sprite),this._sprite||(this._sprite=this.node.addComponent(cc.Sprite)),this.imageURL&&this.setImageURL(this.imageURL)}},{key:"setImageURL",value:function(e){this.imageURL=e,this._isOnLoadCalled&&this._sprite&&(this._sprite.spriteFrame=r.default.createImage(this.imageURL))}}]),t}();i([l({displayName:"\u56fe\u7247URL"})],u.prototype,"imageURL",void 0),u=i([c],u),n.default=u,cc._RF.pop()},{"../wechat/WXImage":"WXImage"}],Comp_SplashScreen:[function(e,t,n){"use strict";cc._RF.push(t,"5ff6cpM7SZKa669ht56fLzo","Comp_SplashScreen");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../managers/GameManager"),s=e("./Comp_LoadingSceneMain"),c=e("../wechat/WXUtils"),l=cc._decorator,u=l.ccclass,d=l.property,f=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.mainSceneName="",e.showTime=2,e.subPackage="",e.resName="",e._subPackageLoaded=!1,e._passedTime=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.schedule(this.doShowMainScene,.1),this.loadSubPackage()}},{key:"loadSubPackage",value:function(){var e=this;this.subPackage&&"undefined"!=typeof wx?cc.loader.downloader.loadSubpackage("subp",function(t){console.log("#########################################"),console.log("\u5b50\u5305\u6570\u636e",t),console.log("#########################################"),t?c.default.showToast("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",3):(e._subPackageLoaded=!0,e.loadMainScene())}):(this._subPackageLoaded=!0,this.loadMainScene())}},{key:"loadMainScene",value:function(){console.log("\u9884\u52a0\u8f7d\u4e3b\u573a\u666f",this.mainSceneName),this.mainSceneName?r.default.sceneManager.preloadScene(this.mainSceneName,this.mainSceneLoadedCallback.bind(this)):this._mainSceneLoaded=!0}},{key:"mainSceneLoadedCallback",value:function(){console.log("\u3010mainSceneLoadedCallback\u3011",this),this._mainSceneLoaded=!0}},{key:"checkIsReady",value:function(){return!(this._passedTime<this.showTime)&&(!(this.subPackage&&!this._subPackageLoaded)&&!(this.mainSceneName&&!this._mainSceneLoaded))}},{key:"doShowMainScene",value:function(){this._passedTime+=.1,this.checkIsReady()&&(this.unschedule(this.doShowMainScene),this.enterMainScene())}},{key:"enterMainScene",value:function(){var e=this,t=this.node.getComponent(s.default);t?(console.log("\u3010sceneLoadedCallback\u3011\u91ca\u653e\u52a0\u8f7d\u573a\u666f"),t.doPreDestory(.3),this.scheduleOnce(function(){r.default.sceneManager.pushScene(e.mainSceneName)},.4)):r.default.sceneManager.pushScene(this.mainSceneName)}},{key:"onDestroy",value:function(){this.unschedule(this.doShowMainScene)}}]),t}();i([d({tooltip:"\u8be5\u573a\u666f\u8fc7\u540e\u8fdb\u5165\u7684\u573a\u666f\u540d\u79f0",displayName:"\u4e3b\u573a\u666f\u540d"})],f.prototype,"mainSceneName",void 0),i([d({displayName:"\u505c\u7559\u65f6\u95f4(\u79d2)"})],f.prototype,"showTime",void 0),i([d({displayName:"\u5b50\u5305\u540d"})],f.prototype,"subPackage",void 0),i([d({tooltip:"\u5982\u679c\u4e0d\u9700\u8981\u52a0\u8f7d\u914d\u7f6e\u8bf7\u7f6e\u7a7a",displayName:"\u52a0\u8f7d\u914d\u7f6e"})],f.prototype,"resName",void 0),f=i([u],f),n.default=f,cc._RF.pop()},{"../managers/GameManager":"GameManager","../wechat/WXUtils":"WXUtils","./Comp_LoadingSceneMain":"Comp_LoadingSceneMain"}],Comp_SubDomainContent:[function(e,t,n){"use strict";cc._RF.push(t,"0a109lm4YJM+otoFiP6OIxW","Comp_SubDomainContent");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.delayTime=0,e._sprite=null,e._tex=null,e._lastUpdateTime=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"onLoad",value:function(){this._sprite=null,this._tex=new cc.Texture2D,this._context=null;var e=cc.winSize;if(this.node.width=e.width,this.node.height=e.height,"undefined"!=typeof wx&&wx.getOpenDataContext){this._context=wx.getOpenDataContext();var t=this._context.canvas;t&&(t.width=this.node.width,t.height=this.node.height),this._tex.setPremultiplyAlpha(!0),this._tex.initWithElement(t),this._sprite=this.node.getComponent(cc.Sprite),this._sprite||(this._sprite=this.node.addComponent(cc.Sprite),this._sprite.srcBlendFactor=cc.macro.BlendFactor.ONE),this._sprite.spriteFrame=new cc.SpriteFrame(this._tex)}else this.enabled=!1}},{key:"start",value:function(){console.log("\u3010Comp_SubDomainContent\u3011 start"),this.updateSubContextViewport()}},{key:"onEnable",value:function(){this.updateSubContextViewport()}},{key:"updateSubContextViewport",value:function(){if(this._context){var e=this.node.getBoundingBoxToWorld(),t=cc.view._scaleX,n=cc.view._scaleY;this._context.postMessage({fromEngine:!0,event:"viewport",x:e.x*t+cc.view._viewportRect.x,y:e.y*n+cc.view._viewportRect.y,width:e.width*t,height:e.height*n})}}},{key:"update",value:function(e){try{if(this.delayTime>0){var t=(new Date).getTime();if(t-this._lastUpdateTime<1e3*this.delayTime)return;this._lastUpdateTime=t}this._tex.initWithElement(this._context.canvas),this._sprite._activateMaterial()}catch(e){}}}]),t}();i([c({displayName:"\u5237\u65b0\u95f4\u9694(\u79d2)",tooltip:"\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5219\u6bcf\u5e27\u5237\u65b0"})],l.prototype,"delayTime",void 0),l=i([s],l),n.default=l,cc._RF.pop()},{}],Comp_UserInfoButton:[function(e,t,n){"use strict";cc._RF.push(t,"5f8e0rSIRFCZrXe5q70AGK0","Comp_UserInfoButton");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../wechat/WXUser"),s=e("../managers/Utils"),c=e("../base/GameValues"),l=e("../wechat/WXUtils"),u=e("../managers/GameManager"),d=cc._decorator,f=d.ccclass,h=d.property,p=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.buttonBG="https://deer-cdn.youkongwan.com/common/blank.png",e.delay=0,e.hideWhenHasPopUp=!0,e.must=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){c.default.isDebug&&(this.buttonBG="https://deer-cdn.youkongwan.com/common/blank_debug.png"),this._lastPosition=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0)),this.delay<=0?this.createButton():this.scheduleOnce(this.createButton,this.delay)}},{key:"createButton",value:function(){if(!r.default.userInfo){var e=this.node.getBoundingBoxToWorld();e=s.default.toScreenRect(e),this._button=r.default.createUserInfoButton(this.buttonBG,e,this.createButtonTapCallback.bind(this))}}},{key:"refresh",value:function(){this._button&&(r.default.destroyUserInfoButton(this._button),this._button=null,this.createButton())}},{key:"createButtonTapCallback",value:function(e){!this.must||r.default.userInfo?this.callback&&this.callback(e):l.default.showToast("\u8bf7\u5141\u8bb8\u83b7\u5f97\u60a8\u7684\u6635\u79f0\u548c\u5934\u50cf",2e3)}},{key:"update",value:function(e){cc.director.getTotalFrames()%60==0&&this.updateButton(!0)}},{key:"onDisable",value:function(){this.updateButton(!1)}},{key:"updateButton",value:function(e){if(this._button){var t=e;this.hideWhenHasPopUp&&u.default.popUpManager.popUpCount>0&&(t=!1);for(var n=this.node,o=cc.director.getScene();n;){if(!n.active||n.opacity<=0){t=!1;break}if((n=n.getParent())==o)break}var a=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0));if(t&&(a.x<0||a.x>cc.winSize.width||a.y<0||a.y>cc.winSize.height)&&(t=!1),t)Math.sqrt((a.x-this._lastPosition.x)*(a.x-this._lastPosition.x)+(a.y-this._lastPosition.y)*(a.y-this._lastPosition.y))>10?this.refresh():this._button&&this._button.show(),this._lastPosition=a;else this._button&&this._button.hide()}}},{key:"onDestroy",value:function(){this._button&&(r.default.destroyUserInfoButton(this._button),this._button=null)}}]),t}();i([h({displayName:"\u56fe\u7247URL"})],p.prototype,"buttonBG",void 0),i([h({displayName:"\u5ef6\u8fdf\u65f6\u95f4"})],p.prototype,"delay",void 0),i([h({displayName:"\u6709\u5f39\u51fa\u5c42\u65f6\u81ea\u52a8\u9690\u85cf"})],p.prototype,"hideWhenHasPopUp",void 0),i([h({displayName:"\u5fc5\u987b\u6388\u6743"})],p.prototype,"must",void 0),p=i([f],p),n.default=p,cc._RF.pop()},{"../base/GameValues":"GameValues","../managers/GameManager":"GameManager","../managers/Utils":"Utils","../wechat/WXUser":"WXUser","../wechat/WXUtils":"WXUtils"}],Comp_VibrateButton:[function(e,t,n){"use strict";cc._RF.push(t,"ba89dYesvBONYJHUAqItTwq","Comp_VibrateButton");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../managers/GameManager"),s=e("../wechat/WXDevice"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onSpriteFrame=null,e.offSpriteFrame=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this),this.refreshU()}},{key:"tapHandler",value:function(e){r.default.soundsManager.playTapSound(),r.default.canVibrate?r.default.vibrateOff():(r.default.vibrateOn(),s.default.vibrateShort()),this.refreshU()}},{key:"refreshU",value:function(){var e=this.node.getComponent(cc.Sprite);e&&(r.default.canVibrate?e.spriteFrame=this.onSpriteFrame:e.spriteFrame=this.offSpriteFrame)}}]),t}();i([u({type:cc.SpriteFrame,displayName:"\u9707\u52a8\u5df2\u5f00\u542f"})],d.prototype,"onSpriteFrame",void 0),i([u({type:cc.SpriteFrame,displayName:"\u9707\u52a8\u5df2\u5173\u95ed"})],d.prototype,"offSpriteFrame",void 0),d=i([l],d),n.default=d,cc._RF.pop()},{"../managers/GameManager":"GameManager","../wechat/WXDevice":"WXDevice"}],Comp_WXBannerAd:[function(e,t,n){"use strict";cc._RF.push(t,"ed6cccXls1LR5n5h+MNHO9B","Comp_WXBannerAd");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("./WXBannerAd"),c=e("./WXEventNames"),l=e("../managers/GameManager"),u=e("../managers/Utils"),d=e("../GameCoreLocation"),f=e("./DeerBannerAd"),h=e("../deer/DeerSDK"),p=cc._decorator,_=p.ccclass,y=p.property;(function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"})(r||(r={}));var g=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.bannerAdIDs=[""],e.adLocation=d.GameCoreLocation.BOTTOM_CENTER,e.maxWidth=0,e.maxHeight=0,e.hideByDefault=!1,e.hideWhenHasPopUp=!1,e.refreshAdMaxDelay=45,e.refreshRandom=!0,e.refreshAdMinDelay=15,e.autoRelease=!0,e.deerAdAsDefault=!1,e._useWXBannerAd=!0,e._wxBannerAdIsWX=!1,e._lastRefreshAdTime=0,e._currentAdHasShown=!1,e._currentAdIsShowing=!0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){if(this._currentAdIsShowing=!this.hideByDefault,this.node.anchorX=0,this.node.anchorY=0,this.adLocation||(this.adLocation=d.GameCoreLocation.BOTTOM_CENTER),this.maxWidth<=0&&(this.maxWidth=NaN),this.relayout(),this.deerAdAsDefault&&(this._defaultAd=new f.default(null,this.adLocation,0,0,this.maxHeight,this.maxWidth)),this.nextAd(),this.bannerAdIDs.length>1&&this.refreshAdMaxDelay>0){var e=Math.max(this.refreshAdMaxDelay,this.refreshAdMinDelay);e>0&&this.schedule(this.tryNextAd,e,cc.macro.REPEAT_FOREVER)}if(0==this.bannerAdIDs.length||!this.bannerAdIDs[0])throw new Error("Please set banner ad id!")}},{key:"tryNextAd",value:function(){this._currentAdHasShown&&this.nextAd()}},{key:"nextAd",value:function(){if(0==this.bannerAdIDs.length&&(this._useWXBannerAd=!1),this._useWXBannerAd&&h.default.instance.game_config){var e=h.default.instance.game_config.myBAdRate;!isNaN(e)&&Math.random()<e&&(this._useWXBannerAd=!1)}if(!(this._useWXBannerAd&&(new Date).getTime()-this._lastRefreshAdTime<1e3*this.refreshAdMinDelay)){if(this._wxBannerAd&&(this._wxBannerAd.removeEventListener(c.default.BANNER_AD_HIDE,this.adHideHandler,this),this._wxBannerAd.removeEventListener(c.default.BANNER_AD_SHOW,this.adShowHandler,this),this._wxBannerAd.removeEventListener(c.default.BANNER_AD_RESIZE,this.adResizeHandler,this),this._wxBannerAd.removeEventListener(c.default.BANNER_AD_NEXT,this.adNextHandler,this),this._wxBannerAd.removeEventListener(c.default.BANNER_AD_ERROR,this.adErrorHandler,this),this._wxBannerAd.destory(),this._wxBannerAd=null),this._lastRefreshAdTime=(new Date).getTime(),this._currentAdHasShown=!1,console.log("\u3010Next Ad\u3011",this._currentAdID),this._useWXBannerAd){if(this.bannerAdIDs.length>1){var t=void 0;if(this.refreshRandom&&this.bannerAdIDs.length>1){var n=this.bannerAdIDs.concat(),o=n.indexOf(this._currentAdID);o>=0&&n.splice(o,1),t=n[Math.floor(Math.random()*n.length)]}else{var a=this.bannerAdIDs.indexOf(this._currentAdID)+1;a%=this.bannerAdIDs.length,t=this.bannerAdIDs[a]}if(t==this._currentAdID)return;this._currentAdID=t,s.default.currentAd&&s.default.currentAd instanceof s.default?this._wxBannerAd=s.default.currentAd:this._wxBannerAd=new s.default(this._currentAdID,this.adLocation,0,0,this.maxHeight,this.maxWidth),this._wxBannerAdIsWX=!0}}else{if(this.deerAdAsDefault)return;this._wxBannerAd=new f.default(this._currentAdID,this.adLocation,0,0,this.maxHeight,this.maxWidth),this._wxBannerAdIsWX=!1,this._useWXBannerAd=!0}this._wxBannerAd.addEventListener(c.default.BANNER_AD_HIDE,this.adHideHandler,this),this._wxBannerAd.addEventListener(c.default.BANNER_AD_SHOW,this.adShowHandler,this),this._wxBannerAd.addEventListener(c.default.BANNER_AD_RESIZE,this.adResizeHandler,this),this._wxBannerAd.addEventListener(c.default.BANNER_AD_NEXT,this.adNextHandler,this),this._wxBannerAd.addEventListener(c.default.BANNER_AD_ERROR,this.adErrorHandler,this),this._currentAdIsShowing&&this._wxBannerAd.show()}}},{key:"update",value:function(e){this.hideWhenHasPopUp&&(cc.director.getTotalFrames()%20==0&&(this.hideWhenHasPopUp&&l.default.popUpManager.popUpCount>0?this._wxBannerAd.hide():this._wxBannerAd.show()))}},{key:"adShowHandler",value:function(e){this.node.isValid&&e.target==this._wxBannerAd&&(this._currentAdHasShown=!0,this._currentAdIsShowing=!0,this.relayout())}},{key:"adHideHandler",value:function(e){this.node.isValid&&e.target==this._wxBannerAd&&(this._currentAdIsShowing=!1,this.relayout())}},{key:"adResizeHandler",value:function(e){this.node.isValid&&e.target==this._wxBannerAd&&(this.relayout(),this._currentAdIsShowing?this._currentAdHasShown=!0:this._wxBannerAd.hide(),this.node.dispatchEvent(new cc.Event(c.default.BANNER_AD_RESIZE,!1)))}},{key:"relayout",value:function(){if(this._wxBannerAd&&this._wxBannerAd.isShowing){var e=this._wxBannerAd.adRect;if(e=u.default.fromScreenRect(e))return this.node.opacity=255,this.node.x=e.x,this.node.y=e.y,this.node.scaleX=e.width/this.node.width,this.node.scaleY=e.height/this.node.height,void(this._defaultAd&&(this._defaultAd.destory(),this._defaultAd=null))}this.node.opacity=0,this.node.scale=0}},{key:"adNextHandler",value:function(e){this.node.isValid&&this.nextAd()}},{key:"adErrorHandler",value:function(e){this.node.isValid&&this._wxBannerAdIsWX&&(this._useWXBannerAd=!1,this.nextAd())}},{key:"onDestroy",value:function(){this._wxBannerAd&&(this._wxBannerAd.removeEventListener(c.default.BANNER_AD_HIDE,this.adHideHandler,this),this._wxBannerAd.removeEventListener(c.default.BANNER_AD_SHOW,this.adShowHandler,this),this._wxBannerAd.removeEventListener(c.default.BANNER_AD_RESIZE,this.adResizeHandler,this),this._wxBannerAd.removeEventListener(c.default.BANNER_AD_NEXT,this.adNextHandler,this),this._wxBannerAd.removeEventListener(c.default.BANNER_AD_ERROR,this.adErrorHandler,this),!this.autoRelease&&this._wxBannerAdIsWX||0!=u.default.iphoneBottomBarHeight?this._wxBannerAd.hide():this._wxBannerAd.destory(),this._wxBannerAd=null),this._defaultAd&&(this._defaultAd.destory(),this._defaultAd=null)}},{key:"currentAdID",get:function(){return this._currentAdID}}]),t}();i([y({type:[cc.String],displayName:"\u5e7f\u544a\u5217\u8868"})],g.prototype,"bannerAdIDs",void 0),i([y({displayName:"\u4f4d\u7f6e",type:cc.Enum(d.GameCoreLocation),tooltip:"\u4ec5\u652f\u6301TOP_CENTER\u548cBOTTOM_CENTER"})],g.prototype,"adLocation",void 0),i([y({displayName:"\u6700\u5927\u9ad8\u5ea6",tooltip:"\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u53c2\u6570\uff0c\u5219\u4f1a\u5ffd\u7565Y\u8f74\u504f\u79fb\u7684\u53c2\u6570\u8bbe\u5b9a"})],g.prototype,"maxHeight",void 0),i([y({displayName:"\u9ed8\u8ba4\u9690\u85cf"})],g.prototype,"hideByDefault",void 0),i([y({displayName:"\u6709\u5f39\u7a97\u81ea\u52a8\u9690\u85cf"})],g.prototype,"hideWhenHasPopUp",void 0),i([y({displayName:"\u81ea\u52a8\u5237\u65b0\u95f4\u9694(s)",tooltip:"\u8bbe\u7f6e\u4e86\u591a\u4e2a\u5e7f\u544a\u65f6\u751f\u6548\u3002\u6700\u5c0f\u95f4\u969420\u79d2\u3002"})],g.prototype,"refreshAdMaxDelay",void 0),i([y({displayName:"\u662f\u5426\u968f\u673a\u6311\u9009\u5e7f\u544aid",tooltip:"\u8bbe\u7f6e\u4e86\u591a\u4e2a\u5e7f\u544a\u65f6\u751f\u6548\u3002"})],g.prototype,"refreshRandom",void 0),i([y({displayName:"\u968f\u8282\u70b9\u91ca\u653e",tooltip:"\u53ea\u5bf9\u5fae\u4fe1\u5e7f\u544a\u6709\u6548"})],g.prototype,"autoRelease",void 0),i([y({displayName:"\u9ed8\u8ba4\u663e\u793a\u81ea\u6709\u5e7f\u544a"})],g.prototype,"deerAdAsDefault",void 0),g=i([_],g),n.default=g,cc._RF.pop()},{"../GameCoreLocation":"GameCoreLocation","../deer/DeerSDK":"DeerSDK","../managers/GameManager":"GameManager","../managers/Utils":"Utils","./DeerBannerAd":"DeerBannerAd","./WXBannerAd":"WXBannerAd","./WXEventNames":"WXEventNames"}],Context:[function(e,t,n){"use strict";cc._RF.push(t,"1efd3LL0ldFDLRax8Cep4WI","Context");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../GameManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._eventMap={}}return o(e,[{key:"mapEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;void 0==this._eventMap[e]&&(this._eventMap[e]=[],r.default.eventManager.addEventListener(e,this.eventsHandler,this,n));var o=this._eventMap[e];-1==o.indexOf(t)&&o.push(t)}},{key:"unmapEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._eventMap[e];if(void 0!=n)if(t){var o=n.indexOf(t);o>=0&&(n.splice(o,1),0==n.length&&(delete this._eventMap[e],r.default.eventManager.removeEventListener(e,this.eventsHandler,this)))}else delete this._eventMap[e],r.default.eventManager.removeEventListener(e,this.eventsHandler,this)}},{key:"unmapAllEvent",value:function(){for(var e in this._eventMap)this.unmapEvent(e)}},{key:"eventsHandler",value:function(e){var t=e.type,n=(e.data,this._eventMap[t]);if(void 0!=n)for(var o=n.length,a=function(t){var o=new n[t];o.event=e,o.prefabURL?o.loadPrefab(function(){o.execute()}):o.execute()},i=0;i<o;i++)a(i)}}]),e}());l=i([c],l),n.default=l,cc._RF.pop()},{"../GameManager":"GameManager"}],DataManager:[function(e,t,n){"use strict";cc._RF.push(t,"e1f6867dmJPN5cv7QO6KTfm","DataManager");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../GameCoreEventNames"),c=e("./GameManager"),l=cc._decorator,u=l.ccclass,d=(l.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._data={},this._localData={},this._syncToServerKeys=[],this._hasChanged=!1,this._changedKeys=[];var t=new Date;this._todayValue=""+t.getFullYear(),this._todayValue+="-";var n=t.getMonth()+1;this._todayValue+=n<10?"0"+n:n,this._todayValue+="-",n=t.getDate(),this._todayValue+=n<10?"0"+n:n,this.unserialize(),setInterval(this.doSerialize.bind(this),5e3),setTimeout(this.initForWXModule.bind(this),2e3)}return o(e,[{key:"initForWXModule",value:function(){if("undefined"!=typeof wx){var e=this;wx.onHide(function(){console.log("\u3010DataManager\u3011onHide"),e.doSerialize()}),console.log("##################### wx.onClose"),console.log(wx.onClose),wx.onClose&&wx.onClose(function(){console.log("\u3010DataManager\u3011onClose"),e.doSerialize()})}else setTimeout(this.initForWXModule.bind(this),2e3)}},{key:"hasData",value:function(e){return void 0!==this._data[e]}},{key:"getDataNeedSyncToServer",value:function(){var e=this;if(0==this._syncToServerKeys.length)return null;var t={};return this._syncToServerKeys.forEach(function(n){var o=e._localData[n];void 0==o.today&&(t[n]=o.v)}),JSON.stringify(t)}},{key:"setData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("object"==(void 0===t?"undefined":a(t))||this._data[e]!==t){if(this._data[e]=t,!0===n){var r={v:t};!0===o&&(r.today=this._todayValue),this._localData[e]=r,-1==this._changedKeys.indexOf(e)&&(this._hasChanged=!0,this._changedKeys.push(e))}this._lastChangedKey=e,c.default.eventManager.dispatchEventWith(s.default.DATA_CHANGE,e)}!0===i&&-1==this._syncToServerKeys.indexOf(e)&&this._syncToServerKeys.push(e)}},{key:"getData",value:function(e){return this._data[e]}},{key:"removeData",value:function(e){delete this._data[e],delete this._localData[e];var t=this._changedKeys.indexOf(e);t>=0&&this._changedKeys.splice(t,1),this._hasChanged=!0,(t=this._syncToServerKeys.indexOf(e))>=0&&this._syncToServerKeys.splice(t,1)}},{key:"resetData",value:function(){for(var e in this._data={},this._changedKeys=[],this._localData)this._changedKeys.push(""+e);this._localData={},this._lastChangedKey=null,this._hasChanged=!0}},{key:"doSerialize",value:function(){var e=this;if(!1!==this._hasChanged){this._hasChanged=!1,console.log("\u3010DataManager\u3011doSerialize",this._changedKeys);var t=[];for(var n in this._localData)t.push(""+n);cc.sys.localStorage.setItem("__"+i.L_KEY+"__keys",JSON.stringify(t));var o=!1;this._changedKeys.forEach(function(t){!o&&e._syncToServerKeys.indexOf(t)>=0&&(o=!0),console.log("[\u4fdd\u5b58]"+t,e._localData[t]);try{cc.sys.localStorage.setItem(i.L_KEY+"__"+t,JSON.stringify(e._localData[t]))}catch(e){console.log("\u4fdd\u5b58\u6570\u636e\u5931\u8d25, key="+t)}}),this._changedKeys=[],o&&c.default.eventManager.dispatchEventWith(s.default.DATA_REMOTE_CHANGE)}}},{key:"unserialize",value:function(){try{for(var e=cc.sys.localStorage.getItem("__"+i.L_KEY+"__keys"),t=JSON.parse(e),n=0;n<t.length;n++){var o=""+t[n],a=cc.sys.localStorage.getItem(i.L_KEY+"__"+o);this._localData[o]=JSON.parse(a)}for(var r in this._localData){var s=this._localData[r],c=s.v,l=s.today;l&&this._todayValue!=l||(this._data[r]=c)}}catch(e){this._localData={}}}},{key:"lastChangedKey",get:function(){return this._lastChangedKey}}]),e}());d.L_KEY="$__dml",d=i=r([u],d),n.default=d,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","./GameManager":"GameManager"}],DeerBannerAd:[function(e,t,n){"use strict";cc._RF.push(t,"e1508bHcrRFAIVDEjQQoxU+","DeerBannerAd");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./WXEventNames"),c=e("../managers/Utils"),l=e("../GameCoreLocation"),u=e("./WXBannerAdBase"),d=e("../deer/DeerSDK"),f=e("../deer/DeerSDKEventNames"),h=cc._decorator,p=h.ccclass,_=(h.property,i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),o(t,[{key:"loadAdData",value:function(){d.default.instance.isReady?this.deerSDKReadyHandler(null):d.default.instance.addEventListener(f.default.READY,this.deerSDKReadyHandler,this)}},{key:"deerSDKReadyHandler",value:function(e){d.default.instance.removeEventListener(f.default.READY,this.deerSDKReadyHandler,this),d.default.instance.ad_getAdData(d.DeerAdType.BANNER,this.loadAdDataHandler.bind(this),this.loadAdDataErrorHandler.bind(this))}},{key:"loadAdDataHandler",value:function(e){if(e&&e.length>0&&(i._bannerAds||(i._bannerAds=e),i._bannerAds.length>0)){var t=i._bannerAds.indexOf(i._currentBannerAd);++t>=i._bannerAds.length&&(t=0),i._currentBannerAd=i._bannerAds[t],this._adData=i._currentBannerAd,this.showAdData()}}},{key:"loadAdDataErrorHandler",value:function(){this.dispatchEventWith(s.default.BANNER_AD_ERROR),this.destory()}},{key:"createAd",value:function(){if(!this._destoried&&!this._bannerAd){var e=new cc.Node;e.on(cc.Node.EventType.TOUCH_END,this.adTapHandler,this);e.addComponent(cc.Sprite);this._bannerAd=e,cc.director.getScene().addChild(e),this.loadAdData()}}},{key:"adTapHandler",value:function(e){this._adData&&this._adData.navigate()}},{key:"showAdData",value:function(){var e=this;this._adData&&this._bannerAd&&cc.loader.load({url:this._adData.bannerImg,type:"png"},function(t,n){if(n){if(!e._bannerAd)return;var o=e._bannerAd,a=o.getComponent(cc.Sprite);a.spriteFrame=new cc.SpriteFrame,a.spriteFrame=new cc.SpriteFrame(n),o.width=n.width,o.height=n.height,e.relayout()}e._adData&&e._adData.reportShown()})}},{key:"relayout",value:function(){if(console.log("----  Deer Banner\u5e7f\u544a ----"),console.log("-  relayout  -"),this._bannerAd){var e=this._bannerAd;if(0!=e.height&&0!=e.width){e.getComponent(cc.Sprite);var t=cc.winSize.width-2*this.borderWeight;this._maxWidth>0&&(t=this._maxWidth);var n=t/e.width;this._maxHeight>0&&(n=Math.min(this._maxHeight/e.height,t/e.width)),e.scale=n;var o=0,a=0;switch(this._location){case l.GameCoreLocation.BOTTOM_CENTER:o=cc.winSize.width/2,a=e.height*n/2;break;case l.GameCoreLocation.TOP_CENTER:o=cc.winSize.width/2,a=cc.winSize.height-e.height*n/2}o+=this._horizontalIndent,a+=this._vertialIndent,e.x=o,e.y=a,this._adRect=new cc.Rect(o-e.width*n/2-this.borderWeight,a-e.height*n/2-this.borderWeight,e.width*n+2*this.borderWeight,e.height*n+2*this.borderWeight),this._adRect=c.default.toScreenRect(this._adRect),this.dispatchEventWith(s.default.BANNER_AD_RESIZE)}}}},{key:"next",value:function(){console.log("----  Deer Banner\u5e7f\u544a ----"),console.log("-  next  -"),console.log("this._isShowing="+this._isShowing),this.dispatchEventWith(s.default.BANNER_AD_NEXT)}},{key:"show",value:function(){this._destoried||(console.log("----  Deer Banner\u5e7f\u544a ----"),console.log("-  show  -"),console.log("this._isShowing="+this._isShowing),this._bannerAd&&(this._bannerAd.active=!0),this._isShowing=!0,this.dispatchEventWith(s.default.BANNER_AD_SHOW))}},{key:"hide",value:function(){this._destoried||(console.log("----  Deer Banner\u5e7f\u544a ----"),console.log("-  hide  -"),console.log("this._isShowing="+this._isShowing),this._bannerAd&&(this._bannerAd.active=!1),this._isShowing=!1,this.dispatchEventWith(s.default.BANNER_AD_HIDE,this))}},{key:"destory",value:function(){this._destoried||(d.default.instance.removeEventListener(f.default.READY,this.deerSDKReadyHandler,this),console.log("----  Deer Banner\u5e7f\u544a ----"),console.log("-  destroy  -"),function e(t,n,o){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in a)return a.value;var r=a.get;return void 0!==r?r.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destory",this).call(this),this._bannerAd&&(this._bannerAd.destroy(),this._bannerAd=null))}}]),t}());_=i=r([p],_),n.default=_,cc._RF.pop()},{"../GameCoreLocation":"GameCoreLocation","../deer/DeerSDK":"DeerSDK","../deer/DeerSDKEventNames":"DeerSDKEventNames","../managers/Utils":"Utils","./WXBannerAdBase":"WXBannerAdBase","./WXEventNames":"WXEventNames"}],DeerLoading:[function(e,t,n){"use strict";cc._RF.push(t,"f70eeD9/8BBepTim34bUdaD","DeerLoading");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../managers/GameManager"),c=cc._decorator,l=c.ccclass,u=(c.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,[{key:"addPop",value:function(e){var t=new cc.Vec2(0,0),n=cc.director.getScene().children[0];n.children.forEach(function(e){e.zIndex=0}),this.container=new cc.Node,n.addChild(this.container);var o=null;(o=this.createPopUpBg()).y=t.y,o.x=t.x,this.container.addChild(o);var a=new cc.Node,i=a.addComponent(cc.Sprite);s.default.resManager.getServerImage("https://deer-cdn.youkongwan.com/common/loadingicon.png",function(e){i&&(i.spriteFrame=new cc.SpriteFrame(e))});var r=cc.repeatForever(cc.rotateBy(3,360,360));a.runAction(r),this.container.addChild(a);var c=new cc.Node,l=c.addComponent(cc.Label);l.string=e,l.fontSize=30,this.container.addChild(c),c.y=-100}},{key:"removePop",value:function(){this.container&&this.container.isValid&&this.container.destroy()}},{key:"createPopUpBg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:160,t=cc.winSize,n=new cc.Node;n.width=t.width,n.height=t.height;var o=n.addComponent(cc.Graphics);o.fillColor=new cc.Color(0,0,0,e),o.lineWidth=0,cc.ENGINE_VERSION>="2.0.0"?o.fillRect(-t.width/2,-t.height/2,t.width,t.height):o.fillRect(0,0,t.width,t.height),o.stroke();var a=new cc.Node;return a.width=t.width,a.height=t.height,a.addChild(n),a.addComponent(cc.BlockInputEvents),a}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new i),this.instance}}]),e}());u=i=r([l],u),n.default=u,cc._RF.pop()},{"../managers/GameManager":"GameManager"}],DeerRequest:[function(e,t,n){"use strict";cc._RF.push(t,"5c1b9ZJndRDpryupDNOdKH2","DeerRequest");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("./DeerSDK"),i=e("../libs/md5"),r=e("../base/GameValues"),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"GET";(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.tryTimes=1,this._successHandlers=[],this._failHandlers=[],this._hasTriedTimes=0,null!=o&&this._successHandlers.push(o),null!=i&&this._failHandlers.push(i),n&&(n.__v=a.DEER_SDK_VERSION,n.__gv=r.default.gameVersion),this._apiURL=t,this._requestData=n,this._dataFactory=s,this._requestMethod=c||"GET",this.sendRequest()}return o(e,[{key:"onSuccess",value:function(e){null!=e&&(!0!==this._isComplete?-1==this._successHandlers.indexOf(e)&&this._successHandlers.push(e):!0===this._isSuccess&&e(this._data))}},{key:"requestSuccessHandler",value:function(e){null!=this._dataFactory&&(e=this._dataFactory(e)),this._isComplete=!0,this._isSuccess=!0,this._data=e;for(var t=0;t<this._successHandlers.length;t++){(0,this._successHandlers[t])(e)}this._successHandlers=[]}},{key:"onFail",value:function(e){null!=e&&(!0!==this._isComplete?-1==this._failHandlers.indexOf(e)&&this._failHandlers.push(e):!1===this._isSuccess&&e(this._data))}},{key:"requestFailHandler",value:function(e){if(this._hasTriedTimes<this.tryTimes)return this._hasTriedTimes++,void this.sendRequest();this._isComplete=!0,this._isSuccess=!1,this._data=e;for(var t=0;t<this._failHandlers.length;t++){(0,this._failHandlers[t])(e)}this._failHandlers=[]}},{key:"sendRequest",value:function(){var e=void 0;if(this._apiURL.match(/^https?:/i)?e=this._apiURL:(e=r.default.isDebug?a.DEER_API_URL_TEST:a.DEER_API_URL,"/"!=this._apiURL.charAt(0)&&(this._apiURL="/"+this._apiURL),"/"!=(e+=this._apiURL).charAt(e.length-1)&&(e+="/")),console.log("---------------------------------------"),console.log("\u3010sendRequest\u3011"),console.log("url is "+e),console.log("data is",this._requestData),"undefined"!=typeof wx){void 0==this._requestData.ts&&(this._requestData.ts=Math.floor(a.default.instance.serverTime.getTime()/1e3)),this.md5Data(this._requestData);var t=this;wx.request({url:e,data:t._requestData,header:{"Content-Type":"application/x-www-form-urlencoded"},method:this._requestMethod.toUpperCase(),success:function(e){console.log("\u3010sendRequest\u3011success",t._apiURL,e);var n=e.data;if(n){try{n.data.status=n.status}catch(e){}t.requestSuccessHandler(n.data)}else t.requestSuccessHandler(null)},fail:function(e){console.log("\u3010sendRequest\u3011fail",t._apiURL,e),t.requestFailHandler(e)},complete:function(){console.log("\u3010sendRequest\u3011complete",t._apiURL)}})}}},{key:"destory",value:function(){this._failHandlers=[],this._successHandlers=[],this._dataFactory=null}},{key:"md5Data",value:function(e){if(e){var t=Object.keys(e);t.sort();for(var n="",o=0;o<t.length;o++){var a=t[o];0!=a.indexOf("__")&&(""!=n&&(n+="&"),n+=a+"="+e[a])}n+="&"+this.md5key,e.__md5=i.md5(n)}}},{key:"isComplete",get:function(){return this._isComplete}},{key:"data",get:function(){return this._data}}]),e}();n.default=s,cc._RF.pop()},{"../base/GameValues":"GameValues","../libs/md5":"md5","./DeerSDK":"DeerSDK"}],DeerSDKEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"b52beBL/K9P8LPD8fNd0K0T","DeerSDKEventNames"),Object.defineProperty(n,"__esModule",{value:!0});var o=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)};o.READY="ready",o.CHANGE="change",o.HANDSHAKE_COMPLETE="handshakeComplete",o.CONFIG_READY="configReady",o.NEW_MESSAGES="newMessages",o.FRIENDS_UPDATE="friendsUpdate",o.LUCKY_MONEY_UPDATE="luckyMoneyUpdate",n.default=o,cc._RF.pop()},{}],DeerSDK:[function(e,t,n){"use strict";cc._RF.push(t,"ed579EYQ0tOir6j2XZGEavs","DeerSDK");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s,c,l,u=e("./DeerRequest"),d=e("../managers/event/EventDispacher"),f=e("./DeerSDKEventNames"),h=e("../platforms/QQCM_gameInfo"),p=e("../base/GameValues");n.DEER_SDK_VERSION="1.5",n.DEER_API_URL="https://deer-cms.youkongwan.com",n.DEER_API_URL_TEST="https://deer-cms-test.youkongwan.com",n.DEER_SAVE_GAME_DATA_DELAY=30,function(e){e[e.ALL=0]="ALL",e[e.IOS=1]="IOS",e[e.ANDROID=2]="ANDROID"}(s=n.DeerDeviceType||(n.DeerDeviceType={})),function(e){e[e.RECOMMEND=1]="RECOMMEND",e[e.HOT=2]="HOT",e[e.GAME_OVER=3]="GAME_OVER",e[e.TASK=4]="TASK",e[e.BOARD=5]="BOARD",e[e.RICH=9]="RICH",e[e.BANNER=10]="BANNER",e[e.ANIMATION=11]="ANIMATION",e[e.SPLASH=12]="SPLASH",e[e.POP=13]="POP"}(n.DeerAdType||(n.DeerAdType={})),function(e){e[e.REBIRTH=1]="REBIRTH",e[e.DIAMDOND=2]="DIAMDOND",e[e.SCORE=3]="SCORE"}(c=n.DeerItemType||(n.DeerItemType={})),function(e){e[e.GAME_START=1001]="GAME_START",e[e.GAME_SHARE=1002]="GAME_SHARE",e[e.SHOW_REWARD_AD_SUC=1003]="SHOW_REWARD_AD_SUC",e[e.AD_REQUEST=2001]="AD_REQUEST",e[e.AD_SHOW=2002]="AD_SHOW",e[e.AD_CLICK=2003]="AD_CLICK",e[e.AD_NAVIGATE=2004]="AD_NAVIGATE",e[e.SHARE_IMG_SHOW=3001]="SHARE_IMG_SHOW",e[e.SHARE_IMG_CLICK=3002]="SHARE_IMG_CLICK"}(l=n.DeerTrackAction||(n.DeerTrackAction={})),function(e){e[e.MAIL=1]="MAIL",e[e.ADD_FRIEND_REQUEST=2]="ADD_FRIEND_REQUEST",e[e.U2U=3]="U2U",e[e.WORLD_CHAT_MSG=10]="WORLD_CHAT_MSG",e[e.SYSTEM_MSG=11]="SYSTEM_MSG"}(n.DeerMessageType||(n.DeerMessageType={}));var _=function(){function e(){r(this,e),this.id=0,this.type=0,this.createTime=null,this.readed=!1}return o(e,[{key:"setReaded",value:function(){this.readed||b.instance.game_messageReaded(this.id)}}]),e}();n.DeerMessageVO=_;var y,g=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(r(this,e),this.index=-1,this.amount=0,this._id=0,this._nickname="",this._isVIP=!1,this._achieveValue=0,n){if(n.user_id&&(this._id=parseInt(n.user_id),delete n.user_id),n.avatar_url&&(this._avatar=n.avatar_url,delete n.avatar_url),n.address&&(this._address=n.address,delete n.address),n.player_name&&(this._nickname=n.player_name,delete n.player_name),n.openId&&(this._openID=n.openId,delete n.openId),n.achieve_v&&(this._achieveValue=n.achieve_v,delete n.achieve_v),n.user_attr){var o=parseInt(""+n.user_attr);o>0&&(this._isVIP=1==(1&o)),delete n.user_attr}n.last_time&&n.last_time>0&&(this._lastLoginTime=new Date,this._lastLoginTime.setTime(1e3*n.last_time),delete n.last_time),Object.keys(n).forEach(function(e){try{t[e]=n[e]}catch(e){}})}}return o(e,[{key:"id",get:function(){return this._id}},{key:"openID",get:function(){return this._openID}},{key:"address",get:function(){return this._address}},{key:"nickname",get:function(){return this._nickname}},{key:"avatar",get:function(){return this._avatar}},{key:"isVIP",get:function(){return this._isVIP}},{key:"achieveValue",get:function(){return this._achieveValue}},{key:"lastLoginTime",get:function(){return this._lastLoginTime}}]),e}();n.DeerUserVO=g,function(e){e[e.UNKNOW=0]="UNKNOW",e[e.MANUAL=1]="MANUAL",e[e.SHARE=2]="SHARE"}(y=n.DeerFriendType||(n.DeerFriendType={}));var v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,t);var n=null;e&&e.type&&(n=parseInt(e.type),delete e.type);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n&&(o._type=n),o}return i(t,g),o(t,[{key:"type",get:function(){return this._type}}]),t}();n.DeerFriendVO=v;var m=function e(){r(this,e),this.id=0,this.amount=0};n.DeerLuckyMoney=m;var b=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._userVO=new g,n._isOnline=!0,n._passedSeconds=0,n._isReady=!1,n._isHandshakeCompleted=!1,n._isNewUser=!1,n._isDisabled=!1,n._fromAppID=null,n._inviterUserID=null,n._inviterNickname=null,n._inviterAvatar=null,n._inviterAdID=null,n._inviterAdEnterID=null,n._inviterChannel=null,n._inviterTime=null,n._inviterShareImgID=null,n._isFromMyFavorite=!1,n._remoteAllowed=!0,n._game_id=0,n._game_userID=null,n._game_config=null,n._game_sdts_time=0,n._game_sdts_data=null,n._userDataID=null,n._game_messageLastRefreshTime=0,n._game_messageRefreshIndex=1,n._game_messageIDs=[],n._game_messageAll=[],n._luckyMoneyData={},n._luckyMoney_myBalance=0,n._luckyMoney_minWithdrawalAmount=0,n._luckyMoney_withdrawNeedFollowCallbacks=[],n._item_map={},n._adDataMap={},n._adRequestMap={},n.trackProxyFun=null,n._trackDataStack=[];var o=p.default.getLocalData("deer_chid"),i=p.default.getLocalData("deer_adid"),s=p.default.getLocalData("deer_enid");if(o&&(n._inviterChannel=o),i&&(n._inviterAdID=i),s&&(n._inviterAdEnterID=s),u.default.prototype.md5key="sign_deer_sdk","undefined"!=typeof wx){wx.onHide(function(){n._game_sdts_data&&n.game_saveDataToServiceNow(n._game_sdts_data),n.sendTracks()}),wx.onShow(function(e){console.log("\u3010DeerSDK onShow\u3011",e),e&&n.analyseWXData(e)});var c=wx.getLaunchOptionsSync();n.analyseWXData(c)}return n._wxProxy=new w,n}return i(t,d.default),o(t,[{key:"analyseWXData",value:function(e){console.log("\u3010DeerSDK\u3011analyseWXData",e);try{this._isFromMyFavorite=1104==e.scene,e.referrerInfo&&e.referrerInfo.appId&&(this._fromAppID=e.referrerInfo.appId)}catch(e){}try{var t=e.query;if(t.deer_uid&&(this._inviterUserID=t.deer_uid),t.deer_nn&&(this._inviterNickname=decodeURIComponent(t.deer_nn)),t.deer_av&&(this._inviterAvatar=decodeURIComponent(t.deer_av)),t.deer_chid&&(this._inviterChannel=t.deer_chid),t.deer_adid&&(this._inviterAdID=t.deer_adid),t.deer_enid&&(this._inviterAdEnterID=t.deer_enid),t.deer_shrid&&(this._inviterShareImgID=t.deer_shrid),t.deer_chid&&p.default.saveLocalData("deer_chid",t.deer_chid),t.deer_adid&&p.default.saveLocalData("deer_adid",t.deer_adid),t.time){var n=parseInt(t.time);!isNaN(n)&&n>0&&(this._inviterTime=new Date,this._inviterTime.setTime(n))}}catch(e){}}},{key:"handshakeCompleteHandler",value:function(e){if(this.removeEventListener(f.default.HANDSHAKE_COMPLETE,this.handshakeCompleteHandler,this),console.log("******************* \u3010DeerSDK\u3011 *******************"),console.log("*******************  "+(this._isReady?"\u63e1\u624b\u6210\u529f":"\u63e1\u624b\u5931\u8d25")+"  *******************"),console.log("**************************************************"),this._isReady){var t=0;this._inviterUserID&&(t=1),this.track(l.GAME_START,{v:t}),this._inviterShareImgID&&this.track(l.SHARE_IMG_CLICK,{share_id:this._inviterShareImgID}),this.game_getConfigDataFromService(),this._inviterUserID&&this.user_friendAdd(parseInt(this._inviterUserID),y.SHARE)}}},{key:"addServerTime",value:function(){this._serverTimeS++,this._passedSeconds++,this._passedSeconds>0&&this._passedSeconds%5==0&&this.sendTracks(),this._game_sdts_data&&this._serverTimeS-this._game_sdts_time>n.DEER_SAVE_GAME_DATA_DELAY&&this.game_saveDataToServiceNow(this._game_sdts_data),this.game_messageRefreshInterval(),!this._user_friendsAll&&t.instance.hasEventListener(f.default.NEW_MESSAGES)&&this.user_friendsRefresh()}},{key:"handshakeRetry",value:function(){this._isHandshakeCompleted&&!this._isReady&&(this._isHandshakeCompleted=!1,this.addEventListener(f.default.HANDSHAKE_COMPLETE,this.handshakeCompleteHandler,this),t.instance.wxLogin())}},{key:"wxLogin",value:function(){if("undefined"==typeof wx)return this._isHandshakeCompleted=!0,void this.dispatchEventWith(f.default.HANDSHAKE_COMPLETE);wx.login({success:this.wxLoginSucCallback.bind(this),fail:this.wxLoginFailCallback.bind(this)})}},{key:"wxLoginSucCallback",value:function(e){var t=this;if(console.log("\u3010DeerSDK wx.login\u6210\u529f\u3011"),console.log(JSON.stringify(e)),!e||!e.code)return this._isHandshakeCompleted=!0,void this.dispatchEventWith(f.default.HANDSHAKE_COMPLETE);var n=e.code;if(3==p.default.currentPlatform)wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(e){t._userInfo=e.userInfo;var o={app_id:t._appID,game_id:h.default.gameId,open_key:n,open_id:h.default.openId,avatar:t._userInfo.avatarUrl,nickName:t._userInfo.nickName,gender:t._userInfo.gender};t._fromAppID&&(o.from_app=t._fromAppID),t._inviterAdID&&(o.iv_adid=t._inviterAdID),t._inviterAdEnterID&&(o.iv_enid=t._inviterAdEnterID),t._inviterChannel&&(o.iv_chid=t._inviterChannel),new u.default("/api/user_info_qq",o,t.userInfoSucCallback.bind(t),t.userInfoFailCallback.bind(t))},fail:function(e){console.log("\u3010DeerSDK\u3011 wx.getUserInfo \u5931\u8d25\uff0cQQ\u5398\u7c73\u79c0")}});else if(5==p.default.currentPlatform)wx.getUserInfo({success:function(e){console.log("getUserInfo, res=",e),t._userInfo=e.userInfo;var n=JSON.parse(JSON.stringify(t._userInfo));n.app_id=t._appID,new u.default("/api/user_info_oppo/",n,t.userInfoSucCallback.bind(t),t.userInfoFailCallback.bind(t))},fail:function(e){console.log("\u3010DeerSDK\u3011 wx.getUserInfo \u5931\u8d25\uff0cOppo")}});else if(6==p.default.currentPlatform)wx.getUserInfo({success:function(e){console.log("getUserInfo, res=",e),t._userInfo=e.userInfo;var n=JSON.parse(JSON.stringify(t._userInfo));n.app_id=t._appID,new u.default("/api/user_info_ios/",n,t.userInfoSucCallback.bind(t),t.userInfoFailCallback.bind(t))},fail:function(e){console.log("\u3010DeerSDK\u3011 wx.getUserInfo \u5931\u8d25\uff0cOppo")}});else{var o={app_id:this._appID,code:n};this._fromAppID&&(o.from_app=this._fromAppID),this._inviterAdID&&(o.iv_adid=this._inviterAdID),this._inviterAdEnterID&&(o.iv_enid=this._inviterAdEnterID),this._inviterChannel&&(o.iv_chid=this._inviterChannel),new u.default("/api/user_info",o,this.userInfoSucCallback.bind(this),this.userInfoFailCallback.bind(this)),this.getWXUserInfo()}}},{key:"wxLoginFailCallback",value:function(e){console.log("\u3010DeerSDK wx.login\u5931\u8d25\u3011"),this._isHandshakeCompleted=!0,this.dispatchEventWith(f.default.HANDSHAKE_COMPLETE)}},{key:"getWXUserInfo",value:function(){var e=this;1==p.default.currentPlatform?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?e.doWXUserInfoIsReady():setTimeout(e.getWXUserInfo.bind(e),1e4)}}):this.doWXUserInfoIsReady()}},{key:"doWXUserInfoIsReady",value:function(){var e=this;this._userInfo||(console.log("\u3010DeerSDK wx.getUserInfo \u6210\u529f\u3011"),wx.login({success:function(t){var n=t.code;wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(t){e._userInfo=t.userInfo;var o={app_id:e._appID,code:n,iv:t.iv,raw_data:t.rawData,encrypted_data:t.encryptedData,signature:t.signature};e._inviterAdID&&(o.in_adid=e._inviterAdID),e._inviterAdEnterID&&(o.iv_enid=e._inviterAdEnterID),e._inviterChannel&&(o.in_chid=e._inviterChannel),new u.default("/api/user_info",o)}})}}))}},{key:"userInfoSucCallback",value:function(e){try{this.analyseLoginData(e),console.log("DeerSdk Ready ok!"),this._isReady=!0,this.dispatchEventWith(f.default.READY)}catch(e){console.log("\u3010DeerSDK\u63e1\u624b\u6210\u529f\uff0c\u6570\u636e\u89e3\u6790\u5931\u8d25\u3011")}this._isHandshakeCompleted=!0,this.dispatchEventWith(f.default.HANDSHAKE_COMPLETE)}},{key:"userInfoFailCallback",value:function(e){this._isHandshakeCompleted=!0,this.dispatchEventWith(f.default.HANDSHAKE_COMPLETE)}},{key:"analyseLoginData",value:function(e){if(this._game_id=parseInt(e.game_id),e.game_uid&&(this._game_userID=""+e.game_uid),this._userVO=new g(e.user_detail),void 0!=e.time?this._serverTimeS=Math.floor(e.time):this._serverTimeS=Math.floor((new Date).getTime()/1e3),setInterval(function(){t.instance.addServerTime()},1e3),this._session=e.session_key,!this._session)throw new Error("session is null");if(e.msg_id&&(this._userDataID=e.msg_id),this._isNewUser=!0===e.new_user,this._game_detail=e.game_detail,this._game_detail){this._isDisabled=!0===this._game_detail.disable,this._remoteAllowed=!0===this._game_detail.refe,delete this._game_detail.refe;var n=this._game_detail.game_version,o=p.default.gameVersion;try{n||(n="0"),o||(o="0");for(var a=n.split("."),i=o.split("."),r=Math.max(i.length,a.length);i.length<r;)i.push("0");for(;a.length<r;)a.push("0");for(var s=!0,c=0;c<r;c++){var l=parseInt(i[c]),u=parseInt(a[c]);if(l!=u){l>u&&(s=!1);break}}this._isOnline=s}catch(e){}}}},{key:"user_setVIP",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._isReady){if(this._userVO.isVIP!==e){this._userVO._isVIP=e;var o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,type:e?1:0};this._game_getConfigDataRequest=new u.default("/api/save_user_vip",o,this.user_setVIP_suc.bind(this),this.user_setVIP_suc_fail.bind(this)),this._game_getConfigDataRequest.onFail(n),this._game_getConfigDataRequest.onSuccess(t)}}else n&&n()}},{key:"user_setVIP_suc",value:function(e){}},{key:"user_setVIP_suc_fail",value:function(e){this._userVO._isVIP=!this._userVO.isVIP}},{key:"user_friendsRefresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this._user_refreshFriendsRequest){var n={user_id:this._userVO.id,session_key:this._session};this._user_refreshFriendsRequest=new u.default("/friend/friend_list",n,this.user_friendsRefresh_suc.bind(this),this.user_friendsRefresh_fail.bind(this),this.user_friendsRefresh_data.bind(this))}this._user_refreshFriendsRequest.onFail(t),this._user_refreshFriendsRequest.onSuccess(e)}},{key:"user_friendsRefresh_data",value:function(e){var t=[];try{e.forEach(function(e){var n=new v(e);n.id&&t.push(n)})}catch(e){}return t}},{key:"user_friendsRefresh_suc",value:function(e){this._user_refreshFriendsRequest=null,this._user_friendsAll=e,this._user_friendsAll||(this._user_friendsAll=[]),this.dispatchEventWith(f.default.FRIENDS_UPDATE)}},{key:"user_friendsRefresh_fail",value:function(e){this._user_refreshFriendsRequest=null}},{key:"user_friendAdd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a={user_id:this._userVO.id,friend_id:e,type:t,session_key:this._session},i=new u.default("/friend/add_friend",a,this.user_friendAdd_suc.bind(this),this.user_friendAdd_fail.bind(this));i.onFail(o),i.onSuccess(n)}},{key:"user_friendAdd_suc",value:function(e){try{var t=new v(e);t.id&&t.avatar&&t.nickname&&(this._user_friendsAll||(this._user_friendsAll=[]),this._user_friendsAll.push(t),this.dispatchEventWith(f.default.FRIENDS_UPDATE))}catch(e){}}},{key:"user_friendAdd_fail",value:function(e){}},{key:"user_friendRemove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={user_id:this._userVO.id,friend_id:e,session_key:this._session},a=new u.default("/friend/del_friend",o,this.user_friendRemove_suc.bind(this),this.user_friendRemove_fail.bind(this));a.onFail(n),a.onSuccess(t)}},{key:"user_friendRemove_suc",value:function(e){try{var t=new v(e);if(t.id&&t.avatar&&t.nickname&&this._user_friendsAll)for(var n=this._user_friendsAll.length,o=0;o<n;o++)if(this._user_friendsAll[o].id==t.id){this._user_friendsAll.splice(o,1),this.dispatchEventWith(f.default.FRIENDS_UPDATE);break}}catch(e){}}},{key:"user_friendRemove_fail",value:function(e){}},{key:"user_friendsCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={user_id:this._userVO.id,session_key:this._session},o=new u.default("/friend/friend_num",n,this.user_friendsCount_suc.bind(this),this.user_friendsCount_fail.bind(this));o.onFail(t),o.onSuccess(e)}},{key:"user_friendsCount_suc",value:function(e){}},{key:"user_friendsCount_fail",value:function(e){}},{key:"game_getAShareData",value:function(){if(!this._game_detail)return null;var e=this._game_detail.share_msgs;return e&&0!=e.length?e[Math.floor(e.length*Math.random())]:null}},{key:"game_getRecentGames",value:function(){}},{key:"game_getConfigDataFromService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isReady)if(this._game_config)e&&e(this._game_config);else{if(null==this._game_getConfigDataRequest){var n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};this._game_getConfigDataRequest=new u.default("/api/get_game_data",n,this.game_getConfigDataFromService_suc.bind(this),this.game_getConfigDataFromService_fail.bind(this))}this._game_getConfigDataRequest.onFail(t),this._game_getConfigDataRequest.onSuccess(e)}else t&&t()}},{key:"game_getConfigDataFromService_suc",value:function(e){var t=null==this._game_config;try{this._game_config=JSON.parse(e)}catch(e){console.log("\u89e3\u6790\u6e38\u620f\u914d\u7f6e\u6570\u636e\u5931\u8d25\uff01"),this._game_config={}}console.log("\u6e38\u620f\u914d\u7f6e\u6570\u636e\u4e3a",this._game_config),t&&this.dispatchEventWith(f.default.CONFIG_READY),this._game_getConfigDataRequest=null}},{key:"game_getConfigDataFromService_fail",value:function(e){this._game_getConfigDataRequest=null}},{key:"game_saveScoreToService",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._isReady?(e=Math.floor(e))<=this.game_score?console.log("\u63d0\u4ea4\u5206\u6570"+e+"\u5c0f\u4e8e\u6700\u9ad8\u5206"+this.game_score):this.item_saveAmountToService(c.SCORE,e,t,n):n&&n()}},{key:"game_getScoreFromService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._isReady?this.item_getAmountFromService(c.SCORE,e,t):t&&t()}},{key:"game_getGlobalRankingData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isReady){if(!this._game_getGlobalRankingDataRequest){var n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,type:c.SCORE};this._game_getGlobalRankingDataRequest=new u.default("/api/score_rank",n,this.game_getGlobalRankingData_suc.bind(this),this.game_getGlobalRankingData_fail.bind(this),this.game_getGlobalRankingData_data.bind(this))}this._game_getGlobalRankingDataRequest.onFail(t),this._game_getGlobalRankingDataRequest.onSuccess(e)}else t&&t()}},{key:"game_getGlobalRankingData_data",value:function(e){if(e){var t=void 0;e.my_score&&(t=e.my_score=new g(e.my_score));var n=e.score_rank;if(n)for(var o=0,a=n.length;o<a;o++){var i=new g(n[o]);n[o]=i,t&&(t.avatar&&t.avatar==i.avatar?(t.index=o+1,t=null):t.openID&&t.openID==i.openID&&(t.index=o+1,t=null))}}return e}},{key:"game_getGlobalRankingData_suc",value:function(e){this._game_getGlobalRankingDataRequest=null}},{key:"game_getGlobalRankingData_fail",value:function(e){this._game_getGlobalRankingDataRequest=null}},{key:"game_saveDataToService",value:function(e){this._game_sdts_data=e}},{key:"game_saveDataToServiceNow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._isReady||n&&n(),this._game_sdts_data=null,this._game_sdts_time=this._serverTimeS;var o={ud:e},a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,msg:JSON.stringify(o)};new u.default("/api/save_game_user_data",a,t,n,null,"POST")}},{key:"game_getDataFromService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isReady){var n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};new u.default("/api/get_game_user_data",n,function(t){try{var n=JSON.parse(t);e&&e(n.ud)}catch(t){e&&e({})}},t)}else t&&t()}},{key:"game_saveDataIDToService",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._userDataID!=e)if(this._isReady){var a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,msg_id:e},i=new u.default("/api/save_msg_id",a,function(n){t._game_userID=e},function(e){});i.onSuccess(n),i.onFail(o)}else o&&o();else n&&n()}},{key:"game_getRandomUsers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._isReady){if(!this._game_getRandomUsersRequest){var n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};this._game_getRandomUsersRequest=new u.default("/api/random_users",n,this.game_getRandomUsers_suc.bind(this),this.game_getRandomUsers_fail.bind(this),this.game_getRandomUsers_data.bind(this))}this._game_getRandomUsersRequest.onSuccess(e),this._game_getRandomUsersRequest.onFail(t)}else t&&t()}},{key:"game_getRandomUsers_data",value:function(e){try{for(var t=this._userVO.id,n=[],o=e.msg,a=0,i=o.length;a<i;a++)o[a].user_id!=t&&n.push(new g(o[a]));return n.length>0&&(this._lastRandomUsers=n.concat()),n}catch(e){console.log("analyse random user data error",e)}return this._lastRandomUsers&&this._lastRandomUsers.length>0?this._lastRandomUsers.concat():[]}},{key:"game_getRandomUsers_suc",value:function(e){this._game_getRandomUsersRequest=null}},{key:"game_getRandomUsers_fail",value:function(e){this._game_getRandomUsersRequest=null}},{key:"game_messageRefreshInterval",value:function(){t.instance.hasEventListener(f.default.NEW_MESSAGES)&&this._serverTimeS-this._game_messageLastRefreshTime>t.MESSAGE_MIN_DELAY_SECOND&&this.game_messageRefresh()}},{key:"game_messageRefresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._isReady){var n=0;this._game_messageRefreshIndex>1&&(n=Math.floor(this._game_messageLastRefreshTime-t.MESSAGE_MIN_DELAY_SECOND-10));var o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,index:this._game_messageRefreshIndex,msg_type:e,last_time:n};new u.default("/msg/roll_msg",o,this.game_messageRefresh_suc.bind(this),this.game_messageRefresh_fail.bind(this)),this._game_messageLastRefreshTime=this._serverTimeS}}},{key:"game_messageRefresh_suc",value:function(e){this._game_messageStack||(this._game_messageStack=[]);try{for(var t=e,n=t.length,o=0;o<n;o++){var a=t[o];if(a){var i=parseInt(""+a.id);if(!(i<=0||this._game_messageIDs.indexOf(i)>=0)){var r=new _;r.id=i,r.type=a.msg_type,r.readed=!0===a.has_readed,r.title=a.msg_title,r.content=a.msg_content,r.data=a.msg_data;try{var s=JSON.parse(r.data);r.data=s}catch(e){}if(a.from_user_detail){var c=new g(a.from_user_detail);c.id&&(r.fromUser=c)}r.createTime=new Date,r.createTime.setTime(1e3*a.create_time),this._game_messageIDs.push(i),this._game_messageAll.push(r),this._game_messageStack.push(r)}}}this._game_messageRefreshIndex++}catch(e){}this._game_messageStack.length>0&&this.hasEventListener(f.default.NEW_MESSAGES)&&(this.dispatchEventWith(f.default.NEW_MESSAGES,this._game_messageStack),this._game_messageStack=null)}},{key:"game_messageRefresh_fail",value:function(e){}},{key:"game_messageReaded",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._isReady&&!(e<=0)){var o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,msg_id:e};new u.default("/msg/readed_msg",o,t,n)}}},{key:"game_messageSendToUser",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(this._isReady&&!(e<=0)){var r={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,to_user_id:e,msg_title:t,msg_content:n};o&&(r.msg_data=JSON.stringify(o)),new u.default("/msg/user_to_user",r,a,i)}}},{key:"game_achievementSave",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._isReady&&e){var a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,achieve_id:e,achieve_v:t};new u.default("/achieve/save_achieve",a,n,o)}}},{key:"game_achievementObtainedUsers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(this._isReady&&e){var i={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,achieve_id:e,num:t,order:n};new u.default("/achieve/get_achieve",i,o,a,this.game_achievementObtainedUsers_data.bind(this))}}},{key:"game_achievementObtainedUsers_data",value:function(e){var t=[];try{for(var n=e,o=0;o<n.length;o++){var a=new g(n[o]);a&&a.id&&a.nickname&&t.push(a)}}catch(e){}return t}},{key:"luckyMoney_registerTypes",value:function(e){var t=this;if(e){if(this._luckyMoneyTypes)throw new Error("You'd registered the types of lucky toney!");this._luckyMoneyData={},this._luckyMoneyTypes=e.concat(),this.isReady?(this.luckyMoney_refreshMyBalance(),this.luckyMoney_refresh()):this.addEventListener(f.default.READY,function(e){t.luckyMoney_refreshMyBalance(),t.luckyMoney_refresh()},this,0,!0)}}},{key:"luckyMoney_refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._isReady&&(e||(e=this._luckyMoneyTypes),e&&0!=e.length)){var t={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,strategy_id:e.join(",")};new u.default("/packet/get_order",t,this.luckyMoney_refresh_suc.bind(this),this.luckyMoney_refresh_fail.bind(this),this.luckyMoney_refresh_data.bind(this))}}},{key:"luckyMoney_refresh_data",value:function(e){var t=this;try{e.forEach(function(e){var n=new m;n.id=e.user_order_id,n.amount=e.order_money,n.type=e.strategy_id;var o=t._luckyMoneyData[n.type];o||(o=t._luckyMoneyData[n.type]=[]),o.push(n)}),this.dispatchEventWith(f.default.LUCKY_MONEY_UPDATE)}catch(e){console.log("analyse lucky money data error",e)}return[]}},{key:"luckyMoney_refresh_suc",value:function(e){}},{key:"luckyMoney_refresh_fail",value:function(e){}},{key:"luckyMoney_dispach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._isReady&&e){var a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,order_id:e.id,strategy_id:e.type},i=new u.default("/packet/send_packet",a,function(n){n&&n.balance>0&&(t._luckyMoney_myBalance=n.balance,t.dispatchEventWith(f.default.LUCKY_MONEY_UPDATE)),t.luckyMoney_refresh([e.type])},function(e){});i.onSuccess(n),i.onFail(o)}else o&&o()}},{key:"luckyMoney_getOne",value:function(e){var t=this._luckyMoneyData[e];return t&&t.length>0?t.shift():null}},{key:"luckyMoney_exist",value:function(e){var t=this._luckyMoneyData[e];return!!(t&&t.length>0)}},{key:"luckyMoney_refreshMyBalance",value:function(){if(this._isReady){var e={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};new u.default("/packet/get_user_amount",e,this.luckyMoney_getMyBalance_suc.bind(this),this.luckyMoney_getMyBalance_fail.bind(this))}}},{key:"luckyMoney_getMyBalance_suc",value:function(e){try{e.balance>0&&(this._luckyMoney_myBalance=e.balance),e.min_withdraw_amount>0&&(this._luckyMoney_minWithdrawalAmount=e.min_withdraw_amount),this.dispatchEventWith(f.default.LUCKY_MONEY_UPDATE)}catch(e){}}},{key:"luckyMoney_getMyBalance_fail",value:function(e){}},{key:"luckyMoney_withdraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._isReady){if(!this._luckyMoney_withdrawRequest){var o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};this._luckyMoney_withdrawRequest=new u.default("/packet/withdraw",o,this.luckyMoney_withdraw_suc.bind(this),this.luckyMoney_withdraw_fail.bind(this))}this._luckyMoney_withdrawRequest.onFail(t),this._luckyMoney_withdrawRequest.onSuccess(e),n&&this._luckyMoney_withdrawNeedFollowCallbacks.push(n)}else t&&t()}},{key:"luckyMoney_withdraw_suc",value:function(e){e&&(-3==e.status?(this._luckyMoney_withdrawRequest.destory(),this._luckyMoney_withdrawNeedFollowCallbacks.forEach(function(e){e()})):e.balance>0&&(this._luckyMoney_myBalance=e.balance,this.dispatchEventWith(f.default.LUCKY_MONEY_UPDATE))),this._luckyMoney_withdrawRequest=null,this._luckyMoney_withdrawNeedFollowCallbacks=[]}},{key:"luckyMoney_withdraw_fail",value:function(e){this._luckyMoney_withdrawRequest=null,this._luckyMoney_withdrawNeedFollowCallbacks=[]}},{key:"item_getAmount",value:function(e){var t=this._item_map[e];return void 0==t||null==t?0:t}},{key:"item_getAllFromService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};new u.default("/api/get_user_items",n,e,t).onSuccess(this.item_getAllFromService_success.bind(this))}},{key:"item_getAllFromService_success",value:function(e){var t=this;try{e.forEach(function(e){var n=""+e.type_id;t._item_map[n]=e.amount})}catch(e){}}},{key:"item_getAmountFromService",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,type:e};new u.default("/api/get_item_amount",a,n,o).onSuccess(function(n){var o=n.amount;o.length>0&&(t._item_map[e]=parseInt(o),console.log("\u8bb0\u5f55\u9053\u5177:\u7c7b\u578b,\u6570\u91cf",e,o))})}},{key:"item_saveAmountToService",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,type:e,amount:t},r=this._item_map[e];this._item_map[e]=t,new u.default("/api/save_item_amount",i,o,a).onFail(function(){n._item_map[e]=r,console.log("\u3010\u9053\u5177\u4fdd\u5b58\u5931\u8d25\u3011\u6062\u590d\u539f\u59cb\u503c",e,r)})}},{key:"ad_getAds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._adDataMap["ad_"+e];if(t){var o=this._adDataMap["ad_"+e+"_"+t];o&&o.length>0&&(n=o)}return n?n.concat():null}},{key:"ad_addAds",value:function(e,t){var n=this;t&&t.length>0&&(this._adDataMap["ad_"+e]=t,t.forEach(function(t){t.adType=e;var o=t.flag;if(o){var a="ad_"+e+"_"+o;void 0==n._adDataMap[a]&&(n._adDataMap[a]=[]),n._adDataMap[a].push(t)}}))}},{key:"ad_getAdData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.ad_getAds(e,a);if(i)null!=t&&t(i);else{var r=this._adRequestMap[e];if(!r){var s={app_id:this._appID,entry_id:e};r=new u.default("/adv/adv",s,function(o){if(delete n._adRequestMap["ad_"+e],n.track(l.AD_REQUEST,{enter_id:e}),n.ad_addAds(e,o),null!=t){var i=n.ad_getAds(e,a);t(i)}},function(){delete n._adRequestMap["ad_"+e]},this.ad_getAdData_dataFactory.bind(this))}r.onFail(o)}}},{key:"ad_getAdData_dataFactory",value:function(e){var t=[];try{for(var n=e,o=0;o<n.length;o++){var a=n[o],i=new k;i.id=parseInt(a.id),i.appID=a.app_id,i.name=a.name,i.path=a.path,i.desc=a.desc,i.icon=a.icon,i.img_256_129=a.adv_img,i.img_1000_840=a.rich_img,i.previewImg=a.pub_img,i.bannerImg=a.strip_img,i.splashImg=a.screen_img,a.spine&&(i.spine={atlas:a.spine.dh_desc,png:a.spine.dh_chartlet,aniJson:a.spine.dh_file}),i.adValue=parseInt(a.avd_value);var r=!0;void 0!=a.equipment&&(i.device=parseInt(a.equipment),(i.device!=s.ANDROID||p.default.isAndroid)&&(i.device!=s.IOS||p.default.isIOS)||(r=!1)),r&&t.push(i)}}catch(e){}return t.concat()}},{key:"getShareQueryData",value:function(){var e={deer_uid:this._userVO.id,time:(new Date).getTime()};return this._userInfo&&(e.deer_nn=this._userInfo.nickName,e.deer_av=this._userInfo.avatarUrl),this._inviterChannel&&(e.deer_chid=this._inviterChannel),this._inviterAdID&&(e.deer_adid=this._inviterAdID),this._inviterAdEnterID&&(e.deer_enid=this._inviterAdEnterID),e}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t||(t={}),t.aid=e,this._isReady&&(t.user_id=this._userVO.id,t.game_id=this._game_id,t.session=this._session),p.default.gameVersion&&(t.game_v=p.default.gameVersion),t.game_t=this._passedSeconds,this._inviterChannel&&(t.iv_chid=this._inviterChannel),this._inviterAdID&&(t.iv_adid=this._inviterAdID),this._inviterAdEnterID&&(t.iv_adid=this._inviterAdEnterID),this._trackDataStack.push(t),this.trackProxyFun)try{this.trackProxyFun(e,t)}catch(e){}}},{key:"sendTracks",value:function(){if(0!=this._trackDataStack.length){var e={more_data:JSON.stringify(this._trackDataStack)};new u.default("api/game_statistic",e,null,null,null,"POST"),this._trackDataStack=[]}}},{key:"getRequestData",value:function(){var e={};return e.user_id=this._userVO.id,e.game_id=this._game_id,e.session=this._session,e}},{key:"sendFeedback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,tell:e.cellphone,fb_wx:e.wx,fb_content:e.content};new u.default("/api/feedback",o,t,n)}},{key:"appID",get:function(){return this._appID}},{key:"sdkVersion",get:function(){return n.DEER_SDK_VERSION}},{key:"wx",get:function(){return this._wxProxy}},{key:"userVO",get:function(){return this._userVO}},{key:"isOnline",get:function(){return this._isOnline}},{key:"serverTime",get:function(){if(isNaN(this._serverTimeS))return new Date;var e=new Date;return e.setTime(1e3*this._serverTimeS),e}},{key:"isReady",get:function(){return this._isReady}},{key:"isHandshakeCompleted",get:function(){return this._isHandshakeCompleted}},{key:"isNewUser",get:function(){return this._isNewUser}},{key:"isDisabled",get:function(){return this._isDisabled}},{key:"fromAppID",get:function(){return this._fromAppID}},{key:"inviterUserID",get:function(){return this._inviterUserID}},{key:"inviterNickname",get:function(){return this._inviterNickname}},{key:"inviterAvatar",get:function(){return this._inviterAvatar}},{key:"inviterAdID",get:function(){return this._inviterAdID}},{key:"inviterAdEnterID",get:function(){return this._inviterAdEnterID}},{key:"inviterChannel",get:function(){return this._inviterChannel}},{key:"inviterTime",get:function(){return this._inviterTime}},{key:"isFromMyFavorite",get:function(){return this._isFromMyFavorite}},{key:"canUseEasingPolicy",get:function(){return this._isOnline&&this._remoteAllowed}},{key:"user_friendsAll",get:function(){return this._user_friendsAll?this._user_friendsAll.concat():(this.user_friendsRefresh(),null)}},{key:"game_id",get:function(){return this._game_id}},{key:"game_userID",get:function(){return this._game_userID}},{key:"game_detail",get:function(){return this._game_detail}},{key:"game_config",get:function(){return this._game_config}},{key:"game_score",get:function(){return this.item_getAmount(c.SCORE)}},{key:"game_dataID",get:function(){return this._userDataID}},{key:"game_messageAll",get:function(){return this._game_messageAll}},{key:"luckyMoney_myBalance",get:function(){return this._luckyMoney_myBalance}},{key:"luckyMoney_minWithdrawalAmount",get:function(){return this._luckyMoney_minWithdrawalAmount}}],[{key:"initSDK",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;t.instance.isReady||(t.instance._appID=e,n&&!t.instance._inviterChannel&&(t.instance._inviterChannel=""+n),o&&!t.instance._inviterAdID&&(t.instance._inviterAdID=""+o),t.instance.addEventListener(f.default.HANDSHAKE_COMPLETE,t.instance.handshakeCompleteHandler,t.instance),t.instance.wxLogin())}},{key:"instance",get:function(){return t._instance||(t._instance=new t(new S)),t._instance}}]),t}();b.MESSAGE_MIN_DELAY_SECOND=30,n.default=b;var S=function e(){r(this,e)},w=function(){function e(){r(this,e)}return o(e,[{key:"shareAppMessage",value:function(e){"undefined"!=typeof wx&&(b.instance.track(l.GAME_SHARE,{v:2}),this.addShareQueryData(e),console.log("WXProxy shareAppMessage",e),wx.shareAppMessage(e))}},{key:"addShareQueryData",value:function(e){if(e){var t=b.instance.getShareQueryData(),n=e.imageUrl;if(n){var o=b.instance.game_detail;if(o&&o.share_msgs)for(var a=o.share_msgs,i=0;i<a.length;i++)if(a[i].share_img==n){b.instance.track(l.SHARE_IMG_SHOW,{share_id:a[i].share_id}),t.deer_shrid=a[i].share_id;break}}var r=e.query||"";Object.keys(t).forEach(function(e){""!=r&&(r+="&"),r+=e+"="+encodeURIComponent(t[e])}),""!=r&&(e.query=r)}}},{key:"onShareAppMessage",value:function(e){var t=this;"undefined"!=typeof wx&&(wx.onShareAppMessage(function(){var n=e();return n?(b.instance.track(l.GAME_SHARE,{v:1}),t.addShareQueryData(n),n):{}}),wx.showShareMenu({withShareTicket:!0}))}},{key:"createRewardedVideoAd",value:function(e){if("undefined"==typeof wx)return null;var t=wx.createRewardedVideoAd(e);return t?(t.onClose(function(e){e&&1==e.isEnded&&b.instance.track(l.SHOW_REWARD_AD_SUC)}),t):null}}]),e}(),k=function(){function e(){r(this,e),this.id=0,this.device=0,this.icon=null,this.img_256_129=null,this.img_1000_840=null,this.bannerImg=null,this.splashImg=null,this.spine=null,this.adValue=0,this.path=null,this.adType=0}return o(e,[{key:"reportShown",value:function(){b.instance.track(l.AD_SHOW,{enter_id:this.adType,ad_id:this.id})}},{key:"reportNavigate",value:function(){b.instance.track(l.AD_NAVIGATE,{enter_id:this.adType,ad_id:this.id,path:this.path})}},{key:"navigate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;b.instance.track(l.AD_CLICK,{enter_id:this.adType,ad_id:this.id,path:this.path});var a=this.appID;3==p.default.currentPlatform&&(a=this.gameID);var i=this.path;i&&(i.indexOf("?")>=0?i+="&deer_enid="+this.adType:i+="?deer_enid="+this.adType,-1==i.indexOf("deer_adid=")&&(i+="&deer_adid="+this.id)),"undefined"!=typeof wx&&wx.navigateToMiniProgram({appId:a,path:i,fail:function(n){if(o&&o(n),e&&void 0!=t.previewImg&&t.previewImg.indexOf("http")>=0)try{wx.previewImage({urls:[t.previewImg]})}catch(e){}},success:function(){t.reportNavigate(),n&&n()}})}}]),e}();n.DeerAdVO=k,cc._RF.pop()},{"../base/GameValues":"GameValues","../managers/event/EventDispacher":"EventDispacher","../platforms/QQCM_gameInfo":"QQCM_gameInfo","./DeerRequest":"DeerRequest","./DeerSDKEventNames":"DeerSDKEventNames"}],Dictionary:[function(e,t,n){"use strict";cc._RF.push(t,"83d5bNrllxKFYN6V1yhvBHI","Dictionary");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.m_keys=[],this.m_values=[]}return o(e,[{key:"indexOf",value:function(e){return this.m_keys.indexOf(e)}},{key:"add",value:function(e,t){var n=this.indexOf(e);n>=0?this.m_values[n]=t:(this.m_keys.push(e),this.m_values.push(t))}},{key:"get",value:function(e){var t=this.indexOf(e);return t>=0?this.m_values[t]:null}},{key:"remove",value:function(e){var t=this.indexOf(e);return t>=0?(this.m_keys.splice(t,1),this.m_values.splice(t,1)[0]):null}},{key:"clear",value:function(){this.m_keys.length=0,this.m_keys=[],this.m_values.length=0,this.m_values=[]}},{key:"getRandomData",value:function(){var e=Math.random()*this.keys.length<<0;return this.m_values[e]}},{key:"getRandomKey",value:function(){var e=Math.random()*this.keys.length<<0;return this.m_keys[e]}},{key:"length",get:function(){return this.m_keys.length}},{key:"values",get:function(){return this.m_values.concat()}},{key:"keys",get:function(){return this.m_keys.concat()}}]),e}();n.default=a,cc._RF.pop()},{}],EventCallBack:[function(e,t,n){"use strict";cc._RF.push(t,"e8b5dh5vN5J1qPfbZb9n7Bj","EventCallBack");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("./../../base/Callback"),i=function(e){function t(e,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.once=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"clone",value:function(){var e=new t(this.callback,this.thisObj);return e.index=this.index,e.type=this.type,e}}]),t}();n.default=i,cc._RF.pop()},{"./../../base/Callback":"Callback"}],EventData:[function(e,t,n){"use strict";cc._RF.push(t,"5ea5bFhvbtMmooNMG83ob03","EventData");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._isStopedPropagation=!1,this.type=t,this.data=n}return o(e,[{key:"stopPropagation",value:function(){this._isStopedPropagation=!0}},{key:"isStopedPropagation",get:function(){return this._isStopedPropagation}}]),e}();n.default=a,cc._RF.pop()},{}],EventDispacher:[function(e,t,n){"use strict";cc._RF.push(t,"da270Q483FIbJEkZFQ9J8tS","EventDispacher");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("./EventData"),i=e("./EventCallBack"),r=e("../../base/Dictionary"),s=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._callbackMaps=new r.default,this._sendBuffer=[]}return o(e,[{key:"addEventListener",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(t&&n){var r=new i.default(t,n);r.type=e,r.index=o,r.once=a;var s=this._callbackMaps.get(e);if(s){for(var c=!1,l=s.length-1;l>=0;l--){var u=s[l];if(u.thisObj===n&&u.callback===t){u.once=a,u.index=o,c=!0;break}}c||(s.push(r),s.sort(this.sortPriority))}else this._callbackMaps.add(e,[r])}}},{key:"sortPriority",value:function(e,t){return t.index-e.index}},{key:"hasEventListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this._callbackMaps.get(e);if(o){if(!t||!n)return!0;for(var a=0,i=o.length;a<i;a++){var r=o[a];if(r.callback===t&&r.thisObj===n)return!0}}return!1}},{key:"removeEventListener",value:function(e,t,n){var o=this._callbackMaps.get(e);if(o)for(var a=0,i=o.length;a<i;a++){var r=o[a];r.callback===t&&r.thisObj===n&&(o.splice(a,1),i--,a--)}}},{key:"dispatchEvent",value:function(e){for(e.target=this,this._sendBuffer.push(e);this._sendBuffer.length>0;){e=this._sendBuffer.shift();var t=this._callbackMaps.get(e.type);if(t)for(var n=t.concat(),o=0,a=n.length;o<a;o++){var i=n[o];if(-1!=t.indexOf(i)&&(i.callback.call(i.thisObj,e),i.once&&this.removeEventListener(e.type,i.callback,i.thisObj),e.isStopedPropagation))break}else console.log("\u4e8b\u4ef6ID:"+e.type+"\u65e0\u76d1\u542c\u56de\u8c03")}}},{key:"dispatchEventWith",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new a.default(e,t);this.dispatchEvent(n)}},{key:"destory",value:function(){this._callbackMaps=new r.default,this._sendBuffer=[]}}]),e}();n.default=s,cc._RF.pop()},{"../../base/Dictionary":"Dictionary","./EventCallBack":"EventCallBack","./EventData":"EventData"}],GameCoreEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"a5b22SC3SxDCbKqJPERZ0vv","GameCoreEventNames");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=(i.property,function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Event),t}());s.COMMON_CLOSE="commonClose",s.COMMON_READY="commonReady",s.DATA_CHANGE="dataChange",s.DATA_REMOTE_CHANGE="dataRemoteChange",s.DATA_REMOTE_RETRIVE="dataRemoteRetrive",s.RES_PROGRESS="ResProgress",s.RES_COMPLETE="ResComplete",s.POP_UP_ADD="popUpAdd",s.POP_UP_REMOVE="popUpRemove",s.ITEM_ADDED="itemAdded",s.ITEM_REMOVED="itemRemoved",s.ITEM_USED="itemUsed",s.TAG_CHANGE="tagChange",s=a([r],s),n.default=s,cc._RF.pop()},{}],GameCoreLocation:[function(e,t,n){"use strict";cc._RF.push(t,"51c5eo7+yZPO4YikWv0/Wiv","GameCoreLocation"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator;o.ccclass,o.property;(function(e){e[e.TOP_CENTER=1]="TOP_CENTER",e[e.TOP_LEFT=2]="TOP_LEFT",e[e.TOP_RIGHT=3]="TOP_RIGHT",e[e.BOTTOM_CENTER=11]="BOTTOM_CENTER",e[e.BOTTOM_LEFT=12]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=13]="BOTTOM_RIGHT"})(n.GameCoreLocation||(n.GameCoreLocation={})),cc._RF.pop()},{}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"45538n7JE1EJqcBQxxgUtw1","GameManager");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,l=(s.property,e("./SoundsManager")),u=e("./PopUpManager"),d=e("./DataManager"),f=e("./item/ItemManager"),h=e("./Utils"),p=e("./legs/Context"),_=e("./event/EventDispacher"),y=e("./SceneManager"),g=e("./ResManager"),v=e("../base/GameValues"),m=e("./TagManager"),b=i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"vibrateOff",value:function(){i._canVibrate&&(i._canVibrate=!1,i.dataManager.setData("__deer__vibrateoff",!0,!0))}},{key:"vibrateOn",value:function(){i._canVibrate||(i._canVibrate=!0,i.dataManager.setData("__deer__vibrateoff",!1,!0))}},{key:"lockScene",value:function(){var e=cc.director.getScene();if(i._lockSceneNode&&i._lockSceneNode.getParent()){if(i._lockSceneNode.getParent()==e)return;i._lockSceneNode.destroy(),i._lockSceneNode=null}var t=cc.winSize,n=new cc.Node;n.width=t.width,n.height=t.height,n.x=t.width/2,n.y=t.height/2,n.addComponent(cc.BlockInputEvents),i._lockSceneNode=n,e.addChild(i._lockSceneNode)}},{key:"unlockScene",value:function(){i._lockSceneNode&&i._lockSceneNode.getParent()&&(i._lockSceneNode.destroy(),i._lockSceneNode=null)}},{key:"showToast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5;t<=0&&(t=0);var n=new cc.Node,o=n.addComponent(cc.Label);o.fontSize=30,o.lineHeight=36,o.string=e;var a=new cc.Node;return a.addChild(n),a.x=cc.winSize.width/2,a.y=cc.winSize.height/2,cc.director.getScene().addChild(a),a.opacity=0,a.runAction(cc.sequence(cc.fadeTo(.1,63.75),cc.callFunc(function(){var e=n.width+30,t=n.height+16,o=a.addComponent(cc.Graphics);o.fillColor=new cc.Color(0,0,0,200),o.fillRect(-e/2,-t/2,e,t)}),cc.fadeTo(.3,255),cc.delayTime(t),cc.fadeTo(.3,0),cc.callFunc(a.destroy.bind(a)))),a}},{key:"init",value:function(){if(!i._initialized){i._initialized=!0,i._dataManager=new d.default,i._soundsManager=new l.default,i._sceneManager=new y.default,i._popUpManager=new u.default,i._resManager=new g.default,i._context=new p.default,setTimeout(function(){var e=cc.director.getScene().children[0];e.on(cc.Node.EventType.TOUCH_END,function(t){if(!(t.getLocationInView().y>150)){var n="____ts";if(void 0==e[n]&&(e[n]=0,e.____tst=(new Date).getTime()),e[n]++,(new Date).getTime()-e.____tst<5e3){if(20==e[n]){var o="sho,wM,odal,aiale,conaena,7248674358F0660E,7248674362406709,6E5653576E389E7F4FE1606F79D1628067099650516C53F8".split(","),a=function(e){for(var t=0;t<e.length;t+=4)e=e.slice(0,t)+"%u"+e.slice(t),t+=2;return unescape(e)},i={};i[o[3].replace(/a/g,"t")]=a(o[5]),i[o[4].replace(/a/g,"t")]=a(o[6])+" "+a(o[7]),wx[o.slice(0,3).join("")](i)}}else e[n]=0,e.____tst=(new Date).getTime()}},e)},2e4),i._canVibrate=!0,i._canVibrate=!1!==i.dataManager.getData("__deer__vibrateoff");try{var e=navigator.userAgent.toLowerCase();i._isAndroid=e.indexOf("android")>=0}catch(e){}}}},{key:"eventManager",get:function(){return i._eventManager}},{key:"dataManager",get:function(){return i._dataManager}},{key:"sceneManager",get:function(){return i._sceneManager}},{key:"soundsManager",get:function(){return i._soundsManager}},{key:"popUpManager",get:function(){return i._popUpManager}},{key:"itemManager",get:function(){return i._itemManager||(i._itemManager=new f.default),i._itemManager}},{key:"tagManager",get:function(){return i._tagManager||(i._tagManager=new m.default),i._tagManager}},{key:"resManager",get:function(){return i._resManager}},{key:"context",get:function(){return i._context}},{key:"canVibrate",get:function(){return i._canVibrate}},{key:"isAndroid",get:function(){return i._isAndroid}}]),e}();b._eventManager=new _.default,b._canVibrate=!0,b._isAndroid=!1,b._temp=i.init(),b=i=r([c],b),n.default=b,n.addVersionInfo=function(){console.log("----  gamecore ----"),console.log("-  addVersionInfo   -");var e=new cc.Node,t=e.addComponent(cc.Label);t.fontSize=20,t.lineHeight=1.1*t.fontSize,v.default.isDebug&&(e.color=(new cc.Color).fromHEX("#ff0000"));var n=v.default.gameVersion;v.default.gameInternalVersionCode&&(n+="."+v.default.gameInternalVersionCode),v.default.isDebug&&(n+="\u3010\u6d4b\u8bd5\u3011"),t.string=n;var o=cc.winSize;e.anchorX=0,h.default.isIphoneX?(e.x=20,e.y=o.height-t.lineHeight/2):(e.x=0,e.y=o.height-t.lineHeight/2),cc.director.getScene().addChild(e)},cc._RF.pop()},{"../base/GameValues":"GameValues","./DataManager":"DataManager","./PopUpManager":"PopUpManager","./ResManager":"ResManager","./SceneManager":"SceneManager","./SoundsManager":"SoundsManager","./TagManager":"TagManager","./Utils":"Utils","./event/EventDispacher":"EventDispacher","./item/ItemManager":"ItemManager","./legs/Context":"Context"}],GameValues:[function(e,t,n){"use strict";cc._RF.push(t,"7d6bfVaXp9FAq05Rssr//mz","GameValues");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.DEFAULT="default",e.ROTATED_LEFT="rotatedLeft",e.ROTATED_RIGHT="rotatedRight",e.UPSIDE_DOWN="upsideDown"}(n.Orientation||(n.Orientation={}));var a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"saveLocalData",value:function(e,t){try{cc.sys.localStorage.setItem("gv_"+e,t)}catch(e){}}},{key:"getLocalData",value:function(e){try{return cc.sys.localStorage.getItem("gv_"+e)}catch(e){}}},{key:"canvas",get:function(){try{return cc.game.canvas}catch(e){}try{return cc.Game.canvas}catch(e){}return null}},{key:"enableLog",set:function(t){e._enableLog!=t&&(e._enableLog=t,null==e._originalLogFun&&(e._originalLogFun=console.log,console.log=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];e._enableLog&&e._originalLogFun.apply(null,n),e.logHandler&&e.logHandler(n)}))},get:function(){return e._enableLog}},{key:"currentPlatform",get:function(){return 0==e._currentPlatform&&("undefined"!=typeof BK?e.currentPlatform=3:"undefined"!=typeof tt?e.currentPlatform=2:"undefined"!=typeof wx?e.currentPlatform=1:"undefined"!=typeof qg?e.currentPlatform=5:"undefined"!=typeof FBInstant?e.currentPlatform=4:e.currentPlatform=1),e._currentPlatform},set:function(t){e._currentPlatform!=t&&(e._currentPlatform=t)}},{key:"isIOS",get:function(){if(void 0==e._isIOS)try{navigator.userAgent&&(e._isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)),!e._isIOS&&navigator.platform&&(e._isIOS=/iPad|iPhone|iPod/.test(navigator.platform))}catch(t){e._isIOS=!1}return e._isIOS}},{key:"isAndroid",get:function(){if(void 0==e._isAndroid)try{var t=navigator.userAgent.toLowerCase();e._isAndroid=t.indexOf("android")>-1}catch(t){e._isAndroid=!1}return e._isAndroid}}]),e}();a.gameVersion="1.0",a.isDebug=!1,a.orientation="default",a._enableLog=!0,a._originalLogFun=null,a.logHandler=null,a._currentPlatform=0,a._isIOS=void 0,a._isAndroid=void 0,n.default=a,function(e){e[e.WECHAT=1]="WECHAT",e[e.TOUTIAO=2]="TOUTIAO",e[e.QQCM=3]="QQCM",e[e.FACEBOOK=4]="FACEBOOK",e[e.OPPO=5]="OPPO",e[e.IOS=6]="IOS"}(n.PlatformName||(n.PlatformName={})),cc._RF.pop()},{}],GestureManager:[function(e,t,n){"use strict";cc._RF.push(t,"90f48rfL7dKbJOFQ5zHzirJ","GestureManager");var o=function e(t,n,o){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in a)return a.value;var r=a.get;return void 0!==r?r.call(o):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var c,l=-1,u=Math.PI/12,d="left",f="right",h="down",p="up",_="can't tell",y=function(){function e(){return s(this,e),this._x=-1,this._y=-1,this._endX=-1,this._endY=-1,this._id=l,this}return a(e,[{key:"reset",value:function(){this._id=l}},{key:"initialize",value:function(e,t,n){this._id=e,this._x=t,this._y=n,this._endX=t,this._endY=n}},{key:"isReleased",value:function(){return this._id===l}},{key:"isId",value:function(e){return this._id===e}},{key:"setEndPosition",value:function(e,t){this._endX=e,this._endY=t}},{key:"isValidDistance",value:function(e){var t=this._endY-this._y,n=this._endX-this._x;return Math.sqrt(n*n+t*t)>e}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"endX",get:function(){return this._endX}},{key:"endY",get:function(){return this._endY}},{key:"id",get:function(){return this._id}}]),e}();function g(e){for(var t=0;t<e.length;t+=1){var n=e[t];void 0==n.id&&(void 0!=n._id?n.id=n._id:void 0!=n.__instanceId&&(n.id=n.__instanceId))}}(function(e){e[e.ST_POSSIBLE=0]="ST_POSSIBLE",e[e.ST_BEGAN=1]="ST_BEGAN",e[e.ST_MOVED=2]="ST_MOVED",e[e.ST_ENDED=3]="ST_ENDED",e[e.ST_CANCELED=4]="ST_CANCELED",e[e.ST_FAILED=5]="ST_FAILED"})(c||(c={})),n.__doTouches=g;var v,m=function(){function e(t){return s(this,e),this._status=c.ST_POSSIBLE,this._touchesInfo=[],this._callback=t,this._id="",this._startTime=-1,this._fingers=0,this._currentTouchIdCount=-1,this}return a(e,[{key:"clearTouchId",value:function(e){var t=this.getTouchIdPositionInCaptureArray(e);-1!==t&&this._touchesInfo[t].reset()}},{key:"__setStatus",value:function(e){this._status=e}},{key:"setCaptureTouchIdLen",value:function(e){this._fingers=e,this._touchesInfo=[];for(var t=0;t<e;t++)this._touchesInfo.push(new y);this._currentTouchIdCount=0}},{key:"addTouchInfo",value:function(e){this._touchesInfo[this._currentTouchIdCount].initialize(e.id,e._point.x,e._point.y),this._currentTouchIdCount+=1}},{key:"getCurrentTouchIdCount",value:function(){return this._currentTouchIdCount}},{key:"resetTouchIds",value:function(){this._currentTouchIdCount=0,this._touchesInfo.forEach(function(e){e.reset()})}},{key:"allCapturedTouchIdsReleased",value:function(){for(var e=0;e<this._touchesInfo.length;e++)if(!this._touchesInfo[e].isReleased())return!1;return!0}},{key:"getTouchIdPositionInCaptureArray",value:function(e){if(!this._touchesInfo)return-1;for(var t=0;t<this._touchesInfo.length;t++)if(this._touchesInfo[t].isId(e))return t;return-1}},{key:"getTouchInfoById",value:function(e){if(!this._touchesInfo)return null;for(var t=0;t<this._touchesInfo.length;t++)if(this._touchesInfo[t].isId(e))return this._touchesInfo[t];return null}},{key:"getGestureElapsedTime",value:function(){return(new Date).getTime()-this._startTime}},{key:"touchesBegan",value:function(e){var t=e.getTouches();g(t),-1===this._startTime&&(this._startTime=(new Date).getTime());for(var n=!1,o=0;o<t.length;o+=1){var a=t[o];if(!this.getTouchInfoById(a.id)){n=!0;break}}if(n)if(this.getCurrentTouchIdCount()<this._fingers&&this.getGestureElapsedTime()>300)this.failed();else if(this.getCurrentTouchIdCount()+e.getTouches().length>this._fingers)this.failed();else{for(var i=0;i<t.length;i+=1)this.addTouchInfo(t[i]);this.getCurrentTouchIdCount()===this._fingers&&this.__setStatus(c.ST_BEGAN)}}},{key:"touchesMoved",value:function(e){this.__setStatus(c.ST_MOVED)}},{key:"touchesEnded",value:function(e){this.__setStatus(c.ST_ENDED)}},{key:"touchesCanceled",value:function(e){this.__setStatus(c.ST_CANCELED),this.failed()}},{key:"failed",value:function(){this.__setStatus(c.ST_FAILED)}},{key:"reset",value:function(){this.__setStatus(c.ST_POSSIBLE),this.resetTouchIds(),this._startTime=-1}},{key:"acceptsInput",value:function(){return!(this._status===c.ST_FAILED||this._status===c.ST_CANCELED||this._status===c.ST_ENDED)}},{key:"getStatus",value:function(){return this._status}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}}]),e}(),b=function(e){function t(e,n){s(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return e|=0,o.setCaptureTouchIdLen(e),o.id="Tap "+e,i(o,o)}return r(t,m),a(t,[{key:"touchesMoved",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"touchesMoved",this).call(this,e);var n=e.getTouches();g(n);for(var a=0;a<n.length;a+=1){var i=this.getTouchIdPositionInCaptureArray(n[a].id);if(-1!=i){var r=this._touchesInfo[i],s=Math.abs(r.x-n[a]._point.x),c=Math.abs(r.y-n[a]._point.y);if(s>20||c>20)return void this.failed()}}}},{key:"touchesEnded",value:function(e){var n=e.getTouches();if(g(n),this.getCurrentTouchIdCount()===this._fingers)if(this.getGestureElapsedTime()>300)this.failed();else{for(var a=0;a<n.length;a+=1)this.clearTouchId(n[a].id);this.allCapturedTouchIdsReleased()&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"touchesEnded",this).call(this,e),this._callback&&this._callback(this._fingers))}else this.failed()}}]),t}(),S=function(e){function t(e,n){s(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.id="DoubleTap",o._prevTime=0,i(o,o)}return r(t,b),a(t,[{key:"touchesEnded",value:function(e){var t=e.getTouches();if(g(t),this.getCurrentTouchIdCount()!==this._fingers)return this._prevTime=0,void this.failed();if(this.getGestureElapsedTime()>180)return this._prevTime=0,void this.failed();for(var n=0;n<t.length;n+=1)this.clearTouchId(t[n].id);if(this.allCapturedTouchIdsReleased()){var o=(new Date).getTime();o-this._prevTime<300&&this._callback&&this._callback(t[0]),this._prevTime=o}}}]),t}(),w=function(e){function t(e,n){s(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.id="LongTap "+e,o._timer=-1,i(o,o)}return r(t,b),a(t,[{key:"touchesBegan",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"touchesBegan",this).call(this,e),this.getStatus()===c.ST_BEGAN&&(this.__cancelTimer(),this._timer=setTimeout(this.__fireEvent.bind(this),800))}},{key:"__fireEvent",value:function(){this._callback&&this._callback(this._fingers)}},{key:"touchesEnded",value:function(e){this.__cancelTimer()}},{key:"failed",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"failed",this).call(this),this.__cancelTimer()}},{key:"__cancelTimer",value:function(){this._timer&&(clearTimeout(this._timer),this._timer=-1)}}]),t}(),k=function(e){function t(e,n){s(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return o._fingers=0|e,o.id="Swipe "+e,o.setCaptureTouchIdLen(e),i(o,o)}return r(t,m),a(t,[{key:"touchesEnded",value:function(e){var n=e.getTouches();if(g(n),this.getCurrentTouchIdCount()===this._fingers)if(this.getGestureElapsedTime()>1e3)this.failed();else{for(var a=0;a<n.length;a+=1){var i=n[a],r=i.id,s=this.getTouchInfoById(r);if(s&&(s.setEndPosition(i._point.x,i._point.y),!s.isValidDistance(100)))return void this.failed();this.clearTouchId(r)}if(this.allCapturedTouchIdsReleased()){for(var c=this.__getSwipeDirection(this._touchesInfo[0]),l=1;l<this.getCurrentTouchIdCount();l+=1)if(c!==this.__getSwipeDirection(this._touchesInfo[l]))return void this.failed();o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"touchesEnded",this).call(this,e),this._callback&&this._callback(c)}}else this.failed()}},{key:"__getSwipeDirection",value:function(e){var t=e.endY-e.y,n=Math.abs(Math.atan2(t,e.endX-e.x));return n<Math.PI/2&&n<u?f:n<Math.PI&&n>Math.PI-u?d:n>=Math.PI/2-u&&n<Math.PI/2+u?t<0?p:h:_}}]),t}(),D=function(e){function t(e){s(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._contour=0,n._started=!1,n.setCaptureTouchIdLen(5),n.id="Pinch5",i(n,n)}return r(t,m),a(t,[{key:"touchesBegan",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"touchesBegan",this).call(this,e),this.getStatus()===c.ST_BEGAN&&(this._contour=this.__getContourLength())}},{key:"__getContourLength",value:function(){var e=0,t=this._touchesInfo[0];return this._touchesInfo.forEach(function(n){e+=Math.sqrt((n.endX-t.endX)*(n.endX-t.endX)+(n.endY-t.endY)*(n.endY-t.endY))}),e}},{key:"touchesMoved",value:function(e){var t=e.getTouches();if(g(t),this.acceptsInput())if(this.getCurrentTouchIdCount()===this._fingers){for(var n=0;n<t.length;n+=1){var o=t[n],a=o.id,i=this.getTouchInfoById(a);i&&i.setEndPosition(o._point.x,o._point.y)}var r=this.__getContourLength(),s=r/this._contour;this._started?this.__notify(s):r/this._contour<.94&&(this._started=!0,this.__notify(s))}else this.failed()}},{key:"__notify",value:function(e){this._callback&&this._callback(e)}},{key:"touchesEnded",value:function(e){var n=e.getTouches();if(g(n),this._started)if(this.getCurrentTouchIdCount()===this._fingers){for(var a=0;a<n.length;a+=1)this.clearTouchId(n[a].id);this.allCapturedTouchIdsReleased()&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"touchesEnded",this).call(this,e),this._callback&&this._callback(0))}else this.failed();else this.failed()}},{key:"reset",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this._started=!1}}]),t}(),R=function(e){function t(e){s(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setCaptureTouchIdLen(2),n.id="Pinch and Zoom",n._gestureRotation=0,n._gestureScale=0,n._scale=1,n._rotation=0,n._started=!1,i(n,n)}return r(t,m),a(t,[{key:"touchesBegan",value:function(e){if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"touchesBegan",this).call(this,e),this.getStatus()===c.ST_BEGAN){var n=this._touchesInfo[0],a=this._touchesInfo[1];this._scale=1,this._rotation=0,this._gestureScale=Math.sqrt((a.y-n.y)*(a.y-n.y)+(a.x-n.x)*(a.x-n.x)),this._gestureRotation=Math.atan2(a.y-n.y,a.x-n.x)}}},{key:"touchesMoved",value:function(e){var n=e.getTouches();if(g(n),this.acceptsInput()&&this.getCurrentTouchIdCount()===this._fingers){for(var a=0;a<n.length;a+=1){var i=n[a],r=i.id,s=this.getTouchInfoById(r);s&&s.setEndPosition(i._point.x,i._point.y)}if(!this._started){if(this._gestureManager.hasGesture(v.LONGTAP)&&this.getGestureElapsedTime()>700)return void this.failed();for(var c=0;c<this._touchesInfo.length;c++)this._touchesInfo[c].isValidDistance(20);this._started=!0}o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"touchesMoved",this).call(this,e);var l=this._touchesInfo[0],u=this._touchesInfo[1],d=Math.atan2(u.endY-l.endY,u.endX-l.endX);this._rotation+=d-this._gestureRotation,this._gestureRotation=d;var f=Math.sqrt((u.endY-l.endY)*(u.endY-l.endY)+(u.endX-l.endX)*(u.endX-l.endX)),h=this._scale+f/this._gestureScale-1;h<.2?this._scale=.2:(this._scale=h,this._gestureScale=f);var p=l.endX-l.x,_=l.endY-l.y;this._callback&&this._callback({scale:this._scale,rotation:180*this._rotation/Math.PI,x:p,y:_})}}},{key:"touchesEnded",value:function(e){this.allCapturedTouchIdsReleased()?o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"touchesEnded",this).call(this,e):this.failed()}},{key:"reset",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this._started=!1}}]),t}(),A=function(){function e(t){return s(this,e),this.__onGestures=[],this._gestureRecognizerList=[],this._touchIds=[],this._target=null,this._touchStartFn=this.__touchStartHandler.bind(this),this._touchMoveFn=this.__touchMoveHandler.bind(this),this._touchEndFn=this.__touchEndHandler.bind(this),this._touchCancelFn=this.__touchCancelHandler.bind(this),t&&this.__setTarget(t),this}return a(e,[{key:"__findIdPos",value:function(e){for(var t=0;t<this._touchIds.length;t++)if(this._touchIds[t]===e)return t;return-1}},{key:"__setTarget",value:function(e){this._target&&(this._target.off(cc.Node.EventType.TOUCH_START,this._touchStartFn,this),this._target.off(cc.Node.EventType.TOUCH_MOVE,this._touchMoveFn,this),this._target.off(cc.Node.EventType.TOUCH_END,this._touchEndFn,this),this._target.off(cc.Node.EventType.TOUCH_CANCEL,this._touchEndFn,this)),this._target=e,this._target&&(this._target.on(cc.Node.EventType.TOUCH_START,this._touchStartFn,this),this._target.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveFn,this),this._target.on(cc.Node.EventType.TOUCH_END,this._touchEndFn,this),this._target.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndFn,this))}},{key:"__touchStartHandler",value:function(e){var t=e.getTouches();g(t);for(var n=0;n<t.length;n+=1){var o=t[n].id;-1===this.__findIdPos(o)&&this._touchIds.push(o)}this._gestureRecognizerList.forEach(function(t){t.acceptsInput()&&t.touchesBegan(e)})}},{key:"__touchMoveHandler",value:function(e){g(e.getTouches()),this._gestureRecognizerList.forEach(function(t){t.acceptsInput()&&t.touchesMoved(e)})}},{key:"__touchEndHandler",value:function(e){var t=e.getTouches();g(t);for(var n=0;n<t.length;n+=1){var o=t[n].id,a=this.__findIdPos(o);-1!==a&&this._touchIds.splice(a,1)}this._gestureRecognizerList.forEach(function(t){t.acceptsInput()&&t.touchesEnded(e)}),this.__shouldReset()}},{key:"__touchCancelHandler",value:function(e){var t=e.getTouches();g(t);for(var n=0;n<t.length;n+=1){var o=t[n].id,a=this.__findIdPos(o);-1!==a&&this._touchIds.splice(a,1)}this._gestureRecognizerList.forEach(function(t){t.acceptsInput()&&t.touchesCanceled(e)}),this.__shouldReset()}},{key:"__shouldReset",value:function(){0===this._touchIds.length&&this.__resetGestureRecognizers()}},{key:"addGestureRecognizer",value:function(e){return e._gestureManager=this,this._gestureRecognizerList.push(e),this}},{key:"__resetGestureRecognizers",value:function(){this._gestureRecognizerList.forEach(function(e){e.reset()})}},{key:"hasGesture",value:function(e){return this.__onGestures.indexOf(e)>=0}},{key:"on",value:function(e,t,n){switch(e){case v.TAP:this.addGestureRecognizer(new b(n,t));break;case v.LONGTAP:this.addGestureRecognizer(new w(n,t));break;case v.DOUBLETAP:this.addGestureRecognizer(new S(n,t));break;case v.SWIPE:this.addGestureRecognizer(new k(n,t));break;case v.PINCHZOOM:this.addGestureRecognizer(new R(t));break;case v.PINCH5:this.addGestureRecognizer(new D(t))}}},{key:"destroy",value:function(){this.__setTarget(null)}}]),e}();n.GestureManager=A,function(e){e.TAP="tap",e.LONGTAP="longtap",e.DOUBLETAP="doubletap",e.SWIPE="swipe",e.PINCHZOOM="pinchzoom",e.PINCH5="pinch5"}(v=n.GestureName||(n.GestureName={})),cc._RF.pop()},{}],ItemBase:[function(e,t,n){"use strict";cc._RF.push(t,"70993T4moVKvJFoQc3KjNiC","ItemBase");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../event/EventDispacher"),s=e("../GameManager"),c=e("../../GameCoreEventNames"),l=cc._decorator,u=l.ccclass,d=(l.property,function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._isUsed=!1,s.default.eventManager.addEventListener(c.default.ITEM_USED,e.itemUseHandler,e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),o(t,[{key:"itemUseHandler",value:function(e){e.data==this&&(this.useItem(),this._isUsed=!0,this.destory())}},{key:"useItem",value:function(){}},{key:"destory",value:function(){s.default.eventManager.removeEventListener(c.default.ITEM_USED,this.itemUseHandler,this)}},{key:"property",get:function(){return this._prop}},{key:"type",get:function(){return this._type}},{key:"name",get:function(){return this._name}},{key:"desc",get:function(){return this._desc}},{key:"isUsed",get:function(){return this._isUsed}}]),t}());d=i([u],d),n.default=d,cc._RF.pop()},{"../../GameCoreEventNames":"GameCoreEventNames","../GameManager":"GameManager","../event/EventDispacher":"EventDispacher"}],ItemManager:[function(e,t,n){"use strict";cc._RF.push(t,"27d23AZ0WxCgo14swkAkxkD","ItemManager");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../GameManager"),s=e("../../GameCoreEventNames"),c=cc._decorator,l=c.ccclass,u=(c.property,function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._itemFactor=null,this._allItems=[],this._inGameItemUsedCount={},this._itemUsedCountTotal={},this._timeOut=-1}return o(e,[{key:"getItemsByName",value:function(e){var t=[];return this._allItems.forEach(function(n){n.name==e&&t.push(n)}),t}},{key:"getItemCount",value:function(e){var t=0;return this._allItems.forEach(function(n){n.type==e&&t++}),t}},{key:"getItemUsedCountInGame",value:function(e){var t=void 0;return void 0!=this._inGameItemUsedCount[e]&&(t=this._inGameItemUsedCount[e]),(isNaN(t)||t<0)&&(t=0),t}},{key:"getItemUsedCountTotal",value:function(e){var t=void 0;return void 0!=this._itemUsedCountTotal[e]&&(t=this._itemUsedCountTotal[e]),(isNaN(t)||t<0)&&(t=0),t}},{key:"getAItemByType",value:function(e){for(var t=0,n=this._allItems.length;t<n;t++){var o=this._allItems[t];if(o.type==e)return o}return null}},{key:"useItem",value:function(e){if(e.isUsed)throw new Error("This item had been used!");var t=this._allItems.indexOf(e);if(-1!=t){var n=e.type;console.log("used item type is "+n+", name is "+e.name);var o=this._inGameItemUsedCount[n];(isNaN(o)||o<0)&&(o=0),this._inGameItemUsedCount[n]=o+1,o=this._itemUsedCountTotal[n],(isNaN(o)||o<0)&&(o=0),this._itemUsedCountTotal[n]=o+1,this._allItems.splice(t,1),r.default.eventManager.dispatchEventWith(s.default.ITEM_USED,e),e.destory(),this.doSerializeLater()}}},{key:"useItemByType",value:function(e){var t=this.getAItemByType(e);t&&this.useItem(t)}},{key:"addItem",value:function(e){if(e.isUsed)throw new Error("This item had been used!");e&&1!=e.property&&-1==this._allItems.indexOf(e)&&(this._allItems.push(e),console.log("\u6dfb\u52a0\u9053\u5177",e.name),r.default.eventManager.dispatchEventWith(s.default.ITEM_ADDED,e),this.doSerializeLater())}},{key:"removeItem",value:function(e){if(e.isUsed)throw new Error("This item had been used!");var t=this.allItems.indexOf(e);-1!=t&&(this._allItems.splice(t,1),e.destory(),r.default.eventManager.dispatchEventWith(s.default.ITEM_REMOVED,e),this.doSerializeLater())}},{key:"gameOver",value:function(){for(var e=0;e<this._allItems.length;e++){4==this._allItems[e].type&&(this._allItems.splice(e,1),e--)}this._inGameItemUsedCount={},this.doSerializeLater()}},{key:"doSerializeLater",value:function(){this._timeOut>=0&&clearTimeout(this._timeOut),this._timeOut=setTimeout(function(){r.default.itemManager.serializeData()},5e3)}},{key:"serializeData",value:function(){var e=[];this._allItems.forEach(function(t){e.push(t.type)}),r.default.dataManager.setData("__im_items",{items:e},!0)}},{key:"unserializeData",value:function(){var e=this;if(null!=this._itemFactor&&!0!==this._unserialized){this._unserialized=!0;var t=r.default.dataManager.getData("__im_items");if(t){var n=t.items;n&&0!=n.length&&n.forEach(function(t){var n=e._itemFactor.call(null,t);n&&e.addItem(n)})}}}},{key:"itemFactor",set:function(e){if(null!=this._itemFactor)throw new Error("\u8bf7\u52ff\u91cd\u590d\u8bbe\u7f6e\u9053\u5177\u5de5\u5382\u65b9\u6cd5");this._itemFactor=e,this.unserializeData()}},{key:"allItems",get:function(){return this._allItems.concat()}}]),e}());u=i([l],u),n.default=u,cc._RF.pop()},{"../../GameCoreEventNames":"GameCoreEventNames","../GameManager":"GameManager"}],ItemProp:[function(e,t,n){"use strict";cc._RF.push(t,"91442BnmOJHdJ+vmFfKfcH0","ItemProp"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator;o.ccclass,o.property;(function(e){e[e.ABSTRACT=1]="ABSTRACT",e[e.GLOBAL=2]="GLOBAL",e[e.IN_GAME=4]="IN_GAME"})(n.ItemProp||(n.ItemProp={})),cc._RF.pop()},{}],PopUpManager:[function(e,t,n){"use strict";cc._RF.push(t,"a385bbYdJpEPI+qXxNTQmtC","PopUpManager");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./GameManager"),s=e("../GameCoreEventNames"),c=e("./Utils"),l=e("../wechat/WXDevice"),u=cc._decorator,d=u.ccclass,f=(u.property,function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.useBlurEffect=!1,this.popUpType=1,this._popUpMap={},this._popUpCount=0,setInterval(this.checkPopUpNodes.bind(this),200)}return o(e,[{key:"createPopUpBg",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:160,t=cc.winSize,n=new cc.Node;n.width=t.width,n.height=t.height;var o=n.addComponent(cc.Graphics);if(o.fillColor=new cc.Color(0,0,0,e),o.lineWidth=0,cc.ENGINE_VERSION>="2.0.0"?o.fillRect(-t.width/2,-t.height/2,t.width,t.height):o.fillRect(0,0,t.width,t.height),o.stroke(),!0!==this.useBlurEffect)return n.addComponent(cc.BlockInputEvents),n;var a=new cc.Node;return a.width=t.width,a.height=t.height,a.addChild(n),a.addComponent(cc.BlockInputEvents),a.addChild(c.default.newPoint()),a}},{key:"addPopUp",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,a=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:160,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=cc.winSize,d=new cc.Vec2(0,0),f=cc.director.getScene().children[0],h=e.uuid;this._popUpMap[h]=[e,null,c,this.popUpType];var p=null;t&&((p=this.createPopUpBg(i)).y=d.y,p.x=d.x,p.group=e.group,f.addChild(p),this._popUpMap[h][1]=p),f.addChild(e),this._popUpCount++;var _=void 0;_=1==o?1:Math.min(u.width*o/e.width,u.height*o/e.height),e.stopAllActions();var y=cc.callFunc(function(){e.on(s.default.COMMON_CLOSE,a.nodeCloseEventHandler,a),p&&n&&p.on(cc.Node.EventType.TOUCH_END,a.popUpBgTapHandler,a),r.default.eventManager.dispatchEventWith(s.default.POP_UP_ADD,e)},this);switch(this.popUpType){case 0:e.x=d.x,e.y=d.y,e.scale=_,e.runAction(y);break;case 2:e.x=d.x-cc.winSize.width/2-e.width*_/2,e.y=d.y,e.scale=_,e.runAction(cc.sequence(cc.moveTo(.5,d.x,d.y).easing(cc.easeBackOut()),y));break;case 1:e.x=d.x,e.y=d.y,e.scale=.5,e.runAction(cc.sequence(cc.scaleTo(.5,_,_).easing(cc.easeBackOut()),y))}r.default.soundsManager.playSound(r.default.soundsManager.popUpSoundSource),r.default.canVibrate&&l.default.vibrateShort()}},{key:"popUpBgTapHandler",value:function(e){var t=e.currentTarget;for(var n in this._popUpMap){var o=this._popUpMap[n];if(o&&o[1]==t){var a=o[0];a&&a.dispatchEvent(new cc.Event(s.default.COMMON_CLOSE,!1))}}}},{key:"nodeCloseEventHandler",value:function(e){var t=e.currentTarget;this.removePopUp(t)}},{key:"removePopUp",value:function(e){if(e&&void 0!=this._popUpMap[e.uuid]){e.off(s.default.COMMON_CLOSE,this.nodeCloseEventHandler,this);var t=this._popUpMap[e.uuid][1];t&&t.off(cc.Node.EventType.TOUCH_END,this.popUpBgTapHandler,this);var n=this._popUpMap[e.uuid][2],o=this._popUpMap[e.uuid][3];if(delete this._popUpMap[e.uuid],this._popUpCount--,e.isValid){var a=cc.callFunc(function(){r.default.eventManager.dispatchEventWith(s.default.POP_UP_REMOVE,e),e&&e.getParent()&&(n?e.destroy():e.removeFromParent(!1)),t&&t.getParent()&&(n?t.destroy():t.removeFromParent(!1))});switch(e.stopAllActions(),o){case 0:e.runAction(a);break;case 2:var i=cc.winSize.width/2+e.width*e.scaleX/2;e.runAction(cc.sequence(cc.moveTo(.3,i,e.y).easing(cc.easeQuarticActionIn()),a));break;case 1:e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.3,.5,.5).easing(cc.easeBackIn()),cc.fadeTo(.3,0)),a))}}}}},{key:"checkPopUpNodes",value:function(){if(0!=this._popUpCount)for(var e in this._popUpMap){var t=this._popUpMap[e][0];t&&!t.isValid&&this.removePopUp(t)}}},{key:"popUpCount",get:function(){return this._popUpCount}}]),e}());f=i([d],f),n.default=f,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","../wechat/WXDevice":"WXDevice","./GameManager":"GameManager","./Utils":"Utils"}],PopUpType:[function(e,t,n){"use strict";cc._RF.push(t,"64da0P/0OZIbqw5ZNBvJI1C","PopUpType"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.NONE=0]="NONE",e[e.ZOOM=1]="ZOOM",e[e.SLIDE=2]="SLIDE"}(n.PopUpType||(n.PopUpType={})),cc._RF.pop()},{}],QQCM_gameInfo:[function(e,t,n){"use strict";cc._RF.push(t,"5b631nOlJBJOrSrgyVcNUZ0","QQCM_gameInfo"),Object.defineProperty(n,"__esModule",{value:!0});n.default={gameId:null,gameName:null,roomId:null,openId:null,seesionId:null,sex:0,accessTokenCode:0,accessToken:null,gameParam:null,QQVer:null,platform:null,model:null},cc._RF.pop()},{}],QQCM_getAvatarFromOpenId:[function(e,t,n){"use strict";cc._RF.push(t,"ceae7DMM5dDcaLifPvSXjDA","QQCM_getAvatarFromOpenId"),Object.defineProperty(n,"__esModule",{value:!0});var o=[],a=!1,i=function e(){if(!0!==a&&0!=o.length){var t=o.shift(),n=o.shift();a=!0,BK.MQQ.Account.getHeadEx(t,function(t,o){a=!1,n&&n(o),e()})}};n.QQCM_getAvatarFromOpenId=function(e,t){if(console.log("------\u3010QQCM\u3011 QQCM_getAvatarFromOpenId-------"),console.log(e),"undefined"!=typeof BK){var n="GameSandBox://_head/"+e+".jpg",a=BK.FileUtil.isFileExist(n);console.log(n+" is exit :"+a),a?t&&t(n):(o.push(e,t),i())}},cc._RF.pop()},{}],ResManager:[function(e,t,n){"use strict";cc._RF.push(t,"e3cc5LhZVZLxIlXa2sl4tdK","ResManager");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../base/GameValues"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.dataLen=0,this.mapLen=0,this.data=new Object,this.dataAry=new Array,this.otherAry=new Array,this.readyData=new Array}return o(e,[{key:"show",value:function(e,t,n){this.complete=t,this.caller=n,this.loadConfig(e)}},{key:"loadConfig",value:function(e){var t=this;cc.loader.loadRes(e,function(e,n){try{t.dataAry=n.json.resources,t.mapAry=n.json.map,t.otherAry=n.json.res,t.dataLen=t.dataAry.length,t.mapLen=t.mapAry.length,t.loaderFile(0)}catch(e){}})}},{key:"loaderFile",value:function(e){var t=this;switch(e){case 0:var n=this.dataAry[0];this.getSkeleton(n,function(o){t.data[n]=o,t.dataAry.shift(),t.dataAry.length>0?t.loaderFile(e):t.effectComplete()});break;case 1:n=this.mapAry[0];this.getLoadRes(n,function(o){t.data[n]=o,t.mapAry.shift(),t.mapAry.length>0?t.loaderFile(e):t.loadComplete()});break;case 2:n=this.otherAry[0];this.getLoadRes(n,function(o){t.data[n]=o,t.otherAry.shift(),t.otherAry.length>0&&t.loaderFile(e)});break;case 3:var o=this.readyData[0];1==o.type?this.getSkeleton(o.url,function(e){t.data[o.url]=e,t.readyData.shift(),t.readyData.length>0?t.loaderFile(3):t.readyBack()}):2==o.type&&this.getLoadRes(o.url,function(e){t.data[o.url]=e,t.readyData.shift(),t.readyData.length>0?t.loaderFile(3):t.readyBack()})}}},{key:"effectComplete",value:function(){this.loaderFile(1)}},{key:"loadComplete",value:function(){this.complete&&this.complete.apply(this.caller),this.loaderFile(2)}},{key:"getLoadRes",value:function(e,t){if(void 0!==e){var n=e+"?vesion="+r.default.gameVersion;cc.loader.load({url:n,type:"png"},function(e,n){e?cc.error(e):t(n)})}}},{key:"getServerImage",value:function(e,t){var n=this,o=this.data[e];o&&void 0!==o&&""!=o&&null!=o?t(o):this.getLoadRes(e,function(o){n.data[e]=o,t(o)})}},{key:"getConfig",value:function(e,t){var n=this,o=this.data[e];o&&void 0!==o&&""!=o&&null!=o?t(o):this.getSkeleton(e,function(o){n.data[e]=o,t(o)})}},{key:"getSkeleton",value:function(e,t){var n=[e+".png?vesion="+r.default.gameVersion,e+".atlas?vesion="+r.default.gameVersion,e+".json?vesion="+r.default.gameVersion];null!=n[0].match(/^https?:\/\//i)?cc.loader.load(n,function(n,o){if(n)for(var a=0;a<n.length;a++)cc.log("Error url ["+n[a]+"]: "+o.getError(n[a]));else{var i=new sp.SkeletonData,s=e.split("/");i.textureNames=[s[s.length-1]+".png"],i.textures=[o.getContent(e+".png?vesion="+r.default.gameVersion)],i.atlasText=o.getContent(e+".atlas?vesion="+r.default.gameVersion),i.skeletonJson=o.getContent(e+".json?vesion="+r.default.gameVersion),t(i)}}):cc.loader.loadRes(e,sp.SkeletonData,function(e,n){e?cc.error(e.message||e):t(n)})}},{key:"readyRes",value:function(e,t){this.readyData=e,this.readyBack=t,this.loaderFile(3)}},{key:"getAtlas",value:function(e,t){var n=this,o=this.data[e];o&&void 0!==o&&""!=o&&null!=o?t(o):cc.loader.loadRes(e,cc.SpriteAtlas,function(o,a){o?cc.error(o):(n.data[e]=a,t(a))})}},{key:"getRes",value:function(e,t){var n=this,o=this.data[e];o&&void 0!==o&&""!=o&&null!=o?t(o):cc.loader.loadRes(e,cc.SpriteFrame,function(o,a){o?cc.error(o):(n.data[e]=a,t(a))})}}]),e}());l=i([c],l),n.default=l,cc._RF.pop()},{"../base/GameValues":"GameValues"}],SceneManager:[function(e,t,n){"use strict";cc._RF.push(t,"ddac7RZgRZNE4KZKupiSmvK","SceneManager");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./GameManager"),c=e("../components/Comp_LoadingSceneMain"),l=cc._decorator,u=l.ccclass,d=(l.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._sceneStack=[],this._startLoadingTime=0}return o(e,[{key:"pushScene",value:function(e){this._sceneStack.push(e),this.loadScene(e)}},{key:"preloadScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;cc.director.preloadScene(e,function(e,t,n){},function(o){console.log("\u9884\u52a0\u8f7d\u573a\u666f\u5b8c\u6210",e,o),o?(console.log("\u573a\u666f"+s.default.sceneManager.currentSceneName+"\u52a0\u8f7d\u5931\u8d25"),null!=n&&n()):null!=t&&t()})}},{key:"popScene",value:function(){if(this._sceneStack.length>1){var e=this._sceneStack.pop(),t=this._sceneStack[this._sceneStack.length-1];return this.loadScene(t),e}return null}},{key:"dropScene",value:function(e){var t=this._sceneStack.indexOf(e);t>-1&&(t==this._sceneStack.length-1?this.popScene():this._sceneStack.splice(t,1))}},{key:"reset",value:function(){this._sceneStack=[],this._currentSceneName=null}},{key:"loadScene",value:function(e){if(this.loadingSceneName){if(this._isLoading)return;this._currentSceneName=e,this.showLoadingScene(),cc.director.preloadScene(e,function(t){console.log("err",t),t?(console.log("\u573a\u666f"+s.default.sceneManager.currentSceneName+"\u52a0\u8f7d\u5931\u8d25"),s.default.sceneManager._isLoading=!1,s.default.sceneManager.popScene()):s.default.sceneManager.sceneLoadedCallback(e)})}else this._currentSceneName=e,cc.director.loadScene(e)}},{key:"sceneLoadedCallback",value:function(e){if(this._currentSceneName==e){var t=(new Date).getTime();if(console.log("\u3010SceneManager\u3011sceneLoadedCallback",t-this._startLoadingTime),this.loadingSceneName&&t-this._startLoadingTime<i.MIN_LOADING_TIME)setTimeout(function(){s.default.sceneManager.sceneLoadedCallback(e)},1e3);else{var n=cc.find("Canvas");if(n){var o=n.getComponent(c.default);if(o)return console.log("\u3010sceneLoadedCallback\u3011\u91ca\u653e\u52a0\u8f7d\u573a\u666f"),o.doPreDestory(.3),void setTimeout(function(){s.default.sceneManager.showCurrentScene()},400)}this.showCurrentScene()}}}},{key:"showCurrentScene",value:function(){this._isLoading=!1,cc.director.loadScene(this._currentSceneName)}},{key:"showLoadingScene",value:function(){this._startLoadingTime=(new Date).getTime(),this._isLoading||(this._isLoading=!0,cc.director.loadScene(this.loadingSceneName))}},{key:"lockSence",value:function(){s.default.lockScene()}},{key:"unlockSence",value:function(e){s.default.unlockScene()}},{key:"currentSceneName",get:function(){return this._currentSceneName}},{key:"currentScene",set:function(e){this._sceneStack=[e],this._currentSceneName=e,this.loadScene(e)}},{key:"isLoading",get:function(){return this._isLoading}}]),e}());d.MIN_LOADING_TIME=2e3,d=i=r([u],d),n.default=d,cc._RF.pop()},{"../components/Comp_LoadingSceneMain":"Comp_LoadingSceneMain","./GameManager":"GameManager"}],ShareDataTypes:[function(e,t,n){"use strict";cc._RF.push(t,"d6dd0j8O09J87J0QAhugD3G","ShareDataTypes");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=(i.property,function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)});s.DATA_TYPE_RELAY=1,s=a([r],s),n.default=s,cc._RF.pop()},{}],ShareTypes:[function(e,t,n){"use strict";cc._RF.push(t,"01596ALvfhMLJx/wuRX1N3r","ShareTypes");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=(i.property,function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)});s.NORMAL="normal",s.LIFE_CARD="lifeCard",s.GAME_OVER="gameOver",s.SHARE_APP="shareApp",s.RELAY="relay",s.PK="pk",s.SEND_ITEM="sendItem",s.HONG_BAO="hongBao",s.ADD_BASE_SCORE="addBaseScore",s.ADD_SCORE="addScore",s=a([r],s),n.default=s,cc._RF.pop()},{}],SoundsManager:[function(e,t,n){"use strict";cc._RF.push(t,"154cevcE7hBhZdNbocxIlb0","SoundsManager");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./GameManager"),s=e("../base/GameValues"),c=cc._decorator,l=c.ccclass,u=(c.property,function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.popUpSoundSource=null,this.tapSoundSource=null,this.sceneBgSounds=[],this.sceneBgSoundURLs=[],this._originalMusicMuted=!1,this._musicMuted=!1,this._soundMuted=!1,this._musicVolume=1,this._soundVolume=1,this._audioClipMap={},this._groupMap={},setTimeout(this.init.bind(this),500)}return o(e,[{key:"init",value:function(){var e=r.default.dataManager.getData("__deer__soundMuted");console.log("\u3010__deer__soundMuted\u3011",e),!0===e&&this.muteSound(),!0===(e=r.default.dataManager.getData("__deer__musicMuted"))&&this.muteMusic(),setTimeout(this.initForWXModule.bind(this),2e3)}},{key:"initForWXModule",value:function(){var e=this;"undefined"!=typeof wx?(wx.onHide(function(){console.log("\u3010SoundsManager\u3011onHide"),e._originalMusicMuted=e._musicMuted,e.muteMusic()}),wx.onShow(function(){console.log("\u3010SoundsManager\u3011onShow"),e._originalMusicMuted||e.unmuteMusic(),3==s.default.currentPlatform&&e.musicContext.play()}),wx.onAudioInterruptionEnd(function(){cc.audioEngine.pauseMusic(),console.log("\u3010SoundsManager\u3011onAudioInterruptionEnd"),e._originalMusicMuted||e.unmuteMusic(),3==s.default.currentPlatform&&e.musicContext.play()})):setTimeout(this.initForWXModule.bind(this),2e3)}},{key:"pushSceneBgMusic",value:function(e){var t=void 0,n=this;if(this.sceneBgSoundURLs.length>0&&(t=this.sceneBgSoundURLs[this.sceneBgSoundURLs.length-1]),t!=e){if(this.sceneBgSoundURLs.length>0){var o=this.sceneBgSounds[this.sceneBgSounds.length-1];console.log("\u6682\u505c\u80cc\u666f\u97f3\u4e50",this.sceneBgSoundURLs[this.sceneBgSoundURLs.length-1]),o&&o.pause()}if(this.sceneBgSounds.push(null),this.sceneBgSoundURLs.push(e),null!=e.match(/^https?:\/\//i)){var a=e+".mp3?vesion="+s.default.gameVersion;cc.loader.load({url:a,type:"mp3"},function(t,o){n.sceneBgLoadedCallback(e,o)})}else{var i=e.replace(/^\/?resources\//,"");i=i.replace(/\.mp3$/,""),cc.loader.loadRes(i,function(t,o){n.sceneBgLoadedCallback(e,o)})}}}},{key:"sceneBgLoadedCallback",value:function(e,t){if(t){var n=new cc.AudioSource;3==s.default.currentPlatform&&"undefined"!=typeof BK?(this.musicContext||(this.musicContext=BK.createAudioContext()),null==e.match(/\.mp3$/i)&&(e+=".mp3"),this.musicContext.src="GameRes://"+cc.url.raw("resources/"+e),console.log("\u3010\u64ad\u653e\u97f3\u4e50\u3011GameRes://"+cc.url.raw("resources/"+e)),this.musicContext.loop=!0,this.musicContext.play()):(n.clip=t,n.loop=!0,this._musicMuted&&(n.volume=0),n.play());var o=this.sceneBgSoundURLs.indexOf(e);-1==o?n.stop():(o>=0&&(this.sceneBgSounds[o]=n),o!=this.sceneBgSoundURLs.length-1&&n.pause()),console.log("\u64ad\u653e\u80cc\u666f\u97f3\u4e50",e),this._musicMuted&&this.refreshBgMusic()}}},{key:"popSceneBgMusic",value:function(){if(!(this.sceneBgSoundURLs.length<=1)){var e=this.sceneBgSounds.pop();e&&e.stop(),this.sceneBgSoundURLs.pop(),this.refreshBgMusic()}}},{key:"refreshBgMusic",value:function(){if(0!=this.sceneBgSoundURLs.length){var e=this.sceneBgSounds[this.sceneBgSounds.length-1];e&&(console.log("\u3010SoundsManager\u3011refreshBgMusic"),console.log("\tbgAudio.isPlaying="+e.isPlaying),console.log("\tbgAudio.volume="+e.volume),this._musicMuted?(e.volume=0,3==s.default.currentPlatform?(console.log("####### QQQQQQQQQQQ #######",this.musicContext,this.musicContext.muted),this.musicContext&&(this.musicContext.volume=0)):e.pause()):(e.volume=this._musicVolume,3==s.default.currentPlatform?(console.log("####### QQQQQQQQQQQ #######"),this.musicContext&&(this.musicContext.volume=this._musicVolume)):e.resume()),console.log("bgAudio.volume="+e.volume))}}},{key:"muteMusic",value:function(){this._musicMuted||(this._musicMuted=!0,this.refreshBgMusic(),r.default.dataManager.setData("__deer__musicMuted",this._musicMuted,!0))}},{key:"unmuteMusic",value:function(){this._musicMuted&&(this._musicMuted=!1,this.refreshBgMusic(),r.default.dataManager.setData("__deer__musicMuted",this._musicMuted,!0))}},{key:"muteSound",value:function(){this._soundMuted||(this._soundMuted=!0,r.default.dataManager.setData("__deer__soundMuted",this._soundMuted,!0))}},{key:"unmuteSound",value:function(){this._soundMuted&&(this._soundMuted=!1,r.default.dataManager.setData("__deer__soundMuted",this._soundMuted,!0))}},{key:"playSound",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;if(e&&!this._soundMuted){var i=this;if(void 0!=this._audioClipMap[e]){var r=this._audioClipMap[e];isNaN(a)||(r.volume=a),this.playSound_do(e,t,o)}else if(console.log("\u3010playSound\u3011load sound",e,t,o),-1!=e.indexOf("https")){var c=e+".mp3?vesion="+s.default.gameVersion;cc.loader.load({url:c,type:"mp3"},function(n,r){r&&(i._audioClipMap[e]={audio:r,volume:a},i.playSound_do(e,t,o))})}else{var l=e.replace(/^\/?resources\//,"");if(3==s.default.currentPlatform&&"undefined"!=typeof BK)return this.effectContext||(this.effectContext=BK.createAudioContext({type:"effect"})),null==l.match(/\.mp3$/i)&&(l+=".mp3"),this.effectContext.src="GameRes://"+cc.url.raw("resources/"+l),console.log("\u3010\u64ad\u653e\u97f3\u6548\u3011GameRes://"+cc.url.raw("resources/"+l)),void this.effectContext.play({});l=l.replace(/\.mp3$/,""),console.log("playSound:",l),cc.loader.loadRes(l,function(i,r){r&&(n._audioClipMap[e]={audio:r,volume:a},n.playSound_do(e,t,o))})}}}},{key:"playSound_do",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this._audioClipMap[e];if(o){var a=o.audio;if(a){this.stopSound(e);var i=new cc.AudioSource;if(i.clip=a,t&&(i.loop=!0,n||(n="loop__"+Math.random())),"string"==typeof n&&n.length>0){var r=this._groupMap[n];r&&r.stop(),this._groupMap[n]=i}isNaN(o.volume)?i.volume=this._soundVolume:i.volume=o.volume,i.play()}}}},{key:"stopSound",value:function(e){var t=this._audioClipMap[e];if(t&&t.audio)for(var n in this._groupMap){var o=this._groupMap[n];o&&o.clip==t.audio&&(o.stop(),delete this._groupMap[n])}var a=this._groupMap[e];a&&(a.stop(),delete this._groupMap[e])}},{key:"reset",value:function(){for(var e in this._audioClipMap={},this._groupMap){var t=this._groupMap[e];t&&t.stop()}this._groupMap={}}},{key:"playTapSound",value:function(){this.tapSoundSource&&this.playSound(this.tapSoundSource)}},{key:"musicMuted",get:function(){return this._musicMuted}},{key:"soundMuted",get:function(){return this._soundMuted}},{key:"musicVolume",get:function(){return this._musicVolume},set:function(e){e>=0&&this._musicVolume!=e&&(this._musicVolume=e,this.refreshBgMusic())}},{key:"soundVolume",get:function(){return this._soundVolume},set:function(e){e>=0&&this._soundVolume!=e&&(this._soundVolume=e)}}]),e}());u=i([l],u),n.default=u,cc._RF.pop()},{"../base/GameValues":"GameValues","./GameManager":"GameManager"}],SyncDataToServerByDeerSDK:[function(e,t,n){"use strict";cc._RF.push(t,"4b496gD/OJLM6G8TBRk0JAA","SyncDataToServerByDeerSDK");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../deer/DeerSDK"),c=e("../deer/DeerSDKEventNames"),l=e("../managers/GameManager"),u=e("../GameCoreEventNames"),d=cc._decorator,f=d.ccclass,h=(d.property,i=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._forbidToSyncDataFromService=!1,this._isReady=!1,this._lastSyncTime=0,i._instance)throw new Error("Please use static instance property");i._instance=this,this.doInit()}return o(e,[{key:"doInit",value:function(){var e=this;s.default.instance.isHandshakeCompleted?e.doInit2():s.default.instance.addEventListener(c.default.HANDSHAKE_COMPLETE,function(t){e.doInit2()},this,0,!0)}},{key:"forbidToSyncDataFromService",value:function(){this._forbidToSyncDataFromService=!0}},{key:"doInit2",value:function(){this._forbidToSyncDataFromService||s.default.instance.isNewUser?(this._isReady=!0,l.default.eventManager.addEventListener(u.default.DATA_REMOTE_CHANGE,this.dataManagerSerializeHandler,this)):this.syncDataFromServiceToDataManager();var e=this;"undefined"!=typeof wx&&(wx.onHide(function(){console.log("\u3010SyncDataToServerByDeerSDK\u3011onHide"),e.syncDataFromDataManagerToService()}),wx.onClose&&wx.onClose(function(){console.log("\u3010SyncDataToServerByDeerSDK\u3011onClose"),e.syncDataFromDataManagerToService()}))}},{key:"syncDataFromServiceToDataManager",value:function(){var e=this;s.default.instance.game_getDataFromService(function(t){try{e._lastSyncValue=t;var n=JSON.parse(e._lastSyncValue);for(var o in n)l.default.dataManager.setData(o,n[o],!0,!1,!0),l.default.eventManager.dispatchEventWith(u.default.DATA_REMOTE_RETRIVE)}catch(e){}e._isReady=!0,l.default.eventManager.addEventListener(u.default.DATA_REMOTE_CHANGE,e.dataManagerSerializeHandler,e)},function(){console.log("\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u6e38\u620f\u6570\u636e\u5931\u8d25\uff01"),e._isReady=!0,l.default.eventManager.addEventListener(u.default.DATA_REMOTE_CHANGE,e.dataManagerSerializeHandler,e)})}},{key:"dataManagerSerializeHandler",value:function(e){console.log("\u6570\u636e\u4e2d\u5fc3\u672c\u5730\u6570\u636e\u5e8f\u5217\u5316\u4e8b\u4ef6\u63a7\u5236");var t=(new Date).getTime();t-this._lastSyncTime>2e4&&(this._lastSyncTime=t,this.syncDataFromDataManagerToService())}},{key:"syncDataFromDataManagerToService",value:function(){console.log("\u540c\u6b65\u672c\u5730\u6570\u636e\u5230\u670d\u52a1\u5668"),this._lastTrySyncValue=l.default.dataManager.getDataNeedSyncToServer(),this._lastTrySyncValue!=this._lastSyncValue&&(console.log("this._lastTrySyncValue != this._lastSyncValue"),s.default.instance.game_saveDataToServiceNow(this._lastTrySyncValue,this.syncDataFromDataManagerToService_suc.bind(this)))}},{key:"syncDataFromDataManagerToService_suc",value:function(){this._lastSyncValue=this._lastTrySyncValue,this._lastTrySyncValue=null}},{key:"isReady",get:function(){return this._isReady}}],[{key:"instance",get:function(){return i._instance||new i,i._instance}}]),e}());h=i=r([f],h),n.default=h,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","../deer/DeerSDK":"DeerSDK","../deer/DeerSDKEventNames":"DeerSDKEventNames","../managers/GameManager":"GameManager"}],SyncDataToWXCloud:[function(e,t,n){"use strict";cc._RF.push(t,"5bd90a6SapARL6thhYqrHiK","SyncDataToWXCloud");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../deer/DeerSDK"),c=e("../deer/DeerSDKEventNames"),l=e("../managers/GameManager"),u=e("../GameCoreEventNames"),d=cc._decorator,f=d.ccclass,h=(d.property,i=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cloudData={},this._forbidToSyncDataFromService=!1,this._isReady=!1,this._lastSyncTime=0,i._instance)throw new Error("Please use static instance property");i._instance=this;try{wx.cloud.init({})}catch(e){}this.doInit()}return o(e,[{key:"doInit",value:function(){var e=this;s.default.instance.isReady?this.doInit2():s.default.instance.addEventListener(c.default.READY,function(t){e.doInit2()},this,0,!0)}},{key:"forbidToSyncDataFromService",value:function(){this._forbidToSyncDataFromService=!0}},{key:"doInit2",value:function(){l.default.eventManager.addEventListener(u.default.DATA_REMOTE_CHANGE,this.dataManagerSerializeHandler,this),this._forbidToSyncDataFromService?this._isReady=!0:this.syncDataFromServiceToDataManager();var e=this;"undefined"!=typeof wx&&(wx.onHide(function(){console.log("\u3010SyncDataToWXCloud\u3011onHide"),e.syncDataFromDataManagerToService()}),wx.onClose&&wx.onClose(function(){console.log("\u3010SyncDataToWXCloud\u3011onClose"),e.syncDataFromDataManagerToService()}))}},{key:"syncDataFromServiceToDataManager",value:function(){var e=this,t=s.default.instance.game_dataID;if(!t)return this._isReady=!0,void console.log("\u3010SyncDataToWXCloud\u3011fileID\u4e0d\u5b58\u5728",t);try{wx.cloud.downloadFile({fileID:t,success:function(n){console.log("\u3010SyncDataToWXCloud\u3011\u4ece\u5fae\u4fe1Cloud\u4e0b\u8f7d\u6570\u636e\u6210\u529f",t),e.readFile(n.tempFilePath)},fail:function(e){console.log("\u3010SyncDataToWXCloud\u3011\u4ece\u5fae\u4fe1Cloud\u4e0b\u8f7d\u6570\u636e\u5931\u8d25",e)},complete:function(){e._isReady=!0}})}catch(e){this._isReady=!0,console.log("\u3010SyncDataToWXCloud\u3011\u4ece\u5fae\u4fe1Cloud\u4e0b\u8f7d\u6570\u636e\u5931\u8d25")}}},{key:"readFile",value:function(e){var t=this;try{wx.getFileSystemManager().readFile({filePath:e,encoding:"utf-8",success:function(e){try{t._cloudData=JSON.parse(e.data),Object.keys(t._cloudData).forEach(function(e){l.default.dataManager.setData(e,t._cloudData[e],!0,!1,!0)}),console.log("\u3010SyncDataToWXCloud\u3011\u89e3\u6790\u6570\u636e\u6587\u4ef6\u6210\u529f",t._cloudData)}catch(e){console.log("\u3010SyncDataToWXCloud\u3011\u89e3\u6790\u6570\u636e\u6587\u4ef6\u5931\u8d25")}},fail:function(e){console.log("\u3010SyncDataToWXCloud\u3011\u8bfb\u53d6\u6570\u636e\u6587\u4ef6\u5931\u8d25")}})}catch(e){console.log("\u3010SyncDataToWXCloud\u3011\u8bfb\u53d6\u6570\u636e\u6587\u4ef6\u5931\u8d25")}}},{key:"dataManagerSerializeHandler",value:function(e){console.log("\u6570\u636e\u4e2d\u5fc3\u672c\u5730\u6570\u636e\u5e8f\u5217\u5316\u4e8b\u4ef6\u63a7\u5236");var t=(new Date).getTime();t-this._lastSyncTime>4e4&&(this._lastSyncTime=t,this.syncDataFromDataManagerToService())}},{key:"syncDataFromDataManagerToService",value:function(){var e=this;if(this._lastTrySyncValue=l.default.dataManager.getDataNeedSyncToServer(),this._lastTrySyncValue!=this._lastSyncValue)try{this._cloudData||(this._cloudData={});var t=JSON.parse(this._lastTrySyncValue);Object.keys(t).forEach(function(n){e._cloudData[n]=t[n]}),console.log("\u3010SyncDataToWXCloud\u3011\u5199\u5165\u672c\u5730\uff0c\u51c6\u5907\u4e0a\u4f20",this._cloudData);var n=wx.env.USER_DATA_PATH+"/temp_file_to_wx_cloud.json";wx.getFileSystemManager().writeFile({filePath:n,data:JSON.stringify(this._cloudData),encoding:"utf-8",success:function(t){var o="ugd__"+s.default.instance.game_id+"_"+s.default.instance.userVO.id;console.log("\u3010SyncDataToWXCloud\u3011\u5199\u5165\u672c\u5730\u6210\u529f\uff0c\u5f00\u59cb\u4e0a\u4f20");try{wx.cloud.uploadFile({cloudPath:o,filePath:n,success:function(t){e._lastSyncValue=e._lastTrySyncValue,console.log(t.fileID),s.default.instance.game_saveDataIDToService(t.fileID),console.log("\u3010SyncDataToWXCloud\u3011\u4e0a\u4f20\u6570\u636e\u6210\u529f",t)},fail:function(e){console.log("\u3010SyncDataToWXCloud\u3011\u4e0a\u4f20\u6570\u636e\u5931\u8d25")}})}catch(e){console.log("\u3010SyncDataToWXCloud\u3011\u4e0a\u4f20\u6570\u636e\u5931\u8d25")}},fail:function(e){console.log("\u3010SyncDataToWXCloud\u3011\u5199\u5165\u672c\u5730\u5931\u8d25")}})}catch(e){}}},{key:"isReady",get:function(){return this._isReady}}],[{key:"instance",get:function(){return i._instance||new i,i._instance}}]),e}());h=i=r([f],h),n.default=h,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","../deer/DeerSDK":"DeerSDK","../deer/DeerSDKEventNames":"DeerSDKEventNames","../managers/GameManager":"GameManager"}],TagManager:[function(e,t,n){"use strict";cc._RF.push(t,"c3b6czPCihFMY562jnaC1hs","TagManager");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./GameManager"),s=e("../GameCoreEventNames"),c=cc._decorator,l=c.ccclass,u=(c.property,function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._channelMap={},this._channelValueMap={},this._removeForeverMap={}}return o(e,[{key:"setTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._removeForeverMap.hasOwnProperty(e)||this._channelValueMap.hasOwnProperty(e)&&this._channelValueMap[e]==t||(this._channelValueMap[e]=t,r.default.eventManager.dispatchEventWith(s.default.TAG_CHANGE,e))}},{key:"removeTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._removeForeverMap.hasOwnProperty(e)||(this._channelValueMap.hasOwnProperty(e)&&(delete this._channelValueMap[e],r.default.eventManager.dispatchEventWith(s.default.TAG_CHANGE,e)),t&&(this._removeForeverMap[e]=!0))}},{key:"hasTag",value:function(e){if(this._channelValueMap.hasOwnProperty(e))return!0;for(var t=this.getAllSubTagChannels(e),n=0,o=t.length;n<o;n++){var a=t[n];if(this._channelValueMap.hasOwnProperty(a))return!0}return!1}},{key:"getAllParentTagChannels",value:function(e){for(var t=new Array;e&&-1==t.indexOf(e)&&this._channelMap.hasOwnProperty(e);)(e=this._channelMap[e])&&t.push(e);return t}},{key:"getAllSubTagChannels",value:function(e){var t=this,n=new Array;if(!e)return n;var o={};return Object.keys(this._channelMap).forEach(function(n){n!=e&&function n(a,i){if(a&&!(i.indexOf(a)>=0)){var r=t._channelMap[a];i.push(a),r==e?i.forEach(function(e){o[e]=!0}):n(r,i)}}(n,new Array)}),Object.keys(o)}},{key:"getTagData",value:function(e){return this._channelValueMap.hasOwnProperty(e)?this._channelValueMap[e]:null}},{key:"registerTag",value:function(e,t){if(this._channelMap.hasOwnProperty(e)&&this._channelMap[e]!=t)throw new Error(e+"'s parent has set to "+this._channelMap[e]);this._channelMap[e]=t}},{key:"registerTags",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var o=0;o<t.length-1;o++)this.registerTag(t[o],t[o+1])}},{key:"unregisterTag",value:function(e){this._channelMap.hasOwnProperty(e)&&(delete this._channelMap[e],r.default.eventManager.dispatchEventWith(s.default.TAG_CHANGE,e))}},{key:"reset",value:function(){this._channelValueMap={},this._removeForeverMap={},r.default.eventManager.dispatchEventWith(s.default.TAG_CHANGE)}}]),e}());u=i([l],u),n.default=u,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","./GameManager":"GameManager"}],TextureRenderUtils:[function(e,t,n){"use strict";cc._RF.push(t,"a50b44DuNFPoIKZSsbyviv1","TextureRenderUtils");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},s=function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../wechat/WXUtils"),l=e("../wechat/WXImage"),u=cc._decorator,d=u.ccclass,f=(u.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._canvas=null,this.succ=null}return o(e,[{key:"init",value:function(e,t){this.camera=null,this._canvas=null,this.texture=null;var n=new cc.RenderTexture,o=cc.game._renderContext,a=Math.floor(t.width),i=Math.floor(t.height);n.initWithSize(a,i,o.STENCIL_INDEX8),this.camera=e,this.camera.targetTexture=n,this.texture=n}},{key:"initImage",value:function(){var e=this._canvas.toDataURL("image/png");return document.createElement("img").src=e,e}},{key:"createSprite",value:function(e,t){return s(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,a,i,r,s,c=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=this.texture.width,a=this.texture.height,this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=o,this._canvas.height=a),i=this._canvas.getContext("2d"),this.camera.render(e),r=this.texture.readPixels(),s=i.createImageData(o,a),setTimeout(function(){for(var e=4*o,n=0;n<a;n++)for(var l=(a-1-n)*o*4,u=n*o*4,d=0;d<e;d++)s.data[u+d]=r[l+d];i.putImageData(s,0,0),setTimeout(function(){t(c._canvas)},.1)},.1);case 8:case"end":return n.stop()}},n,this)}))}},{key:"saveFile",value:function(e,t,n,o){var a=this;if(cc.sys.platform===cc.sys.WECHAT_GAME){var i={x:0,y:0,width:Math.floor(t),height:Math.floor(n),destWidth:Math.floor(t),destHeight:Math.floor(n),fileType:"png",quality:.8,success:function(e){o(e.tempFilePath),c.default.hideLoading(),a.camera=null}};e.toTempFilePath(i)}}},{key:"startScreen",value:function(e,t){return s(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o,a,i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.succ=t,c.default.showLoading("\u52a0\u8f7d\u4e2d"),o=new cc.Node,a=o.addComponent(cc.Camera),e.addChild(o),this.init(a,e),this.createSprite(e,function(t){i.saveFile(t,e.width,e.height,i.succ),e.removeChild(o)});case 7:case"end":return n.stop()}},n,this)}))}},{key:"saveScreen",value:function(e){l.default.saveImageToPhotosAlbum(e)}},{key:"clearCanvas",value:function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)}},{key:"readBase64File",value:function(e,t){wx.getFileSystemManager().readFile({filePath:this.getPhotoFromLocalByName(e),encoding:"utf8",success:function(e){console.log(e),t&&t(e.data)},fail:function(e){console.log("photo data error")}})}},{key:"writeBase64File",value:function(e,t,n){var o=this.getPhotoFromLocalByName(e);wx.getFileSystemManager().writeFile({filePath:o,data:t,encoding:"utf8",success:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u6210\u529f"),n&&n()},fail:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u5931\u8d25",e)}})}},{key:"saveFileToLocal",value:function(e,t,n){var o=this,a=function(){wx.getFileSystemManager().saveFile({tempFilePath:e,filePath:i,success:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u6210\u529f",i),n&&n(i)},fail:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u5931\u8d25",e)}})},i=this.getPhotoFromLocalByName(t);wx.getFileSystemManager().access({path:i,success:function(e){console.log("\u6587\u4ef6\u5b58\u5728"),o.unlinkPhotoFile(t,a)},fail:function(e){console.log("\u6587\u4ef6\u4e0d\u5b58\u5728",e),a()}})}},{key:"judgeAccessFile",value:function(e,t){var n=this.getPhotoFromLocalByName(e);wx.getFileSystemManager().access({path:n,success:function(e){t&&t(!0)},fail:function(e){t&&t(!1)}})}},{key:"getPhotoFromLocalByName",value:function(e){return wx.env.USER_DATA_PATH+"/"+e+".png"}},{key:"unlinkPhotoFile",value:function(e,t){var n=this.getPhotoFromLocalByName(e);wx.getFileSystemManager().unlink({filePath:n,success:function(e){console.log("\u5220\u9664\u6587\u4ef6\u6210\u529f"),t&&t()},fail:function(e){console.log("\u5220\u9664\u6587\u4ef6\u5931\u8d25",e)}})}}],[{key:"instance",get:function(){return this.textureRenderUtils}}]),e}());f.textureRenderUtils=new i,f=i=r([d],f),n.default=f,cc._RF.pop()},{"../wechat/WXImage":"WXImage","../wechat/WXUtils":"WXUtils"}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"9f7c0EPgJBJLb2asY1+y12v","Utils");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,l=(s.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"getSnapshot",value:function(){var e=new cc.Node;e.width=cc.winSize.width,e.height=cc.winSize.height;var t=e.addComponent(cc.Sprite),n=cc.Camera.findCamera(cc.director.getScene()),o=cc.game._renderContext,a=new cc.RenderTexture;return a.initWithSize(cc.winSize.width,cc.winSize.height,o.STENCIL_INDEX8),n.targetTexture=a,t.spriteFrame=new cc.SpriteFrame(a),n.render(cc.director.getScene()),n.targetTexture=null,e}},{key:"toScreenRect",value:function(e){var t=cc.winSize,n=e.clone();console.log(n.x,n.y,n.width,n.height,n.xMin,n.yMax),n.x=e.xMin,n.y=t.height-n.yMax;cc.view.getFrameSize();var o=i.getCanvasScaleFactor();return n.x*=o,n.y*=o,n.width*=o,n.height*=o,n}},{key:"fromScreenRect",value:function(e){if(!e)return null;cc.winSize;var t=e.clone(),n=cc.view.getFrameSize();t.y=n.height-t.y-t.height;var o=i.getCanvasScaleFactor();return t.x/=o,t.y/=o,t.width/=o,t.height/=o,new cc.Rect(t.x,t.y,t.width,t.height)}},{key:"toInt",value:function(e){var t=parseInt(""+e);return isNaN(t)&&(t=0),t}},{key:"scaleContentAuto",value:function(e){var t=cc.winSize,n=t.height/t.width;console.log("\u3010scaleContentAuto\u3011",1334/750,n),n>1334/750&&(e.scale=t.width/750)}},{key:"getCanvasScaleFactor",value:function(){var e=!0;try{e=cc.director.getScene().children[0].getComponent(cc.Canvas).fitHeight}catch(e){}var t=cc.view.getFrameSize();return e?t.height/cc.winSize.height:t.width/cc.winSize.width}},{key:"labelStringToValue",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!isNaN(t)){var n=parseInt(e.string);if((isNaN(n)||n<0)&&(n=0),n!=t){var o=e.uuid;clearInterval(this._labelToValueMap[o]);var a=(t-n)/10,r=0;this._labelToValueMap[o]=setInterval(function(){10==++r?(e.string=""+t,clearInterval(i._labelToValueMap[o])):e.string=""+(n+Math.floor(a*r))},50)}}}},{key:"newPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new cc.Node;if(t.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame("https://deer-cdn.youkongwan.com/common/blank_debug.png"),t.width=2,t.height=2,e){var n=t.addComponent(cc.Widget);n.isAlignTop=!0,n.top=0,n.isAlignLeft=!0,n.left=0,n.isAlignRight=!0,n.right=0,n.isAlignBottom=!0,n.bottom=0,n.alignMode=cc.Widget.AlignMode.ALWAYS}return t}},{key:"positionToPosition",value:function(e,t,n){return(e=new cc.Vec2(e.x,e.x)).x+=t.width*t.anchorX,e.y+=t.height*t.anchorY,e=t.convertToWorldSpace(e),n&&((e=n.convertToNodeSpace(e)).x-=n.width*n.anchorX,e.y-=n.height*n.anchorY),e}},{key:"iphoneXTopBarHeight",get:function(){return 44}},{key:"iphoneBottomBarHeight",get:function(){return/iphone/gi.test(navigator.userAgent)&&devicePixelRatio&&3===devicePixelRatio&&375===screen.width&&812===screen.height?34:/iphone/gi.test(navigator.userAgent)&&devicePixelRatio&&3===devicePixelRatio&&414===screen.width&&896===screen.height?34:/iphone/gi.test(navigator.userAgent)&&devicePixelRatio&&2===devicePixelRatio&&414===screen.width&&896===screen.height?34:0}},{key:"isIphoneX",get:function(){try{return/iphone/gi.test(navigator.userAgent)&&812==screen.height&&375==screen.width}catch(e){}return!1}}]),e}());l._labelToValueMap={},l=i=r([c],l),n.default=l,cc._RF.pop()},{}],WXBannerAdBase:[function(e,t,n){"use strict";cc._RF.push(t,"787b2BpP3tJV6nz/q36OYKm","WXBannerAdBase");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../GameCoreLocation"),c=e("../managers/event/EventDispacher"),l=cc._decorator,u=l.ccclass,d=(l.property,i=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.GameCoreLocation.BOTTOM_CENTER,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l._maxHeight=0,l._maxWidth=0,l.borderWeight=2,l._vertialIndent=0,l._horizontalIndent=0,l._isShowing=!1,i._ads.push(l),l._adID=e,l._location=n,l._vertialIndent=o,l._horizontalIndent=a,l._maxHeight=r,l._maxWidth=c,l.createAd(),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default),o(t,[{key:"createAd",value:function(){}},{key:"relayout",value:function(){}},{key:"next",value:function(){}},{key:"show",value:function(){}},{key:"hide",value:function(){}},{key:"destory",value:function(){if(!this._destoried){this._destoried=!0;var e=i._ads.indexOf(this);e>=0&&i._ads.splice(e,1),function e(t,n,o){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in a)return a.value;var r=a.get;return void 0!==r?r.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destory",this).call(this)}}},{key:"bannerAd",get:function(){return this._bannerAd}},{key:"adRect",get:function(){return this._adRect}},{key:"adWidth",get:function(){return this._adRect?this._adRect.width:0}},{key:"adHeight",get:function(){return this._adRect?this._adRect.height:0}},{key:"isShowing",get:function(){return this._isShowing}}],[{key:"currentAd",get:function(){return 0==i._ads.length?null:i._ads[i._ads.length-1]}}]),t}());d._ads=[],d=i=r([u],d),n.default=d,cc._RF.pop()},{"../GameCoreLocation":"GameCoreLocation","../managers/event/EventDispacher":"EventDispacher"}],WXBannerAd:[function(e,t,n){"use strict";cc._RF.push(t,"ab3feCXHkhAxJeJaGFNbXcg","WXBannerAd");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./WXEventNames"),s=e("../managers/Utils"),c=e("../GameCoreLocation"),l=e("./WXBannerAdBase"),u=cc._decorator,d=u.ccclass,f=(u.property,function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._firstResizeDone=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),o(t,[{key:"createAd",value:function(){var e=this;if("undefined"!=typeof wx){if(null==this._bannerAd){var t=cc.view.getFrameSize(),n=cc.winSize,o=0;o=this._maxHeight>0?960/334*this._maxHeight:n.width;var a=s.default.getCanvasScaleFactor();o*=a,o=Math.min(t.width-2*this.borderWeight,o);var i=0,r=0;switch(this._location){case c.GameCoreLocation.BOTTOM_CENTER:i=(t.width-o)/2,r=t.height;break;case c.GameCoreLocation.TOP_CENTER:i=(t.width-o)/2,r=0}i+=this.borderWeight,r+=this.borderWeight,o-=2*this.borderWeight,console.log("----  \u5fae\u4fe1banner\u5e7f\u544a ----"),console.log("-  init  -"),console.log(i,r,"adW="+o,"CanvasScaleFactor="+a),console.log("-  done  -");var l={left:i,top:r};l.width=o,this._bannerAd=wx.createBannerAd({adUnitId:this._adID,style:l})}this._bannerAd&&(this._bannerAd.onLoad(function(){e._destoried||e.adLoadCallback()}),this._bannerAd.onResize(function(t){e._destoried||e.adResizeCallback(t)}),this._bannerAd.onError(function(t){e._destoried||e.adErrorCallback(t)}))}}},{key:"relayout",value:function(){if(console.log("----  \u5fae\u4fe1banner\u5e7f\u544a ----"),console.log("-  relayout  -"),this._bannerAd&&this._bannerAd.style){var e=this._bannerAd.style.realWidth,t=this._bannerAd.style.realHeight,n=this._bannerAd.style.width;if(isNaN(n)||n<=0||isNaN(e)||isNaN(t))return this.dispatchEventWith(r.default.BANNER_AD_ERROR),void this.destory();console.log("\u3010WXBannerAd\u3011rw, rh, maxHeight",e,t,this._maxHeight);var o=cc.view.getFrameSize(),a=cc.winSize;console.log("frame size",o),console.log("window size",a);var i=0,l=0;switch(this._location){case c.GameCoreLocation.BOTTOM_CENTER:i=(o.width-e)/2,l=o.height-t-this.borderWeight;break;case c.GameCoreLocation.TOP_CENTER:i=(o.width-e)/2,l=this.borderWeight}i+=this._horizontalIndent,l+=this._vertialIndent,l-=s.default.iphoneBottomBarHeight,i=Math.floor(i),l=Math.floor(l),this._bannerAd&&(this._bannerAd.style.left=i,this._bannerAd.style.top=l),console.log("this._bannerAd.style=",this._bannerAd.style),this._adRect=new cc.Rect(i-this.borderWeight,l-this.borderWeight,e+2*this.borderWeight,t+2*this.borderWeight),this.dispatchEventWith(r.default.BANNER_AD_RESIZE)}}},{key:"next",value:function(){console.log("----  \u5fae\u4fe1banner\u5e7f\u544a ----"),console.log("-  next  -"),console.log("this._isShowing="+this._isShowing),this.dispatchEventWith(r.default.BANNER_AD_NEXT)}},{key:"show",value:function(){this._destoried||(console.log("----  \u5fae\u4fe1banner\u5e7f\u544a ----"),console.log("-  show  -"),console.log("this._isShowing="+this._isShowing),this._bannerAd&&this._firstResizeDone&&this._bannerAd.show(),this._isShowing=!0,this.dispatchEventWith(r.default.BANNER_AD_SHOW))}},{key:"hide",value:function(){this._destoried||(console.log("----  \u5fae\u4fe1banner\u5e7f\u544a ----"),console.log("-  hide  -"),console.log("this._isShowing="+this._isShowing),this._bannerAd&&this._firstResizeDone&&this._bannerAd.hide(),this._isShowing=!1,this.dispatchEventWith(r.default.BANNER_AD_HIDE,this))}},{key:"destory",value:function(){this._destoried||(function e(t,n,o){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in a)return a.value;var r=a.get;return void 0!==r?r.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destory",this).call(this),console.log("----  \u5fae\u4fe1banner\u5e7f\u544a ----"),console.log("-  destroy  -"),this._bannerAd&&(this._bannerAd.destroy(),this._bannerAd=null))}},{key:"adLoadCallback",value:function(){console.log("----  \u5fae\u4fe1banner\u5e7f\u544a ----"),console.log("-  adLoadCallback  -")}},{key:"adResizeCallback",value:function(e){console.log("----  \u5fae\u4fe1banner\u5e7f\u544a ----"),console.log("-  adResizeCallback  -"),console.log(e),0==this._firstResizeDone&&(this._firstResizeDone=!0,this._isShowing?this._bannerAd.show():this._bannerAd.hide()),setTimeout(this.relayout.bind(this),1e3)}},{key:"adErrorCallback",value:function(e){console.log("----  \u5fae\u4fe1banner\u5e7f\u544a ----"),console.log("-  adErrorCallback  -"),console.log(e),this.dispatchEventWith(r.default.BANNER_AD_ERROR)}}],[{key:"currentAd",get:function(){return 0==l.default._ads.length?null:l.default._ads[l.default._ads.length-1]}}]),t}());f=i([d],f),n.default=f,cc._RF.pop()},{"../GameCoreLocation":"GameCoreLocation","../managers/Utils":"Utils","./WXBannerAdBase":"WXBannerAdBase","./WXEventNames":"WXEventNames"}],WXCore:[function(e,t,n){"use strict";cc._RF.push(t,"d3a2egjsyRI/YHEaE7VGA0g","WXCore");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=(i.property,function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)});s=a([r],s),n.default=s,cc._RF.pop()},{}],WXData:[function(e,t,n){"use strict";cc._RF.push(t,"9b453cNU0JFT6ifHCufL7xo","WXData");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"fromAppID",get:function(){if(console.log("----  WXData ----"),console.log("-  fromAppID  -"),"undefined"==typeof wx)return null;if(void 0==this._fromAppID){var e=wx.getLaunchOptionsSync();if(e&&e.referrerInfo){var t=e.referrerInfo;this._fromAppID=t.appId}}return this._fromAppID}},{key:"dataFromPath",get:function(){if(console.log("----  WXData ----"),console.log("-  dataFromPath  -"),"undefined"==typeof wx)return null;if(!this._dataFromPath){var e=wx.getLaunchOptionsSync();e&&e.query?this._dataFromPath=e.query:this._dataFromPath={}}return this._dataFromPath}},{key:"dataFromApp",get:function(){if(console.log("----  WXData ----"),console.log("-  dataFromApp  -"),"undefined"==typeof wx)return null;if(!this._dataFromApp){var e=wx.getLaunchOptionsSync();if(e&&e.referrerInfo){var t=e.referrerInfo;this._dataFromApp=t.extraData}else this._dataFromApp={}}return this._dataFromApp}}]),e}());c._fromAppID=void 0,c=i([s],c),n.default=c,cc._RF.pop()},{}],WXDevice:[function(e,t,n){"use strict";cc._RF.push(t,"381f0J0pGlC9p7GAb0O7p0J","WXDevice");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../managers/GameManager"),c=cc._decorator,l=c.ccclass,u=(c.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"getSystemInfo",value:function(){if(console.log("----  WXDevice ----"),console.log("-  getSystemInfo  -"),"undefined"!=typeof wx){var e=wx.getSystemInfoSync();if(e&&void 0!=e.benchmarkLevel){var t=parseInt(""+e.benchmarkLevel);!isNaN(t)&&t>0&&(i._benchmarkLevel=t)}i._systemInfo=e}}},{key:"vibrateShort",value:function(){if(console.log("----  WXDevice  ----"),console.log("-  vibrateShort  -"),s.default.canVibrate){if("undefined"!=typeof wx)try{wx.vibrateShort({})}catch(e){console.log("catch a error from wx:"),console.log(e)}}else console.log("\u5df2\u8bbe\u7f6e\u4e0d\u53ef\u9707\u52a8(GameManager.canVibrate")}},{key:"vibrateLong",value:function(){if(console.log("----  WXDevice  ----"),console.log("-  vibrateLong  -"),s.default.canVibrate){if("undefined"!=typeof wx)try{wx.vibrateLong({})}catch(e){console.log("catch a error from wx:"),console.log(e)}}else console.log("\u5df2\u8bbe\u7f6e\u4e0d\u53ef\u9707\u52a8(GameManager.canVibrate")}},{key:"systemInfo",get:function(){return i._systemInfo||i.getSystemInfo(),i._systemInfo}},{key:"SDKVersion",get:function(){return i._systemInfo||i.getSystemInfo(),i._systemInfo?i._systemInfo.SDKVersion:null}},{key:"benchmarkLevel",get:function(){return i._benchmarkLevel}}]),e}());u._benchmarkLevel=-1,u=i=r([l],u),n.default=u,cc._RF.pop()},{"../managers/GameManager":"GameManager"}],WXEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"05caeNI+9NGlIs31hh65B9l","WXEventNames");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=(i.property,function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)});s.BANNER_AD_RESIZE="bannerAdResize",s.BANNER_AD_SHOW="bannerAdShow",s.BANNER_AD_HIDE="bannerAdHide",s.BANNER_AD_NEXT="bannerAdNext",s.BANNER_AD_ERROR="bannerAdError",s.REWARD_VIDEO_AD_CLOSE="rewardVideoAdClose",s.REWARD_VIDEO_AD_COMPLETE="rewardVideoAdComplete",s.REWARD_VIDEO_AD_READY="rewardVideoAdReady",s.REWARD_VIDEO_AD_ERROR="rewardVideoAdError",s.IMAGE_SNAPSHOT_START="imageSnapshotStart",s.IMAGE_SNAPSHOT_END="imageSnapshotEnd",s=a([r],s),n.default=s,cc._RF.pop()},{}],WXImage:[function(e,t,n){"use strict";cc._RF.push(t,"15905MmuhBESa2pO21kfXK+","WXImage");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../managers/GameManager"),c=e("../platforms/QQCM_getAvatarFromOpenId"),l=e("../base/GameValues"),u=e("./WXEventNames"),d=cc._decorator,f=d.ccclass,h=(d.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"createImage",value:function(e){if(console.log("----  WXImage ----"),console.log("-  createImage  -"),!e)return null;e.length<1e3&&console.log(e);var t=new cc.SpriteFrame;if(6==l.default.currentPlatform||"undefined"==typeof wx)cc.loader.load(e,function(e,n){n&&t.setTexture(n)});else if(3==l.default.currentPlatform&&-1==e.indexOf("/"))c.QQCM_getAvatarFromOpenId(e,function(e){cc.loader.load(e,function(e,n){t.setTexture(n)})});else if("undefined"!=typeof wx){var n=new cc.Texture2D,o=wx.createImage();o.src=e,o.onload=function(){n.initWithElement(o),n.handleLoadedTexture()},t.setTexture(n)}return t}},{key:"saveImageToPhotosAlbum",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(console.log("----  WXImage ----"),console.log("-  saveImageToPhotosAlbum  -"),console.log(e),"undefined"!=typeof wx)try{wx.saveImageToPhotosAlbum({filePath:e,success:t,fail:n,complete:o})}catch(e){}}},{key:"previewImage",value:function(e){if(console.log("----  WXImage ----"),console.log("-  previewImage  -"),console.log(e),"undefined"!=typeof wx)try{wx.previewImage({urls:e})}catch(e){}}},{key:"getSnapshotFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;console.log("----  WXImage ----"),console.log("-  getSnapshotFile  -"),"undefined"!=typeof wx?(i._getSnapshotRect=e,i._getSnapshotScale=t,i._getSnapshotCallback=n,i._getSnapshotCanvas=o,s.default.eventManager.dispatchEventWith(u.default.IMAGE_SNAPSHOT_START),cc.director.on(cc.Director.EVENT_AFTER_DRAW,i.drawHandler,i)):null!=n&&n(null)}},{key:"drawHandler",value:function(e){cc.director.off(cc.Director.EVENT_AFTER_DRAW,i.drawHandler,i);var t=i._getSnapshotCanvas||l.default.canvas,n=i._getSnapshotRect,o=i._getSnapshotScale,a=i._getSnapshotCallback;if(null==n)if(t!=l.default.canvas)n=new cc.Rect(0,0,t.width,t.height);else{var r=cc.view.getFrameSize();n=new cc.Rect(0,0,r.width,r.height)}if(console.log("@@@@@@@ cc.view.getFrameSize() = "+JSON.stringify(cc.view.getFrameSize())),console.log("@@@@@@@ cc.view.getDevicePixelRatio() = "+cc.view.getDevicePixelRatio()),t==l.default.canvas){var c=cc.view.getDevicePixelRatio();n.x*=c,n.y*=c,n.width*=c,n.height*=c}i._getSnapshotRect=null,i._getSnapshotScale=1,i._getSnapshotCallback=null,i._getSnapshotCanvas=null,t.toTempFilePath({x:n.x,y:n.y,width:n.width,height:n.height,destWidth:n.width*o,destHeight:n.height*o,success:function(e){a&&a(e?e.tempFilePath:null)},fail:function(){a&&a(null)},complete:function(){s.default.eventManager.dispatchEventWith(u.default.IMAGE_SNAPSHOT_END)}})}},{key:"readSnapshotFileAsSpriteFrame",value:function(e){console.log("----  WXImage ----"),console.log("-  readSnapshotFileAsSpriteFrame  -");try{var t=wx.getFileSystemManager().readFileSync(e,"base64");return i.createImage("data:image/jpg;base64,"+t)}catch(e){console.log(e)}return null}},{key:"getSnapshotImage",value:function(){if(console.log("----  WXImage ----"),console.log("-  getSnapshotImage  -"),"undefined"==typeof wx)return null;var e=l.default.canvas.toDataURL();return i.createImage(e)}}]),e}());h=i=r([f],h),n.default=h,cc._RF.pop()},{"../base/GameValues":"GameValues","../managers/GameManager":"GameManager","../platforms/QQCM_getAvatarFromOpenId":"QQCM_getAvatarFromOpenId","./WXEventNames":"WXEventNames"}],WXOpenData:[function(e,t,n){"use strict";cc._RF.push(t,"77c2eXB19VBbKV4xH/h8nXN","WXOpenData");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../deer/DeerSDK"),c=cc._decorator,l=c.ccclass,u=(c.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"postMessage",value:function(e){if(console.log("----  WXOpenData ----"),console.log("-  postMessage  -"),console.log(e),"undefined"==typeof wx)return null;wx.getOpenDataContext().postMessage(e)}},{key:"saveUserScoreToCloud",value:function(e){console.log("----  WXOpenData ----"),console.log("-  saveScoreToCloud  -"),i.saveUserDataToCloud("score",""+e),s.default.instance.isReady&&s.default.instance.game_saveScoreToService(e)}},{key:"saveUserDataToCloud",value:function(e,t){if(console.log("----  WXOpenData ----"),console.log("-  saveUserDataToCloud  -"),"undefined"!=typeof wx){var n=Math.floor((new Date).getTime()/1e3);console.log("key="+e,"value="+t),"score"==e&&(i.postMessage({action:"__rdm__myScore",value:parseInt(t)}),t='{"wxgame":{"score":'+t+', "update_time":'+n+"}}");try{wx.setUserCloudStorage({KVDataList:[{key:e,value:t}],success:function(e){console.log("saveUserDataToCloud success"),console.log(e)},fail:function(e){console.log("saveUserDataToCloud fail"),console.log(e)}})}catch(e){}}}}]),e}());u=i=r([l],u),n.default=u,cc._RF.pop()},{"../deer/DeerSDK":"DeerSDK"}],WXRankDataManager:[function(e,t,n){"use strict";cc._RF.push(t,"f46aeJU3DVG3asga0bfVUii","WXRankDataManager");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,l=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var u=e("./WXRankVO"),d=e("./WXRankEventNames"),f=cc._decorator,h=f.ccclass,p=(f.property,c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(e._friendRankData=[],e._myIndex=-1,e._myScore=0,console.log("\u3010WXRankDataManager\u3011\u521d\u59cb\u5316"),c._instance)throw new Error("Please use WXRankDataManager.instance");c._instance=e,e.getUserInfo();try{wx.onMessage(function(t){if(console.log("\u3010WXRankDataManager\u3011constructor, wx.onMessage"),console.log(t),t)switch(t.action){case"__rdm__myScore":e.myScore=t.value}})}catch(e){}return e}return s(t,cc.Node),o(t,[{key:"getUserInfo",value:function(){var e=this;try{wx.getUserInfo({openIdList:["selfOpenId"],success:function(t){console.log("user info"),console.log(t);try{var n=t.data;e._userInfo=n[0]}catch(n){e._userInfo=t.userInfo}},fail:function(){},complete:function(){e.refreshRankingData()}})}catch(e){}}},{key:"refreshAllData",value:function(){if(this._userInfo){var e=this._userInfo.openId,t=this._userInfo.avatarUrl;t=t.replace(/\/\d+$/,""),console.log("my avatar url = ",t),console.log("my open id = ",e);for(var n=this._friendRankData.length,o=0;o<n;o++){var a=this._friendRankData[o],i=a.avatar;i=i.replace(/\/\d+$/,""),console.log("vo.isSelf="+a.isSelf,a.nickname,a.score,a.avatar),(!0===a.isSelf||e&&a.openID==e||t&&i==t)&&(this._friendRankMine=a,this._myScore>a.score&&(a.score=this._myScore,this.sortFriendRankData()))}if(this._friendRankData){var r=this._friendRankData.concat(),s=r.indexOf(this._friendRankMine);this._myIndex>=0&&r.splice(s,1),this._friendRankPrevious=null,this._friendRankNext=null;for(var l=r.length-1;l>=0;l--)if(this._myScore<r[l].score){this._friendRankNext=r[l],l<r.length-1&&(this._friendRankPrevious=r[l+1]);break}console.log("my rank is "+this._myIndex,", total is "+n),c._instance.dispatchEvent(new cc.Event(d.default.FRIEND_RANK_CHANGE,!1))}}else this.getUserInfo()}},{key:"sortFriendRankData",value:function(){this._friendRankData.sort(function(e,t){return t.score-e.score});for(var e=this._friendRankData.length,t=0;t<e;t++)this._friendRankData[t].rank=t+1}},{key:"refreshRankingData",value:function(){var e=this;console.log("\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u3002\u3002\u3002\u3002\u3002"),"undefined"!=typeof wx&&wx.getFriendCloudStorage({keyList:["score","userPropVIP"],success:function(t){console.log("=================@@@@@@@@@@@@@@@@@@@@@@@@================="),console.log(t),console.log(e._userInfo);for(var n=[],o=t.data,a=0;a<o.length;a++){var i=o[a],r=new u.default;r.nickname=i.nickname,r.avatar=i.avatarUrl,r.openID=i.openid,r.isSelf=!0===i.isSelf;for(var s=i.KVDataList,c=s.length,l=0;l<c;l++){var d=s[l],f=d.key,h=d.value;if(console.log("\u3010KVData\u3011",l,"key="+f,"value="+h),"userPropVIP"==f)r.isVIP="1"==h;else if("score"==f)try{var p=JSON.parse(h);r.score=parseInt(p.wxgame.score)}catch(e){}}n.push(r)}e._friendRankData=n,e.sortFriendRankData(),e.refreshAllData()}})}},{key:"friendRankData",get:function(){return this._friendRankData.concat()}},{key:"friendRankNext",get:function(){return this._friendRankNext}},{key:"friendRankPrevious",get:function(){return this._friendRankPrevious}},{key:"friendRankMine",get:function(){return this._friendRankMine}},{key:"myIndex",get:function(){return this._myIndex}},{key:"myScore",set:function(e){this._myScore!=e&&(this._myScore=e,c._instance.dispatchEvent(new cc.Event(d.default.MY_SCORE_CHANGE,!1)),this.refreshAllData())},get:function(){return this._myScore}}],[{key:"instance",get:function(){return c._instance||new c,c._instance}}]),t}());p=c=l([h],p),n.default=p;var _=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if("undefined"==typeof wx)return r(o,null);var a=new cc.Texture2D,s=wx.createImage();return s.src=e,s.onload=function(){a.initWithElement(s),a.handleLoadedTexture(),n&&n()},o.setTexture(a),o}return s(t,cc.SpriteFrame),t}();n.AWXImage=_,cc._RF.pop()},{"./WXRankEventNames":"WXRankEventNames","./WXRankVO":"WXRankVO"}],WXRankEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"460200MUB5NB6bE4LwrrfLG","WXRankEventNames");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=(i.property,function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)});s.FRIEND_RANK_CHANGE="friendRankChange",s.MY_SCORE_CHANGE="myScoreChange",s=a([r],s),n.default=s,cc._RF.pop()},{}],WXRankVO:[function(e,t,n){"use strict";cc._RF.push(t,"b93faHCXZtDT7nYGq5fn8Hz","WXRankVO");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=(i.property,function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.rank=0,this.nickname=null,this.avatar=null,this.openID=null,this.score=0,this.isSelf=!1,this.isVIP=!1});s=a([r],s),n.default=s,cc._RF.pop()},{}],WXRewardVideoAdCloseComfirm:[function(e,t,n){"use strict";cc._RF.push(t,"eb128sklCxIXowDIYTImopH","WXRewardVideoAdCloseComfirm");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../managers/GameManager"),s=e("./WXEventNames"),c=e("./WXUtils"),l=e("./WXRewardVideoAd"),u=cc._decorator,d=u.ccclass,f=(u.property,function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"reset",value:function(){r.default.eventManager.removeEventListener(s.default.REWARD_VIDEO_AD_CLOSE,this.videoAdEventsHandler,this),r.default.eventManager.removeEventListener(s.default.REWARD_VIDEO_AD_COMPLETE,this.videoAdEventsHandler,this),r.default.eventManager.removeEventListener(s.default.REWARD_VIDEO_AD_ERROR,this.videoAdEventsHandler,this)}},{key:"init",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u4e0b\u6b21\u518d\u8bf4",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"\u89c2\u770b\u89c6\u9891";this._alertTitle=e,this._alertConent=t,this._alertCancel=n,this._alertConfirmLabel=o,this.reset(),r.default.eventManager.addEventListener(s.default.REWARD_VIDEO_AD_CLOSE,this.videoAdEventsHandler,this,100),r.default.eventManager.addEventListener(s.default.REWARD_VIDEO_AD_COMPLETE,this.videoAdEventsHandler,this,100),r.default.eventManager.addEventListener(s.default.REWARD_VIDEO_AD_ERROR,this.videoAdEventsHandler,this,100)}},{key:"videoAdEventsHandler",value:function(e){if(this.reset(),e.type==s.default.REWARD_VIDEO_AD_CLOSE){if(!l.default.isReady)return;e.stopPropagation(),c.default.showAlert(this._alertTitle,this._alertConent,this._alertConfirmLabel,this._alertCancel,this.alertConfirmCallback.bind(this))}}},{key:"alertConfirmCallback",value:function(){l.default.show(),null!=this.closeAlertPlayAgainCallback&&this.closeAlertPlayAgainCallback()}}]),e}());f.closeAlertPlayAgainCallback=null,f=i([d],f),n.default=f,cc._RF.pop()},{"../managers/GameManager":"GameManager","./WXEventNames":"WXEventNames","./WXRewardVideoAd":"WXRewardVideoAd","./WXUtils":"WXUtils"}],WXRewardVideoAd:[function(e,t,n){"use strict";cc._RF.push(t,"76a050a739KZ4LelSgxspSB","WXRewardVideoAd");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../managers/GameManager"),c=e("./WXEventNames"),l=e("./WXUtils"),u=e("../deer/DeerSDK"),d=e("./WXBannerAd"),f=cc._decorator,h=f.ccclass,p=(f.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"show",value:function(){if(console.log("----  \u5fae\u4fe1\u89c6\u9891\u5e7f\u544a ----"),console.log("-  show  -"),console.log("WXRewardVideoAd._isReady",i._isReady),console.log("WXRewardVideoAd._isPlaying",i._isPlaying),!i._isReady)return!1;if(i._isPlaying)return!1;i._originalBGMMuted=s.default.soundsManager.musicMuted,s.default.soundsManager.muteMusic(),d.default.currentAd?(i._originalBannerAdIsShowing=d.default.currentAd.isShowing,d.default.currentAd.hide()):i._originalBannerAdIsShowing=!1;try{return i._ad&&i._ad.show(),i._isPlaying=!0,!0}catch(e){}return!1}},{key:"reset",value:function(){console.log("----  \u5fae\u4fe1\u89c6\u9891\u5e7f\u544a ----"),console.log("-  reset  -"),i._ad&&(i._ad.offLoad(i.adLoadCallback),i._ad.offClose(i.adCloseCallback),i._ad.offError(i.adErrorCallback),i._ad=null),i._isReady=!1,i._isPlaying=!1,i._adID&&"undefined"!=typeof wx&&(i._ad=u.default.instance.wx.createRewardedVideoAd({adUnitId:i._adID}),i._ad&&(i._ad.onLoad(i.adLoadCallback),i._ad.onClose(i.adCloseCallback),i._ad.onError(i.adErrorCallback),i._ad.load()))}},{key:"adLoadCallback",value:function(){console.log("----  \u5fae\u4fe1\u89c6\u9891\u5e7f\u544a ----"),console.log("-  adLoadCallback  -"),i._isReady=!0,s.default.eventManager.dispatchEventWith(c.default.REWARD_VIDEO_AD_READY)}},{key:"adCloseCallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("----  \u5fae\u4fe1\u89c6\u9891\u5e7f\u544a ----"),console.log("-  adCloseCallback  -"),console.log(JSON.stringify(e)),i._originalBGMMuted||(s.default.soundsManager.unmuteMusic(),i._originalBGMMuted=!1),d.default.currentAd&&i._originalBannerAdIsShowing&&(d.default.currentAd.show(),i._originalBannerAdIsShowing=!1),i._isPlaying=!1,e&&1==e.isEnded?(i._lastVideoAdTime=(new Date).getTime(),s.default.eventManager.dispatchEventWith(c.default.REWARD_VIDEO_AD_COMPLETE)):(l.default.showToast("\u8bf7\u770b\u5b8c\u6574\u6bb5\u89c6\u9891"),s.default.eventManager.dispatchEventWith(c.default.REWARD_VIDEO_AD_CLOSE))}},{key:"adErrorCallback",value:function(e){console.log("----  \u5fae\u4fe1\u89c6\u9891\u5e7f\u544a ----"),console.log("-  adErrorCallback  -"),console.log(e),i._originalBGMMuted||(s.default.soundsManager.unmuteMusic(),i._originalBGMMuted=!1),d.default.currentAd&&i._originalBannerAdIsShowing&&(d.default.currentAd.show(),i._originalBannerAdIsShowing=!1),i._isPlaying=!1,s.default.eventManager.dispatchEventWith(c.default.REWARD_VIDEO_AD_ERROR)}},{key:"adID",set:function(e){console.log("----  \u5fae\u4fe1\u89c6\u9891\u5e7f\u544a ----"),console.log("-  set ad id  -"),console.log(e),i._adID!=e&&(i._adID=e,setTimeout(i.reset.bind(i),4e3))},get:function(){return i._adID}},{key:"isReady",get:function(){return i._isReady}},{key:"lastVideoAdTime",get:function(){return i._lastVideoAdTime}},{key:"isPlaying",get:function(){return i._isPlaying}}]),e}());p._isReady=!1,p._lastVideoAdTime=0,p._originalBannerAdIsShowing=!1,p=i=r([h],p),n.default=p,cc._RF.pop()},{"../deer/DeerSDK":"DeerSDK","../managers/GameManager":"GameManager","./WXBannerAd":"WXBannerAd","./WXEventNames":"WXEventNames","./WXUtils":"WXUtils"}],WXShare:[function(e,t,n){"use strict";cc._RF.push(t,"8107ewqCbNEZotgngLqQ58l","WXShare");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../managers/GameManager"),c=e("../deer/DeerSDK"),l=e("./WXUtils"),u=e("../managers/Utils"),d=cc._decorator,f=d.ccclass,h=(d.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"setOnShareAppMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(console.log("----  WXShare ----"),console.log("-  setOnShareAppMessage  -"),"undefined"!=typeof wx){if(console.log(e,t,n),e&&(i._onShareAppMessageData.title=e),t&&(i._onShareAppMessageData.imageUrl=t),n){var o="";Object.keys(n).forEach(function(e){""!=o&&(o+="&"),o+=e+"="+encodeURIComponent(n[e])}),""!=o&&(i._onShareAppMessageData.query=o)}c.default.instance.wx.onShareAppMessage(function(){return i._onShareAppMessageData})}}},{key:"shareApp",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(console.log("----  WX Share ----"),console.log("-  shareApp  -"),console.log("query obj is",n),"undefined"!=typeof wx){if(i._shareAppTime=(new Date).getTime(),i._shareAppData={title:e,imageUrl:t,success:function(e){i._shareAppData=null,o&&o(e)},fail:function(e){i._shareAppData=null,a&&a(e)},__us__:r},wx.onShow(i.shareAppBackCallback.bind(i)),n){var s="";Object.keys(n).forEach(function(e){""!=s&&(s+="&"),s+=e+"="+encodeURIComponent(n[e])}),""!=s&&(i._shareAppData.query=s)}c.default.instance.wx.shareAppMessage(i._shareAppData)}}},{key:"shareAppBackCallback",value:function(){wx.offShow(i.shareAppBackCallback.bind(i)),setTimeout(function(){if(i._shareAppData){var e=i._shareAppData.success,t=i._shareAppData.fail;if(!1!==i._shareAppData.__us__){var n=function(){i._mustFailCounter=Math.floor(2+3*Math.random());var e=["\u8bf7\u5206\u4eab\u5230\u7fa4","\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7684\u7fa4","\u8bf7\u6362\u4e2a\u597d\u53cb\u5206\u4eab\u8bd5\u8bd5"],n=e[Math.floor(Math.random()*e.length)];l.default.showToast(n),t()};if((new Date).getTime()-i._shareAppTime<2e3)t();else{var o=u.default.toInt(s.default.dataManager.getData("__wxs_times__"));if(o++,s.default.dataManager.setData("__wxs_times__",o,!0,!0),1==o)n();else if(2==o)e();else{i._mustFailRate;c.default.instance.canUseEasingPolicy||.1,Math.random()<=i._mustFailRate?n():i._mustFailCounter<=0?n():(i._mustFailCounter--,e())}}}else e()}},500)}},{key:"shareAppToGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(console.log("----  WXShare ----"),console.log("-  shareAppToGroup  -"),"undefined"!=typeof wx)try{var a={title:e,imageUrl:t};if(null!=o&&(a.success=function(e){var t=null;e&&e.shareTickets&&(t=e.shareTickets[0]),o.call(null,t)}),n){var i="";Object.keys(n).forEach(function(e){""!=i&&(i+="&"),i+=e+"="+encodeURIComponent(n[e])}),""!=i&&(a.query=i)}c.default.instance.wx.shareAppMessage(a)}catch(e){}}},{key:"getQueryData",value:function(){if(console.log("----  WXShare ----"),console.log("-  getQueryData  -"),"undefined"==typeof wx)return{};var e=wx.getLaunchOptionsSync();return e?e.query:{}}}]),e}());h._onShareAppMessageData={fail:function(){l.default.showToast("\u5206\u4eab\u5931\u8d25")}},h._shareAppTime=0,h._mustFailRate=.5,h._mustFailCounter=3,h=i=r([f],h),n.default=h,cc._RF.pop()},{"../deer/DeerSDK":"DeerSDK","../managers/GameManager":"GameManager","../managers/Utils":"Utils","./WXUtils":"WXUtils"}],WXUser:[function(e,t,n){"use strict";cc._RF.push(t,"fef87It9r1CLZBr7o6/kAPW","WXUser");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../base/GameValues"),c=e("./WXOpenData"),l=e("../deer/DeerSDK"),u=cc._decorator,d=u.ccclass;u.property;n.USER_PROP_VIP="userPropVIP";var f=i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"login",value:function(){!0!==i._isLogining&&"undefined"!=typeof wx&&(console.log("----  WXUser ----"),console.log("-  login  -"),i._isLogining=!0,wx.login({success:function(e){console.log("login success"),console.log(e),i._lastCode=e.code,i.doLoginCallback(),i.tryToGetUserInfo()},fail:function(e){i._isLogining=!1},complete:function(){i._isLogining=!1}}))}},{key:"onLogin",value:function(e){-1==i._loginCallbacks.indexOf(e)&&i._loginCallbacks.push(e)}},{key:"offLogin",value:function(e){var t=i._loginCallbacks.indexOf(e);t>=0&&i._loginCallbacks.splice(t,1)}},{key:"doLoginCallback",value:function(){i._lastCode&&i._loginCallbacks.length>0&&(this._loginCallbacks.forEach(function(e){e(i._lastCode)}),this._loginCallbacks=[])}},{key:"setUserInfoData",value:function(e){if(console.log("------setUserInfoData-------"),console.log(e),e&&e.userInfo){i._userInfo=e.userInfo,i.iv=e.iv,i.rawData=e.rawData,i.encryptedData=e.encryptedData,i.signature=e.signature;try{i._userInfoCallbacks.length>0&&(this._userInfoCallbacks.forEach(function(e){e()}),this._userInfoCallbacks=[])}catch(e){}i.destroyAllUserInfoButtons(),l.default.instance.getWXUserInfo()}}},{key:"onUserInfo",value:function(e){i._userInfo?e():(-1==i._userInfoCallbacks.indexOf(e)&&i._userInfoCallbacks.push(e),i.tryToGetUserInfo())}},{key:"offUserInfo",value:function(e){var t=i._userInfoCallbacks.indexOf(e);t>=0&&i._userInfoCallbacks.splice(t,1)}},{key:"tryToGetUserInfo",value:function(){i._userInfo||"undefined"!=typeof wx&&(i._isTryingToGetUserInfo||(i._isTryingToGetUserInfo=!0,wx.getSetting({success:function(e){console.log("wx.getSetting",JSON.stringify(e)),e.authSetting["scope.userInfo"]&&wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(e){i.setUserInfoData(e)}})},complete:function(){i._isTryingToGetUserInfo=!1}})))}},{key:"createUserInfoButton",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof wx){var o=wx.createUserInfoButton({type:"image",image:e,withCredentials:!0,lang:"zh_CN",style:{left:t.xMin,top:t.yMin,width:t.width,height:t.height,lineHeight:40}});return o&&(i._userInfoButtons.push(o),o.onTap(function(e){console.log("user info button on tap"),console.log(e),i.setUserInfoData(e),null!=n&&n(e)})),3==s.default.currentPlatform&&(i._userInfo||wx.getUserInfo({withCredentials:!0,lang:"zh_CN",from:"#wx user#",success:function(e){console.log("\u3010\u7528\u6237\u4fe1\u606f\u6309\u94ae\u3011\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f"),i.setUserInfoData(e)}})),o}}},{key:"destroyUserInfoButton",value:function(e){try{e.destroy()}catch(e){}var t=i._userInfoButtons.indexOf(e);t>=0&&i._userInfoButtons.splice(t,1)}},{key:"destroyAllUserInfoButtons",value:function(){i._userInfoButtons.forEach(function(e){e.destroy()}),i._userInfoButtons=[]}},{key:"setVIP",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];c.default.saveUserDataToCloud(n.USER_PROP_VIP,e?"1":"0"),l.default.instance.isReady&&l.default.instance.user_setVIP(e)}},{key:"lastCode",get:function(){return this._lastCode}},{key:"userInfo",get:function(){return i._userInfo}}]),e}();f._isLogining=!1,f._loginCallbacks=[],f._userInfo=null,f._userInfoCallbacks=[],f._isTryingToGetUserInfo=!1,f._userInfoButtons=[],f=i=r([d],f),n.default=f,cc._RF.pop()},{"../base/GameValues":"GameValues","../deer/DeerSDK":"DeerSDK","./WXOpenData":"WXOpenData"}],WXUtils:[function(e,t,n){"use strict";cc._RF.push(t,"b54f9c6LDtNqb0wWerI3pci","WXUtils");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../managers/Utils"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"showToast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500;if(console.log("----  WX Utils ----"),console.log("-  showToast  -"),console.log(e),t<10&&(t*=1e3),"undefined"!=typeof wx)try{wx.showToast({title:e,icon:"none",duration:t,mask:!1})}catch(e){}}},{key:"showLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(console.log("----  WX Utils ----"),console.log("-  showLoading  -"),console.log(e),"undefined"!=typeof wx)try{wx.showLoading({title:e})}catch(e){}}},{key:"hideLoading",value:function(){if(console.log("----  WX Utils ----"),console.log("-  hideLoading  -"),"undefined"!=typeof wx)try{wx.hideLoading()}catch(e){}}},{key:"navigateToMiniProgram",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(console.log("----  WX Utils ----"),console.log("-  navigateToMiniProgram  -"),console.log(e,t),"undefined"!=typeof wx)try{wx.navigateToMiniProgram({appId:e,path:t,extraData:n,success:o,fail:a})}catch(e){}else a&&a()}},{key:"getLaunchOptionsSync",value:function(){return console.log("----  WX Utils ----"),console.log("-  getLaunchOptionsSync  -"),"undefined"==typeof wx?null:wx.getLaunchOptionsSync()}},{key:"getMenuButtonLayout",value:function(){if(console.log("----  WX Utils ----"),console.log("-  getMenuButtonLayout  -"),"undefined"==typeof wx)return null;var e=wx.getMenuButtonBoundingClientRect(),t=new cc.Rect(e.left,e.top,e.width,e.height);return t=r.default.fromScreenRect(t),console.log("in game is",t),t}},{key:"openCustomerServiceConversation",value:function(){if(console.log("----  WX Utils ----"),console.log("-  openCustomerServiceConversation  -"),"undefined"==typeof wx)return null;wx.openCustomerServiceConversation()}},{key:"showAlert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(console.log("----  WX Utils ----"),console.log("-  showAlert  -"),"undefined"==typeof wx)return null!=i?i():null!=a&&a(),null;var r={};r.title=e,r.content=t,o?(r.showCancel=!0,r.cancelText=o):r.showCancel=!1,n&&(r.confirmText=n),r.success=function(e){e&&(e.confirm?a&&a():e.cancel&&i&&i())},wx.showModal(r)}}]),e}());l=i([c],l),n.default=l,cc._RF.pop()},{"../managers/Utils":"Utils"}],XYJAPI:[function(e,t,n){"use strict";cc._RF.push(t,"b6215Tc2b9ERJ1wZnP9Biov","XYJAPI");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i,r=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../managers/GameManager"),c=e("../libs/md5"),l=e("./XYJEventNames"),u=e("../wechat/WXUser"),d=e("../base/GameValues"),f=e("../deer/DeerSDK"),h=e("../wechat/WXImage"),p=e("../wechat/WXData"),_=cc._decorator,y=_.ccclass,g=(_.property,i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)}return o(e,null,[{key:"init",value:function(e){if(!i._initialized){i._initialized=!0,i._flg=e,d.default.isDebug,i._baseURL="https://api.yz061.com",console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  init   -"),console.log(i._baseURL);var t=s.default.dataManager.getData("XYJChannel");if(t&&"null"!=t&&"undefined"!=t&&(i.inviterChannel=t),"undefined"!=typeof wx){var n=wx.getLaunchOptionsSync();console.log("\u3010XYJAPI\u3011launchOptions",n);var o=n.query;o.openID&&(i.inviterOpenID=o.openID),o.userID&&(i.inviterUserID=o.userID),o.nickname&&(i.inviterNickname=decodeURIComponent(o.nickname)),o.time&&(i.inviterTime=parseInt(o.time),isNaN(i.inviterTime)&&(i.inviterTime=0)),i.gameStartTime=Math.floor((new Date).getTime()/1e3),o.action&&(i.inviterAction=o.action),o.channel&&"null"!=o.channel&&"undefined"!=o.channel&&(i.inviterChannel=o.channel,s.default.dataManager.setData("XYJChannel",i.inviterChannel,!0)),o.recordID&&(i.inviterGameRecordID=o.recordID)}i.enabled=!0,i.login()}}},{key:"login",value:function(){u.default.onLogin(i.wxLoginHandler.bind(i)),u.default.login()}},{key:"wxLoginHandler",value:function(e){i._code=e,console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  wxLoginHandler   -"),i.loginToPlatform()}},{key:"loginToPlatform",value:function(){if(console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  loginToPlatform   -"),"undefined"!=typeof wx){var e={code:i._code,opId:i.inviterOpenID,channel:i.inviterChannel,flg:i._flg},t=p.default.fromAppID;t&&(e.appid=t),console.log("the data is",e),console.log("request Ball.Api.Auth.WechatLogin"),console.log("url is "+i._baseURL+"/auth"),wx.request({url:i._baseURL+"/auth",data:e,method:"POST",success:i.loginFeedbackCallback,fail:function(e){console.log("failed to call Ball.Api.Auth.WechatLogin"),console.log(e),s.default.eventManager.dispatchEventWith(l.default.EVENT_INIT_FAILED)}})}}},{key:"loginFeedbackCallback",value:function(e){if(console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  loginFeedbackCallback   -"),console.log(e),e.data){try{i.userOpenID=e.data.result.openid,i.userToken=e.data.result.token,console.log("userOpenID="+i.userOpenID),console.log("userToken="+i.userToken),s.default.eventManager.dispatchEventWith(l.default.EVENT_USER_READY),i.sendFeedbackDaily(),i.bindingToPlatform()}catch(e){console.log("\u3010ERROR\u3011",e),s.default.eventManager.dispatchEventWith(l.default.EVENT_INIT_FAILED)}"undefined"!=typeof wx&&wx.onHide(function(){i.ad_reportShownNow()})}else console.log("loginFeedbackCallback \u6570\u636e\u9519\u8bef")}},{key:"bindingToPlatform",value:function(){console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  bindingToPlatform   -"),u.default.offUserInfo(i.bindingToPlatform.bind(i)),u.default.encryptedData?(i.encryptedData=u.default.encryptedData,i.iv=u.default.iv,i._userInfo=u.default.userInfo,console.log("encryptedData="+i.encryptedData),console.log("iv="+i.iv),console.log("userInfo=",i._userInfo),wx.request({url:i._baseURL+"/binding",data:{flg:i._flg,token:i.userToken,enc:i.encryptedData,iv:i.iv},method:"POST",success:i.loginBindingCallback,fail:function(e){console.log("failed to call Ball.Api.Auth.Binding"),console.log(e),s.default.eventManager.dispatchEventWith(l.default.EVENT_INIT_FAILED)}})):u.default.onUserInfo(i.bindingToPlatform.bind(i))}},{key:"getAffairs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  getAffairs   -"),i._affairs?e&&e(i._affairs.concat()):wx.request({url:i._baseURL+"/additional?flg="+i.flg,data:{},method:"GET",success:function(t){console.log("success to call getAffairs"),console.log(t);try{var n=t.data.result.affairs;i._affairs=n.concat(),e&&e(n)}catch(e){}},fail:function(e){console.log("failed to call getAffairs"),console.log(e)}})}},{key:"loginBindingCallback",value:function(e){console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  loginBindingCallback   -"),console.log(e);try{i.userUnionID=e.data.data.unionId}catch(e){}console.log("userUnionID="+i.userUnionID),s.default.eventManager.dispatchEventWith(l.default.EVENT_ALL_READY)}},{key:"sendFeedbackDaily",value:function(){console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  sendFeedbackDaily   -"),wx.request({url:i._baseURL+"/daily",data:{flg:i._flg,uid:i.userOpenID,channel:i.inviterChannel},method:"POST",success:function(e){console.log("success to send daily"),console.log(e)},fail:function(e){console.log("failed to send daily"),console.log(e)}})}},{key:"sendFeedbackShare",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  sendFeedbackShare   -"),wx.request({url:i._baseURL+"/stat",data:{flg:i._flg,uid:i.userOpenID,channel:i.inviterChannel,loc:"share",shareType:e},method:"POST",success:function(e){console.log("success to sendFeedbackShare"),console.log(e)},fail:function(e){console.log("failed to sendFeedbackShare"),console.log(e)}})}},{key:"sendFeedbackVideo",value:function(){console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  sendFeedbackVideo   -"),wx.request({url:i._baseURL+"/stat",data:{flg:i._flg,uid:i.userOpenID,channel:i.inviterChannel,loc:"video"},method:"POST",success:function(e){console.log("success to sendFeedbackVideo"),console.log(e)},fail:function(e){console.log("failed to sendFeedbackVideo"),console.log(e)}})}},{key:"disenable",value:function(){i._enabled&&(i._enabled=!1)}},{key:"track",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t={flg:i.flg,uid:i.userOpenID};if(i.inviterChannel&&(t.channel=i.inviterChannel),e==f.DeerTrackAction.SHOW_REWARD_AD_SUC)t.loc="video";else{if(e!=f.DeerTrackAction.GAME_SHARE)return;t.loc="share"}console.log("\u3010\u5c0f\u5e7a\u9e21\u3011\u5e7f\u544a\u70b9\u51fb\u7edf\u8ba1",t),wx.request({url:"https://api.yz061.com/stat",data:t,method:"GET",success:function(e){},fail:function(e){}})}},{key:"ad_getAdData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(i.userOpenID)if(-1!=i.proxyAdTypes.indexOf(e)){var a=f.default.instance.ad_getAds(e,o);if(a)null!=t&&t(a);else{var r=i._adTypeCallbacks["ad_"+e];r||(r={success:[],fail:[],flag:[]},i._adTypeCallbacks["ad_"+e]=r),r.success.push(t),r.fail.push(n),r.flag.push(o),i._isRequestingAdData||(i._isRequestingAdData=!0,wx.request({url:"https://api.yz061.com/game/"+i.flg,method:"GET",success:i.ad_getAdData_success.bind(i),fail:i.ad_getAdData_fail.bind(i)}))}}else i._original_ad_getAdData(e,t,n,o);else n&&n(null)}},{key:"ad_getAdData_success",value:function(e){i._isRequestingAdData=!1;try{var t=e.data;if(1!=t.status)return void i.ad_getAdData_fail(null);t.result.forEach(function(e){var t=e.location_name,n=e.location_flg,o=e.url;-1!=o.indexOf("?")?o+="&uid="+i.userOpenID:o+="?uid="+i.userOpenID,wx.request({url:o,success:function(o){console.log("\u3010\u5c0f\u5e7a\u9e21\u3011"+t+" \u5e7f\u544a"),console.log(o);var a=o.data;if(a){var r=a.result;if(r&&r.length>0){for(var s=[],c=0;c<r.length;c++){var l=r[c],u=!0,h=new f.DeerAdVO;if(h.id=parseInt(l.ad_id),h.appID=l.ad_appid,h.name=l.ad_name,h.path=l.ad_path,h.desc=l.desc,h.icon=l.ad_img,h.previewImg=l.ad_qrimg,h.flag=n,h.ad_count=l.ad_count,h.ad_dot=l.ad_dot,h.navigate=i.ad_navigate.bind(h),h.reportShown=i.ad_reportShown.bind(h),h.__loc=e,h.img_256_129=l.ad_img,h.img_1000_840=l.ad_img,h.bannerImg=l.ad_img,void 0!=l.ad_device){var p=""+l.ad_device;"1"==p?h.device=f.DeerDeviceType.ANDROID:"2"==p&&(h.device=f.DeerDeviceType.IOS),(h.device!=f.DeerDeviceType.ANDROID||d.default.isAndroid)&&(h.device!=f.DeerDeviceType.IOS||d.default.isIOS)||(u=!1)}u&&s.push(h)}var _=void 0;-1!=t.indexOf("\u731c\u4f60\u559c\u6b22")?_=f.DeerAdType.RECOMMEND:-1!=t.indexOf("\u7206\u6b3e\u6e38\u620f")?_=f.DeerAdType.HOT:-1!=t.indexOf("banner")?_=f.DeerAdType.BANNER:"\u6b7b\u4ea1\u63a8\u8350"==t?_=f.DeerAdType.GAME_OVER:"\u62bd\u5c49"==t?_=f.DeerAdType.BOARD:-1!=t.indexOf("\u5927\u56fe")?_=f.DeerAdType.RICH:"\u5f39\u7a97"==t&&(_=f.DeerAdType.POP),_&&f.default.instance.ad_addAds(_,s);var y=i._adTypeCallbacks["ad_"+_];if(delete i._adTypeCallbacks["ad_"+_],y)for(var g=y.success,v=y.flag,m=0;m<g.length;m++){var b=v[m],S=f.default.instance.ad_getAds(_,b),w=g[m];w&&w(S)}}}}})})}catch(e){}}},{key:"ad_getAdData_fail",value:function(e){Object.keys(i._adTypeCallbacks).forEach(function(e){var t=i._adTypeCallbacks[e];if(t){var n=t.fail;n&&n.forEach(function(e){e&&e()})}}),i._isRequestingAdData=!1}},{key:"ad_navigate",value:function(){var e=this,t=e.__loc.game_flg,n=""+e.id,o=e.__loc.location_id,a={gflg:t,uid:i.userOpenID,ad_id:n,location_id:o};i.inviterChannel&&(a.channel=i.inviterChannel),console.log("\u3010\u5c0f\u5e7a\u9e21\u3011\u5e7f\u544a\u70b9\u51fb\u7edf\u8ba1",a),wx.request({url:"https://api.yz061.com/reportad",data:a,method:"GET",success:function(e){},fail:function(e){}});try{wx.navigateToMiniProgram({appId:e.appID,path:e.path,fail:function(t){e.previewImg&&h.default.previewImage([e.previewImg])},success:function(){a.status="cb",wx.request({url:"https://api.yz061.com/reportad",data:a,method:"GET"})}})}catch(e){console.log("########################",e)}}},{key:"ad_reportShown",value:function(){void 0==this.__shownTimes&&(this.__shownTimes=0),this.__shownTimes++;this.__loc.game_flg;var e=""+this.id,t=this.__loc.location_id,n=e+"_"+t;i._ad_ShownData[n]||(i._ad_ShownData[n]={ad_id:e,location_id:t,num:0}),i._ad_ShownData[n].num++}},{key:"ad_reportShownNow",value:function(){var e={gflg:i.flg,flg:i.flg,uid:i.userOpenID};e.data=Object.keys(i._ad_ShownData).map(function(e){return i._ad_ShownData[e]}),0!=e.data.length&&(i._ad_ShownData={},i.inviterChannel&&(e.channel=i.inviterChannel),console.log("\u3010\u5c0f\u5e7a\u9e21\u3011\u5e7f\u544a\u5c55\u73b0\u7edf\u8ba1",e),wx.request({url:"https://api.yz061.com/exposure",data:e,method:"POST",success:function(e){},fail:function(e){}}))}},{key:"createSign",value:function(e){var t=[];for(var n in e){var o=e[n];void 0!=o&&""!=o&&t.push(""+n)}t.sort();for(var a="",r=0;r<t.length;r++){var s=t[r];r>0&&(a+="&"),a+=s+"="+e[s]}return a+="&key="+i.flg,a=(a=c.md5(a)).toUpperCase()}},{key:"baseURL",get:function(){return i._baseURL}},{key:"flg",get:function(){return i._flg}},{key:"userInfo",get:function(){return i._userInfo}},{key:"enabled",get:function(){return i._enabled},set:function(e){i._enabled!=e&&(i._enabled=e,i._enabled?(null==i._original_ad_getAdData&&(i._original_ad_getAdData=f.default.instance.ad_getAdData.bind(f.default.instance)),f.default.instance.ad_getAdData=i.ad_getAdData.bind(i)):f.default.instance.ad_getAdData=i._original_ad_getAdData,f.default.instance.trackProxyFun=i.track.bind(i))}}]),e}());g._flg=null,g.proxyAdTypes=[f.DeerAdType.BANNER,f.DeerAdType.RECOMMEND,f.DeerAdType.HOT,f.DeerAdType.BOARD,f.DeerAdType.GAME_OVER,f.DeerAdType.RICH],g.gameVersion=null,g.inviterOpenID=null,g.inviterUserID=null,g.inviterNickname=null,g.inviterTime=0,g.gameStartTime=0,g.inviterAction=null,g.inviterGameRecordID=null,g.inviterChannel=null,g.relayLimitedTime=30,g.userOpenID=null,g.userUnionID=null,g.userNickname=null,g.userToken=null,g.encryptedData=null,g.iv=null,g._userInfo=null,g._enabled=!1,g._original_ad_getAdData=null,g._isRequestingAdData=!1,g._adTypeCallbacks={},g._ad_ShownData={},g=i=r([y],g),n.default=g,cc._RF.pop()},{"../base/GameValues":"GameValues","../deer/DeerSDK":"DeerSDK","../libs/md5":"md5","../managers/GameManager":"GameManager","../wechat/WXData":"WXData","../wechat/WXImage":"WXImage","../wechat/WXUser":"WXUser","./XYJEventNames":"XYJEventNames"}],XYJEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"64cf2VuaCxBQq5vUxVUC8th","XYJEventNames");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e,t,n,a){var i,r=arguments.length,s=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=(i.property,function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e)});s.EVENT_USER_READY="xyj_userReady",s.EVENT_ALL_READY="xyj_allReady",s.EVENT_INIT_FAILED="xyj_initFailed",s=a([r],s),n.default=s,cc._RF.pop()},{}],XYJMoreGameButton:[function(e,t,n){"use strict";cc._RF.push(t,"2bae8+xqpRIYIQ9S08lL+in","XYJMoreGameButton");var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":a(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../managers/GameManager"),s=e("../wechat/WXUtils"),c=e("../wechat/WXImage"),l=cc._decorator,u=l.ccclass,d=l.property,f=function(e){function t(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.wxAppID="wx269f9d2cb8130024",e.wxAppPath="",e.previewImage="",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cc.Component),o(t,[{key:"start",value:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this)}},{key:"tapHandler",value:function(e){var t=this;this.node.opacity<10||(r.default.soundsManager.playTapSound(),s.default.navigateToMiniProgram(this.wxAppID,this.wxAppPath,null,null,function(e){t.wxAppPath&&c.default.previewImage([t.previewImage])}))}},{key:"onDestroy",value:function(){}}]),t}();i([d({displayName:"\u5fae\u4fe1AppID"})],f.prototype,"wxAppID",void 0),i([d({displayName:"\u8df3\u8f6c\u9875\u9762"})],f.prototype,"wxAppPath",void 0),i([d({displayName:"\u9884\u89c8\u56fe"})],f.prototype,"previewImage",void 0),f=i([u],f),n.default=f,cc._RF.pop()},{"../managers/GameManager":"GameManager","../wechat/WXImage":"WXImage","../wechat/WXUtils":"WXUtils"}],md5:[function(e,t,n){"use strict";cc._RF.push(t,"b4d70hwJilFc6P5ceSV0XP8","md5"),Object.defineProperty(n,"__esModule",{value:!0}),n.md5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,o,a,i,r;return a=2147483648&e,i=2147483648&t,r=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(o=1073741824&t)?2147483648^r^a^i:n|o?1073741824&r?3221225472^r^a^i:1073741824^r^a^i:r^a^i}function o(e,o,a,i,r,s,c){return n(t(e=n(e,n(n(function(e,t,n){return e&t|~e&n}(o,a,i),r),c)),s),o)}function a(e,o,a,i,r,s,c){return n(t(e=n(e,n(n(function(e,t,n){return e&n|t&~n}(o,a,i),r),c)),s),o)}function i(e,o,a,i,r,s,c){return n(t(e=n(e,n(n(function(e,t,n){return e^t^n}(o,a,i),r),c)),s),o)}function r(e,o,a,i,r,s,c){return n(t(e=n(e,n(n(function(e,t,n){return t^(e|~n)}(o,a,i),r),c)),s),o)}function s(e){var t,n="",o="";for(t=0;t<=3;t++)n+=(o="0"+(e>>>8*t&255).toString(16)).substr(o.length-2,2);return n}var c,l,u,d,f,h,p,_,y,g=Array();for(g=function(e){for(var t,n=e.length,o=n+8,a=16*((o-o%64)/64+1),i=Array(a-1),r=0,s=0;s<n;)r=s%4*8,i[t=(s-s%4)/4]=i[t]|e.charCodeAt(s)<<r,s++;return r=s%4*8,i[t=(s-s%4)/4]=i[t]|128<<r,i[a-2]=n<<3,i[a-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}(e)),h=1732584193,p=4023233417,_=2562383102,y=271733878,c=0;c<g.length;c+=16)l=h,u=p,d=_,f=y,p=r(p=r(p=r(p=r(p=i(p=i(p=i(p=i(p=a(p=a(p=a(p=a(p=o(p=o(p=o(p=o(p,_=o(_,y=o(y,h=o(h,p,_,y,g[c+0],7,3614090360),p,_,g[c+1],12,3905402710),h,p,g[c+2],17,606105819),y,h,g[c+3],22,3250441966),_=o(_,y=o(y,h=o(h,p,_,y,g[c+4],7,4118548399),p,_,g[c+5],12,1200080426),h,p,g[c+6],17,2821735955),y,h,g[c+7],22,4249261313),_=o(_,y=o(y,h=o(h,p,_,y,g[c+8],7,1770035416),p,_,g[c+9],12,2336552879),h,p,g[c+10],17,4294925233),y,h,g[c+11],22,2304563134),_=o(_,y=o(y,h=o(h,p,_,y,g[c+12],7,1804603682),p,_,g[c+13],12,4254626195),h,p,g[c+14],17,2792965006),y,h,g[c+15],22,1236535329),_=a(_,y=a(y,h=a(h,p,_,y,g[c+1],5,4129170786),p,_,g[c+6],9,3225465664),h,p,g[c+11],14,643717713),y,h,g[c+0],20,3921069994),_=a(_,y=a(y,h=a(h,p,_,y,g[c+5],5,3593408605),p,_,g[c+10],9,38016083),h,p,g[c+15],14,3634488961),y,h,g[c+4],20,3889429448),_=a(_,y=a(y,h=a(h,p,_,y,g[c+9],5,568446438),p,_,g[c+14],9,3275163606),h,p,g[c+3],14,4107603335),y,h,g[c+8],20,1163531501),_=a(_,y=a(y,h=a(h,p,_,y,g[c+13],5,2850285829),p,_,g[c+2],9,4243563512),h,p,g[c+7],14,1735328473),y,h,g[c+12],20,2368359562),_=i(_,y=i(y,h=i(h,p,_,y,g[c+5],4,4294588738),p,_,g[c+8],11,2272392833),h,p,g[c+11],16,1839030562),y,h,g[c+14],23,4259657740),_=i(_,y=i(y,h=i(h,p,_,y,g[c+1],4,2763975236),p,_,g[c+4],11,1272893353),h,p,g[c+7],16,4139469664),y,h,g[c+10],23,3200236656),_=i(_,y=i(y,h=i(h,p,_,y,g[c+13],4,681279174),p,_,g[c+0],11,3936430074),h,p,g[c+3],16,3572445317),y,h,g[c+6],23,76029189),_=i(_,y=i(y,h=i(h,p,_,y,g[c+9],4,3654602809),p,_,g[c+12],11,3873151461),h,p,g[c+15],16,530742520),y,h,g[c+2],23,3299628645),_=r(_,y=r(y,h=r(h,p,_,y,g[c+0],6,4096336452),p,_,g[c+7],10,1126891415),h,p,g[c+14],15,2878612391),y,h,g[c+5],21,4237533241),_=r(_,y=r(y,h=r(h,p,_,y,g[c+12],6,1700485571),p,_,g[c+3],10,2399980690),h,p,g[c+10],15,4293915773),y,h,g[c+1],21,2240044497),_=r(_,y=r(y,h=r(h,p,_,y,g[c+8],6,1873313359),p,_,g[c+15],10,4264355552),h,p,g[c+6],15,2734768916),y,h,g[c+13],21,1309151649),_=r(_,y=r(y,h=r(h,p,_,y,g[c+4],6,4149444226),p,_,g[c+11],10,3174756917),h,p,g[c+2],15,718787259),y,h,g[c+9],21,3951481745),h=n(h,l),p=n(p,u),_=n(_,d),y=n(y,f);return(s(h)+s(p)+s(_)+s(y)).toLowerCase()},cc._RF.pop()},{}]},{},["GameCoreEventNames","GameCoreLocation","Callback","DeerLoading","Dictionary","GameValues","SyncDataToServerByDeerSDK","SyncDataToWXCloud","Comp_AvatarImage","Comp_EffectFadeInAndOut","Comp_EffectFloat","Comp_EffectFlyTo","Comp_EffectShake","Comp_EffectZoom","Comp_GameClubButton","Comp_List","Comp_ListRenderer","Comp_LoadingSceneMain","Comp_MoveButton","Comp_MusicButton","Comp_PlatformContent","Comp_RemoteImage","Comp_SplashScreen","Comp_SubDomainContent","Comp_UserInfoButton","Comp_VibrateButton","Comp_DeerIconAd","Comp_DeerRecommendAdList","Comp_DeerSpineAd","DeerRequest","DeerSDK","DeerSDKEventNames","md5","DataManager","GameManager","GestureManager","PopUpManager","PopUpType","ResManager","SceneManager","SoundsManager","TagManager","Utils","EventCallBack","EventData","EventDispacher","ItemBase","ItemManager","ItemProp","Command","Context","QQCM_gameInfo","QQCM_getAvatarFromOpenId","TextureRenderUtils","Comp_NearToMenuButton","Comp_NearToWXBannerAd","Comp_WXBannerAd","DeerBannerAd","WXBannerAd","WXBannerAdBase","WXCore","WXData","WXDevice","WXEventNames","WXImage","WXOpenData","WXRewardVideoAd","WXRewardVideoAdCloseComfirm","WXShare","WXUser","WXUtils","WXRankDataManager","WXRankEventNames","WXRankVO","ShareDataTypes","ShareTypes","XYJAPI","XYJEventNames","XYJMoreGameButton"]);