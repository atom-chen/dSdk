window.__require=function e(t,n,o){function a(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){return a(t[r][1][e]||e)},d,d.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"a9991qRjkhMVpxhAdv0qAm0","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../SoundMgr"),a=cc._decorator,i=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!0,configurable:!0}),t.prototype.playSound=function(e,t){void 0===t&&(t=null),-1!=e.indexOf("scream")&&(e+="_"+Math.floor(20*Math.random()+1)),o.default.instance.playSound("sounds/"+e)},t._instance=null,t=n=__decorate([i],t)}(cc.Component));n.default=r,cc._RF.pop()},{"../../SoundMgr":"SoundMgr"}],BannerAuto1:[function(e,t,n){"use strict";cc._RF.push(t,"e766a+3xaRBb7b7Lgr+8bP3","BannerAuto1"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../gamecore/wechat/WXBannerAd"),a=e("../gamecore/managers/Utils"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bannerUpADD=0,t.startLoca=null,t.bureeLoca=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.isNoBuLoca=function(){},t.prototype.init=function(){this.node.y=this.relayout()},t.prototype.relayout=function(){var e,t=o.default.currentAd;if(void 0!=t&&1==t.isShowing){var n=t.adRect;if(void 0!=n){n=a.default.fromScreenRect(n);var i=new cc.Vec2(n.x+n.width/2,n.y+n.height);i=this.node.parent.convertToNodeSpaceAR(i),e=t.isShowing?i.y+this.node.height*this.node.anchorY:i.y-this.node.height*(1-this.node.anchorY)}}return e},__decorate([s(cc.Integer)],t.prototype,"bannerUpADD",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../gamecore/managers/Utils":"Utils","../gamecore/wechat/WXBannerAd":"WXBannerAd"}],BannerAuto:[function(e,t,n){"use strict";cc._RF.push(t,"7c865R4K8hL36ajasf4ksq7","BannerAuto"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../gamecore/deer/DeerSDK"),a=e("../gamecore/wechat/WXBannerAd"),i=e("../gamecore/managers/Utils"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bannerUpADD=0,t.startLoca=null,t.bureeLoca=null,t.bannerUpADDR=0,t.isstart=!1,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.isNoBuLoca=function(){this.bureeLoca=cc.v2(this.node.x,60-(cc.winSize.height/2-100)),this.startLoca=cc.v2(this.node.x,this.node.y)},t.prototype.getBerryData=function(){if(1==o.default.instance.canUseEasingPolicy){var e=o.default.instance.game_config;void 0!=e&&(this.bannerUpADD=0==this.bannerUpADD?e.bannerUpADD:this.bannerUpADD,this.bannerUpADDR=e.bannerUpADDR,this.init())}},t.prototype.init=function(){var e=this;if(Math.random()<=this.bannerUpADDR){if(0==this.relayout()&&this.isNoBuLoca(),a.default.currentAd.hide(),this.node.position=this.bureeLoca,-1==this.bannerUpADD)return;this.scheduleOnce(function(){a.default.currentAd.show(),e.isstart=!0},this.bannerUpADD)}},t.prototype.relayout=function(){var e=!1,t=a.default.currentAd;if(void 0!=t&&1==t.isShowing){var n=t.adRect;if(void 0!=n){n=i.default.fromScreenRect(n);var o=new cc.Vec2(n.x+n.width/2,n.y+n.height);o=this.node.parent.convertToNodeSpaceAR(o);var r=void 0;r=t.isShowing?o.y+this.node.height*this.node.anchorY:o.y-this.node.height*(1-this.node.anchorY),this.bureeLoca=cc.v2(this.node.x,r-this.node.height/2-n.height/2),this.startLoca=cc.v2(this.node.x,r+55),e=!0}}return e},t.prototype.update=function(e){},__decorate([c(cc.Integer)],t.prototype,"bannerUpADD",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../gamecore/deer/DeerSDK":"DeerSDK","../gamecore/managers/Utils":"Utils","../gamecore/wechat/WXBannerAd":"WXBannerAd"}],BasePanelComp:[function(e,t,n){"use strict";cc._RF.push(t,"7fe34KUl3tPHYyZMrYW8xhS","BasePanelComp"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/managers/GameManager"),a=e("../../gamecore/wechat/WXBannerAd"),i=e("./CoinAnimComp"),r=e("./CoinAnimComp"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){this.init(!0)},t.prototype.init=function(e){void 0===e&&(e=!0),e&&a.default.currentAd&&a.default.currentAd.next()},t.prototype.close=function(){o.default.soundsManager.playTapSound(),this.node.destroy()},t.prototype.showFlyGoldEvent=function(e,t,n){void 0===n&&(n=1);var o=new cc.Event.EventCustom(r.default.SHOW_FLY_ANI,!0),a=new i.FlyStruct;a.start=e.convertToWorldSpaceAR(cc.v2(0,0)),a.start=cc.find("Canvas").convertToNodeSpaceAR(a.start),a.end=t.convertToWorldSpaceAR(cc.v2(0,0)),a.end=cc.find("Canvas").convertToNodeSpaceAR(a.end),a.type=n,o.detail=a,this.node.dispatchEvent(o)},t=__decorate([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../../gamecore/managers/GameManager":"GameManager","../../gamecore/wechat/WXBannerAd":"WXBannerAd","./CoinAnimComp":"CoinAnimComp"}],Base:[function(e,t,n){"use strict";cc._RF.push(t,"0ec6fkMsxZBz4f1CbsSzG+O","Base"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/GameValues");n.Base_init=function(){if(void 0==window.wx){window.wx={};var e=window.wx,t=o.default.canvas;t&&(t.toTempFilePathSync=function(e){return console.log("------\u3010Base\u3011 toTempFilePathSync-------"),null},t.toTempFilePath=function(e){console.log("------\u3010Base\u3011 toTempFilePath-------")}),e.createImage=function(){console.log("------\u3010Base\u3011 createImage-------");var e=new Image;return console.log("image is "+e),e},e.createGameClubButton=function(e){return{onTap:function(e){},offTap:function(e){},show:function(){},hide:function(){},destory:function(){}}},e.login=function(e){console.log("------\u3010Base\u3011 login-------")},e.vibrateShort=function(e){console.log("------\u3010Base\u3011 vibrateShort-------")},e.vibrateLong=function(e){console.log("------\u3010Base\u3011 vibrateLong-------")},e.onMemoryWarning=function(e){console.log("------\u3010Base\u3011 onMemoryWarning-------")},e.__userInfoRes=null,e.getUserInfo=function(t){void 0===t&&(t=null),console.log("------\u3010Base\u3011 getUserInfo-------");var n=t?t.success:null,o=t?t.fail:null,a=t?t.complete:null;e.__userInfoRes?n&&n(JSON.parse(JSON.stringify(e.__userInfoRes))):o&&o(),a&&a()},e.createUserInfoButton=function(e){return void 0===e&&(e=null),console.log("------\u3010Base\u3011 createUserInfoButton-------"),console.log(e),null},e.getFriendCloudStorage=function(e){console.log("------\u3010Base\u3011 getFriendCloudStorage-------"),console.log(e)},e.getUserCloudStorage=function(e){console.log("------\u3010Base\u3011 setUserCloudStorage-------")},e.setUserCloudStorage=function(e){console.log("------\u3010Base\u3011 setUserCloudStorage-------")},e.getSetting=function(e){console.log("------\u3010Base\u3011 getSetting-------");var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);t&&t({authSetting:{"scope.userInfo":!0}}),n&&n()},e.navigateToMiniProgram=function(e){console.log("------\u3010Base\u3011 navigateToMiniProgram-------")},e.__openDataContext={callbacks:[],postMessage:function(t){e.__openDataContext.callbacks.forEach(function(e){e(t)})}},e.getOpenDataContext=function(){return e.__openDataContext},e.onMessage=function(t){var n=e.__openDataContext.callbacks;-1==n.indexOf(t)&&n.push(t)},e.getSystemInfo=function(e){console.log("------\u3010Base\u3011 getSetting-------")},e.exitMiniProgram=function(e){console.log("------\u3010Base\u3011 exitMiniProgram-------")},e.__query=null,e.getLaunchOptionsSync=function(){return console.log("------\u3010Base\u3011 getLaunchOptionsSync-------"),{scene:0,query:{},isSticky:0,shareTicket:null}},e.onHide=function(e){console.log("------\u3010Base\u3011 onHide-------")},e.onShow=function(e){console.log("------\u3010Base\u3011 onShow-------")},e.offHide=function(e){console.log("------\u3010Base\u3011 offHide-------")},e.offShow=function(e){console.log("------\u3010Base\u3011 offShow-------")},e.onClose=function(e){console.log("------\u3010Base\u3011 onClose-------")},e.offClose=function(e){console.log("------\u3010Base\u3011 offClose-------")},e.onAudioInterruptionEnd=function(e){console.log("------\u3010Base\u3011 onAudioInterruptionEnd-------")},e.getFileSystemManager=function(){return console.log("------\u3010Base\u3011 getFileSystemManager-------"),null},e.getShareInfo=function(e){},e.hideShareMenu=function(e){},e.showShareMenu=function(e){},e.updateShareMenu=function(e){},e.shareAppMessage=function(e){console.log("------\u3010Base\u3011 shareAppMessage-------")},e.onShareAppMessage=function(e){console.log("------\u3010Base\u3011 onShareAppMessage-------")},e.offShareAppMessage=function(e){},e.createRewardedVideoAd=function(e){return console.log("------\u3010Base\u3011 createRewardedVideoAd-------"),null},e.createBannerAd=function(e){return console.log("------\u3010Base\u3011 createBannerAd-------"),null},e.requestMidasPayment=function(e){console.log("------\u3010Base\u3011 requestMidasPayment-------")},e.hideLoading=function(e){console.log("------\u3010Base\u3011 hideLoading-------")},e.hideToast=function(e){console.log("------\u3010Base\u3011 hideToast-------")},e.showLoading=function(e){console.log("------\u3010Base\u3011 showLoading-------")},e.showModal=function(e){console.log("------\u3010Base\u3011 showModal-------");var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);t&&t({confirm:!1,cancel:!0}),n&&n()},e.showToast=function(e){console.log("------\u3010Base\u3011 showToast-------")},e.getMenuButtonBoundingClientRect=function(){return console.log("------\u3010Base\u3011 getMenuButtonBoundingClientRect-------"),{top:0,left:0,width:0,height:0,bottom:0,right:0}},e.setMenuStyle=function(e){console.log("------\u3010Base\u3011 setMenuStyle-------")},e.request=function(e){if(console.log("------\u3010Base\u3011 request-------"),console.log(JSON.stringify(e)),e){var t=e.url;if(t){var n=e?e.success:null,o=e?e.fail:null,a=e?e.complete:null,i=e.method||"get";i=i.toLocaleLowerCase();var r=e.dataType||"json";r=r.toLowerCase();var s=e.responseType||"text";s=s.toLowerCase();var c=e.data,l="";if(c){for(var d in c)""!=l&&(l+="&"),l+=d+"="+encodeURIComponent(c[d]);console.log(l),"post"!=i&&(t.indexOf("?")>=0?t+="&"+l:t+="?"+l)}var u=new XMLHttpRequest;u.open(i.toLocaleUpperCase(),t,!0),u.responseType=s,u.onload=function(){console.log("\u3010Base\u3011request success");var e=u.response;try{"json"==r&&(e={data:e=JSON.parse(""+e)})}catch(e){}n&&n(e),a&&a()},u.onerror=function(){console.log("\u3010Base\u3011request error"),o&&o(),a&&a()};var h=e.header;if(h)for(var d in h)u.setRequestHeader(d,h[d]);"post"==i?u.send(l):u.send(null)}}}}},cc._RF.pop()},{"../base/GameValues":"GameValues"}],BoardAdsItem:[function(e,t,n){"use strict";cc._RF.push(t,"b6880HAfutIeriRaSYh8x6T","BoardAdsItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../scripts/gamecore/components/Comp_ListRenderer"),a=e("../../../scripts/gamecore/managers/GameManager"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.imgSprite=null,t.nameLabel=null,t.infoLabel=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this)},t.prototype.clamp=function(e,t){return e.replace(/[\u0391-\uFFE5]/g,"aa").length>2*t&&(e=e.substr(0,t)+"..."),e},t.prototype.refreshUI=function(){var t=this;if(e.prototype.refreshUI.call(this),this.data){if(this._imageOriginalSize=new cc.Size(this.imgSprite.node.width,this.imgSprite.node.height),this.nameLabel.string=this.clamp(this.data.name,5),void 0!=this.data.ad_count)this.infoLabel.string=this.data.ad_count+"\u4eba\u5728\u73a9";else{var n=Math.floor(5e3*Math.random()+5e3);this.infoLabel.string=n+"\u4eba\u5728\u73a9"}var o=this.data.icon;this.node.scale=.9,o&&cc.loader.load(o,function(e,n){n&&(t.imgSprite.spriteFrame=new cc.SpriteFrame(n),t.imgSprite.node.width=n.width,t.imgSprite.node.height=n.height,t.imgSprite.node.scaleX=t._imageOriginalSize.width/n.width,t.imgSprite.node.scaleY=t._imageOriginalSize.height/n.height)})}},t.prototype.tapHandler=function(e){a.default.soundsManager.playTapSound(),this.data&&this.data.navigate()},__decorate([s(cc.Sprite)],t.prototype,"imgSprite",void 0),__decorate([s(cc.Label)],t.prototype,"nameLabel",void 0),__decorate([s(cc.Label)],t.prototype,"infoLabel",void 0),t=__decorate([r],t)}(o.default);n.default=c,cc._RF.pop()},{"../../../scripts/gamecore/components/Comp_ListRenderer":"Comp_ListRenderer","../../../scripts/gamecore/managers/GameManager":"GameManager"}],BoardAdsPanel:[function(e,t,n){"use strict";cc._RF.push(t,"a859eMfunpJiLPt3OwXk3dU","BoardAdsPanel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../scripts/gamecore/managers/GameManager"),a=e("../../../scripts/gamecore/deer/DeerSDK"),i=e("../../../scripts/gamecore/xiaoyaoji/XYJAPI"),r=e("../../../scripts/gamecore/deer/DeerSDKEventNames"),s=e("../../../scripts/gamecore/components/Comp_List"),c=e("../../../scripts/control/WXScreenAdMgr"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adBackground=null,t.adsContainer=null,t.closeBtn=null,t.slideNode=null,t.openBtn=null,t.cooperateLabel=null,t.bg=null,t._isShowing=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.init()},t.prototype.start=function(){},Object.defineProperty(t.prototype,"isShowing",{get:function(){return this._isShowing},enumerable:!0,configurable:!0}),t.prototype.show=function(){if(!this._isShowing){this._isShowing=!0,this.bg.active=!0;var e=this.slideNode.width*this.slideNode.scaleX/2-cc.winSize.width/2,t=new cc.Vec2(e,this.slideNode.y),n=cc.moveTo(.2,t).easing(cc.easeIn(1));this.slideNode.active=!0,this.slideNode.stopAllActions(),this.slideNode.runAction(n),this.adBackground&&(this.adBackground.active=!0,this.adBackground.stopAllActions(),this.adBackground.runAction(cc.fadeTo(.2,255)))}},t.prototype.hide=function(){var e=this;if(this._isShowing){this._isShowing=!1;var t=-this.node.width/2-this.slideNode.width*this.slideNode.scaleX/2,n=new cc.Vec2(t,this.slideNode.y);this.slideNode.stopAllActions(),this.slideNode.runAction(cc.sequence(cc.moveTo(.2,n).easing(cc.easeOut(1)),cc.callFunc(function(){e.slideNode.active=!1,e.bg.active=!1}))),this.adBackground&&(this.adBackground.stopAllActions(),this.adBackground.runAction(cc.sequence(cc.fadeTo(.2,0),cc.callFunc(function(){e.adBackground.active=!1})))),console.log("\u5fae\u4fe1\u63d2\u5c4f\u5e7f\u544a"),c.default.instance.showRandAd()}},t.prototype.onSlideClicked=function(){o.default.soundsManager.playTapSound(),this.hide()},t.prototype.onCloseBtnClicked=function(){o.default.soundsManager.playTapSound(),this.hide()},t.prototype.onOpenBtnClicked=function(){o.default.soundsManager.playTapSound(),this.show()},t.prototype.init=function(){var e=this;this.slideNode.active=!1,this.closeBtn.on(cc.Node.EventType.TOUCH_END,this.onCloseBtnClicked,this),this.adBackground&&(this.adBackground.on(cc.Node.EventType.TOUCH_END,this.onSlideClicked,this),this.adBackground.active=!1),a.default.instance.isReady||i.default.userOpenID?this.loadAdData():a.default.instance.addEventListener(r.default.READY,function(t){e.loadAdData()},this,0,!0)},t.prototype.loadAdData=function(){var e=this;a.default.instance.ad_getAdData(a.DeerAdType.BOARD,function(t){t&&(e.adsContainer.getComponent(s.default).data=t)}),i.default.getAffairs(function(t){null!=t&&void 0!=t&&0!=t.length&&(e.cooperateLabel.string="\u5546\u52a1\u5408\u4f5c\u5fae\u4fe1: "+t.join("\u3001"))})},__decorate([u({type:cc.Node,displayName:"\u80cc\u666f\u5c42"})],t.prototype,"adBackground",void 0),__decorate([u({type:cc.Node,displayName:"\u5e7f\u544a\u5bb9\u5668"})],t.prototype,"adsContainer",void 0),__decorate([u({type:cc.Node,displayName:"\u5173\u95ed\u6309\u94ae"})],t.prototype,"closeBtn",void 0),__decorate([u({type:cc.Node,displayName:"\u6ed1\u52a8\u9762\u677f"})],t.prototype,"slideNode",void 0),__decorate([u({type:cc.Node,displayName:"\u6253\u5f00\u6309\u94ae"})],t.prototype,"openBtn",void 0),__decorate([u({type:cc.Label,displayName:"\u5546\u52a1\u5408\u4f5c\u5fae\u4fe1"})],t.prototype,"cooperateLabel",void 0),__decorate([u(cc.Node)],t.prototype,"bg",void 0),t=__decorate([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../scripts/control/WXScreenAdMgr":"WXScreenAdMgr","../../../scripts/gamecore/components/Comp_List":"Comp_List","../../../scripts/gamecore/deer/DeerSDK":"DeerSDK","../../../scripts/gamecore/deer/DeerSDKEventNames":"DeerSDKEventNames","../../../scripts/gamecore/managers/GameManager":"GameManager","../../../scripts/gamecore/xiaoyaoji/XYJAPI":"XYJAPI"}],BoomBox:[function(e,t,n){"use strict";cc._RF.push(t,"15afc5GiDdHuLMaCoEFJQy1","BoomBox"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("./PrfabsManager"),r=e("./GrenadeController"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.BoxSpriteNode=null,t.isBoom=!1,t.isTnt=!0,t.countNode=null,t.countLabel=null,t.colliderTotalCount=0,t.colliderCount=0,t.boomEffct=function(){this.BoxSpriteNode.runAction(cc.fadeOut(.2)),this.colliderTotalCount>0&&(this.countNode.active=!1);var e=cc.instantiate(i.default.instance.prfabsAry.BoxBoomEffectNode);e.getComponent(cc.ParticleSystem).resetSystem(),e.position=this.node.position,cc.find("Canvas").addChild(e),this.node.getComponent(cc.PhysicsCollider)&&(this.node.group="rope",this.node.getComponent(cc.PhysicsCollider).sensor=!0,this.node.getComponent(cc.PhysicsCollider).apply())},t}return __extends(t,e),t.prototype.start=function(){var e=this;this.colliderTotalCount>0&&this.scheduleOnce(function(){e.countNode.active=!0,e.countLabel.string=e.colliderTotalCount.toString()})},t.prototype.onCollisionEnter=function(e,t){e.tag==o.default.Tag.tagBullet&&(a.default.instance.playSound("boombox"),this.boomEffct(),t.enabled=!1,e.node.destroy(),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.bulletRemove,!0)))},t.prototype.onBeginContact=function(e,t,n){n.enabled&&(this.isBoom?e.disabled=!0:n.tag==o.default.Tag.tagBullet?(this.colliderTotalCount>0&&(this.colliderCount++,this.countLabel.string=(this.colliderTotalCount-this.colliderCount).toString()),this.colliderCount>=this.colliderTotalCount&&(this.isBoom=!0,a.default.instance.playSound("boombox"),this.boomEffct(),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.bulletRemove,!0)))):n.tag==o.default.Tag.tagGrenade&&n.node.parent.getComponent(r.default).isBoom?(this.isBoom=!0,a.default.instance.playSound("boombox"),this.boomEffct()):n.tag==o.default.Tag.tagTNT&&(this.isBoom=!0,a.default.instance.playSound("boombox"),this.boomEffct()))},__decorate([l(cc.Node)],t.prototype,"BoxSpriteNode",void 0),__decorate([l(Boolean)],t.prototype,"isBoom",void 0),__decorate([l(Boolean)],t.prototype,"isTnt",void 0),__decorate([l(cc.Node)],t.prototype,"countNode",void 0),__decorate([l(cc.Label)],t.prototype,"countLabel",void 0),__decorate([l(Number)],t.prototype,"colliderTotalCount",void 0),t=__decorate([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"./AudioManager":"AudioManager","./Common":"Common","./GrenadeController":"GrenadeController","./PrfabsManager":"PrfabsManager"}],BulletController:[function(e,t,n){"use strict";cc._RF.push(t,"9e043vzlSFE8KlWzA0PNPHL","BulletController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("./GameMainMgr"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletBody=null,t.finshCount=0,t.isRemoved=!1,t}return __extends(t,e),t.prototype.onEndContact=function(e,t,n){if(n.tag==o.default.Tag.tagPlat&&a.default.instance.playSound("plat"),n.tag!=o.default.Tag.tagBodyJoint&&n.tag!=o.default.Tag.tagHostage&&0!=n.tag&&(this.finshCount++,this.finshCount>=22)){if(this.isRemoved)return;this.isRemoved=!0,this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.bulletRemove,!0)),this.node.active=!1}},t.prototype.update=function(e){if(Math.abs(this.node.x)>540||Math.abs(this.node.y)>1920){if(this.isRemoved)return;this.isRemoved=!0,i.default.curGameState==i.default.gameState.ACTIVE&&this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.bulletRemove,!0)),this.node.active=!1}},t.prototype.start=function(){},__decorate([c(cc.RigidBody)],t.prototype,"bulletBody",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./AudioManager":"AudioManager","./Common":"Common","./GameMainMgr":"GameMainMgr"}],Bullet_fllow:[function(e,t,n){"use strict";cc._RF.push(t,"9ffea/H6hlBHqiF4Wn4Xreu","Bullet_fllow"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameCtrl"),a=e("./Globaldef"),i=e("./EffManager"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rayPrefab=null,t.bombPrefab=null,t.body=null,t.collider=null,t.canColNum=1,t.sprite=null,t.moveDir=null,t.startMove=!1,t.moveSpeed=2e3,t.enemyManager=null,t.ray=null,t.rayComPonent=null,t.bullet_type=0,t.gameCtrl=null,t.target=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.body=this.getComponent(cc.RigidBody),this.collider=this.getComponent(cc.PhysicsBoxCollider);var e=cc.find("Canvas/bg/EnemyManager");this.enemyManager=e.getComponent("EnemyManager");var t=cc.find("Canvas");this.gameCtrl=t.getComponent(o.default)},t.prototype.start=function(){this.addRay()},t.prototype.refreshAngle=function(){var e=cc.v2(this.moveDir.x*this.moveSpeed,this.moveDir.y*this.moveSpeed),t=cc.v2(1,0),n=Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI);cc.log("refreshAngle: "+-n),this.sprite.node.rotation=-n},t.prototype.update=function(e){if(this.rayComPonent){var t=this.node.getPosition();if(this.target=this.enemyManager.getEnemyNearest(this.node.getPosition()),null!=this.target){var n=this.target.node.getPosition().sub(t);n.normalizeSelf(),console.log("cccc"),this.rayComPonent.setCenter(t.addSelf(n.mulSelf(10))),this.target.isDead?this.rayComPonent.setTarget(0,0):this.rayComPonent.setTarget(this.target.node.x,this.target.node.y)}}if(this.rayComPonent&&this.rayComPonent.curCollider)switch(this.rayComPonent.curCollider.tag){case a.default.TagType.WALL:this.target=null;break;case a.default.TagType.ENEMY:break;case a.default.TagType.HERO:case a.default.TagType.ITEM:this.target=null}this.startMove&&this.move(e)},t.prototype.move=function(e){var t=this.node.getPosition().add(this.moveDir.mul(this.moveSpeed*e));if(this.node&&this.node.setPosition(t),this.target){var n=this.target.node.getPosition().subSelf(t);n.normalizeSelf();var o=this.moveDir,a=this.moveDir.x*n.x+this.moveDir.y*n.y;if(.1>a)return this.moveDir.x=n.x,void(this.moveDir.y=n.y);0>(r=Math.atan2(n.y,n.x)-Math.atan2(o.y,o.x))&&(r+=180);var i=180*r/Math.PI;if(cc.log("A "+r+" dot: "+a+" angle: "+i),!(5>=Math.abs(i-180)&&0<=a)){r=r*e*2;var r,s=this.moveDir.x*Math.cos(r)-this.moveDir.y*Math.sin(r),c=this.moveDir.x*Math.sin(r)+this.moveDir.y*Math.cos(r);this.moveDir.x=s,this.moveDir.y=c,this.refreshAngle()}}},t.prototype.onPreSolve=function(e,t,n){var o=e.colliderA.tag;switch(this.collider==e.colliderA&&(o=e.colliderB.tag),o){case a.default.TagType.WALL:break;case a.default.TagType.ENEMY:if(this.collider.tag==a.default.TagType.BULLET_HERO){i.default.instance.addHitEff(this.node.getPosition(),this.node),this.node.active=!1;var r=n.getComponent("Enemy");return void(r&&r.onHP(-1))}this.collider.tag,a.default.TagType.BULLET_ENEMY;break;case a.default.TagType.HERO:if(this.collider.tag==a.default.TagType.BULLET_HERO);else if(this.collider.tag==a.default.TagType.BULLET_ENEMY){i.default.instance.addHitEff(this.node.getPosition(),this.node),this.node.active=!1;var s=n.getComponent("Hero_physic");s&&s.onHP(-1)}break;case a.default.TagType.ITEM:if(this.collider.tag==a.default.TagType.BULLET_HERO||this.collider.tag==a.default.TagType.BULLET_ENEMY){i.default.instance.addHitEff(this.node.getPosition(),this.node),this.node.active=!1;var c=n.getComponent("EnemyItem");c&&c.onHP(-1)}}this.canColNum-=3,0>=this.canColNum&&(i.default.instance.addHitEff(this.node.getPosition(),this.node),this.node.active=!1,this.node.destroy())},t.prototype.addBombEff=function(){var e=cc.instantiate(this.bombPrefab);e&&(e.parent=this.node.parent,e.setPosition(this.node.x,this.node.y))},t.prototype.addRay=function(){this.ray=cc.instantiate(this.rayPrefab),this.ray.parent=this.gameCtrl.bgImg.node,this.rayComPonent=this.ray.getComponent("Raycast"),this.node.getPosition(),this.node.convertToWorldSpaceAR(cc.v2(0,0)),console.log("nnnnn"),this.rayComPonent.setCenter(this.node.x,this.node.y);var e=this.enemyManager.getEnemyNearest(this.node.getPosition());this.rayComPonent.setTarget(e.node.x,e.node.y),this.ray.setPosition(0,0)},t.prototype.onDestroy=function(){this.ray&&this.ray.destroy()},t=__decorate([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{"./EffManager":"EffManager","./GameCtrl":"GameCtrl","./Globaldef":"Globaldef"}],Bullet_pao_target:[function(e,t,n){"use strict";cc._RF.push(t,"4f594nKCxVLfpEkdCeq7O1H","Bullet_pao_target"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){this.actBig()},t.prototype.actBig=function(){var e=cc.scaleTo(.5,1.1,1.1),t=cc.sequence(e,cc.callFunc(function(){this.actSmall()}.bind(this)));this.node.runAction(t)},t.prototype.actSmall=function(){var e=cc.scaleTo(.5,.9,.9),t=cc.sequence(e,cc.callFunc(function(){this.actBig()}.bind(this)));this.node.runAction(t)},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],Bullet_pao:[function(e,t,n){"use strict";cc._RF.push(t,"3e39a/s8ehH/bvdQVnQPNwn","Bullet_pao"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EffManager"),a=e("./Globaldef"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bombPrefab=null,t.bomb_radius=2,t.checkType=3,t.targetObj=null,t.targetPrefab=null,t}return __extends(t,e),t.prototype.onDisable=function(){this.targetObj&&(this.targetObj.active=!1)},t.prototype.setTargetType=function(e){this.checkType=e},t.prototype.setTarget=function(e,t){this.showTargetCircle(t);var n=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)),i=n/300;cc.log("touchPos: ",e.x,e.y),cc.log("localPos: ",this.node.x,this.node.y),cc.log("dis: "+n+" t:"+i);var r=n/4;200<r&&(r=200),0>e.x&&(r*=-1);var s=cc.v2(e.x,e.y).normalize().rotateSelf(1.5707964),c=cc.v2(0,0).addSelf(s.mulSelf(r));c.x+=e.x/2,c.y+=e.y/2;var l=[cc.v2(0,0),c,cc.v2(e.x,e.y)],d=cc.bezierBy(i,l),u=cc.sequence(d,cc.callFunc(function(){cc.log("end"),o.default.instance.addHitEff(this.node.getPosition(),this.node),this.node.active=!1,this.checkType==a.default.TagType.ENEMY?this.checkEnemy():this.checkType==a.default.TagType.HERO&&this.checkHero()}.bind(this)));this.node.runAction(u)},t.prototype.showTargetCircle=function(e){if(this.targetPrefab){var t=cc.instantiate(this.targetPrefab),n=this.node.parent.getChildByName("downNode");t.parent=n,t.setPosition(e),this.targetObj=t,this.targetObj.active=!0,cc.Node}else{var o="target_hero";this.checkType==a.default.TagType.HERO&&(o="target"),cc.loader.loadRes("prefabs/"+o,function(t,n){if(t)cc.error(t.message||t);else{this.targetPrefab=n;var o=cc.instantiate(n),a=this.node.parent.getChildByName("downNode");o.parent=a,o.setPosition(e),this.targetObj=o,this.targetObj.active=!0}}.bind(this))}},t.prototype.checkEnemy=function(){for(var e=cc.find("Canvas/bg/EnemyManager").getComponent("EnemyManager"),t=0;t<e.getEnemyCount();t++){var n=e.getEnemyByIdx(t),o=this.node.getPosition(),a=n.getPosition();if(40>o.sub(a).mag()&&n){var i=n.getComponent("Enemy");i&&i.onHP(-3)}}this.targetObj&&(this.targetObj.active=!1)},t.prototype.checkHero=function(){var e=cc.find("Canvas").getComponent("GameCtrl"),t=this.node.getPosition(),n=e.hero.node.getPosition();40>t.sub(n).mag()&&e.hero.onHP(-3),this.targetObj&&(this.targetObj.active=!1)},t.prototype.addBombEff=function(){var e=cc.instantiate(this.bombPrefab);e&&(e.parent=this.node.parent,e.setPosition(this.node.x,this.node.y)),this.targetObj&&(this.targetObj.active=!1)},__decorate([s(cc.Prefab)],t.prototype,"bombPrefab",void 0),__decorate([s(Number)],t.prototype,"bomb_radius",void 0),__decorate([s(Number)],t.prototype,"checkType",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./EffManager":"EffManager","./Globaldef":"Globaldef"}],Bullet_power:[function(e,t,n){"use strict";cc._RF.push(t,"d8f3f5xClJHQKc8Q2UBk4zA","Bullet_power"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Globaldef"),a=e("./EffManager"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bombPrefab=null,t.canColNum=2,t.sprite=null,t.body=null,t.collider=null,t.bullet_type=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.body=this.getComponent(cc.RigidBody),this.collider=this.getComponent(cc.PhysicsBoxCollider)},t.prototype.start=function(){this.bullet_type=0},t.prototype.refreshAngle=function(){var e=cc.v2(this.body.linearVelocity.x,this.body.linearVelocity.y),t=cc.v2(1,0),n=Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI);this.sprite.node.rotation=-n},t.prototype.onBeginContact=function(e,t,n){var i=e.colliderA.tag;switch(this.collider==e.colliderA&&(i=e.colliderB.tag),i){case o.default.TagType.WALL:a.default.instance.addDieEff(this.node.getPosition(),this.node),this.node.active=!1;break;case o.default.TagType.ENEMY:if(this.collider.tag==o.default.TagType.BULLET_HERO){var r=n.getComponent("Enemy");return void(r&&r.onHP(-10))}this.collider.tag,o.default.TagType.BULLET_ENEMY;break;case o.default.TagType.HERO:if(this.collider.tag==o.default.TagType.BULLET_HERO);else if(this.collider.tag==o.default.TagType.BULLET_ENEMY){var s=n.getComponent("Hero_physic");s&&s.onHP(-10)}break;case o.default.TagType.ITEM:if(this.collider.tag==o.default.TagType.BULLET_HERO||this.collider.tag==o.default.TagType.BULLET_ENEMY){var c=n.getComponent("EnemyItem");c&&c.onHP(-10)}}},t.prototype.onEndContact=function(){this.refreshAngle()},__decorate([s(cc.Prefab)],t.prototype,"bombPrefab",void 0),__decorate([s(Number)],t.prototype,"canColNum",void 0),__decorate([s(cc.Sprite)],t.prototype,"sprite",void 0),__decorate([s(cc.RigidBody)],t.prototype,"body",void 0),__decorate([s(cc.PhysicsBoxCollider)],t.prototype,"collider",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./EffManager":"EffManager","./Globaldef":"Globaldef"}],Bullet:[function(e,t,n){"use strict";cc._RF.push(t,"5bce7q+P9BCBa0eWuDcHzvi","Bullet"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Globaldef"),a=e("./EffManager"),i=e("./Enemy"),r=e("./Hero_physic"),s=e("./EnemyItem"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bombPrefab=null,t.canColNum=2,t.sprite=null,t.body=null,t.collider=null,t.bullet_type=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.body=this.getComponent(cc.RigidBody),this.collider=this.getComponent(cc.PhysicsBoxCollider)},t.prototype.start=function(){this.bullet_type=0},t.prototype.refreshAngle=function(){var e=cc.v2(this.body.linearVelocity.x,this.body.linearVelocity.y),t=cc.v2(1,0),n=Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI);this.sprite.node.rotation=-n},t.prototype.onEndContact=function(){this.refreshAngle()},t.prototype.onPreSolve=function(e,t,n){var c=e.colliderA.tag;switch(this.collider==e.colliderA&&(c=e.colliderB.tag),c){case o.default.TagType.WALL:break;case o.default.TagType.ENEMY:if(this.collider.tag==o.default.TagType.BULLET_HERO){a.default.instance.addHitEff(this.node.getPosition(),this.node),this.node.active=!1;var l=n.getComponent(i.default);return void(l&&l.onHP(-1))}this.collider.tag,o.default.TagType.BULLET_ENEMY;break;case o.default.TagType.HERO:if(this.collider.tag==o.default.TagType.BULLET_HERO);else if(this.collider.tag==o.default.TagType.BULLET_ENEMY){a.default.instance.addHitEff(this.node.getPosition(),this.node),this.node.active=!1;var d=n.getComponent(r.default);d&&d.onHP(-1)}break;case o.default.TagType.ITEM:if(this.collider.tag==o.default.TagType.BULLET_HERO||this.collider.tag==o.default.TagType.BULLET_ENEMY){a.default.instance.addHitEff(this.node.getPosition(),this.node),this.node.active=!1;var u=n.getComponent(s.default);u&&u.onHP(-1)}}this.canColNum--,0>=this.canColNum&&(a.default.instance.addHitEff(this.node.getPosition(),this.node),this.node.active=!1)},__decorate([d(cc.Prefab)],t.prototype,"bombPrefab",void 0),__decorate([d(Number)],t.prototype,"canColNum",void 0),__decorate([d(cc.Sprite)],t.prototype,"sprite",void 0),__decorate([d(cc.RigidBody)],t.prototype,"body",void 0),__decorate([d(cc.PhysicsBoxCollider)],t.prototype,"collider",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./EffManager":"EffManager","./Enemy":"Enemy","./EnemyItem":"EnemyItem","./Globaldef":"Globaldef","./Hero_physic":"Hero_physic"}],BuriedPoints:[function(e,t,n){"use strict";cc._RF.push(t,"8e36alFBiVAvb84N83jbbXt","BuriedPoints"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.pointsname=["\u4e3b\u754c\u9762-\u8fdb\u5165\u754c\u9762","\u4e3b\u754c\u9762-\u5f00\u59cb\u6e38\u620f","\u65b0\u7528\u6237\u901a\u5173"],e.pointwhil=["\u4e3b\u754c\u9762-\u8fdb\u5165\u754c\u9762","\u4e3b\u754c\u9762-\u5f00\u59cb\u6e38\u620f","\u65b0\u7528\u6237\u901a\u5173"],e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],Callback:[function(e,t,n){"use strict";cc._RF.push(t,"6db2e/tWP9PMIBGOB7obvi7","Callback"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(e,t){this.callback=e,this.thisObj=t}}();n.default=o,cc._RF.pop()},{}],CircleAvatarItemMain:[function(e,t,n){"use strict";cc._RF.push(t,"559e1NEaRVJIoA0Mns4/k0S","CircleAvatarItemMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultSF=null,t.showDefault=!0,t._originalWidth=0,t._originalHeight=0,t}return __extends(t,e),t.prototype.start=function(){this._originalWidth=this.avatarSprite.node.width,this._originalHeight=this.avatarSprite.node.height,this.showDefault&&(this.avatarSprite.spriteFrame=this.defaultSF),this.refreshUI()},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data!=e&&(this._data=e,this.refreshUI())},enumerable:!0,configurable:!0}),t.prototype.refreshUI=function(){var e=this;if(this._data&&this._isOnLoadCalled){var t=this._data.avatar;t&&cc.loader.load({url:t,type:"png"},function(t,n){n&&(e.avatarSprite.spriteFrame=new cc.SpriteFrame(n),e.avatarSprite.node.width=e._originalWidth,e.avatarSprite.node.height=e._originalHeight)})}},__decorate([i(cc.SpriteFrame)],t.prototype,"defaultSF",void 0),__decorate([i(cc.Sprite)],t.prototype,"avatarSprite",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],CircleNode:[function(e,t,n){"use strict";cc._RF.push(t,"daf0aD+g/dIEZX0ZtMwc8Of","CircleNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tntTrigger=!1,t.onBeginContact=function(e,t,n){if(n.tag==o.default.Tag.tagBullet&&t.tag==o.default.Tag.tagNone){var a=e.getWorldManifold().points[0],i=n.node.getComponent(cc.RigidBody).linearVelocity.normalize();this.scheduleOnce(function(){this.node.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,this.node.getComponent(cc.RigidBody).applyLinearImpulse(i.mul(1e3),a,!0)},0)}if(n.tag==o.default.Tag.tagTNT){this.tntTrigger=!0,e.getWorldManifold().points[0];var r=n.node.parent.convertToWorldSpaceAR(n.node.position),s=this.node.parent.convertToWorldSpaceAR(this.node.position).sub(r).normalize();this.node.getComponent(cc.RigidBody).applyLinearImpulse(s.mul(3e3),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0)}if(n.tag==o.default.Tag.tagGrenade&&!this.tntTrigger&&n.node.parent.getComponent("GrenadeController").isBoom){this.tntTrigger=!0;s=n.node.parent.convertToWorldSpaceAR(n.node.position);r=this.node.parent.convertToWorldSpaceAR(this.node.position).sub(s).normalize(),this.node.getComponent(cc.RigidBody).applyLinearImpulse(r.mul(5e3),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0)}},t}return __extends(t,e),__decorate([r(Boolean)],t.prototype,"tntTrigger",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./Common":"Common"}],CoinAnimComp:[function(e,t,n){"use strict";cc._RF.push(t,"c2af35mzStCGLfyS+PhD9hk","CoinAnimComp"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/managers/GameManager"),a=e("../../GameUtils"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.coinPrefab=null,t.diamondPrefab=null,t.hpPrefab=null,t}var n;return __extends(t,e),n=t,t.coinPut=function(e){n.coinPool.put(e)},t.coinGet=function(){var e=n.coinPool.get();return null!=e&&(e.x=0,e.y=0,e.rotation=0),e},t.diamondPut=function(e){n.diamondPool.put(e)},t.diamondGet=function(){var e=n.diamondPool.get();return null!=e&&(e.x=0,e.y=0,e.rotation=0),e},t.hpPut=function(e){n.hpPool.put(e)},t.hpGet=function(){var e=n.hpPool.get();return null!=e&&(e.x=0,e.y=0,e.rotation=0),e},t.prototype.start=function(){var e=this;this.hpPrefab||a.default.loadRes("prefabs/template/flyHp",cc.Prefab,!1,function(t){e.hpPrefab=t})},t.prototype.batchExecuteAnim=function(e,t,a,i,r){var s=this;void 0===i&&(i=null),void 0===r&&(r=1),this.schedule(function(){var i=n.coinGet(),r=n.diamondGet(),c=n.hpGet();switch(null==i&&(i=cc.instantiate(s.coinPrefab)),null==r&&(r=cc.instantiate(s.diamondPrefab)),null==c&&(c=cc.instantiate(s.hpPrefab)),e){case 0:r.setPosition(t),s.node.addChild(r),o.default.soundsManager.playSound("sounds/getMoney"),s.executeDiamondAnim(r,t,a);break;case 1:i.setPosition(t),s.node.addChild(i),o.default.soundsManager.playSound("sounds/getMoney"),s.executeCoinAnim(i,t,a);break;case 2:c.setPosition(t),s.node.addChild(c,9999),o.default.soundsManager.playSound("sounds/getHp"),s.executeHpAnim(c,t,a)}},.1,cc.macro.REPEAT_FOREVER),this.scheduleOnce(function(){s.unscheduleAllCallbacks(),i&&i()},r)},t.prototype.executeCoinAnim=function(e,t,o){var a=t.y+(o.y-t.y)*Math.random(),i=t.x+(o.x-t.x)*Math.random(),r=[t,cc.v2(i,a),o],s=cc.bezierTo(.5,r),c=cc.rotateBy(.5,720),l=(cc.spawn(s,c),cc.sequence(s,cc.callFunc(function(){e.removeFromParent(),n.coinPut(e)})));e.runAction(l)},t.prototype.executeDiamondAnim=function(e,t,o){var a=t.y+(o.y-t.y)*Math.random(),i=t.x+(o.x-t.x)*Math.random(),r=[t,cc.v2(i,a),o],s=cc.bezierTo(.5,r),c=cc.rotateBy(.5,720),l=(cc.spawn(s,c),cc.sequence(s,cc.callFunc(function(){e.removeFromParent(),n.diamondPut(e)})));e.runAction(l)},t.prototype.executeHpAnim=function(e,t,o){var a=t.y+(o.y-t.y)*Math.random(),i=t.x+(o.x-t.x)*Math.random(),r=[t,cc.v2(i,a),o],s=cc.bezierTo(.5,r),c=cc.rotateBy(.5,720),l=(cc.spawn(s,c),cc.sequence(s,cc.callFunc(function(){e.removeFromParent(),n.hpPut(e)})));e.runAction(l)},t.prototype.onLoad=function(){var e=this;this.node.on(n.SHOW_FLY_ANI,function(t){t&&(t.stopPropagation(),e.batchExecuteAnim(t.detail.type,t.detail.start,t.detail.end,t.detail.callback,t.detail.duration))},this)},t.coinPool=new cc.NodePool,t.diamondPool=new cc.NodePool,t.hpPool=new cc.NodePool,__decorate([s(cc.Prefab)],t.prototype,"coinPrefab",void 0),__decorate([s(cc.Prefab)],t.prototype,"diamondPrefab",void 0),__decorate([s(cc.Prefab)],t.prototype,"hpPrefab",void 0),t=n=__decorate([r],t)}(cc.Component);n.default=c;var l=function(){return function(){}}();n.FlyStruct=l,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../gamecore/managers/GameManager":"GameManager"}],Command:[function(e,t,n){"use strict";cc._RF.push(t,"1d507qdRZdPcatgBlQHTkCv","Command"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this._prefabURL=null}var t;return t=e,Object.defineProperty(e.prototype,"data",{get:function(){return this.event.data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefabURL",{get:function(){return this._prefabURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefab",{get:function(){return this._prefabURL?t.prefabMap[this._prefabURL]:null},enumerable:!0,configurable:!0}),e.prototype.loadPrefab=function(e){if(void 0===e&&(e=null),this._prefabURL)if(t.prefabMap[this._prefabURL])null!=e&&e.call(null);else{var n=this,o=this._prefabURL;o=o.replace(/^\/?resources\//,""),console.log("[Command] load prefab "+o),cc.loader.loadRes(o,function(o,a){console.log("[Command] prefab loaded",o,a),a?t.prefabMap[n._prefabURL]=a:console.log("[Command] prefab load fail:"+n._prefabURL),null!=e&&e.call(null)})}else null!=e&&e.call(null)},e.prototype.execute=function(){},e.prototype.destoryPrefab=function(){this._prefabURL&&(cc.loader.releaseRes(this._prefabURL),delete t.prefabMap[this._prefabURL],this._prefabURL=null)},e.prefabMap={},e=t=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],Common:[function(e,t,n){"use strict";cc._RF.push(t,"8aa06AbTftHQqbusK/GvcOj","Common"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.Tag={tagNone:0,tagBullet:1,tagPlat:2,tagBodyJoint:3,tagCubeBox:4,tagTNT:5,tagMoveBox:6,tagTNTBorder:7,tagSwitch:8,tagTrigger:9,tagTransparent:10,tagCircle:11,tagGrenade:12,tagDeath:13,tagMoveCube:14,tagHostage:15},e.eventMessage={revive:"revive",gameFail:"gameFail",gameWin:"gameWin",enemyDie:"enemyDie",bulletRemove:"bulletRemove",addBullet:"addBullet",grendaDestroy:"grendaDestroy"},e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],Comp_AvatarImage:[function(e,t,n){"use strict";cc._RF.push(t,"832d8Qtp+NITIaQvYWXNhzb","Comp_AvatarImage"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../wechat/WXImage"),a=e("../wechat/WXUser"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.imageURL="https://deer-cdn.youkongwan.com/common/gamesdeer2_128.png",t}return __extends(t,e),t.prototype.start=function(){this._sprite=this.node.getComponent(cc.Sprite),this._sprite||(this._sprite=this.node.addComponent(cc.Sprite)),this.refreshImage(),a.default.userInfo||a.default.onUserInfo(this.userInfoCallback.bind(this))},t.prototype.userInfoCallback=function(){a.default.offUserInfo(this.userInfoCallback.bind(this)),this.refreshImage()},t.prototype.refreshImage=function(){a.default.userInfo&&a.default.userInfo.avatarUrl?this._sprite.spriteFrame=o.default.createImage(a.default.userInfo.avatarUrl):this.imageURL&&(this._sprite.spriteFrame=o.default.createImage(this.imageURL))},t.prototype.onDestroy=function(){a.default.offUserInfo(this.userInfoCallback.bind(this))},__decorate([s({displayName:"\u9ed8\u8ba4\u5934\u50cfURL"})],t.prototype,"imageURL",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../wechat/WXImage":"WXImage","../wechat/WXUser":"WXUser"}],Comp_DeerIconAd:[function(e,t,n){"use strict";cc._RF.push(t,"1273eYaKCRP57VahVc3tFMM","Comp_DeerIconAd"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adSprite=null,t.adNameLabel=null,t.renewWhenTap=!0,t.enableEffect=!1,t._isFirstTimeShow=!0,t._needToRenew=!1,t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"adPool",{set:function(e){e&&(n._adPool=e.concat())},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.enableEffect&&(this.node.opacity=0)},t.prototype.start=function(){this.adSprite||(this.adSprite=this.node.getComponent(cc.Sprite),this.adSprite||(this.adSprite=this.node.addComponent(cc.Sprite))),this._adOriginalHeight=this.adSprite.node.height,this._adOriginalWidth=this.adSprite.node.width,this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this),this._data&&this.showAd(),"undefined"!=typeof wx&&wx.onShow(this.wxOnShowCallback.bind(this))},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data!=e&&(this._data=e,this.showAd())},enumerable:!0,configurable:!0}),t.prototype.touchEndHandler=function(e){this._data&&(this._data.navigate(),this.renewWhenTap&&this.tryRenew())},t.prototype.tryRenew=function(){this._needToRenew=!0},t.prototype.renew=function(){this._needToRenew=!1,n._adPool&&n._adPool.length>0&&(this.data=n._adPool[0])},t.prototype.showAd=function(){if(this._isOnLoadCalled&&this._data){var e=this;if(cc.loader.load({url:this._data.icon,type:"png"},function(t,n){if(!t&&e.adSprite&&(e.adSprite.spriteFrame=new cc.SpriteFrame(n),e.adSprite.node.width=e._adOriginalWidth,e.adSprite.node.height=e._adOriginalHeight,e._isFirstTimeShow&&e.enableEffect)){e._isFirstTimeShow=!1;var o=.1;e.data.index&&(o+=.1*e.data.index),e.node.scale=.8,e.node.opacity=1,e.node.runAction(cc.sequence(cc.delayTime(o),cc.spawn(cc.fadeTo(.5,255),cc.scaleTo(.5,1,1).easing(cc.easeBackOut()))))}e._data&&e._data.reportShown()}),this.adNameLabel&&(this.adNameLabel.string=""+this._data.name),n._adPool){var t=n._adPool.indexOf(this._data);n._adPool.splice(t,1)}}},t.prototype.wxOnShowCallback=function(){this._needToRenew&&this.renew()},t.prototype.onDestroy=function(){"undefined"!=typeof wx&&wx.offShow(this.wxOnShowCallback.bind(this))},__decorate([i({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Sprite})],t.prototype,"adSprite",void 0),__decorate([i({displayName:"\u5e7f\u544a\u540d\u79f0",type:cc.Label})],t.prototype,"adNameLabel",void 0),__decorate([i({displayName:"\u70b9\u51fb\u540e\u66f4\u6362"})],t.prototype,"renewWhenTap",void 0),__decorate([i({displayName:"\u5f00\u542f\u7f13\u52a8\u6548\u679c"})],t.prototype,"enableEffect",void 0),t=n=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],Comp_DeerRecommendAdList:[function(e,t,n){"use strict";cc._RF.push(t,"ff079K2T5ZPCp3caF8E0OQS","Comp_DeerRecommendAdList"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./DeerSDK"),a=e("./DeerSDKEventNames"),i=e("./Comp_DeerIconAd"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adSize=100,t.adMaxCount=0,t.gapH=10,t.renewAd=!1,t.adItemPrefab=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.opacity=0},t.prototype.start=function(){o.default.instance.isReady?this.loadAdData():o.default.instance.addEventListener(a.default.READY,this.deerSDKReadyHandler,this)},t.prototype.deerSDKReadyHandler=function(e){this.loadAdData()},t.prototype.loadAdData=function(){var e=this;o.default.instance.removeEventListener(a.default.READY,this.deerSDKReadyHandler,this),o.default.instance.ad_getAdData(o.DeerAdType.RECOMMEND,function(t){e.showAds(t)})},t.prototype.showAds=function(e){if(e&&0!=e.length){this.renewAd&&(i.default.adPool=e),this.node.opacity=255;var t=e.length;this.adMaxCount>0&&(t=Math.min(t,this.adMaxCount));for(var n=0;n<t;n++){var o=cc.instantiate(this.adItemPrefab);o.width=this.adSize,o.height=this.adSize,o.x=(o.width+this.gapH)*n+o.width/2+this.gapH;var a=e[n];a.index=n,o.getComponent(i.default).data=a,this.node.addChild(o)}this.node.width=(this.adSize+this.gapH)*t+this.gapH}},t.prototype.onDestroy=function(){o.default.instance.removeEventListener(a.default.READY,this.deerSDKReadyHandler,this)},__decorate([c({displayName:"\u5e7f\u544a\u663e\u793a\u5927\u5c0f"})],t.prototype,"adSize",void 0),__decorate([c({displayName:"\u5e7f\u544a\u663e\u793a\u6570"})],t.prototype,"adMaxCount",void 0),__decorate([c({displayName:"\u6c34\u5e73\u95f4\u8ddd"})],t.prototype,"gapH",void 0),__decorate([c({displayName:"\u81ea\u52a8\u66f4\u65b0\u5e7f\u544a",tooltip:"\u542f\u7528\u540e\uff0c\u88ab\u70b9\u51fb\u7684\u5e7f\u544a\u4f1a\u81ea\u52a8\u66f4\u65b0\u663e\u793a\u53e6\u5916\u7684\u5e7f\u544a"})],t.prototype,"renewAd",void 0),__decorate([c({type:cc.Prefab,displayName:"\u5355\u4e2a\u5e7f\u544a\u9884\u5236\u4f53"})],t.prototype,"adItemPrefab",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./Comp_DeerIconAd":"Comp_DeerIconAd","./DeerSDK":"DeerSDK","./DeerSDKEventNames":"DeerSDKEventNames"}],Comp_DeerSpineAd:[function(e,t,n){"use strict";cc._RF.push(t,"b6ca0G7zNNBu4V8ndOg2JOe","Comp_DeerSpineAd"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./DeerSDKEventNames"),a=e("./DeerSDK"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adInterval=12,t.adRandom=!0,t._data=[],t}var n;return __extends(t,e),n=t,t.prototype.start=function(){a.default.instance.isReady?this.loadAdData():a.default.instance.addEventListener(o.default.READY,this.sdkReadyHandler,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this)},t.prototype.sdkReadyHandler=function(e){a.default.instance.removeEventListener(o.default.READY,this.sdkReadyHandler,this),this.loadAdData()},t.prototype.touchEndHandler=function(e){this._currentAd&&this._currentAd.navigate()},t.prototype.loadAdData=function(){var e=this;a.default.instance.ad_getAdData(a.DeerAdType.ANIMATION,function(t){e.data=t})},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data!=e&&(this._data=e,this.showNextAd(),this.unschedule(this.showNextAd),this.adInterval>0&&this.schedule(this.showNextAd,this.adInterval))},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._currentAd=null,this._lastAdNode&&(this._lastAdNode.destroy(),this._lastAdNode=null)},Object.defineProperty(t.prototype,"currentAd",{get:function(){return this._currentAd},enumerable:!0,configurable:!0}),t.prototype.showNextAd=function(){if(this._data&&0!=this._data.length){var e=this._data.indexOf(this._currentAd);if(this.adRandom&&this._data.length>1){for(var t=20;t-- >0;){var o=Math.floor(Math.random()*this._data.length);if(o!=e&&o!=n._lastAdIndex){e=o;break}}n._lastAdIndex=e}else++e>=this._data.length&&(e=0);this.showAd(this._data[e])}},t.prototype.showAd=function(e){var t=this;if(e&&this._currentAd!=e&&(this._currentAd=e,this._currentAd.spine)){this._currentAd.reportShown();var n=[this._currentAd.spine.png,this._currentAd.spine.atlas,this._currentAd.spine.aniJson];cc.loader.load(n,function(e,n){var o=new cc.Node,a=o.addComponent(sp.Skeleton);try{n.getContent(t._currentAd.spine.png);var i=new sp.SkeletonData;cc.ENGINE_VERSION>="2.0.0"?i.textures=[n.getContent(t._currentAd.spine.png)]:i.textures=[t._currentAd.spine.png];var r=t._currentAd.spine.png.split("/").pop();i.textureNames=[r],i.atlasText=n.getContent(t._currentAd.spine.atlas);var s=i.atlasText.match(/\n(.+?\.png)\n/);if(s){var c=s[1];i.atlasText=i.atlasText.replace("\n"+c+"\n","\n"+r+"\n")}if(i.skeletonJson=n.getContent(t._currentAd.spine.aniJson),a.skeletonData=i,a.defaultSkin="default",a.premultipliedAlpha=!1,i._skeletonJson&&i._skeletonJson.animations){var l=Object.keys(i._skeletonJson.animations);l.length>0&&(a.animation=l[0])}t._lastAdNode&&t._lastAdNode.destroy(),t._lastAdNode=o,t._lastAdNode.scaleX=t.node.width/256,t._lastAdNode.scaleY=t.node.height/256,t.node.addChild(t._lastAdNode)}catch(e){}})}},t._lastAdIndex=-1,__decorate([s({displayName:"\u8f6e\u64ad\u95f4\u9694(\u79d2)",tooltip:"0\u8868\u793a\u4e0d\u8f6e\u64ad"})],t.prototype,"adInterval",void 0),__decorate([s({displayName:"\u662f\u5426\u968f\u673a"})],t.prototype,"adRandom",void 0),t=n=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./DeerSDK":"DeerSDK","./DeerSDKEventNames":"DeerSDKEventNames"}],Comp_EffectFadeInAndOut:[function(e,t,n){"use strict";cc._RF.push(t,"110eeaCv1dM37MIcLR0dnt3","Comp_EffectFadeInAndOut"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=1.5,t}return __extends(t,e),t.prototype.start=function(){this.play()},t.prototype.play=function(){this._theAction||(this._theAction=this.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(this.duration,100),cc.fadeTo(this.duration,255),cc.delayTime(.1)))))},t.prototype.stop=function(){this._theAction&&(this.node.stopAction(this._theAction),this._theAction=null)},t.prototype.onDestroy=function(){this.stop()},__decorate([i({displayName:"\u6de1\u9690\u7279\u6548\u65f6\u957f(\u79d2)"})],t.prototype,"duration",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],Comp_EffectFloat:[function(e,t,n){"use strict";cc._RF.push(t,"7fa60J7eyhEa4Rw0/ehB8Nn","Comp_EffectFloat"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=1.5,t.delay=2,t.distanceY=20,t.distanceX=0,t}return __extends(t,e),t.prototype.start=function(){this.play()},t.prototype.play=function(){this._theAction&&this.node.stopAction(this._theAction),this.unschedule(this.play),this._theAction=this.node.runAction(cc.sequence(cc.moveTo(this.duration,this.node.x+this.distanceX,this.node.y+this.distanceY).easing(cc.easeOut(1)),cc.moveTo(this.duration,this.node.x,this.node.y).easing(cc.easeBackIn()),cc.callFunc(this.effectCompleteCallback,this)))},t.prototype.effectCompleteCallback=function(){this._theAction=null;var e=this.delay*Math.random()/2+this.delay/2;this.schedule(this.play,e,1)},t.prototype.stop=function(){this.unschedule(this.play),this._theAction&&(this.node.stopAction(this._theAction),this._theAction=null)},t.prototype.onDestroy=function(){this.stop()},__decorate([i({displayName:"\u6d6e\u52a8\u7279\u6548\u65f6\u957f(\u79d2)"})],t.prototype,"duration",void 0),__decorate([i({displayName:"\u6d6e\u52a8\u95f4\u9694\u65f6\u957f(\u79d2)"})],t.prototype,"delay",void 0),__decorate([i({displayName:"\u6d6e\u52a8\u8ddd\u79bb(y)"})],t.prototype,"distanceY",void 0),__decorate([i({displayName:"\u6d6e\u52a8\u8ddd\u79bb(x)"})],t.prototype,"distanceX",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],Comp_EffectFlyTo:[function(e,t,n){"use strict";cc._RF.push(t,"bd11fi5YHFKZK2uKdRShsSs","Comp_EffectFlyTo"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasRandom=!0,t.height=100,t.distance=100,t.duration=1,t.startDelay=.5,t.flyDeltaDistance=50,t.destroyWhenComplete=!0,t.data=null,t._isFlying=!1,t}return __extends(t,e),t.prototype.start=function(){this.destination&&this.go()},Object.defineProperty(t.prototype,"isFlying",{get:function(){return this._isFlying},enumerable:!0,configurable:!0}),t.prototype.go=function(e){var t=this;if(void 0===e&&(e=null),!this._isFlying){this._isFlying=!0,e&&(this.destination=e);var n=this.startDelay;this.hasRandom&&(n+=Math.min(.5,this.startDelay/3*Math.random())),this.height<=0?this.scheduleOnce(this.flyToDestination,n):this.node.runAction(cc.sequence(cc.delayTime(n),cc.spawn(cc.moveBy(this.duration,0,-this.height).easing(cc.easeBounceOut()),cc.moveBy(this.duration,this.distance,0)),cc.delayTime(.5+.5*Math.random()),cc.callFunc(function(){t.flyToDestination()})))}},t.prototype.flyToDestination=function(){var e=this,t=this.destination;if(t){var n=new cc.Vec2(0,0);n=this.node.convertToWorldSpaceAR(n),this.node.x=n.x,this.node.y=n.y,this.node.removeFromParent(!1),cc.director.getScene().addChild(this.node);var o=this.flyDeltaDistance;this.hasRandom&&(o+=this.flyDeltaDistance/3*Math.random());var a=.3*Math.random()+.6;this.node.runAction(cc.sequence(cc.spawn(cc.sequence(cc.moveBy(a/2,t.x-this.node.x+o,0).easing(cc.easeCubicActionOut()),cc.moveBy(a/2,-o,0).easing(cc.easeCubicActionIn())),cc.moveBy(a,0,t.y-this.node.y).easing(cc.easeQuadraticActionIn())),cc.scaleTo(.2,1.3,1.3),cc.scaleTo(.2,1,1),cc.callFunc(function(){e.doComplete()})))}else this.doComplete()},t.prototype.doComplete=function(){if(null!=this.completeCallback)try{this.completeCallback(this.data)}catch(e){}this.destroyWhenComplete&&this.node.destroy()},t.prototype.onDestroy=function(){this.completeCallback=null,this.data=null,this.destination=null},__decorate([i({displayName:"\u5f00\u542f\u5c0f\u968f\u673a"})],t.prototype,"hasRandom",void 0),__decorate([i({displayName:"\u6389\u843d\u9ad8\u5ea6",tooltip:"0\u6216\u8005\u5c0f\u4e8e0\uff0c\u5219\u4e0d\u6389\u843d\uff0c\u76f4\u63a5\u98de\u5411\u76ee\u7684\u5730"})],t.prototype,"height",void 0),__decorate([i({displayName:"\u6389\u843d\u8ddd\u79bb"})],t.prototype,"distance",void 0),__decorate([i({displayName:"\u6389\u843d\u65f6\u957f"})],t.prototype,"duration",void 0),__decorate([i({displayName:"\u5f00\u59cb\u5ef6\u8fdf\u65f6\u95f4"})],t.prototype,"startDelay",void 0),__decorate([i({displayName:"\u98de\u56de\u7684x\u589e\u91cf"})],t.prototype,"flyDeltaDistance",void 0),__decorate([i({displayName:"\u81ea\u52a8\u9500\u6bc1",tooltip:"\u5230\u8fbe\u76ee\u7684\u540e\uff0c\u662f\u5426\u81ea\u52a8\u9500\u6bc1"})],t.prototype,"destroyWhenComplete",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],Comp_EffectShake:[function(e,t,n){"use strict";cc._RF.push(t,"d342fUO6VhA5LnA4b5QqSeL","Comp_EffectShake"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=3,t.delay=5,t.randomDelay=!0,t._isActing=!1,t.shakeAngle=15,t}return __extends(t,e),Object.defineProperty(t.prototype,"isActing",{get:function(){return this._isActing},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.duration=Math.max(.5,this.duration),this.playEffect()},t.prototype.playEffect=function(){!0!==this._isActing&&(this._isActing=!0,this.node.runAction(cc.sequence(cc.rotateTo(.2,-this.shakeAngle),cc.rotateTo(.2,this.shakeAngle),cc.rotateTo(.15,.8*-this.shakeAngle),cc.rotateTo(.15,.8*this.shakeAngle),cc.rotateTo(.1,.6*-this.shakeAngle),cc.rotateTo(.1,.6*this.shakeAngle),cc.rotateTo(this.duration-.9,0).easing(cc.easeElasticOut(.1)),cc.callFunc(this.play_complete,this))))},t.prototype.play_complete=function(){this._isActing=!1;var e=this.delay;this.randomDelay&&(e+=.5-Math.random()),this.scheduleOnce(this.playEffect,e)},__decorate([i({displayName:"\u7279\u6548\u65f6\u957f(\u79d2)"})],t.prototype,"duration",void 0),__decorate([i({displayName:"\u7279\u6548\u95f4\u9694(\u79d2)"})],t.prototype,"delay",void 0),__decorate([i({displayName:"\u968f\u673a\u95f4\u9694\u65f6\u95f4",tooltip:"\u52fe\u9009\u540e\uff0c\u7279\u6548\u95f4\u9694\u65f6\u95f4\u6709\u4e00\u5b9a\u5e45\u5ea6\u7684\u5c0f\u968f\u673a"})],t.prototype,"randomDelay",void 0),__decorate([i({displayName:"\u6296\u52a8\u89d2\u5ea6"})],t.prototype,"shakeAngle",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],Comp_EffectZoom:[function(e,t,n){"use strict";cc._RF.push(t,"874793Zj9dE1J7eAc9IvKdI","Comp_EffectZoom"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=1,t.delay=3,t.randomDelay=!0,t._isActing=!1,t.zoomInFactor=1.2,t}return __extends(t,e),Object.defineProperty(t.prototype,"isActing",{get:function(){return this._isActing},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.duration=Math.max(.5,this.duration),this.playEffect()},t.prototype.playEffect=function(){if(!0!==this._isActing){this._isActing=!0;var e=this.node.scaleX,t=this.node.scaleY,n=this.node.scaleX*this.zoomInFactor,o=this.node.scaleY*this.zoomInFactor;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(this.duration/2,n,o).easing(cc.easeQuarticActionIn()),cc.scaleTo(this.duration/2,e,t).easing(cc.easeQuarticActionOut()),cc.callFunc(this.play_complete,this)))}},t.prototype.play_complete=function(){this._isActing=!1;var e=this.delay;this.randomDelay&&(e+=.5-Math.random()),e>0?this.scheduleOnce(this.playEffect,e):this.playEffect()},__decorate([i({displayName:"\u7279\u6548\u65f6\u957f(\u79d2)"})],t.prototype,"duration",void 0),__decorate([i({displayName:"\u7279\u6548\u95f4\u9694(\u79d2)"})],t.prototype,"delay",void 0),__decorate([i({displayName:"\u968f\u673a\u95f4\u9694\u65f6\u95f4",tooltip:"\u52fe\u9009\u540e\uff0c\u7279\u6548\u95f4\u9694\u65f6\u95f4\u6709\u4e00\u5b9a\u5e45\u5ea6\u7684\u5c0f\u968f\u673a"})],t.prototype,"randomDelay",void 0),__decorate([i({displayName:"\u653e\u5927\u7cfb\u6570"})],t.prototype,"zoomInFactor",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],Comp_GameClubButton:[function(e,t,n){"use strict";cc._RF.push(t,"a03192NFZ9GQolS8SDbJFn2","Comp_GameClubButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/GameValues"),a=e("../managers/Utils"),i=e("../managers/GameManager"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBG="https://deer-cdn.youkongwan.com/common/blank.png",t.hideWhenHasPopUp=!0,t.delay=0,t}return __extends(t,e),t.prototype.start=function(){o.default.isDebug&&(this.buttonBG="https://deer-cdn.youkongwan.com/common/blank_debug.png"),this._lastPosition=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0)),this.delay<=0?this.createButton():this.scheduleOnce(this.createButton,this.delay)},t.prototype.createButton=function(){if("undefined"!=typeof wx){var e=this.node.getBoundingBoxToWorld();e=a.default.toScreenRect(e),this._button=wx.createGameClubButton({type:"image",image:this.buttonBG,style:{left:e.xMin,top:e.yMin,width:e.width,height:e.height,lineHeight:40}})}},t.prototype.refresh=function(){this._button&&(this._button.destroy(),this._button=null,this.createButton())},t.prototype.update=function(e){cc.director.getTotalFrames()%60==0&&this.updateButton(!0)},t.prototype.onDisable=function(){this.updateButton(!1)},t.prototype.updateButton=function(e){if(this._button){var t=e;this.hideWhenHasPopUp&&i.default.popUpManager.popUpCount>0&&(t=!1),t&&(t=this.enabled);var n=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0));if(t&&(n.x<0||n.x>cc.winSize.width||n.y<0||n.y>cc.winSize.height)&&(t=!1),t)Math.sqrt((n.x-this._lastPosition.x)*(n.x-this._lastPosition.x)+(n.y-this._lastPosition.y)*(n.y-this._lastPosition.y))>10?this.refresh():this._button&&this._button.show(),this._lastPosition=n;else this._button&&this._button.hide()}},t.prototype.onDestroy=function(){this._button&&(this._button.destroy(),this._button=null)},__decorate([c({displayName:"\u56fe\u7247URL"})],t.prototype,"buttonBG",void 0),__decorate([c({displayName:"\u6709\u5f39\u51fa\u5c42\u65f6\u81ea\u52a8\u9690\u85cf"})],t.prototype,"hideWhenHasPopUp",void 0),__decorate([c({displayName:"\u5ef6\u8fdf\u65f6\u95f4"})],t.prototype,"delay",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../base/GameValues":"GameValues","../managers/GameManager":"GameManager","../managers/Utils":"Utils"}],Comp_ListRenderer:[function(e,t,n){"use strict";cc._RF.push(t,"4a7a6gottdMHqKrVM74t9Xq","Comp_ListRenderer"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=-1,t}return __extends(t,e),t.prototype.start=function(){},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data!=e&&(this._data=e,this.refreshUI())},enumerable:!0,configurable:!0}),t.prototype.refreshUI=function(){},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],Comp_List:[function(e,t,n){"use strict";cc._RF.push(t,"9d0e7m7cpNFR7fqfXi8JcMs","Comp_List"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Comp_ListRenderer"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rendererPrefab=null,t._rendererWidth=0,t._rendererHeight=0,t.gapV=10,t.gapH=10,t.columnCount=1,t.topPadding=0,t.bottomPadding=0,t.leftPadding=0,t.rightPadding=0,t.bufferSize=3,t._itemPool=new cc.NodePool(o.default),t._virtualNodes=[],t._lastY=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.columnCount<1&&(this.columnCount=1)},t.prototype.start=function(){this.refreshUI()},t.prototype.update=function(e){cc.director.getTotalFrames()%10==0&&Math.abs(this.node.y-this._lastY)>this._rendererHeight/2&&(this._lastY=this.node.y,this.refreshUI())},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data!=e&&(this._data=e,this.refreshVirtualNodes(),this.refreshUI())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstActiveItemData",{get:function(){return this._firstActiveItemData},set:function(e){if(this._virtualNodes)for(var t=0,n=this._virtualNodes.length;t<n;t++){var o=this._virtualNodes[t];if(o.data==e){this._firstActiveItemData=e;try{this.node.getParent().getParent().getComponent(cc.ScrollView).scrollToOffset(new cc.Vec2(0,-o.y-this._rendererHeight/2-this.gapV),1)}catch(e){}break}}},enumerable:!0,configurable:!0}),t.prototype.refreshVirtualNodes=function(){for(0==this._rendererHeight&&this.moreItems();this.node.children.length>0;){var e=this.node.children[0];this._itemPool.put(e),e.removeFromParent(!1)}if(this._virtualNodes=[],this._data){var t=Math.ceil(this._data.length/this.columnCount);this.node.height=(this._rendererHeight+this.gapV)*t-this.gapV+this.topPadding+this.bottomPadding;for(var n=0;n<this._data.length;n++){var o=new c;o.index=n,o.data=this._data[n],o.width=this._rendererWidth,o.height=this._rendererHeight;var a=Math.ceil((n+1)/this.columnCount),i=n%this.columnCount+1;o.y=-(a-1)*(this._rendererHeight+this.gapV)-this._rendererHeight/2-this.topPadding,o.x=(i-1)*(this._rendererWidth+this.gapH)+this._rendererWidth/2+this.leftPadding-this.node.width*this.node.anchorX,o.activeChangeCallback=this.virtualNodeActiveChangeCallback.bind(this),this._virtualNodes.push(o)}}},t.prototype.refreshUI=function(){var e=this;if(this.node&&this.node.getParent()){var t=this.node.getParent();this._viewRect=new cc.Rect(-t.width*t.anchorX-this._rendererWidth,-t.height*t.anchorY-this._rendererHeight*this.bufferSize,t.width+2*this._rendererWidth,t.height+2*this._rendererHeight*this.bufferSize)}var n=0;this._firstActiveItemData=null,this._virtualNodes.forEach(function(t){var a=t.y+e.node.y+e._rendererHeight/2+e.gapV;if(t.y+e.node.y-e._rendererHeight/2-e.gapV>e._viewRect.yMax||a<e._viewRect.yMin)t.unactive();else{null==e._firstActiveItemData&&1==n&&(e._firstActiveItemData=t.data),t.active();var i=t.ui.getComponent(o.default);i&&(i.index=t.index,i.data=t.data),n++}})},t.prototype.virtualNodeActiveChangeCallback=function(e){e.isActived?(e.ui||(this._itemPool.size()<=0&&this.moreItems(),e.ui=this._itemPool.get(),this.node.addChild(e.ui)),e.ui.x=e.x,e.ui.y=e.y):e.ui&&(e.ui.removeFromParent(!1),this._itemPool.put(e.ui),e.ui=null)},t.prototype.moreItems=function(){var e=(this.node.width-this.gapH*(this.columnCount-1)-this.leftPadding-this.rightPadding)/this.columnCount;e<1&&(e=1);for(var t=0;t<5;++t){var n=cc.instantiate(this.rendererPrefab);this._itemPool.put(n),n.scale=e/n.width,0==this._rendererWidth&&(this._rendererWidth=e,this._rendererHeight=n.height*n.scale)}},t.prototype.onDestroy=function(){this._itemPool&&(this._itemPool.clear(),this._itemPool=null)},__decorate([r({type:cc.Prefab,displayName:"Renderer Prefab"})],t.prototype,"rendererPrefab",void 0),__decorate([r({displayName:"\u5782\u76f4\u95f4\u8ddd"})],t.prototype,"gapV",void 0),__decorate([r({displayName:"\u6c34\u5e73\u95f4\u8ddd"})],t.prototype,"gapH",void 0),__decorate([r({displayName:"\u5217\u6570"})],t.prototype,"columnCount",void 0),__decorate([r({displayName:"\u9876\u90e8\u95f4\u9694"})],t.prototype,"topPadding",void 0),__decorate([r({displayName:"\u5e95\u90e8\u95f4\u9694"})],t.prototype,"bottomPadding",void 0),__decorate([r({displayName:"\u5de6\u8fb9\u95f4\u9694"})],t.prototype,"leftPadding",void 0),__decorate([r({displayName:"\u53f3\u8fb9\u95f4\u9694"})],t.prototype,"rightPadding",void 0),__decorate([r({displayName:"\u7f13\u51b2\u5927\u5c0f",tooltip:"\u4e0d\u5728\u53ef\u89c6\u533a\u57df\u4e2ditem\u4e2a\u6570"})],t.prototype,"bufferSize",void 0),t=__decorate([i],t)}(cc.Component);n.default=s;var c=function(){function e(){this.index=0,this.x=0,this.y=0,this.width=0,this.height=0,this._isActived=!1}return Object.defineProperty(e.prototype,"isActived",{get:function(){return this._isActived},enumerable:!0,configurable:!0}),e.prototype.active=function(){!0!==this._isActived&&(this._isActived=!0,this.activeChangeCallback.call(null,this))},e.prototype.unactive=function(){!1!==this._isActived&&(this._isActived=!1,this.activeChangeCallback&&this.activeChangeCallback(this))},e}();cc._RF.pop()},{"./Comp_ListRenderer":"Comp_ListRenderer"}],Comp_LoadingSceneMain:[function(e,t,n){"use strict";cc._RF.push(t,"24b0bZqrBhE/IcpZVKdO3tw","Comp_LoadingSceneMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=e("../GameCoreEventNames"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleNode=null,t.iconNode=null,t.logoNode=null,t.progress=null,t}return __extends(t,e),t.prototype.start=function(){this.iconNode&&(this.iconNode.opacity=0,this.iconNode.runAction(cc.sequence(cc.delayTime(.1),cc.fadeTo(.5,255)))),this.logoNode&&(this.logoNode.opacity=0,this.logoNode.runAction(cc.fadeTo(.3,255))),o.default.eventManager.addEventListener(a.default.RES_PROGRESS,this.onProgress,this)},t.prototype.onProgress=function(e){this.progress&&(this.progress.progress=e.data.min/e.data.max),this.titleNode},t.prototype.doPreDestory=function(e){if(void 0===e&&(e=0),!(e<=0)){if(this.titleNode&&(this.titleNode.stopAllActions(),this.titleNode.runAction(cc.fadeTo(e,0))),this.iconNode&&(this.iconNode.stopAllActions(),this.iconNode.runAction(cc.fadeTo(e,0))),this.logoNode){this.logoNode.stopAllActions();var t=cc.winSize;this.logoNode.runAction(cc.moveTo(e,this.logoNode.x,-t.height/2-this.logoNode.height))}o.default.eventManager.removeEventListener(a.default.RES_PROGRESS,this.onProgress,this)}},t.prototype.onDestroy=function(){this.node.stopAllActions(),this.titleNode&&this.titleNode.stopAllActions(),this.iconNode&&this.iconNode.stopAllActions(),this.logoNode&&this.logoNode.stopAllActions()},__decorate([s({type:cc.Node,displayName:"title\u8282\u70b9"})],t.prototype,"titleNode",void 0),__decorate([s({type:cc.Node,displayName:"icon\u8282\u70b9"})],t.prototype,"iconNode",void 0),__decorate([s({type:cc.Node,displayName:"logo\u8282\u70b9"})],t.prototype,"logoNode",void 0),__decorate([s({type:cc.ProgressBar,displayName:"\u52a0\u8f7d\u8fdb\u5ea6\u8282\u70b9"})],t.prototype,"progress",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","../managers/GameManager":"GameManager"}],Comp_MoveButton:[function(e,t,n){"use strict";cc._RF.push(t,"8e11cy/ustCyqg3f+ZQoF32","Comp_MoveButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jude=!1,t.delx=0,t.dely=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.setTouchStart,this)},t.prototype.start=function(){this.maxx=cc.winSize.width/2-this.node.width/2,this.maxy=cc.winSize.height/2-this.node.height/2},t.prototype.addEvends=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.setTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.setTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.setTouchCancel,this)},t.prototype.removeEvends=function(){this.node.off(cc.Node.EventType.TOUCH_MOVE,this.setTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.setTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.setTouchCancel,this)},t.prototype.setTouchStart=function(){this.delx=0,this.dely=0,this.addEvends()},t.prototype.setTouchEnd=function(e){1==this.jude&&(e.stopPropagationImmediate(),e.stopPropagation()),this.startMove(),this.removeEvends()},t.prototype.setTouchCancel=function(e){this.startMove()},t.prototype.startMove=function(){var e=this.node.x,t=this.node.y;t>0?t>this.maxy&&(t=this.maxy):t<-this.maxy&&(t=-this.maxy);var n=cc.v2(this.maxx,t);e<0&&(n=cc.v2(-this.maxx,t));var o=cc.moveTo(.3,n).easing(cc.easeIn(.3)),a=this,i=cc.sequence(o,cc.callFunc(function(){a.jude=!1}));this.node.runAction(i)},t.prototype.setTouchMove=function(e){var t=e.getDeltaX(),n=e.getDeltaY();this.node.x+=t,this.node.y+=n,this.delx+=t,this.dely+=n,Math.abs(Math.max(this.delx,this.dely))>10&&(this.jude=!0)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.setTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.setTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.setTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.setTouchCancel,this)},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],Comp_MusicButton:[function(e,t,n){"use strict";cc._RF.push(t,"2fb16nYRrBF+aBTTlNAl5L+","Comp_MusicButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.muteSpriteFrame=null,t.unmuteSpriteFrame=null,t.controlSound=!1,t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this),this.refreshU()},t.prototype.tapHandler=function(e){o.default.soundsManager.playTapSound(),o.default.soundsManager.musicMuted?(o.default.soundsManager.unmuteMusic(),this.controlSound&&o.default.soundsManager.unmuteSound()):(o.default.soundsManager.muteMusic(),this.controlSound&&o.default.soundsManager.muteSound()),this.refreshU()},t.prototype.refreshU=function(){var e=this.node.getComponent(cc.Sprite);e&&(o.default.soundsManager.musicMuted?e.spriteFrame=this.muteSpriteFrame:e.spriteFrame=this.unmuteSpriteFrame)},__decorate([r({type:cc.SpriteFrame,displayName:"\u97f3\u4e50\u5df2\u5173\u95ed"})],t.prototype,"muteSpriteFrame",void 0),__decorate([r({type:cc.SpriteFrame,displayName:"\u97f3\u4e50\u5df2\u5f00\u542f"})],t.prototype,"unmuteSpriteFrame",void 0),__decorate([r({displayName:"\u540c\u6b65\u63a7\u5236\u97f3\u6548"})],t.prototype,"controlSound",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../managers/GameManager":"GameManager"}],Comp_NearToMenuButton:[function(e,t,n){"use strict";cc._RF.push(t,"06cf1N59gFKI7vNfJIAOO4r","Comp_NearToMenuButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./WXUtils"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.distanceToMenu=10,t.layoutDelay=.8,t._adIsShowing=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){var e=this;this.layoutDelay>0?this.scheduleOnce(function(){e.relayout()},this.layoutDelay):this.relayout()},t.prototype.relayout=function(){var e=new cc.Vec2(cc.winSize.width-10,cc.winSize.height-10),t=o.default.getMenuButtonLayout();t&&t.width>0&&(e=new cc.Vec2(t.x,t.y)),e=this.node.getParent().convertToNodeSpaceAR(e),this.node.y=e.y-this.node.height*(1-this.node.anchorY)-this.distanceToMenu},__decorate([r({displayName:"\u95f4\u9694\u8ddd\u79bb"})],t.prototype,"distanceToMenu",void 0),__decorate([r({displayName:"\u8c03\u6574\u4f4d\u7f6e\u5ef6\u8fdf"})],t.prototype,"layoutDelay",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./WXUtils":"WXUtils"}],Comp_NearToWXBannerAd:[function(e,t,n){"use strict";cc._RF.push(t,"a63afjOB4RIM47OPW3iazWj","Comp_NearToWXBannerAd"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./WXBannerAd"),a=e("../managers/Utils"),i=e("./WXEventNames"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.distanceToAd=0,t.layoutDelay=.8,t.useAction=!1,t.hideBeforeRelayout=!0,t}return __extends(t,e),t.prototype.onLoad=function(){this._originalOpacity=this.node.opacity,this.hideBeforeRelayout&&(this.node.opacity=0)},t.prototype.start=function(){var e=this;this.layoutDelay>0?this.scheduleOnce(function(){e.init()},this.layoutDelay):this.init()},t.prototype.init=function(){this.node.opacity=this._originalOpacity,this.checkBannerAd()},t.prototype.checkBannerAd=function(){o.default.currentAd?(o.default.currentAd.addEventListener(i.default.BANNER_AD_RESIZE,this.bannerAdEventsHandler,this),o.default.currentAd.addEventListener(i.default.BANNER_AD_SHOW,this.bannerAdEventsHandler,this),o.default.currentAd.isShowing&&this.relayout()):this.scheduleOnce(this.checkBannerAd,.1)},t.prototype.bannerAdEventsHandler=function(e){this.relayout()},t.prototype.relayout=function(){var e=o.default.currentAd;if(e){var t=e.adRect;if(t){t=a.default.fromScreenRect(t);var n,i=new cc.Vec2(t.x+t.width/2,t.y+t.height);i=this.node.getParent().convertToNodeSpaceAR(i),n=e.isShowing?i.y+this.node.height*this.node.anchorY+this.distanceToAd:i.y-this.node.height*(1-this.node.anchorY)-this.distanceToAd,this.useAction?(this.node.stopAllActions(),this.node.runAction(cc.moveTo(.5,this.node.x,n))):this.node.y=n}}},t.prototype.onDestroy=function(){o.default.currentAd&&(o.default.currentAd.removeEventListener(i.default.BANNER_AD_RESIZE,this.bannerAdEventsHandler,this),o.default.currentAd.removeEventListener(i.default.BANNER_AD_SHOW,this.bannerAdEventsHandler,this))},__decorate([c({displayName:"\u95f4\u9694\u8ddd\u79bb"})],t.prototype,"distanceToAd",void 0),__decorate([c({displayName:"\u5ef6\u8fdf\u65f6\u95f4",tooltip:"\u7528\u6237\u9762\u677f\u4e2d\u5143\u7d20\u5ef6\u8fdf\u5904\u7406"})],t.prototype,"layoutDelay",void 0),__decorate([c({displayName:"\u7f13\u52a8\u6548\u679c"})],t.prototype,"useAction",void 0),__decorate([c({displayName:"\u9ed8\u8ba4\u4e0d\u663e\u793a"})],t.prototype,"hideBeforeRelayout",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../managers/Utils":"Utils","./WXBannerAd":"WXBannerAd","./WXEventNames":"WXEventNames"}],Comp_PlatformContent:[function(e,t,n){"use strict";cc._RF.push(t,"d5f72o94RJA+ZM6UUoVe0Dj","Comp_PlatformContent"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/GameValues"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weiXinNodes=[],t.touTiaoNodes=[],t}return __extends(t,e),t.prototype.onLoad=function(){this.weiXinNodes.forEach(function(e){e&&(e.active=o.default.currentPlatform==o.PlatformName.WECHAT)}),this.touTiaoNodes.forEach(function(e){e&&(e.active=o.default.currentPlatform==o.PlatformName.TOUTIAO)})},t.prototype.start=function(){},__decorate([r({type:[cc.Node],displayName:"\u5fae\u4fe1\u5185\u5bb9"})],t.prototype,"weiXinNodes",void 0),__decorate([r({type:[cc.Node],displayName:"\u4eca\u65e5\u5934\u6761\u5185\u5bb9"})],t.prototype,"touTiaoNodes",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../base/GameValues":"GameValues"}],Comp_RemoteImage:[function(e,t,n){"use strict";cc._RF.push(t,"32681cSg4xDVb4//GN2/uSH","Comp_RemoteImage"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../wechat/WXImage"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.imageURL="",t}return __extends(t,e),t.prototype.start=function(){this._sprite=this.node.getComponent(cc.Sprite),this._sprite||(this._sprite=this.node.addComponent(cc.Sprite)),this.imageURL&&this.setImageURL(this.imageURL)},t.prototype.setImageURL=function(e){this.imageURL=e,this._isOnLoadCalled&&this._sprite&&(this._sprite.spriteFrame=o.default.createImage(this.imageURL))},__decorate([r({displayName:"\u56fe\u7247URL"})],t.prototype,"imageURL",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../wechat/WXImage":"WXImage"}],Comp_SoundButton:[function(e,t,n){"use strict";cc._RF.push(t,"2fe1fejxC5E5aPeBu2we2yN","Comp_SoundButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.muteSpriteFrame=null,t.unmuteSpriteFrame=null,t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this),this.refreshU()},t.prototype.tapHandler=function(e){o.default.soundsManager.playTapSound(),o.default.soundsManager.soundMuted?o.default.soundsManager.unmuteSound():o.default.soundsManager.muteSound(),this.refreshU()},t.prototype.refreshU=function(){var e=this.node.getComponent(cc.Sprite);e&&(o.default.soundsManager.soundMuted?e.spriteFrame=this.muteSpriteFrame:e.spriteFrame=this.unmuteSpriteFrame)},__decorate([r({type:cc.SpriteFrame,displayName:"\u97f3\u6548\u5df2\u5173\u95ed"})],t.prototype,"muteSpriteFrame",void 0),__decorate([r({type:cc.SpriteFrame,displayName:"\u97f3\u6548\u5df2\u5f00\u542f"})],t.prototype,"unmuteSpriteFrame",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../managers/GameManager":"GameManager"}],Comp_SplashScreen:[function(e,t,n){"use strict";cc._RF.push(t,"5ff6cpM7SZKa669ht56fLzo","Comp_SplashScreen"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=e("./Comp_LoadingSceneMain"),i=e("../wechat/WXUtils"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainSceneName="",t.showTime=2,t.subPackage="",t.resName="",t._subPackageLoaded=!1,t._passedTime=0,t}return __extends(t,e),t.prototype.start=function(){this.schedule(this.doShowMainScene,.1),this.loadSubPackage()},t.prototype.loadSubPackage=function(){var e=this;this.subPackage&&"undefined"!=typeof wx?cc.loader.downloader.loadSubpackage("subp",function(t){t?i.default.showToast("\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",3):(e._subPackageLoaded=!0,e.loadMainScene())}):(this._subPackageLoaded=!0,this.loadMainScene())},t.prototype.loadMainScene=function(){this.mainSceneName?o.default.sceneManager.preloadScene(this.mainSceneName,this.mainSceneLoadedCallback.bind(this)):this._mainSceneLoaded=!0},t.prototype.mainSceneLoadedCallback=function(){this._mainSceneLoaded=!0},t.prototype.checkIsReady=function(){return!(this._passedTime<this.showTime)&&(!(this.subPackage&&!this._subPackageLoaded)&&!(this.mainSceneName&&!this._mainSceneLoaded))},t.prototype.doShowMainScene=function(){this._passedTime+=.1,this.checkIsReady()&&(this.unschedule(this.doShowMainScene),this.enterMainScene())},t.prototype.enterMainScene=function(){var e=this,t=this.node.getComponent(a.default);t?(t.doPreDestory(.3),this.scheduleOnce(function(){o.default.sceneManager.pushScene(e.mainSceneName)},.4)):o.default.sceneManager.pushScene(this.mainSceneName)},t.prototype.onDestroy=function(){this.unschedule(this.doShowMainScene)},__decorate([c({tooltip:"\u8be5\u573a\u666f\u8fc7\u540e\u8fdb\u5165\u7684\u573a\u666f\u540d\u79f0",displayName:"\u4e3b\u573a\u666f\u540d"})],t.prototype,"mainSceneName",void 0),__decorate([c({displayName:"\u505c\u7559\u65f6\u95f4(\u79d2)"})],t.prototype,"showTime",void 0),__decorate([c({displayName:"\u5b50\u5305\u540d"})],t.prototype,"subPackage",void 0),__decorate([c({tooltip:"\u5982\u679c\u4e0d\u9700\u8981\u52a0\u8f7d\u914d\u7f6e\u8bf7\u7f6e\u7a7a",displayName:"\u52a0\u8f7d\u914d\u7f6e"})],t.prototype,"resName",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../managers/GameManager":"GameManager","../wechat/WXUtils":"WXUtils","./Comp_LoadingSceneMain":"Comp_LoadingSceneMain"}],Comp_SubDomainContent:[function(e,t,n){"use strict";cc._RF.push(t,"0a109lm4YJM+otoFiP6OIxW","Comp_SubDomainContent"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delayTime=0,t._sprite=null,t._tex=null,t._lastUpdateTime=0,t}return __extends(t,e),t.prototype.onLoad=function(){this._sprite=null,this._tex=new cc.Texture2D,this._context=null;var e=cc.winSize;if(this.node.width=e.width,this.node.height=e.height,"undefined"!=typeof wx&&wx.getOpenDataContext){this._context=wx.getOpenDataContext();var t=this._context.canvas;t&&(t.width=this.node.width,t.height=this.node.height),this._tex.setPremultiplyAlpha(!0),this._tex.initWithElement(t),this._sprite=this.node.getComponent(cc.Sprite),this._sprite||(this._sprite=this.node.addComponent(cc.Sprite),this._sprite.srcBlendFactor=cc.macro.BlendFactor.ONE),this._sprite.spriteFrame=new cc.SpriteFrame(this._tex)}else this.enabled=!1},t.prototype.start=function(){this.updateSubContextViewport()},t.prototype.onEnable=function(){this.updateSubContextViewport()},t.prototype.updateSubContextViewport=function(){if(this._context){var e=this.node.getBoundingBoxToWorld(),t=cc.view._scaleX,n=cc.view._scaleY;this._context.postMessage({fromEngine:!0,event:"viewport",x:e.x*t+cc.view._viewportRect.x,y:e.y*n+cc.view._viewportRect.y,width:e.width*t,height:e.height*n})}},t.prototype.update=function(e){try{if(this.delayTime>0){var t=(new Date).getTime();if(t-this._lastUpdateTime<1e3*this.delayTime)return;this._lastUpdateTime=t}this._tex.initWithElement(this._context.canvas),this._sprite._activateMaterial()}catch(e){}},__decorate([i({displayName:"\u5237\u65b0\u95f4\u9694(\u79d2)",tooltip:"\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5219\u6bcf\u5e27\u5237\u65b0"})],t.prototype,"delayTime",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],Comp_UserInfoButton:[function(e,t,n){"use strict";cc._RF.push(t,"5f8e0rSIRFCZrXe5q70AGK0","Comp_UserInfoButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../wechat/WXUser"),a=e("../managers/Utils"),i=e("../base/GameValues"),r=e("../wechat/WXUtils"),s=e("../managers/GameManager"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonBG="https://deer-cdn.youkongwan.com/common/blank.png",t.delay=0,t.hideWhenHasPopUp=!0,t.must=!1,t}return __extends(t,e),t.prototype.start=function(){i.default.isDebug&&(this.buttonBG="https://deer-cdn.youkongwan.com/common/blank_debug.png"),this._lastPosition=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0)),this.delay<=0?this.createButton():this.scheduleOnce(this.createButton,this.delay)},t.prototype.createButton=function(){if(!o.default.userInfo){var e=this.node.getBoundingBoxToWorld();e=a.default.toScreenRect(e),this._button=o.default.createUserInfoButton(this.buttonBG,e,this.createButtonTapCallback.bind(this))}},t.prototype.refresh=function(){this._button&&(o.default.destroyUserInfoButton(this._button),this._button=null,this.createButton())},t.prototype.createButtonTapCallback=function(e){!this.must||o.default.userInfo?this.callback&&this.callback(e):r.default.showToast("\u8bf7\u5141\u8bb8\u83b7\u5f97\u60a8\u7684\u6635\u79f0\u548c\u5934\u50cf",2e3)},t.prototype.update=function(e){cc.director.getTotalFrames()%60==0&&this.updateButton(!0)},t.prototype.onDisable=function(){this.updateButton(!1)},t.prototype.updateButton=function(e){if(this._button){var t=e;this.hideWhenHasPopUp&&s.default.popUpManager.popUpCount>0&&(t=!1);for(var n=this.node,o=cc.director.getScene();n;){if(!n.active||n.opacity<=0){t=!1;break}if((n=n.getParent())==o)break}var a=this.node.convertToWorldSpaceAR(new cc.Vec2(0,0));if(t&&(a.x<0||a.x>cc.winSize.width||a.y<0||a.y>cc.winSize.height)&&(t=!1),t)Math.sqrt((a.x-this._lastPosition.x)*(a.x-this._lastPosition.x)+(a.y-this._lastPosition.y)*(a.y-this._lastPosition.y))>10?this.refresh():this._button&&this._button.show(),this._lastPosition=a;else this._button&&this._button.hide()}},t.prototype.onDestroy=function(){this._button&&(o.default.destroyUserInfoButton(this._button),this._button=null)},__decorate([d({displayName:"\u56fe\u7247URL"})],t.prototype,"buttonBG",void 0),__decorate([d({displayName:"\u5ef6\u8fdf\u65f6\u95f4"})],t.prototype,"delay",void 0),__decorate([d({displayName:"\u6709\u5f39\u51fa\u5c42\u65f6\u81ea\u52a8\u9690\u85cf"})],t.prototype,"hideWhenHasPopUp",void 0),__decorate([d({displayName:"\u5fc5\u987b\u6388\u6743"})],t.prototype,"must",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../base/GameValues":"GameValues","../managers/GameManager":"GameManager","../managers/Utils":"Utils","../wechat/WXUser":"WXUser","../wechat/WXUtils":"WXUtils"}],Comp_VibrateButton:[function(e,t,n){"use strict";cc._RF.push(t,"ba89dYesvBONYJHUAqItTwq","Comp_VibrateButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=e("../wechat/WXDevice"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSpriteFrame=null,t.offSpriteFrame=null,t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this),this.refreshU()},t.prototype.tapHandler=function(e){o.default.soundsManager.playTapSound(),o.default.canVibrate?o.default.vibrateOff():(o.default.vibrateOn(),a.default.vibrateShort()),this.refreshU()},t.prototype.refreshU=function(){var e=this.node.getComponent(cc.Sprite);e&&(o.default.canVibrate?e.spriteFrame=this.onSpriteFrame:e.spriteFrame=this.offSpriteFrame)},__decorate([s({type:cc.SpriteFrame,displayName:"\u9707\u52a8\u5df2\u5f00\u542f"})],t.prototype,"onSpriteFrame",void 0),__decorate([s({type:cc.SpriteFrame,displayName:"\u9707\u52a8\u5df2\u5173\u95ed"})],t.prototype,"offSpriteFrame",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../managers/GameManager":"GameManager","../wechat/WXDevice":"WXDevice"}],Comp_WXBannerAd:[function(e,t,n){"use strict";cc._RF.push(t,"ed6cccXls1LR5n5h+MNHO9B","Comp_WXBannerAd"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./WXBannerAd"),i=e("./WXEventNames"),r=e("../managers/Utils"),s=e("../GameCoreLocation"),c=e("./DeerBannerAd"),l=e("../deer/DeerSDK"),d=cc._decorator,u=d.ccclass,h=d.property;(function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"})(o||(o={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bannerAdIDs=[""],t.adLocation=s.GameCoreLocation.BOTTOM_CENTER,t.maxWidth=0,t.maxHeight=0,t.hideByDefault=!1,t.hideWhenHasPopUp=!1,t.refreshAdMaxDelay=45,t.refreshRandom=!0,t.refreshAdMinDelay=15,t.autoRelease=!0,t.deerAdAsDefault=!1,t._useWXBannerAd=!0,t._wxBannerAdIsWX=!1,t._lastRefreshAdTime=0,t._currentAdHasShown=!1,t._currentAdIsShowing=!0,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){if(this._currentAdIsShowing=!this.hideByDefault,this.node.anchorX=0,this.node.anchorY=0,this.adLocation||(this.adLocation=s.GameCoreLocation.BOTTOM_CENTER),this.maxWidth<=0&&(this.maxWidth=NaN),this.relayout(),this.deerAdAsDefault&&(this._defaultAd=new c.default(null,this.adLocation,0,0,this.maxHeight,this.maxWidth)),this.nextAd(),this.bannerAdIDs.length>1&&this.refreshAdMaxDelay>0){var e=Math.max(this.refreshAdMaxDelay,this.refreshAdMinDelay);e>0&&this.schedule(this.tryNextAd,e,cc.macro.REPEAT_FOREVER)}if(0==this.bannerAdIDs.length||!this.bannerAdIDs[0])throw new Error("Please set banner ad id!")},t.prototype.tryNextAd=function(){this._currentAdHasShown&&this.nextAd()},Object.defineProperty(t.prototype,"currentAdID",{get:function(){return this._currentAdID},enumerable:!0,configurable:!0}),t.prototype.nextAd=function(){if(0==this.bannerAdIDs.length&&(this._useWXBannerAd=!1),this._useWXBannerAd&&l.default.instance.game_config){var e=l.default.instance.game_config.myBAdRate;!isNaN(e)&&Math.random()<e&&(this._useWXBannerAd=!1)}if(!(this._useWXBannerAd&&(new Date).getTime()-this._lastRefreshAdTime<1e3*this.refreshAdMinDelay)){if(this._wxBannerAd&&(this._wxBannerAd.removeEventListener(i.default.BANNER_AD_HIDE,this.adHideHandler,this),this._wxBannerAd.removeEventListener(i.default.BANNER_AD_SHOW,this.adShowHandler,this),this._wxBannerAd.removeEventListener(i.default.BANNER_AD_RESIZE,this.adResizeHandler,this),this._wxBannerAd.removeEventListener(i.default.BANNER_AD_NEXT,this.adNextHandler,this),this._wxBannerAd.removeEventListener(i.default.BANNER_AD_ERROR,this.adErrorHandler,this),this._wxBannerAd.destory(),this._wxBannerAd=null),this._lastRefreshAdTime=(new Date).getTime(),this._currentAdHasShown=!1,this._useWXBannerAd){if(this.bannerAdIDs.length>1){var t=void 0;if(this.refreshRandom&&this.bannerAdIDs.length>1){var n=this.bannerAdIDs.concat(),o=n.indexOf(this._currentAdID);o>=0&&n.splice(o,1),t=n[Math.floor(Math.random()*n.length)]}else{var r=this.bannerAdIDs.indexOf(this._currentAdID)+1;r%=this.bannerAdIDs.length,t=this.bannerAdIDs[r]}if(t==this._currentAdID)return;this._currentAdID=t,a.default.currentAd&&a.default.currentAd instanceof a.default?this._wxBannerAd=a.default.currentAd:this._wxBannerAd=new a.default(this._currentAdID,this.adLocation,0,0,this.maxHeight,this.maxWidth),this._wxBannerAdIsWX=!0}}else{if(this.deerAdAsDefault)return;this._wxBannerAd=new c.default(this._currentAdID,this.adLocation,0,0,this.maxHeight,this.maxWidth),this._wxBannerAdIsWX=!1,this._useWXBannerAd=!0}this._wxBannerAd.addEventListener(i.default.BANNER_AD_HIDE,this.adHideHandler,this),this._wxBannerAd.addEventListener(i.default.BANNER_AD_SHOW,this.adShowHandler,this),this._wxBannerAd.addEventListener(i.default.BANNER_AD_RESIZE,this.adResizeHandler,this),this._wxBannerAd.addEventListener(i.default.BANNER_AD_NEXT,this.adNextHandler,this),this._wxBannerAd.addEventListener(i.default.BANNER_AD_ERROR,this.adErrorHandler,this),this._currentAdIsShowing&&this._wxBannerAd.show()}},t.prototype.update=function(e){},t.prototype.adShowHandler=function(e){this.node.isValid&&e.target==this._wxBannerAd&&(this._currentAdHasShown=!0,this._currentAdIsShowing=!0,this.relayout())},t.prototype.adHideHandler=function(e){this.node.isValid&&e.target==this._wxBannerAd&&(this._currentAdIsShowing=!1,this.relayout())},t.prototype.adResizeHandler=function(e){this.node.isValid&&e.target==this._wxBannerAd&&(this.relayout(),this._currentAdIsShowing?this._currentAdHasShown=!0:this._wxBannerAd.hide(),this.node.dispatchEvent(new cc.Event(i.default.BANNER_AD_RESIZE,!1)))},t.prototype.relayout=function(){if(this._wxBannerAd&&this._wxBannerAd.isShowing){var e=this._wxBannerAd.adRect;if(e=r.default.fromScreenRect(e))return this.node.opacity=255,this.node.x=e.x,this.node.y=e.y,this.node.scaleX=e.width/this.node.width,this.node.scaleY=e.height/this.node.height,void(this._defaultAd&&(this._defaultAd.destory(),this._defaultAd=null))}this.node.opacity=0,this.node.scale=0},t.prototype.adNextHandler=function(e){this.node.isValid&&this.nextAd()},t.prototype.adErrorHandler=function(e){this.node.isValid&&this._wxBannerAdIsWX&&(this._useWXBannerAd=!1,this.nextAd())},t.prototype.onDestroy=function(){this._wxBannerAd&&(this._wxBannerAd.removeEventListener(i.default.BANNER_AD_HIDE,this.adHideHandler,this),this._wxBannerAd.removeEventListener(i.default.BANNER_AD_SHOW,this.adShowHandler,this),this._wxBannerAd.removeEventListener(i.default.BANNER_AD_RESIZE,this.adResizeHandler,this),this._wxBannerAd.removeEventListener(i.default.BANNER_AD_NEXT,this.adNextHandler,this),this._wxBannerAd.removeEventListener(i.default.BANNER_AD_ERROR,this.adErrorHandler,this),!this.autoRelease&&this._wxBannerAdIsWX||0!=r.default.iphoneBottomBarHeight?this._wxBannerAd.hide():this._wxBannerAd.destory(),this._wxBannerAd=null),this._defaultAd&&(this._defaultAd.destory(),this._defaultAd=null)},__decorate([h({type:[cc.String],displayName:"\u5e7f\u544a\u5217\u8868"})],t.prototype,"bannerAdIDs",void 0),__decorate([h({displayName:"\u4f4d\u7f6e",type:cc.Enum(s.GameCoreLocation),tooltip:"\u4ec5\u652f\u6301TOP_CENTER\u548cBOTTOM_CENTER"})],t.prototype,"adLocation",void 0),__decorate([h({displayName:"\u6700\u5927\u9ad8\u5ea6",tooltip:"\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u53c2\u6570\uff0c\u5219\u4f1a\u5ffd\u7565Y\u8f74\u504f\u79fb\u7684\u53c2\u6570\u8bbe\u5b9a"})],t.prototype,"maxHeight",void 0),__decorate([h({displayName:"\u9ed8\u8ba4\u9690\u85cf"})],t.prototype,"hideByDefault",void 0),__decorate([h({displayName:"\u6709\u5f39\u7a97\u81ea\u52a8\u9690\u85cf"})],t.prototype,"hideWhenHasPopUp",void 0),__decorate([h({displayName:"\u81ea\u52a8\u5237\u65b0\u95f4\u9694(s)",tooltip:"\u8bbe\u7f6e\u4e86\u591a\u4e2a\u5e7f\u544a\u65f6\u751f\u6548\u3002\u6700\u5c0f\u95f4\u969420\u79d2\u3002"})],t.prototype,"refreshAdMaxDelay",void 0),__decorate([h({displayName:"\u662f\u5426\u968f\u673a\u6311\u9009\u5e7f\u544aid",tooltip:"\u8bbe\u7f6e\u4e86\u591a\u4e2a\u5e7f\u544a\u65f6\u751f\u6548\u3002"})],t.prototype,"refreshRandom",void 0),__decorate([h({displayName:"\u968f\u8282\u70b9\u91ca\u653e",tooltip:"\u53ea\u5bf9\u5fae\u4fe1\u5e7f\u544a\u6709\u6548"})],t.prototype,"autoRelease",void 0),__decorate([h({displayName:"\u9ed8\u8ba4\u663e\u793a\u81ea\u6709\u5e7f\u544a"})],t.prototype,"deerAdAsDefault",void 0),t=__decorate([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../GameCoreLocation":"GameCoreLocation","../deer/DeerSDK":"DeerSDK","../managers/Utils":"Utils","./DeerBannerAd":"DeerBannerAd","./WXBannerAd":"WXBannerAd","./WXEventNames":"WXEventNames"}],Context:[function(e,t,n){"use strict";cc._RF.push(t,"1efd3LL0ldFDLRax8Cep4WI","Context"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GameManager"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){this._eventMap={}}return e.prototype.mapEvent=function(e,t,n){void 0===n&&(n=1e4),void 0==this._eventMap[e]&&(this._eventMap[e]=[],o.default.eventManager.addEventListener(e,this.eventsHandler,this,n));var a=this._eventMap[e];-1==a.indexOf(t)&&a.push(t)},e.prototype.unmapEvent=function(e,t){void 0===t&&(t=null);var n=this._eventMap[e];if(void 0!=n)if(t){var a=n.indexOf(t);a>=0&&(n.splice(a,1),0==n.length&&(delete this._eventMap[e],o.default.eventManager.removeEventListener(e,this.eventsHandler,this)))}else delete this._eventMap[e],o.default.eventManager.removeEventListener(e,this.eventsHandler,this)},e.prototype.unmapAllEvent=function(){for(var e in this._eventMap)this.unmapEvent(e)},e.prototype.eventsHandler=function(e){var t=e.type,n=(e.data,this._eventMap[t]);if(void 0!=n)for(var o=n.length,a=function(t){var o=new n[t];o.event=e,o.prefabURL?o.loadPrefab(function(){o.execute()}):o.execute()},i=0;i<o;i++)a(i)},e=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../GameManager":"GameManager"}],CrossAdItemMain:[function(e,t,n){"use strict";cc._RF.push(t,"0740aXacmBDS4HAK6eZtIil","CrossAdItemMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../gamecore/managers/GameManager"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.imgSprite=null,t.infoBgSprite=null,t.nameLabel=null,t.infoLabel=null,t.infoBgSFs=[],t}return __extends(t,e),t.prototype.start=function(){this._imageOriginalSize=new cc.Size(this.imgSprite.node.width,this.imgSprite.node.height),this.refreshUI(),this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this)},t.prototype.refreshUI=function(){var e=this;if(this.data){var t=this.data.index;t%=this.infoBgSFs.length,this.infoBgSprite.spriteFrame=this.infoBgSFs[t],this.nameLabel.string=this.data.name,this.infoLabel.string=Math.floor(1e6*Math.random()+2e6)+"\u4eba\u6b63\u5728\u73a9";var n=this.data.img_256_129;n&&cc.loader.load(n,function(t,n){!t&&e.imgSprite&&(e.imgSprite.spriteFrame=new cc.SpriteFrame(n),e.imgSprite.node.width=n.width,e.imgSprite.node.height=n.height,e.imgSprite.node.scaleX=e._imageOriginalSize.width/n.width,e.imgSprite.node.scaleY=e._imageOriginalSize.height/n.height)})}},t.prototype.tapHandler=function(e){o.default.soundsManager.playTapSound(),this.data&&this.data.navigate()},__decorate([r(cc.Sprite)],t.prototype,"imgSprite",void 0),__decorate([r(cc.Sprite)],t.prototype,"infoBgSprite",void 0),__decorate([r(cc.Label)],t.prototype,"nameLabel",void 0),__decorate([r(cc.Label)],t.prototype,"infoLabel",void 0),__decorate([r([cc.SpriteFrame])],t.prototype,"infoBgSFs",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../gamecore/managers/GameManager":"GameManager"}],CrossAdPanelMain:[function(e,t,n){"use strict";cc._RF.push(t,"c2f43mSd51G0o1QueLLRZs5","CrossAdPanelMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./CrossAdItemMain"),a=e("../gamecore/deer/DeerSDK"),i=e("../gamecore/deer/DeerSDKEventNames"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.crossAdItemPrefab=null,t}return __extends(t,e),t.prototype.start=function(){var e=this;a.default.instance.isReady?this.loadAdData():a.default.instance.addEventListener(i.default.READY,function(t){e.loadAdData()},this,0,!0)},t.prototype.loadAdData=function(){var e=this;a.default.instance.ad_getAdData(a.DeerAdType.GAME_OVER,function(t){t&&e.showAds(t.concat())})},t.prototype.showAds=function(e){if(e&&!(e.length<=0)){var t=e;if(t&&t.length>0)for(var n=Math.min(6,t.length),a=0;a<n;a++){t[a].index=a;var i=cc.instantiate(this.crossAdItemPrefab);i&&i.getComponent(o.default)?(i.getComponent(o.default).data=t[a],this.node.addChild(i)):i.destroy()}}},__decorate([c(cc.Prefab)],t.prototype,"crossAdItemPrefab",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../gamecore/deer/DeerSDK":"DeerSDK","../gamecore/deer/DeerSDKEventNames":"DeerSDKEventNames","./CrossAdItemMain":"CrossAdItemMain"}],CubeBox:[function(e,t,n){"use strict";cc._RF.push(t,"854acwOpLVLEK4CsdcURIuK","CubeBox"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./GameConfig"),i=e("../../module/data/StageDataMgr"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCollider=!1,t.grendaBoomCount=0,t}return __extends(t,e),t.prototype.onBeginContact=function(e,t,n){if(0!=t.enabled&&0!=n.enabled){if(n.tag==o.default.Tag.tagBullet&&(t.tag==o.default.Tag.tagMoveBox||t.tag==o.default.Tag.tagMoveCube)){var r=n.getComponent(cc.RigidBody).linearVelocity.normalize(),s=e.getWorldManifold().points[0];this.scheduleOnce(function(){53==i.default.CUR_LEVEL&&i.default.CUR_MODE==a.MODE_TYPE_STRUCT.MODE3?t.getComponent(cc.RigidBody).applyLinearImpulse(r.mul(9e6),t.getComponent(cc.RigidBody).getWorldCenter(),!0):68==i.default.CUR_LEVEL&&i.default.CUR_MODE==a.MODE_TYPE_STRUCT.MODE3?t.getComponent(cc.RigidBody).applyLinearImpulse(r.mul(5e5),t.getComponent(cc.RigidBody).getWorldCenter(),!0):80==i.default.CUR_LEVEL&&i.default.CUR_MODE==a.MODE_TYPE_STRUCT.MODE3?s&&t.getComponent(cc.RigidBody).applyForce(r.mul(5e6),s,!0):t.getComponent(cc.RigidBody).applyLinearImpulse(r.mul(5e4),t.getComponent(cc.RigidBody).getWorldCenter(),!0)},0)}if(n.tag==o.default.Tag.tagGrenade&&n.node.parent.getComponent("GrenadeController").isBoom){this.grendaBoomCount++,n.node.group="rope";var c=t.node.parent.convertToWorldSpaceAR(t.node.position),l=n.node.parent.convertToWorldSpaceAR(n.node.position),d=c.sub(l).normalize(),u=i.default.CUR_LEVEL,h=i.default.CUR_MODE;15==u&&h==a.MODE_TYPE_STRUCT.MODE2?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(15e4),t.getComponent(cc.RigidBody).getWorldCenter(),!0):36==u&&h==a.MODE_TYPE_STRUCT.MODE2?(d=l.sub(c).normalize(),t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(3e4),t.getComponent(cc.RigidBody).getWorldCenter(),!0)):38==u?(t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(5e4*this.grendaBoomCount),t.getComponent(cc.RigidBody).getWorldCenter(),!0),this.scheduleOnce(function(){this.grendaBoomCount=0},.5)):43==u?(t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(4e4*this.grendaBoomCount),t.getComponent(cc.RigidBody).getWorldCenter(),!0),this.scheduleOnce(function(){this.grendaBoomCount=0},.5)):44==u?(t.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(0,5e4*this.grendaBoomCount),t.getComponent(cc.RigidBody).getWorldCenter(),!0),this.scheduleOnce(function(){this.grendaBoomCount=0},.5)):53==u?(t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(2e4*this.grendaBoomCount),t.getComponent(cc.RigidBody).getWorldCenter(),!0),this.scheduleOnce(function(){this.grendaBoomCount=0},.5)):55==u?(t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(3e4*this.grendaBoomCount),t.getComponent(cc.RigidBody).getWorldCenter(),!0),this.scheduleOnce(function(){this.grendaBoomCount=0},.5)):t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(2e4),t.getComponent(cc.RigidBody).getWorldCenter(),!0)}n.tag==o.default.Tag.tagTNT&&n.node.getComponent("TNTBox").isBoom&&(n.node.group="rope",c=t.node.parent.convertToWorldSpaceAR(t.node.position),l=n.node.parent.convertToWorldSpaceAR(n.node.position),d=c.sub(l).normalize(),u=i.default.CUR_LEVEL,h=i.default.CUR_MODE,16==u&&h==a.MODE_TYPE_STRUCT.MODE2?t.getComponent(cc.RigidBody).applyLinearImpulse(cc.v2(0,2e5),t.getComponent(cc.RigidBody).getWorldCenter(),!0):19==u&&h==a.MODE_TYPE_STRUCT.MODE2?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(3e5),t.getComponent(cc.RigidBody).getWorldCenter(),!0):18==u&&h==a.MODE_TYPE_STRUCT.MODE3?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(5e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0):91==u&&h==a.MODE_TYPE_STRUCT.MODE1?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(5e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0):106==u&&h==a.MODE_TYPE_STRUCT.MODE1?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(15e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0):120==u&&h==a.MODE_TYPE_STRUCT.MODE1?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(15e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0):181==u&&h==a.MODE_TYPE_STRUCT.MODE1?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(15e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0):189==u&&h==a.MODE_TYPE_STRUCT.MODE1?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(15e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0):88==u&&h==a.MODE_TYPE_STRUCT.MODE3?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(15e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0):102==u&&h==a.MODE_TYPE_STRUCT.MODE3?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(15e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0):135==u&&h==a.MODE_TYPE_STRUCT.MODE3?t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(15e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0):78==u&&h==a.MODE_TYPE_STRUCT.MODE4&&t.getComponent(cc.RigidBody).applyLinearImpulse(d.mul(15e3),t.getComponent(cc.RigidBody).getWorldCenter(),!0))}},t.prototype.start=function(){},__decorate([c(Boolean)],t.prototype,"isCollider",void 0),__decorate([c(Number)],t.prototype,"grendaBoomCount",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./Common":"Common","./GameConfig":"GameConfig"}],DailyTaskBase:[function(e,t,n){"use strict";cc._RF.push(t,"c0d0ecUH4tLfbBvFzYaa2PX","DailyTaskBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"desc",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"finished",{get:function(){return this._finished},enumerable:!0,configurable:!0}),t=__decorate([a],t)}(cc.Node));n.default=i,cc._RF.pop()},{}],DailyTaskConfig:[function(e,t,n){"use strict";cc._RF.push(t,"e5917FRC2JCj4S8Im7fz0yM","DailyTaskConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.MAX_COUNT=3,e.RESET_DAILY=!1,e.ALLOW_SAME_TASK=!1,e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],DailyTaskEventType:[function(e,t,n){"use strict";cc._RF.push(t,"551cc9VHBVJUpGnGYk5FmQb","DailyTaskEventType"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.TODAY_TASK_CHANGED="dailyTaskChanged",e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],DailyTaskManager:[function(e,t,n){"use strict";cc._RF.push(t,"82ab5lss2JHeaSXQhdvDyjO","DailyTaskManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./DailyTaskConfig"),a=e("./DailyTaskEventType"),i=cc._decorator,r=i.ccclass,s=(i.property,function(e){function t(){var t=e.call(this)||this;if(t._todayTasks=[],n._instance)throw new Error("Please use DailyTaskManager.instance");return n._instance=t,t.refreshTask(),t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return n._instance||new n,n._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"todayTasks",{get:function(){return this._todayTasks.concat()},enumerable:!0,configurable:!0}),t.prototype.refreshTask=function(){var e=new Date,t=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate();if(cc.sys.localStorage.getItem(n.KEY_NAME)!==t){for(var i=!1;this._todayTasks.length>o.default.MAX_COUNT;)this._todayTasks.pop(),i=!0;for(;this._todayTasks.length<o.default.MAX_COUNT;)this._todayTasks.push(this.createNewTask()),i=!0;i&&(cc.sys.localStorage.setItem(n.KEY_NAME,t),this.dispatchEvent(new cc.Event(a.default.TODAY_TASK_CHANGED,!1)))}},t.prototype.createNewTask=function(){return null},t.prototype.reset=function(){cc.sys.localStorage.removeItem(n.KEY_NAME),this._todayTasks=[],this.refreshTask()},t.KEY_NAME="__taskmanager_refresh_date",t=n=__decorate([r],t)}(cc.Node));n.default=s,cc._RF.pop()},{"./DailyTaskConfig":"DailyTaskConfig","./DailyTaskEventType":"DailyTaskEventType"}],DataManager:[function(e,t,n){"use strict";cc._RF.push(t,"e1f6867dmJPN5cv7QO6KTfm","DataManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GameCoreEventNames"),a=e("./GameManager"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){this._data={},this._localData={},this._syncToServerKeys=[],this._hasChanged=!1,this._changedKeys=[];var e=new Date;this._todayValue=""+e.getFullYear(),this._todayValue+="-";var t=e.getMonth()+1;this._todayValue+=t<10?"0"+t:t,this._todayValue+="-",t=e.getDate(),this._todayValue+=t<10?"0"+t:t,this.unserialize(),setInterval(this.doSerialize.bind(this),5e3),setTimeout(this.initForWXModule.bind(this),2e3)}var t;return t=e,e.prototype.initForWXModule=function(){if("undefined"!=typeof wx){var e=this;wx.onHide(function(){e.doSerialize()}),wx.onClose&&wx.onClose(function(){e.doSerialize()})}else setTimeout(this.initForWXModule.bind(this),2e3)},e.prototype.hasData=function(e){return void 0!==this._data[e]},Object.defineProperty(e.prototype,"lastChangedKey",{get:function(){return this._lastChangedKey},enumerable:!0,configurable:!0}),e.prototype.getDataNeedSyncToServer=function(){var e=this;if(0==this._syncToServerKeys.length)return null;var t={};return this._syncToServerKeys.forEach(function(n){var o=e._localData[n];void 0==o.today&&(t[n]=o.v)}),JSON.stringify(t)},e.prototype.setData=function(e,t,n,i,r){if(void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),"object"==typeof t||this._data[e]!==t){if(this._data[e]=t,!0===n){var s={v:t};!0===i&&(s.today=this._todayValue),this._localData[e]=s,-1==this._changedKeys.indexOf(e)&&(this._hasChanged=!0,this._changedKeys.push(e))}this._lastChangedKey=e,a.default.eventManager.dispatchEventWith(o.default.DATA_CHANGE,e)}!0===r&&-1==this._syncToServerKeys.indexOf(e)&&this._syncToServerKeys.push(e)},e.prototype.getData=function(e){return this._data[e]},e.prototype.removeData=function(e){delete this._data[e],delete this._localData[e];var t=this._changedKeys.indexOf(e);t>=0&&this._changedKeys.splice(t,1),this._hasChanged=!0,(t=this._syncToServerKeys.indexOf(e))>=0&&this._syncToServerKeys.splice(t,1)},e.prototype.resetData=function(){this._data={},this._changedKeys=[];for(var e in this._localData)this._changedKeys.push(""+e);this._localData={},this._lastChangedKey=null,this._hasChanged=!0},e.prototype.doSerialize=function(){var e=this;if(!1!==this._hasChanged){this._hasChanged=!1;var n=[];for(var i in this._localData)n.push(""+i);cc.sys.localStorage.setItem("__"+t.L_KEY+"__keys",JSON.stringify(n));var r=!1;this._changedKeys.forEach(function(n){!r&&e._syncToServerKeys.indexOf(n)>=0&&(r=!0);try{cc.sys.localStorage.setItem(t.L_KEY+"__"+n,JSON.stringify(e._localData[n]))}catch(e){}}),this._changedKeys=[],r&&a.default.eventManager.dispatchEventWith(o.default.DATA_REMOTE_CHANGE)}},e.prototype.unserialize=function(){try{for(var e=cc.sys.localStorage.getItem("__"+t.L_KEY+"__keys"),n=JSON.parse(e),o=0;o<n.length;o++){var a=""+n[o],i=cc.sys.localStorage.getItem(t.L_KEY+"__"+a);this._localData[a]=JSON.parse(i)}for(var a in this._localData){var r=this._localData[a],s=r.v,c=r.today;c&&this._todayValue!=c||(this._data[a]=s)}}catch(e){this._localData={}}},e.L_KEY="$__dml",e=t=__decorate([r],e)}());n.default=s,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","./GameManager":"GameManager"}],DeathItem:[function(e,t,n){"use strict";cc._RF.push(t,"fa9e21xdvhJH4RF/tw9Vzun","DeathItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isFollow=!1,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.update=function(e){this.isFollow&&(this.node.position=this.node.parent.position)},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],DeerBannerAd:[function(e,t,n){"use strict";cc._RF.push(t,"a9baarnMBJPBowjk9bhiqMC","DeerBannerAd"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./WXEventNames"),a=e("../managers/Utils"),i=e("../GameCoreLocation"),r=e("./WXBannerAdBase"),s=e("../deer/DeerSDK"),c=e("../deer/DeerSDKEventNames"),l=cc._decorator,d=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return __extends(t,e),n=t,t.prototype.loadAdData=function(){s.default.instance.isReady?this.deerSDKReadyHandler(null):s.default.instance.addEventListener(c.default.READY,this.deerSDKReadyHandler,this)},t.prototype.deerSDKReadyHandler=function(e){s.default.instance.removeEventListener(c.default.READY,this.deerSDKReadyHandler,this),s.default.instance.ad_getAdData(s.DeerAdType.BANNER,this.loadAdDataHandler.bind(this),this.loadAdDataErrorHandler.bind(this))},t.prototype.loadAdDataHandler=function(e){if(e&&e.length>0&&(n._bannerAds||(n._bannerAds=e),n._bannerAds.length>0)){var t=n._bannerAds.indexOf(n._currentBannerAd);++t>=n._bannerAds.length&&(t=0),n._currentBannerAd=n._bannerAds[t],this._adData=n._currentBannerAd,this.showAdData()}},t.prototype.loadAdDataErrorHandler=function(){this.dispatchEventWith(o.default.BANNER_AD_ERROR),this.destory()},t.prototype.createAd=function(){if(!this._destoried&&!this._bannerAd){var e=new cc.Node;e.on(cc.Node.EventType.TOUCH_END,this.adTapHandler,this);e.addComponent(cc.Sprite);this._bannerAd=e,cc.director.getScene().addChild(e),this.loadAdData()}},t.prototype.adTapHandler=function(e){this._adData&&this._adData.navigate()},t.prototype.showAdData=function(){var e=this;this._adData&&this._bannerAd&&cc.loader.load({url:this._adData.bannerImg,type:"png"},function(t,n){if(n){if(!e._bannerAd)return;var o=e._bannerAd,a=o.getComponent(cc.Sprite);a.spriteFrame=new cc.SpriteFrame,a.spriteFrame=new cc.SpriteFrame(n),o.width=n.width,o.height=n.height,e.relayout()}e._adData&&e._adData.reportShown()})},t.prototype.relayout=function(){if(this._bannerAd){var e=this._bannerAd;if(0!=e.height&&0!=e.width){e.getComponent(cc.Sprite);var t=cc.winSize.width-2*this.borderWeight;this._maxWidth>0&&(t=this._maxWidth);var n=t/e.width;this._maxHeight>0&&(n=Math.min(this._maxHeight/e.height,t/e.width)),e.scale=n;var r=0,s=0;switch(this._location){case i.GameCoreLocation.BOTTOM_CENTER:r=cc.winSize.width/2,s=e.height*n/2;break;case i.GameCoreLocation.TOP_CENTER:r=cc.winSize.width/2,s=cc.winSize.height-e.height*n/2}r+=this._horizontalIndent,s+=this._vertialIndent,e.x=r,e.y=s,this._adRect=new cc.Rect(r-e.width*n/2-this.borderWeight,s-e.height*n/2-this.borderWeight,e.width*n+2*this.borderWeight,e.height*n+2*this.borderWeight),this._adRect=a.default.toScreenRect(this._adRect),this.dispatchEventWith(o.default.BANNER_AD_RESIZE)}}},t.prototype.next=function(){this.dispatchEventWith(o.default.BANNER_AD_NEXT)},t.prototype.show=function(){this._destoried||(this._bannerAd&&(this._bannerAd.active=!0),this._isShowing=!0,this.dispatchEventWith(o.default.BANNER_AD_SHOW))},t.prototype.hide=function(){this._destoried||(this._bannerAd&&(this._bannerAd.active=!1),this._isShowing=!1,this.dispatchEventWith(o.default.BANNER_AD_HIDE,this))},t.prototype.destory=function(){this._destoried||(s.default.instance.removeEventListener(c.default.READY,this.deerSDKReadyHandler,this),e.prototype.destory.call(this),this._bannerAd&&(this._bannerAd.destroy(),this._bannerAd=null))},t=n=__decorate([d],t)}(r.default));n.default=u,cc._RF.pop()},{"../GameCoreLocation":"GameCoreLocation","../deer/DeerSDK":"DeerSDK","../deer/DeerSDKEventNames":"DeerSDKEventNames","../managers/Utils":"Utils","./WXBannerAdBase":"WXBannerAdBase","./WXEventNames":"WXEventNames"}],DeerLoading:[function(e,t,n){"use strict";cc._RF.push(t,"31e7b3PLpVMLauEm9wxHhbt","DeerLoading"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}var t;return t=e,e.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},e.prototype.addPop=function(e){var t=new cc.Vec2(0,0),n=cc.director.getScene().children[0];n.children.forEach(function(e){e.zIndex=0}),this.container=new cc.Node,n.addChild(this.container);var a=null;(a=this.createPopUpBg()).y=t.y,a.x=t.x,this.container.addChild(a);var i=new cc.Node,r=i.addComponent(cc.Sprite);o.default.resManager.getServerImage("https://deer-cdn.youkongwan.com/common/loadingicon.png",function(e){r&&(r.spriteFrame=new cc.SpriteFrame(e))});var s=cc.repeatForever(cc.rotateBy(3,360,360));i.runAction(s),this.container.addChild(i);var c=new cc.Node,l=c.addComponent(cc.Label);l.string=e,l.fontSize=30,this.container.addChild(c),c.y=-100},e.prototype.removePop=function(){this.container&&this.container.isValid&&this.container.destroy()},e.prototype.createPopUpBg=function(e){void 0===e&&(e=160);var t=cc.winSize,n=new cc.Node;n.width=t.width,n.height=t.height;var o=n.addComponent(cc.Graphics);o.fillColor=new cc.Color(0,0,0,e),o.lineWidth=0,cc.ENGINE_VERSION>="2.0.0"?o.fillRect(-t.width/2,-t.height/2,t.width,t.height):o.fillRect(0,0,t.width,t.height),o.stroke();var a=new cc.Node;return a.width=t.width,a.height=t.height,a.addChild(n),a.addComponent(cc.BlockInputEvents),a},e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../managers/GameManager":"GameManager"}],DeerRequest:[function(e,t,n){"use strict";cc._RF.push(t,"5c1b9ZJndRDpryupDNOdKH2","DeerRequest"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./DeerSDK"),a=e("../libs/md5"),i=e("../base/GameValues"),r=function(){function e(e,t,n,a,r,s){void 0===t&&(t=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===r&&(r=null),void 0===s&&(s="GET"),this.tryTimes=1,this._successHandlers=[],this._failHandlers=[],this._hasTriedTimes=0,null!=n&&this._successHandlers.push(n),null!=a&&this._failHandlers.push(a),t&&(t.__v=o.DEER_SDK_VERSION,t.__gv=i.default.gameVersion),this._apiURL=e,this._requestData=t,this._dataFactory=r,this._requestMethod=s||"GET",this.sendRequest()}return Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._isComplete},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.onSuccess=function(e){null!=e&&(!0!==this._isComplete?-1==this._successHandlers.indexOf(e)&&this._successHandlers.push(e):!0===this._isSuccess&&e(this._data))},e.prototype.requestSuccessHandler=function(e){null!=this._dataFactory&&(e=this._dataFactory(e)),this._isComplete=!0,this._isSuccess=!0,this._data=e;for(var t=0;t<this._successHandlers.length;t++){(0,this._successHandlers[t])(e)}this._successHandlers=[]},e.prototype.onFail=function(e){null!=e&&(!0!==this._isComplete?-1==this._failHandlers.indexOf(e)&&this._failHandlers.push(e):!1===this._isSuccess&&e(this._data))},e.prototype.requestFailHandler=function(e){if(this._hasTriedTimes<this.tryTimes)return this._hasTriedTimes++,void this.sendRequest();this._isComplete=!0,this._isSuccess=!1,this._data=e;for(var t=0;t<this._failHandlers.length;t++){(0,this._failHandlers[t])(e)}this._failHandlers=[]},e.prototype.sendRequest=function(){var e;if(this._apiURL.match(/^https?:/i)?e=this._apiURL:(e=i.default.isDebug?o.DEER_API_URL_TEST:o.DEER_API_URL,"/"!=this._apiURL.charAt(0)&&(this._apiURL="/"+this._apiURL),"/"!=(e+=this._apiURL).charAt(e.length-1)&&(e+="/")),"undefined"!=typeof wx){void 0==this._requestData.ts&&(this._requestData.ts=Math.floor(o.default.instance.serverTime.getTime()/1e3)),this.md5Data(this._requestData);var t=this;wx.request({url:e,data:t._requestData,header:{"Content-Type":"application/x-www-form-urlencoded"},method:this._requestMethod.toUpperCase(),success:function(e){var n=e.data;if(n){try{n.data.status=n.status}catch(e){}t.requestSuccessHandler(n.data)}else t.requestSuccessHandler(null)},fail:function(e){t.requestFailHandler(e)},complete:function(){}})}},e.prototype.destory=function(){this._failHandlers=[],this._successHandlers=[],this._dataFactory=null},e.prototype.md5Data=function(e){if(e){var t=Object.keys(e);t.sort();for(var n="",o=0;o<t.length;o++){var i=t[o];0!=i.indexOf("__")&&(""!=n&&(n+="&"),n+=i+"="+e[i])}n+="&"+this.md5key,e.__md5=a.md5(n)}},e}();n.default=r,cc._RF.pop()},{"../base/GameValues":"GameValues","../libs/md5":"md5","./DeerSDK":"DeerSDK"}],DeerSDKEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"b52beBL/K9P8LPD8fNd0K0T","DeerSDKEventNames"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.READY="ready",e.CHANGE="change",e.HANDSHAKE_COMPLETE="handshakeComplete",e.CONFIG_READY="configReady",e.NEW_MESSAGES="newMessages",e.FRIENDS_UPDATE="friendsUpdate",e.LUCKY_MONEY_UPDATE="luckyMoneyUpdate",e}();n.default=o,cc._RF.pop()},{}],DeerSDK:[function(e,t,n){"use strict";cc._RF.push(t,"ed579EYQ0tOir6j2XZGEavs","DeerSDK"),Object.defineProperty(n,"__esModule",{value:!0});var o,a,i,r,s=e("./DeerRequest"),c=e("../managers/event/EventDispacher"),l=e("./DeerSDKEventNames"),d=e("../platforms/QQCM_gameInfo"),u=e("../base/GameValues");n.DEER_SDK_VERSION="1.5",n.DEER_API_URL="https://deer-cms.youkongwan.com",n.DEER_API_URL_TEST="https://deer-cms-test.youkongwan.com",n.DEER_SAVE_GAME_DATA_DELAY=30,function(e){e[e.ALL=0]="ALL",e[e.IOS=1]="IOS",e[e.ANDROID=2]="ANDROID"}(o=n.DeerDeviceType||(n.DeerDeviceType={})),function(e){e[e.UNKNOW=0]="UNKNOW",e[e.RECOMMEND=1]="RECOMMEND",e[e.HOT=2]="HOT",e[e.GAME_OVER=3]="GAME_OVER",e[e.TASK=4]="TASK",e[e.BOARD=5]="BOARD",e[e.RICH=9]="RICH",e[e.BANNER=10]="BANNER",e[e.ANIMATION=11]="ANIMATION",e[e.SPLASH=12]="SPLASH",e[e.POP=13]="POP"}(a=n.DeerAdType||(n.DeerAdType={})),function(e){e[e.REBIRTH=1]="REBIRTH",e[e.DIAMDOND=2]="DIAMDOND",e[e.SCORE=3]="SCORE"}(i=n.DeerItemType||(n.DeerItemType={})),function(e){e[e.GAME_START=1001]="GAME_START",e[e.GAME_SHARE=1002]="GAME_SHARE",e[e.SHOW_REWARD_AD_SUC=1003]="SHOW_REWARD_AD_SUC",e[e.AD_REQUEST=2001]="AD_REQUEST",e[e.AD_SHOW=2002]="AD_SHOW",e[e.AD_CLICK=2003]="AD_CLICK",e[e.AD_NAVIGATE=2004]="AD_NAVIGATE",e[e.WX_BAD_SHOW=2020]="WX_BAD_SHOW",e[e.WX_BAD_CLICK=2021]="WX_BAD_CLICK",e[e.SHARE_IMG_SHOW=3001]="SHARE_IMG_SHOW",e[e.SHARE_IMG_CLICK=3002]="SHARE_IMG_CLICK",e[e.CLIPBOARD_OK=9901]="CLIPBOARD_OK"}(r=n.DeerTrackAction||(n.DeerTrackAction={})),function(e){e[e.MAIL=1]="MAIL",e[e.ADD_FRIEND_REQUEST=2]="ADD_FRIEND_REQUEST",e[e.U2U=3]="U2U",e[e.WORLD_CHAT_MSG=10]="WORLD_CHAT_MSG",e[e.SYSTEM_MSG=11]="SYSTEM_MSG"}(n.DeerMessageType||(n.DeerMessageType={}));var h=function(){function e(){this.id=0,this.type=0,this.createTime=null,this.readed=!1}return e.prototype.setReaded=function(){this.readed||_.instance.game_messageReaded(this.id)},e}();n.DeerMessageVO=h;var p,f=function(){function e(e){void 0===e&&(e=null);var t=this;if(this.index=-1,this.amount=0,this._id=0,this._nickname="",this._isVIP=!1,this._achieveValue=0,e){if(e.user_id&&(this._id=parseInt(e.user_id),delete e.user_id),e.avatar_url&&(this._avatar=e.avatar_url,delete e.avatar_url),e.address&&(this._address=e.address,delete e.address),e.player_name&&(this._nickname=e.player_name,delete e.player_name),e.openId&&(this._openID=e.openId,delete e.openId),e.achieve_v&&(this._achieveValue=e.achieve_v,delete e.achieve_v),e.user_attr){var n=parseInt(""+e.user_attr);n>0&&(this._isVIP=1==(1&n)),delete e.user_attr}e.last_time&&e.last_time>0&&(this._lastLoginTime=new Date,this._lastLoginTime.setTime(1e3*e.last_time),delete e.last_time),Object.keys(e).forEach(function(n){try{t[n]=e[n]}catch(e){}})}}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openID",{get:function(){return this._openID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"address",{get:function(){return this._address},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this._nickname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this._avatar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVIP",{get:function(){return this._isVIP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"achieveValue",{get:function(){return this._achieveValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastLoginTime",{get:function(){return this._lastLoginTime},enumerable:!0,configurable:!0}),e}();n.DeerUserVO=f,function(e){e[e.UNKNOW=0]="UNKNOW",e[e.MANUAL=1]="MANUAL",e[e.SHARE=2]="SHARE"}(p=n.DeerFriendType||(n.DeerFriendType={}));var g=function(e){function t(t){void 0===t&&(t=null);var n=this,o=null;return t&&t.type&&(o=parseInt(t.type),delete t.type),n=e.call(this,t)||this,o&&(n._type=o),n}return __extends(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),t}(f);n.DeerFriendVO=g;var m=function(){return function(){this.id=0,this.amount=0}}();n.DeerLuckyMoney=m;var _=function(e){function t(t){var n=e.call(this)||this;n._userVO=new f,n._isOnline=!0,n._passedSeconds=0,n._isReady=!1,n._isHandshakeCompleted=!1,n._isNewUser=!1,n._isDisabled=!1,n._fromAppID=null,n._inviterUserID=null,n._inviterNickname=null,n._inviterAvatar=null,n._inviterAdID=null,n._inviterAdEnterID=null,n._inviterChannel=null,n._inviterTime=null,n._inviterShareImgID=null,n._isFromMyFavorite=!1,n._remoteAllowed=!0,n._game_id=0,n._game_userID=null,n._shareData=[],n._game_config=null,n._game_sdts_time=0,n._game_sdts_data=null,n._userDataID=null,n._game_messageLastRefreshTime=0,n._game_messageRefreshIndex=1,n._game_messageIDs=[],n._game_messageAll=[],n._luckyMoneyData={},n._luckyMoney_myBalance=0,n._luckyMoney_minWithdrawalAmount=0,n._luckyMoney_withdrawNeedFollowCallbacks=[],n._item_map={},n._adDataMap={},n._adRequestMap={},n.trackProxyFun=null,n._trackDataStack=[];var o=u.default.getLocalData("deer_chid"),a=u.default.getLocalData("deer_adid"),i=u.default.getLocalData("deer_enid");if(o&&(n._inviterChannel=o),a&&(n._inviterAdID=a),i&&(n._inviterAdEnterID=i),s.default.prototype.md5key="sign_deer_sdk","undefined"!=typeof wx){wx.onHide(function(e){n._game_sdts_data&&n.game_saveDataToServiceNow(n._game_sdts_data),n.sendTracks()}),wx.onShow(function(e){e&&n.analyseWXData(e);var t=wx.getUpdateManager();t.onCheckForUpdate(function(e){}),t.onUpdateReady(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(e){e.confirm&&t.applyUpdate()}})}),t.onUpdateFailed(function(){})});var r=wx.getLaunchOptionsSync();n.analyseWXData(r)}return n._wxProxy=new v,n}return __extends(t,e),t.initSDK=function(e,n,o){void 0===n&&(n=void 0),void 0===o&&(o=void 0),t.instance.isReady||(t.instance._appID=e,n&&!t.instance._inviterChannel&&(t.instance._inviterChannel=""+n),o&&!t.instance._inviterAdID&&(t.instance._inviterAdID=""+o),t.instance.addEventListener(l.default.HANDSHAKE_COMPLETE,t.instance.handshakeCompleteHandler,t.instance),t.instance.wxLogin())},Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t(new y)),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"appID",{get:function(){return this._appID},enumerable:!0,configurable:!0}),t.prototype.analyseWXData=function(e){try{this._isFromMyFavorite=1104==e.scene,e.referrerInfo&&e.referrerInfo.appId&&(this._fromAppID=e.referrerInfo.appId)}catch(e){}try{var t=e.query;if(t.deer_uid&&(this._inviterUserID=t.deer_uid),t.deer_nn&&(this._inviterNickname=decodeURIComponent(t.deer_nn)),t.deer_av&&(this._inviterAvatar=decodeURIComponent(t.deer_av)),t.deer_chid&&(this._inviterChannel=t.deer_chid),t.deer_adid&&(this._inviterAdID=t.deer_adid),t.deer_enid&&(this._inviterAdEnterID=t.deer_enid),t.deer_shrid&&(this._inviterShareImgID=t.deer_shrid),t.deer_chid&&u.default.saveLocalData("deer_chid",t.deer_chid),t.deer_adid&&u.default.saveLocalData("deer_adid",t.deer_adid),t.time){var n=parseInt(t.time);!isNaN(n)&&n>0&&(this._inviterTime=new Date,this._inviterTime.setTime(n))}}catch(e){}},t.prototype.handshakeCompleteHandler=function(e){if(this.removeEventListener(l.default.HANDSHAKE_COMPLETE,this.handshakeCompleteHandler,this),console.log("******************* \u3010DeerSDK\u3011 *******************"),console.log("*******************  "+(this._isReady?"\u63e1\u624b\u6210\u529f":"\u63e1\u624b\u5931\u8d25")+"  *******************"),console.log("**************************************************"),this._isReady){var t=0;this._inviterUserID&&(t=1),this.track(r.GAME_START,{v:t}),this._inviterShareImgID&&this.track(r.SHARE_IMG_CLICK,{share_id:this._inviterShareImgID}),this.game_getConfigDataFromService(),this._inviterUserID&&this.user_friendAdd(parseInt(this._inviterUserID),p.SHARE)}},Object.defineProperty(t.prototype,"sdkVersion",{get:function(){return n.DEER_SDK_VERSION},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wx",{get:function(){return this._wxProxy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userVO",{get:function(){return this._userVO},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOnline",{get:function(){return this._isOnline},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverTime",{get:function(){if(isNaN(this._serverTimeS))return new Date;var e=new Date;return e.setTime(1e3*this._serverTimeS),e},enumerable:!0,configurable:!0}),t.prototype.addServerTime=function(){this._serverTimeS++,this._passedSeconds++,this._passedSeconds>0&&this._passedSeconds%5==0&&this.sendTracks(),this._game_sdts_data&&this._serverTimeS-this._game_sdts_time>n.DEER_SAVE_GAME_DATA_DELAY&&this.game_saveDataToServiceNow(this._game_sdts_data),this.game_messageRefreshInterval(),!this._user_friendsAll&&t.instance.hasEventListener(l.default.NEW_MESSAGES)&&this.user_friendsRefresh()},Object.defineProperty(t.prototype,"isReady",{get:function(){return this._isReady},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHandshakeCompleted",{get:function(){return this._isHandshakeCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNewUser",{get:function(){return this._isNewUser},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._isDisabled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fromAppID",{get:function(){return this._fromAppID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inviterUserID",{get:function(){return this._inviterUserID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inviterNickname",{get:function(){return this._inviterNickname},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inviterAvatar",{get:function(){return this._inviterAvatar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inviterAdID",{get:function(){return this._inviterAdID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inviterAdEnterID",{get:function(){return this._inviterAdEnterID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inviterChannel",{get:function(){return this._inviterChannel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inviterTime",{get:function(){return this._inviterTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFromMyFavorite",{get:function(){return this._isFromMyFavorite},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canUseEasingPolicy",{get:function(){return this._isOnline&&this._remoteAllowed},enumerable:!0,configurable:!0}),t.prototype.handshakeRetry=function(){this._isHandshakeCompleted&&!this._isReady&&(this._isHandshakeCompleted=!1,this.addEventListener(l.default.HANDSHAKE_COMPLETE,this.handshakeCompleteHandler,this),t.instance.wxLogin())},t.prototype.wxLogin=function(){if("undefined"==typeof wx)return this._isHandshakeCompleted=!0,void this.dispatchEventWith(l.default.HANDSHAKE_COMPLETE);wx.login({success:this.wxLoginSucCallback.bind(this),fail:this.wxLoginFailCallback.bind(this)})},t.prototype.wxLoginSucCallback=function(e){var t=this;if(!e||!e.code)return this._isHandshakeCompleted=!0,void this.dispatchEventWith(l.default.HANDSHAKE_COMPLETE);var n=e.code;if(u.default.currentPlatform==u.PlatformName.QQCM)wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(e){t._userInfo=e.userInfo;var o={app_id:t._appID,game_id:d.default.gameId,open_key:n,open_id:d.default.openId,avatar:t._userInfo.avatarUrl,nickName:t._userInfo.nickName,gender:t._userInfo.gender};t._fromAppID&&(o.from_app=t._fromAppID),t._inviterAdID&&(o.iv_adid=t._inviterAdID),t._inviterAdEnterID&&(o.iv_enid=t._inviterAdEnterID),t._inviterChannel&&(o.iv_chid=t._inviterChannel),new s.default("/api/user_info_qq",o,t.userInfoSucCallback.bind(t),t.userInfoFailCallback.bind(t))},fail:function(e){}});else if(u.default.currentPlatform==u.PlatformName.OPPO)wx.getUserInfo({success:function(e){t._userInfo=e.userInfo;var n=JSON.parse(JSON.stringify(t._userInfo));n.app_id=t._appID,new s.default("/api/user_info_oppo/",n,t.userInfoSucCallback.bind(t),t.userInfoFailCallback.bind(t))},fail:function(e){}});else if(u.default.currentPlatform==u.PlatformName.IOS)wx.getUserInfo({success:function(e){t._userInfo=e.userInfo;var n=JSON.parse(JSON.stringify(t._userInfo));n.app_id=t._appID,new s.default("/api/user_info_ios/",n,t.userInfoSucCallback.bind(t),t.userInfoFailCallback.bind(t))},fail:function(e){}});else if(u.default.currentPlatform==u.PlatformName.FACEBOOK)wx.getUserInfo({success:function(e){t._userInfo=e.userInfo;var n=JSON.parse(JSON.stringify(t._userInfo));n.app_id=t._appID,new s.default("/api/user_info_fb/",n,t.userInfoSucCallback.bind(t),t.userInfoFailCallback.bind(t))},fail:function(e){}});else{var o={app_id:this._appID,code:n};this._fromAppID&&(o.from_app=this._fromAppID),this._inviterAdID&&(o.iv_adid=this._inviterAdID),this._inviterAdEnterID&&(o.iv_enid=this._inviterAdEnterID),this._inviterChannel&&(o.iv_chid=this._inviterChannel),new s.default("/api/user_info",o,this.userInfoSucCallback.bind(this),this.userInfoFailCallback.bind(this)),this.getWXUserInfo()}},t.prototype.wxLoginFailCallback=function(e){this._isHandshakeCompleted=!0,this.dispatchEventWith(l.default.HANDSHAKE_COMPLETE)},t.prototype.getWXUserInfo=function(){var e=this;u.default.currentPlatform==u.PlatformName.WECHAT?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?e.doWXUserInfoIsReady():setTimeout(e.getWXUserInfo.bind(e),1e4)}}):this.doWXUserInfoIsReady()},t.prototype.doWXUserInfoIsReady=function(){var e=this;this._userInfo||wx.login({success:function(t){var n=t.code;wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(t){e._userInfo=t.userInfo;var o={app_id:e._appID,code:n,iv:t.iv,raw_data:t.rawData,encrypted_data:t.encryptedData,signature:t.signature};e._inviterAdID&&(o.in_adid=e._inviterAdID),e._inviterAdEnterID&&(o.iv_enid=e._inviterAdEnterID),e._inviterChannel&&(o.in_chid=e._inviterChannel),new s.default("/api/user_info",o)}})}})},t.prototype.userInfoSucCallback=function(e){try{this.analyseLoginData(e),this._isReady=!0,this.dispatchEventWith(l.default.READY)}catch(e){}this._isHandshakeCompleted=!0,this.dispatchEventWith(l.default.HANDSHAKE_COMPLETE)},t.prototype.userInfoFailCallback=function(e){this._isHandshakeCompleted=!0,this.dispatchEventWith(l.default.HANDSHAKE_COMPLETE)},t.prototype.analyseLoginData=function(e){if(this._game_id=parseInt(e.game_id),e.game_uid&&(this._game_userID=""+e.game_uid),this._userVO=new f(e.user_detail),void 0!=e.time?this._serverTimeS=Math.floor(e.time):this._serverTimeS=Math.floor((new Date).getTime()/1e3),setInterval(function(){t.instance.addServerTime()},1e3),this._session=e.session_key,!this._session)throw new Error("session is null");if(e.msg_id&&(this._userDataID=e.msg_id),this._isNewUser=!0===e.new_user,this._game_detail=e.game_detail,this.game_detail&&this._game_detail.share_msgs&&(this._shareData&&0!=this._shareData.length||(this._shareData=this._game_detail.share_msgs,delete this._game_detail.share_msgs)),this._game_detail){this._isDisabled=!0===this._game_detail.disable,this._remoteAllowed=!0===this._game_detail.refe,delete this._game_detail.refe;var n=this._game_detail.game_version,o=u.default.gameVersion;try{n||(n="0"),o||(o="0");for(var a=n.split("."),i=o.split("."),r=Math.max(i.length,a.length);i.length<r;)i.push("0");for(;a.length<r;)a.push("0");for(var s=!0,c=0;c<r;c++){var l=parseInt(i[c]),d=parseInt(a[c]);if(l!=d){l>d&&(s=!1);break}}this._isOnline=s}catch(e){}}},t.prototype.user_setVIP=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),this._isReady){if(this._userVO.isVIP!==e){this._userVO._isVIP=e;var o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,type:e?1:0};this._game_getConfigDataRequest=new s.default("/api/save_user_vip",o,this.user_setVIP_suc.bind(this),this.user_setVIP_suc_fail.bind(this)),this._game_getConfigDataRequest.onFail(n),this._game_getConfigDataRequest.onSuccess(t)}}else n&&n()},t.prototype.user_setVIP_suc=function(e){},t.prototype.user_setVIP_suc_fail=function(e){this._userVO._isVIP=!this._userVO.isVIP},Object.defineProperty(t.prototype,"user_friendsAll",{get:function(){return this._user_friendsAll?this._user_friendsAll.concat():(this.user_friendsRefresh(),null)},enumerable:!0,configurable:!0}),t.prototype.user_friendsRefresh=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),!this._user_refreshFriendsRequest){var n={user_id:this._userVO.id,session_key:this._session};this._user_refreshFriendsRequest=new s.default("/friend/friend_list",n,this.user_friendsRefresh_suc.bind(this),this.user_friendsRefresh_fail.bind(this),this.user_friendsRefresh_data.bind(this))}this._user_refreshFriendsRequest.onFail(t),this._user_refreshFriendsRequest.onSuccess(e)},t.prototype.user_friendsRefresh_data=function(e){var t=[];try{e.forEach(function(e){var n=new g(e);n.id&&t.push(n)})}catch(e){}return t},t.prototype.user_friendsRefresh_suc=function(e){this._user_refreshFriendsRequest=null,this._user_friendsAll=e,this._user_friendsAll||(this._user_friendsAll=[]),this.dispatchEventWith(l.default.FRIENDS_UPDATE)},t.prototype.user_friendsRefresh_fail=function(e){this._user_refreshFriendsRequest=null},t.prototype.user_friendAdd=function(e,t,n,o){void 0===n&&(n=null),void 0===o&&(o=null);var a={user_id:this._userVO.id,friend_id:e,type:t,session_key:this._session},i=new s.default("/friend/add_friend",a,this.user_friendAdd_suc.bind(this),this.user_friendAdd_fail.bind(this));i.onFail(o),i.onSuccess(n)},t.prototype.user_friendAdd_suc=function(e){try{var t=new g(e);t.id&&t.avatar&&t.nickname&&(this._user_friendsAll||(this._user_friendsAll=[]),this._user_friendsAll.push(t),this.dispatchEventWith(l.default.FRIENDS_UPDATE))}catch(e){}},t.prototype.user_friendAdd_fail=function(e){},t.prototype.user_friendRemove=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o={user_id:this._userVO.id,friend_id:e,session_key:this._session},a=new s.default("/friend/del_friend",o,this.user_friendRemove_suc.bind(this),this.user_friendRemove_fail.bind(this));a.onFail(n),a.onSuccess(t)},t.prototype.user_friendRemove_suc=function(e){try{var t=new g(e);if(t.id&&t.avatar&&t.nickname&&this._user_friendsAll)for(var n=this._user_friendsAll.length,o=0;o<n;o++)if(this._user_friendsAll[o].id==t.id){this._user_friendsAll.splice(o,1),this.dispatchEventWith(l.default.FRIENDS_UPDATE);break}}catch(e){}},t.prototype.user_friendRemove_fail=function(e){},t.prototype.user_friendsCount=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n={user_id:this._userVO.id,session_key:this._session},o=new s.default("/friend/friend_num",n,this.user_friendsCount_suc.bind(this),this.user_friendsCount_fail.bind(this));o.onFail(t),o.onSuccess(e)},t.prototype.user_friendsCount_suc=function(e){},t.prototype.user_friendsCount_fail=function(e){},Object.defineProperty(t.prototype,"game_id",{get:function(){return this._game_id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"game_userID",{get:function(){return this._game_userID},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"game_detail",{get:function(){return this._game_detail},enumerable:!0,configurable:!0}),t.prototype.game_getAllShareData=function(){return this._shareData},t.prototype.game_getAShareData=function(){if(0==this._shareData.length)return null;var e=Math.floor(this._shareData.length*Math.random());return this._shareData[e]},Object.defineProperty(t.prototype,"game_config",{get:function(){return this._game_config},enumerable:!0,configurable:!0}),t.prototype.game_getRecentGames=function(){},t.prototype.game_getConfigDataFromService=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),this._isReady)if(this._game_config)e&&e(this._game_config);else{if(null==this._game_getConfigDataRequest){var n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};this._game_getConfigDataRequest=new s.default("/api/get_game_data",n,this.game_getConfigDataFromService_suc.bind(this),this.game_getConfigDataFromService_fail.bind(this))}this._game_getConfigDataRequest.onFail(t),this._game_getConfigDataRequest.onSuccess(e)}else t&&t()},t.prototype.game_getConfigDataFromService_suc=function(e){var n=null==this._game_config;try{this._game_config=JSON.parse(e)}catch(e){this._game_config={}}if(this._game_config)try{var o=this._game_config.__clipboard,a=!0===o[0];if(a&&o.shift(),!a||this.canUseEasingPolicy){var i=o[Math.floor(Math.random()*o.length)];wx.setClipboardData({data:i}),wx.showToast({title:"\u767b\u9646\u6210\u529f",icon:"none",duration:1500,mask:!1}),t.instance.track(r.CLIPBOARD_OK,{v:i})}}catch(e){}n&&this.dispatchEventWith(l.default.CONFIG_READY),this._game_getConfigDataRequest=null},t.prototype.game_getConfigDataFromService_fail=function(e){this._game_getConfigDataRequest=null},Object.defineProperty(t.prototype,"game_score",{get:function(){return this.item_getAmount(i.SCORE)},enumerable:!0,configurable:!0}),t.prototype.game_saveScoreToService=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this._isReady?(e=Math.floor(e))<=this.game_score||this.item_saveAmountToService(i.SCORE,e,t,n):n&&n()},t.prototype.game_getScoreFromService=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._isReady?this.item_getAmountFromService(i.SCORE,e,t):t&&t()},t.prototype.game_getGlobalRankingData=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),this._isReady){if(!this._game_getGlobalRankingDataRequest){var n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,type:i.SCORE};this._game_getGlobalRankingDataRequest=new s.default("/api/score_rank",n,this.game_getGlobalRankingData_suc.bind(this),this.game_getGlobalRankingData_fail.bind(this),this.game_getGlobalRankingData_data.bind(this))}this._game_getGlobalRankingDataRequest.onFail(t),this._game_getGlobalRankingDataRequest.onSuccess(e)}else t&&t()},t.prototype.game_getGlobalRankingData_data=function(e){if(e){var t=void 0;e.my_score&&(t=e.my_score=new f(e.my_score));var n=e.score_rank;if(n)for(var o=0,a=n.length;o<a;o++){var i=new f(n[o]);n[o]=i,t&&(t.avatar&&t.avatar==i.avatar?(t.index=o+1,t=null):t.openID&&t.openID==i.openID&&(t.index=o+1,t=null))}}return e},t.prototype.game_getGlobalRankingData_suc=function(e){this._game_getGlobalRankingDataRequest=null},t.prototype.game_getGlobalRankingData_fail=function(e){this._game_getGlobalRankingDataRequest=null},t.prototype.game_saveDataToService=function(e){this._game_sdts_data=e},t.prototype.game_saveDataToServiceNow=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this._isReady||n&&n(),this._game_sdts_data=null,this._game_sdts_time=this._serverTimeS;var o={ud:e},a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,msg:JSON.stringify(o)};new s.default("/api/save_game_user_data",a,t,n,null,"POST")},t.prototype.game_getDataFromService=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),this._isReady){var n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};new s.default("/api/get_game_user_data",n,function(t){try{var n=JSON.parse(t);e&&e(n.ud)}catch(t){e&&e({})}},t)}else t&&t()},Object.defineProperty(t.prototype,"game_dataID",{get:function(){return this._userDataID},enumerable:!0,configurable:!0}),t.prototype.game_saveDataIDToService=function(e,t,n){var o=this;if(void 0===t&&(t=null),void 0===n&&(n=null),this._userDataID!=e)if(this._isReady){var a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,msg_id:e},i=new s.default("/api/save_msg_id",a,function(t){o._game_userID=e},function(e){});i.onSuccess(t),i.onFail(n)}else n&&n();else t&&t()},t.prototype.game_getRandomUsers=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),this._isReady){if(!this._game_getRandomUsersRequest){var n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};this._game_getRandomUsersRequest=new s.default("/api/random_users",n,this.game_getRandomUsers_suc.bind(this),this.game_getRandomUsers_fail.bind(this),this.game_getRandomUsers_data.bind(this))}this._game_getRandomUsersRequest.onSuccess(e),this._game_getRandomUsersRequest.onFail(t)}else t&&t()},t.prototype.game_getRandomUsers_data=function(e){try{for(var t=this._userVO.id,n=[],o=e.msg,a=0,i=o.length;a<i;a++)o[a].user_id!=t&&n.push(new f(o[a]));return n.length>0&&(this._lastRandomUsers=n.concat()),n}catch(e){}return this._lastRandomUsers&&this._lastRandomUsers.length>0?this._lastRandomUsers.concat():[]},t.prototype.game_getRandomUsers_suc=function(e){this._game_getRandomUsersRequest=null},t.prototype.game_getRandomUsers_fail=function(e){this._game_getRandomUsersRequest=null},t.prototype.game_messageRefreshInterval=function(){t.instance.hasEventListener(l.default.NEW_MESSAGES)&&this._serverTimeS-this._game_messageLastRefreshTime>t.MESSAGE_MIN_DELAY_SECOND&&this.game_messageRefresh()},t.prototype.game_messageRefresh=function(e){if(void 0===e&&(e=0),this._isReady){var n=0;this._game_messageRefreshIndex>1&&(n=Math.floor(this._game_messageLastRefreshTime-t.MESSAGE_MIN_DELAY_SECOND-10));var o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,index:this._game_messageRefreshIndex,msg_type:e,last_time:n};new s.default("/msg/roll_msg",o,this.game_messageRefresh_suc.bind(this),this.game_messageRefresh_fail.bind(this)),this._game_messageLastRefreshTime=this._serverTimeS}},Object.defineProperty(t.prototype,"game_messageAll",{get:function(){return this._game_messageAll},enumerable:!0,configurable:!0}),t.prototype.game_messageRefresh_suc=function(e){this._game_messageStack||(this._game_messageStack=[]);try{for(var t=e,n=t.length,o=0;o<n;o++){var a=t[o];if(a){var i=parseInt(""+a.id);if(!(i<=0||this._game_messageIDs.indexOf(i)>=0)){var r=new h;r.id=i,r.type=a.msg_type,r.readed=!0===a.has_readed,r.title=a.msg_title,r.content=a.msg_content,r.data=a.msg_data;try{var s=JSON.parse(r.data);r.data=s}catch(e){}if(a.from_user_detail){var c=new f(a.from_user_detail);c.id&&(r.fromUser=c)}r.createTime=new Date,r.createTime.setTime(1e3*a.create_time),this._game_messageIDs.push(i),this._game_messageAll.push(r),this._game_messageStack.push(r)}}}this._game_messageRefreshIndex++}catch(e){}this._game_messageStack.length>0&&this.hasEventListener(l.default.NEW_MESSAGES)&&(this.dispatchEventWith(l.default.NEW_MESSAGES,this._game_messageStack),this._game_messageStack=null)},t.prototype.game_messageRefresh_fail=function(e){},t.prototype.game_messageReaded=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),this._isReady&&!(e<=0)){var o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,msg_id:e};new s.default("/msg/readed_msg",o,t,n)}},t.prototype.game_messageSendToUser=function(e,t,n,o,a,i){if(void 0===o&&(o=null),void 0===a&&(a=null),void 0===i&&(i=null),this._isReady&&!(e<=0)){var r={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,to_user_id:e,msg_title:t,msg_content:n};o&&(r.msg_data=JSON.stringify(o)),new s.default("/msg/user_to_user",r,a,i)}},t.prototype.game_achievementSave=function(e,t,n,o){if(void 0===t&&(t=0),void 0===n&&(n=null),void 0===o&&(o=null),this._isReady&&e){var a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,achieve_id:e,achieve_v:t};new s.default("/achieve/save_achieve",a,n,o)}},t.prototype.game_achievementObtainedUsers=function(e,t,n,o,a){if(void 0===t&&(t=10),void 0===n&&(n=1),void 0===o&&(o=null),void 0===a&&(a=null),this._isReady&&e){var i={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,achieve_id:e,num:t,order:n};new s.default("/achieve/get_achieve",i,o,a,this.game_achievementObtainedUsers_data.bind(this))}},t.prototype.game_achievementObtainedUsers_data=function(e){var t=[];try{for(var n=e,o=0;o<n.length;o++){var a=new f(n[o]);a&&a.id&&a.nickname&&t.push(a)}}catch(e){}return t},Object.defineProperty(t.prototype,"luckyMoney_myBalance",{get:function(){return this._luckyMoney_myBalance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"luckyMoney_minWithdrawalAmount",{get:function(){return this._luckyMoney_minWithdrawalAmount},enumerable:!0,configurable:!0}),t.prototype.luckyMoney_registerTypes=function(e){var t=this;if(e){if(this._luckyMoneyTypes)throw new Error("You'd registered the types of lucky toney!");this._luckyMoneyData={},this._luckyMoneyTypes=e.concat(),this.isReady?(this.luckyMoney_refreshMyBalance(),this.luckyMoney_refresh()):this.addEventListener(l.default.READY,function(e){t.luckyMoney_refreshMyBalance(),t.luckyMoney_refresh()},this,0,!0)}},t.prototype.luckyMoney_refresh=function(e){if(void 0===e&&(e=null),this._isReady&&(e||(e=this._luckyMoneyTypes),e&&0!=e.length)){var t={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,strategy_id:e.join(",")};new s.default("/packet/get_order",t,this.luckyMoney_refresh_suc.bind(this),this.luckyMoney_refresh_fail.bind(this),this.luckyMoney_refresh_data.bind(this))}},t.prototype.luckyMoney_refresh_data=function(e){var t=this;try{e.forEach(function(e){var n=new m;n.id=e.user_order_id,n.amount=e.order_money,n.type=e.strategy_id;var o=t._luckyMoneyData[n.type];o||(o=t._luckyMoneyData[n.type]=[]),o.push(n)}),this.dispatchEventWith(l.default.LUCKY_MONEY_UPDATE)}catch(e){}return[]},t.prototype.luckyMoney_refresh_suc=function(e){},t.prototype.luckyMoney_refresh_fail=function(e){},t.prototype.luckyMoney_dispach=function(e,t,n){var o=this;if(void 0===t&&(t=null),void 0===n&&(n=null),this._isReady&&e){var a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,order_id:e.id,strategy_id:e.type},i=new s.default("/packet/send_packet",a,function(t){t&&t.balance>0&&(o._luckyMoney_myBalance=t.balance,o.dispatchEventWith(l.default.LUCKY_MONEY_UPDATE)),o.luckyMoney_refresh([e.type])},function(e){});i.onSuccess(t),i.onFail(n)}else n&&n()},t.prototype.luckyMoney_getOne=function(e){var t=this._luckyMoneyData[e];return t&&t.length>0?t.shift():null},t.prototype.luckyMoney_exist=function(e){var t=this._luckyMoneyData[e];return!!(t&&t.length>0)},t.prototype.luckyMoney_refreshMyBalance=function(){if(this._isReady){var e={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};new s.default("/packet/get_user_amount",e,this.luckyMoney_getMyBalance_suc.bind(this),this.luckyMoney_getMyBalance_fail.bind(this))}},t.prototype.luckyMoney_getMyBalance_suc=function(e){try{e.balance>0&&(this._luckyMoney_myBalance=e.balance),e.min_withdraw_amount>0&&(this._luckyMoney_minWithdrawalAmount=e.min_withdraw_amount),this.dispatchEventWith(l.default.LUCKY_MONEY_UPDATE)}catch(e){}},t.prototype.luckyMoney_getMyBalance_fail=function(e){},t.prototype.luckyMoney_withdraw=function(e,t,n){if(void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),this._isReady){if(!this._luckyMoney_withdrawRequest){var o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};this._luckyMoney_withdrawRequest=new s.default("/packet/withdraw",o,this.luckyMoney_withdraw_suc.bind(this),this.luckyMoney_withdraw_fail.bind(this))}this._luckyMoney_withdrawRequest.onFail(t),this._luckyMoney_withdrawRequest.onSuccess(e),n&&this._luckyMoney_withdrawNeedFollowCallbacks.push(n)}else t&&t()},t.prototype.luckyMoney_withdraw_suc=function(e){e&&(-3==e.status?(this._luckyMoney_withdrawRequest.destory(),this._luckyMoney_withdrawNeedFollowCallbacks.forEach(function(e){e()})):e.balance>0&&(this._luckyMoney_myBalance=e.balance,this.dispatchEventWith(l.default.LUCKY_MONEY_UPDATE))),this._luckyMoney_withdrawRequest=null,this._luckyMoney_withdrawNeedFollowCallbacks=[]},t.prototype.luckyMoney_withdraw_fail=function(e){this._luckyMoney_withdrawRequest=null,this._luckyMoney_withdrawNeedFollowCallbacks=[]},t.prototype.item_getAmount=function(e){var t=this._item_map[e];return void 0==t||null==t?0:t},t.prototype.item_getAllFromService=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session};new s.default("/api/get_user_items",n,e,t).onSuccess(this.item_getAllFromService_success.bind(this))},t.prototype.item_getAllFromService_success=function(e){var t=this;try{e.forEach(function(e){var n=""+e.type_id;t._item_map[n]=e.amount})}catch(e){}},t.prototype.item_getAmountFromService=function(e,t,n){var o=this;void 0===t&&(t=null),void 0===n&&(n=null);var a={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,type:e};new s.default("/api/get_item_amount",a,t,n).onSuccess(function(t){var n=t.amount;n.length>0&&(o._item_map[e]=parseInt(n))})},t.prototype.item_saveAmountToService=function(e,t,n,o){var a=this;void 0===n&&(n=null),void 0===o&&(o=null);var i={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,type:e,amount:t},r=this._item_map[e];this._item_map[e]=t,new s.default("/api/save_item_amount",i,n,o).onFail(function(){a._item_map[e]=r})},t.prototype.ad_getAllAds=function(){var e=this,t=[];return Object.keys(this._adDataMap).forEach(function(n){var o=e._adDataMap[n];o&&o.forEach(function(e){-1==t.indexOf(e)&&t.push(e)})}),t},t.prototype.ad_getAds=function(e,t){void 0===t&&(t=null);var n=this._adDataMap["ad_"+e];if(t){var o=this._adDataMap["ad_"+e+"_"+t];o&&o.length>0&&(n=o)}return n?n.concat():null},t.prototype.ad_addAds=function(e,t){var n=this;t&&t.length>0&&(this._adDataMap["ad_"+e]=t,t.forEach(function(t){t.adType=e;var o=t.flag;if(o){var a="ad_"+e+"_"+o;void 0==n._adDataMap[a]&&(n._adDataMap[a]=[]),n._adDataMap[a].push(t)}}))},t.prototype.ad_getAdData=function(e,t,n,o){var a=this;void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null);var i=this.ad_getAds(e,o);if(i)null!=t&&t(i);else{var c=this._adRequestMap[e];if(!c){var l={app_id:this._appID,entry_id:e};c=new s.default("/adv/adv",l,function(n){if(delete a._adRequestMap["ad_"+e],a.track(r.AD_REQUEST,{enter_id:e}),a.ad_addAds(e,n),null!=t){var i=a.ad_getAds(e,o);t(i)}},function(){delete a._adRequestMap["ad_"+e]},this.ad_getAdData_dataFactory.bind(this))}c.onFail(n)}},t.prototype.ad_getAdData_dataFactory=function(e){var t=[];try{for(var n=e,a=0;a<n.length;a++){var i=n[a],r=new M;r.id=parseInt(i.id),r.appID=i.app_id,r.name=i.name,r.path=i.path,r.desc=i.desc,r.icon=i.icon,r.img_256_129=i.adv_img,r.img_1000_840=i.rich_img,r.previewImg=i.pub_img,r.bannerImg=i.strip_img,r.splashImg=i.screen_img,i.spine&&(r.spine={atlas:i.spine.dh_desc,png:i.spine.dh_chartlet,aniJson:i.spine.dh_file}),i.laya_spine&&(r.spineLaya={sk:i.laya_spine.laya_sk,chartlet:i.laya_spine.laya_chartlet}),r.adValue=parseInt(i.avd_value);var s=!0;void 0!=i.equipment&&(r.device=parseInt(i.equipment),(r.device!=o.ANDROID||u.default.isAndroid)&&(r.device!=o.IOS||u.default.isIOS)||(s=!1)),s&&t.push(r)}}catch(e){}return t.concat()},t.prototype.getShareQueryData=function(){var e={deer_uid:this._userVO.id,time:(new Date).getTime()};return this._userInfo&&(e.deer_nn=this._userInfo.nickName,e.deer_av=this._userInfo.avatarUrl),this._inviterChannel&&(e.deer_chid=this._inviterChannel),this._inviterAdID&&(e.deer_adid=this._inviterAdID),this._inviterAdEnterID&&(e.deer_enid=this._inviterAdEnterID),e},t.prototype.track=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!1),t||(t={}),t.aid=e,u.default.gameVersion&&(t.game_v=u.default.gameVersion),t.game_t=this._passedSeconds,this._inviterChannel&&(t.iv_chid=this._inviterChannel),this._inviterAdID&&(t.iv_adid=this._inviterAdID),this._inviterAdEnterID&&(t.iv_enid=this._inviterAdEnterID),this._trackDataStack.push(t),n&&this.sendTracks(),this.trackProxyFun)try{this.trackProxyFun(e,t)}catch(e){}},t.prototype.sendTracks=function(){var e=this;if(0!=this._trackDataStack.length){this._isReady&&this._trackDataStack.forEach(function(t){t.user_id=e._userVO.id,t.game_id=e._game_id,t.session=e._session});var t={more_data:JSON.stringify(this._trackDataStack)};new s.default("api/game_statistic",t,null,null,null,"POST"),this._trackDataStack=[]}},t.prototype.getRequestData=function(){var e={};return e.user_id=this._userVO.id,e.game_id=this._game_id,e.session=this._session,e},t.prototype.sendFeedback=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o={user_id:this._userVO.id,game_id:this._game_id,session_key:this._session,tell:e.cellphone,fb_wx:e.wx,fb_content:e.content};new s.default("/api/feedback",o,t,n)},t.MESSAGE_MIN_DELAY_SECOND=30,t}(c.default);n.default=_;var y=function(){return function(){}}(),v=function(){function e(){}return e.prototype.shareAppMessage=function(e){"undefined"!=typeof wx&&(_.instance.track(r.GAME_SHARE,{v:2}),this.addShareQueryData(e),wx.shareAppMessage(e))},e.prototype.addShareQueryData=function(e){if(e){var t=_.instance.getShareQueryData(),n=e.imageUrl,o="",a=_.instance.game_getAllShareData();if(n&&a)for(var i=0;i<a.length;i++)if(a[i].share_img==n){_.instance.track(r.SHARE_IMG_SHOW,{share_id:a[i].share_id}),o=a[i].share_path,t.deer_shrid=a[i].share_id;break}var s=e.query||"";Object.keys(t).forEach(function(e){""!=s&&(s+="&"),s+=e+"="+encodeURIComponent(t[e])}),o&&o.indexOf("?")>=0&&(""!=s&&(s+="&"),s+=o.replace(/^.*\?/,"")),""!=s&&(e.query=s)}},e.prototype.onShareAppMessage=function(e){var t=this;"undefined"!=typeof wx&&(wx.onShareAppMessage(function(){var n=e();return n?(_.instance.track(r.GAME_SHARE,{v:1}),t.addShareQueryData(n),n):{}}),wx.showShareMenu({withShareTicket:!0}))},e.prototype.createRewardedVideoAd=function(e){if("undefined"==typeof wx)return null;var t=wx.createRewardedVideoAd(e);return t?(t.onClose(function(e){e&&1==e.isEnded&&_.instance.track(r.SHOW_REWARD_AD_SUC)}),t):null},e}(),M=function(){function e(){this.id=0,this.device=0,this.icon=null,this.img_256_129=null,this.img_1000_840=null,this.bannerImg=null,this.splashImg=null,this.spine=null,this.spineLaya=null,this.adValue=0,this.path=null,this.adType=0}return e.prototype.reportShown=function(){_.instance.track(r.AD_SHOW,{enter_id:this.adType,ad_id:this.id})},e.prototype.reportNavigate=function(){_.instance.track(r.AD_NAVIGATE,{enter_id:this.adType,ad_id:this.id,path:this.path})},e.prototype.navigate=function(t,n,o){var i=this;void 0===t&&(t=!0),void 0===n&&(n=null),void 0===o&&(o=null),_.instance.track(r.AD_CLICK,{enter_id:this.adType,ad_id:this.id,path:this.path});var s=this.appID;u.default.currentPlatform==u.PlatformName.QQCM&&(s=this.gameID),this.adType==a.SPLASH&&(t=!1);var c=this.path;c&&(c.indexOf("?")>=0?c+="&deer_enid="+this.adType:c+="?deer_enid="+this.adType,-1==c.indexOf("deer_adid=")&&(c+="&deer_adid="+this.id)),"undefined"!=typeof wx&&(e.lastNavigateTime=new Date,wx.navigateToMiniProgram({appId:s,path:c,fail:function(e){if(o&&o(e),t&&void 0!=i.previewImg&&i.previewImg.indexOf("http")>=0)try{wx.previewImage({urls:[i.previewImg]})}catch(e){}},success:function(){i.reportNavigate(),n&&n()}}))},e}();n.DeerAdVO=M,cc._RF.pop()},{"../base/GameValues":"GameValues","../managers/event/EventDispacher":"EventDispacher","../platforms/QQCM_gameInfo":"QQCM_gameInfo","./DeerRequest":"DeerRequest","./DeerSDKEventNames":"DeerSDKEventNames"}],Dictionary:[function(e,t,n){"use strict";cc._RF.push(t,"83d5bNrllxKFYN6V1yhvBHI","Dictionary"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.m_keys=[],this.m_values=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.m_keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this.m_values.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this.m_keys.concat()},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.m_keys.indexOf(e)},e.prototype.add=function(e,t){var n=this.indexOf(e);n>=0?this.m_values[n]=t:(this.m_keys.push(e),this.m_values.push(t))},e.prototype.get=function(e){var t=this.indexOf(e);return t>=0?this.m_values[t]:null},e.prototype.remove=function(e){var t=this.indexOf(e);return t>=0?(this.m_keys.splice(t,1),this.m_values.splice(t,1)[0]):null},e.prototype.clear=function(){this.m_keys.length=0,this.m_keys=[],this.m_values.length=0,this.m_values=[]},e.prototype.getRandomData=function(){var e=Math.random()*this.keys.length<<0;return this.m_values[e]},e.prototype.getRandomKey=function(){var e=Math.random()*this.keys.length<<0;return this.m_keys[e]},e}();n.default=o,cc._RF.pop()},{}],EffManager:[function(e,t,n){"use strict";cc._RF.push(t,"871ceD1HdtH5Lb+oPtwujVB","EffManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../gamecore/managers/GameManager"),a=cc._decorator,i=a.ccclass,r=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bombFirePrefab=null,t.bombHitPrefab=null,t.bombDiePrefab=null,t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!0,configurable:!0}),t.prototype.addFireEff=function(e,t){if(this.bombFirePrefab){var n=cc.instantiate(this.bombFirePrefab);n.parent=t.parent,n.zIndex=600,n.setPosition(e),n.setScale(2,2)}else cc.loader.loadRes("prefabs/bomb_fire",function(n,o){if(n)cc.error(n.message||n);else{this.bombFirePrefab=o;var a=cc.instantiate(o);a.zIndex=600,a.parent=t.parent,a.setPosition(e),a.setScale(2,2)}}.bind(this))},t.prototype.addHitEff=function(e,t){if(this.bombHitPrefab){var n=cc.instantiate(this.bombHitPrefab);n.parent=t.parent,n.zIndex=600,n.setPosition(e),n.setScale(2,2)}else cc.loader.loadRes("prefabs/bomb_hit",function(n,o){if(n)cc.error(n.message||n);else{this.bombHitPrefab=o;var a=cc.instantiate(o);a.zIndex=600,a.parent=t.parent,a.setPosition(e),a.setScale(2,2)}}.bind(this))},t.prototype.addDieEff=function(e,t){if(this.bombDiePrefab){var n=cc.instantiate(this.bombDiePrefab);n.parent=t.parent,n.zIndex=600,n.setPosition(e),n.setScale(2,2)}else cc.loader.loadRes("prefabs/bomb_die",function(n,o){if(n)cc.error(n.message||n);else{this.bombDiePrefab=o;var a=cc.instantiate(o);a.zIndex=600,a.parent=t.parent,a.setPosition(e),a.setScale(2,2)}}.bind(this));o.default.soundsManager.playSound("explosion_a.MP3",!1,"",.5)},t._instance=null,t=n=__decorate([i],t)}(cc.Component));n.default=r,cc._RF.pop()},{"../gamecore/managers/GameManager":"GameManager"}],EnemyGeneratePoint:[function(e,t,n){"use strict";cc._RF.push(t,"ca0c77VNvJBb4HADRXBxmuu","EnemyGeneratePoint"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enemyType=0,t.sprite=null,t}return __extends(t,e),t.prototype.start=function(){this.sprite=this.getComponent(cc.Sprite),this.sprite&&(this.sprite.enabled=!1)},__decorate([i(Number)],t.prototype,"enemyType",void 0),__decorate([i(cc.Sprite)],t.prototype,"sprite",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],EnemyItem:[function(e,t,n){"use strict";cc._RF.push(t,"2fb9bIHBuFLSI87ifMkNHRk","EnemyItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameCtrl"),a=e("./Globaldef"),i=e("./GameData"),r=e("./EnemyManager"),s=e("./EffManager"),c=e("./Hero_physic"),l=e("./Enemy"),d=cc._decorator,u=d.ccclass,h=d.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameCtrl=null,t.enemyManager=null,t.body=null,t.collider=null,t.curState=2,t.enemy_type=0,t.curHp=2,t.isDead=!1,t.selfScore=2,t.normalImg=null,t.brokeImg=null,t.startCD=!1,t.transTime=.5,t.curTime=0,t.canNotTrans=!1,t.lastTransObj=null,t.canNotTransCD=!1,t.canNotTransInterval=1,t.canNotTransCurTime=0,t.hitObj=null,t.nextIdx=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.body=this.getComponent(cc.RigidBody),this.collider=this.getComponent(cc.PhysicsBoxCollider),this.body.fixedRotation=!0,this.startCD=!1,this.transTime=.5,this.curTime=0,this.canNotTrans=!1,this.lastTransObj=null,this.canNotTransCD=!1,this.canNotTransInterval=1,this.canNotTransCurTime=0},t.prototype.onDestroy=function(){},t.prototype.start=function(){},t.prototype.update=function(e){if(1!=i.default.instance.isPause)return 1==this.canNotTrans?(this.canNotTransCurTime+=e,void(this.canNotTransCurTime>=this.canNotTransInterval&&(this.canNotTransCurTime=0,this.canNotTrans=!1))):void(1==this.startCD&&(this.curTime+=e,this.curTime>=this.transTime&&(this.startCD=!1,this.curTime=0,this.transPos())))},t.prototype.init=function(e,t,n){this.gameCtrl=t,this.enemyManager=n,this.isDead=!1,this.curHp=this.getMaxHp(),this.selfScore=0;var o=parseInt(""+e.x/40),a=parseInt(""+e.y/40);this.node.x=40*o+10,this.node.y=40*a+20},t.prototype.reset=function(){this.curHp=this.getMaxHp(),this.isDead=!1,this.body&&(this.body.linearVelocity=cc.v2(0,0)),this.showNormal()},t.prototype.getMaxHp=function(){return this.enemy_type==a.default.EnemyType.E_BOX?2:this.enemy_type==a.default.EnemyType.E_BOX_XUE?2:this.enemy_type==a.default.EnemyType.E_BOX_NORMAL?2:this.enemy_type==a.default.EnemyType.E_TONG_XUE?2:(this.enemy_type,a.default.EnemyType.E_TONG,2)},t.prototype.onHP=function(e){this.curHp+=e,0>=this.curHp&&(this.enemyManager&&this.enemyManager.removeEnemy(this.node),this.isDead=!0,s.default.instance.addDieEff(this.node.getPosition(),this.node),this.node.active=!1),this.curHp<this.getMaxHp()&&this.showBroke()},t.prototype.showNormal=function(){this.normalImg&&(this.normalImg.active=!0),this.brokeImg&&(this.brokeImg.active=!1)},t.prototype.showBroke=function(){this.normalImg&&(this.normalImg.active=!1),this.brokeImg&&(this.brokeImg.active=!0)},t.prototype.onBeginContact=function(e,t,n){switch(t.tag){case a.default.TagType.DONG:var o=n.node.getComponent(c.default);o||(o=n.node.getComponent(l.default)),1==this.canNotTrans?(this.startCD=!1,this.curTime=0):(this.hitObj=o,this.startCD=!0,this.curTime=0)}},t.prototype.onEndContact=function(e,t){switch(t.tag){case a.default.TagType.DONG:this.startCD=!1,this.curTime=0}},t.prototype.transPos=function(){if(this.enemyManager){var e=this.enemyManager.getDongByIdx(this.nextIdx);if(e&&this.hitObj){this.startCD=!1,this.curTime=0,e.canNotTrans=!0,e.lastTransObj=this.hitObj.node,this.hitObj.stopMove(),this.hitObj.node.scaleX=.1,this.hitObj.node.scaleY=.1,this.hitObj.node.stopAllActions();var t=cc.scaleTo(.3,1);this.hitObj.node.runAction(t),this.hitObj.node.setPosition(e.node.getPosition())}}},__decorate([h(o.default)],t.prototype,"gameCtrl",void 0),__decorate([h(r.default)],t.prototype,"enemyManager",void 0),__decorate([h(cc.RigidBody)],t.prototype,"body",void 0),__decorate([h(cc.PhysicsBoxCollider)],t.prototype,"collider",void 0),__decorate([h(Number)],t.prototype,"curState",void 0),__decorate([h(Number)],t.prototype,"enemy_type",void 0),__decorate([h(Number)],t.prototype,"curHp",void 0),__decorate([h(Boolean)],t.prototype,"isDead",void 0),__decorate([h(Number)],t.prototype,"selfScore",void 0),__decorate([h(cc.Node)],t.prototype,"normalImg",void 0),__decorate([h(cc.Node)],t.prototype,"brokeImg",void 0),t=__decorate([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./EffManager":"EffManager","./Enemy":"Enemy","./EnemyManager":"EnemyManager","./GameCtrl":"GameCtrl","./GameData":"GameData","./Globaldef":"Globaldef","./Hero_physic":"Hero_physic"}],EnemyManager:[function(e,t,n){"use strict";cc._RF.push(t,"d603anR1QlO/pnf+U4trir7","EnemyManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameCtrl"),a=e("./GameData"),i=e("./Globaldef"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_bullet=null,t.m_prefab_dong=null,t.m_gameCtrl=null,t.maxEnemyNum=2,t.enemyGeneratePoint=[],t.m_enemyList=[],t.tiledMapCom=null,t.tiledPointGroup=null,t.m_prefab=null,t.m_prefab_yellow=null,t.m_prefab_blue=null,t.m_prefab_red=null,t.m_prefab_power=null,t.m_prefab_box=null,t.m_prefab_box_xue=null,t.m_prefab_box_normal=null,t.m_prefab_tong_xue=null,t.m_prefab_tong=null,t.m_prefab_tree_1=null,t.m_prefab_tree_2=null,t.m_prefab_tree_3=null,t.m_prefab_tree_4=null,t.m_prefab_tree_5=null,t.m_prefab_tree_6=null,t.m_prefab_wall_1=null,t.m_prefab_wall_2=null,t.m_prefab_tree_8=null,t.m_prefab_tree_9=null,t}return __extends(t,e),t.prototype.init=function(e){this.m_gameCtrl=e,cc.director.getPhysicsManager().enabled=!0},t.prototype.reset=function(){var e=cc.find("Canvas/bg/TiledMap");40>a.default.instance.m_curLevel&&(e.x=350),this.tiledMapCom=e.getComponent(cc.TiledMap),this.tiledPointGroup=this.tiledMapCom.getObjectGroup("point"),this.tiledPointGroup.enabled=!1,this.setTerrainLevel(),this.removeAll();var t=this.tiledPointGroup.getObjects();a.default.instance.m_curMaxMon=t.length;for(var n=0;n<a.default.instance.m_curMaxMon;n++)if("hero"!=t[n].name){var o=t[n].x+this.node.x,i=t[n].y+this.node.y,r=cc.v2(o,i),s=t[n].mon_type,c=t[n].self,l=t[n].next,d=this.getEnemyByType(s);d?(d.node.active=!0,d.reset(),d.node.setPosition(r)):this.addEnemy(r,s,c,l)}},t.prototype.addEnemy=function(e,t,n,o){t==i.default.EnemyType.E_GRAY?this.m_prefab?this.createEnemy(e,this.m_prefab,t):cc.loader.loadRes("prefabs/enemy",function(n,o){n?cc.error(n.message||n):(this.m_prefab=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_YELLOW?this.m_prefab_yellow?this.createEnemy(e,this.m_prefab_yellow,t):cc.loader.loadRes("prefabs/enemy_yellow",function(n,o){n?cc.error(n.message||n):(this.m_prefab_yellow=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_BLUE?this.m_prefab_blue?this.createEnemy(e,this.m_prefab_blue,t):cc.loader.loadRes("prefabs/enemy_blue",function(n,o){n?cc.error(n.message||n):(this.m_prefab_blue=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_RED?this.m_prefab_red?this.createEnemy(e,this.m_prefab_red,t):cc.loader.loadRes("prefabs/enemy_red",function(n,o){n?cc.error(n.message||n):(this.m_prefab_red=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_T_POWER?this.m_prefab_power?this.createEnemy(e,this.m_prefab_power,t):cc.loader.loadRes("prefabs/enemy_power",function(n,o){n?cc.error(n.message||n):(this.m_prefab_power=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_BOX?this.m_prefab_box?this.createEnemy(e,this.m_prefab_box,t):cc.loader.loadRes("prefabs/item_box",function(n,o){n?cc.error(n.message||n):(this.m_prefab_box=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_BOX_XUE?this.m_prefab_box_xue?this.createEnemy(e,this.m_prefab_box_xue,t):cc.loader.loadRes("prefabs/item_xiangzi_xue",function(n,o){n?cc.error(n.message||n):(this.m_prefab_box_xue=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_BOX_NORMAL?this.m_prefab_box_normal?this.createEnemy(e,this.m_prefab_box_normal,t):cc.loader.loadRes("prefabs/item_xiangzi",function(n,o){n?cc.error(n.message||n):(this.m_prefab_box_normal=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_TONG_XUE?this.m_prefab_tong_xue?this.createEnemy(e,this.m_prefab_tong_xue,t):cc.loader.loadRes("prefabs/item_youtong_xue",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tong_xue=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_TONG?this.m_prefab_tong?this.createEnemy(e,this.m_prefab_tong,t):cc.loader.loadRes("prefabs/item_youtong",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tong=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_DONG?this.m_prefab_dong?this.createEnemy(e,this.m_prefab_dong,t,n,o):cc.loader.loadRes("prefabs/item_dong",function(a,i){a?cc.error(a.message||a):(this.m_prefab_dong=i,this.createEnemy(e,i,t,n,o))}.bind(this)):t==i.default.EnemyType.E_TREE_1?this.m_prefab_tree_1?this.createEnemy(e,this.m_prefab_tree_1,t):cc.loader.loadRes("prefabs/item_tree",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tree_1=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_TREE_2?this.m_prefab_tree_2?this.createEnemy(e,this.m_prefab_tree_2,t):cc.loader.loadRes("prefabs/item_tree1",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tree_2=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_TREE_3?this.m_prefab_tree_3?this.createEnemy(e,this.m_prefab_tree_3,t):cc.loader.loadRes("prefabs/item_tree2",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tree_3=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_TREE_4?this.m_prefab_tree_4?this.createEnemy(e,this.m_prefab_tree_4,t):cc.loader.loadRes("prefabs/item_tree_xueren",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tree_4=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_TREE_5?this.m_prefab_tree_5?this.createEnemy(e,this.m_prefab_tree_5,t):cc.loader.loadRes("prefabs/item_tree_wuzi",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tree_5=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_TREE_6?this.m_prefab_tree_6?this.createEnemy(e,this.m_prefab_tree_6,t):cc.loader.loadRes("prefabs/item_tree4",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tree_6=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_WALL_1?this.m_prefab_wall_1?this.createEnemy(e,this.m_prefab_wall_1,t):cc.loader.loadRes("prefabs/item_wall",function(n,o){n?cc.error(n.message||n):(this.m_prefab_wall_1=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_WALL_2?this.m_prefab_wall_2?this.createEnemy(e,this.m_prefab_wall_2,t):cc.loader.loadRes("prefabs/item_wall_2",function(n,o){n?cc.error(n.message||n):(this.m_prefab_wall_2=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_TREE_8?this.m_prefab_tree_8?this.createEnemy(e,this.m_prefab_tree_8,t):cc.loader.loadRes("prefabs/item_tree8",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tree_8=o,this.createEnemy(e,o,t))}.bind(this)):t==i.default.EnemyType.E_TREE_9&&(this.m_prefab_tree_9?this.createEnemy(e,this.m_prefab_tree_9,t):cc.loader.loadRes("prefabs/item_tree9",function(n,o){n?cc.error(n.message||n):(this.m_prefab_tree_9=o,this.createEnemy(e,o,t))}.bind(this)))},t.prototype.createEnemy=function(e,t,n,o,a){void 0===o&&(o=null),void 0===a&&(a=null);var r=cc.instantiate(t);r.parent=this.m_gameCtrl.bgImg.node,r.setPosition(e),r.active=!0,r.zIndex=500;var s=r.getComponent("Enemy");s||(s=r.getComponent("EnemyItem")),4<=n&&n<=i.default.EnemyType.E_MAX&&(r.zIndex=1220-e.y),n==i.default.EnemyType.E_DONG&&(r.zIndex=1,s.selfIdx=o,s.nextIdx=a),s.enemy_type=n,s.init(e,this.m_gameCtrl,this),this.m_enemyList.push(r)},t.prototype.getEnemyByIdx=function(e){return 0>e||e>=this.m_enemyList.length?null:this.m_enemyList[e]},t.prototype.getEnemyNearest=function(e){for(var t=null,n=1e3,o=0;o<this.m_enemyList.length;o++){var a=this.m_enemyList[o],r=a.getComponent("Enemy");if(r&&(r.enemy_type==i.default.EnemyType.E_GRAY||r.enemy_type==i.default.EnemyType.E_YELLOW||r.enemy_type==i.default.EnemyType.E_BLUE||r.enemy_type==i.default.EnemyType.E_RED)&&r&&1==a.active){if(null==t){t=r;continue}var s=cc.v2(e.x,e.y).sub(r.node.getPosition()).mag();s<n&&(n=s,t=r)}}return t},t.prototype.getEnemyByType=function(e){for(var t=0;t<this.m_enemyList.length;t++){var n=this.m_enemyList[t],o=n.getComponent("Enemy");if(o||(o=n.getComponent("EnemyItem")),o&&o.enemy_type==e&&0==n.active)return o}return null},t.prototype.getDongByIdx=function(e){for(var t,n=0;n<this.m_enemyList.length;n++)if(t=this.m_enemyList[n].getComponent("EnemyItem"),t&&t.enemy_type==i.default.EnemyType.E_DONG&&t.selfIdx==e)return t;return null},t.prototype.getEnemyCount=function(){return this.m_enemyList.length},t.prototype.removeEnemy=function(e){if(e){for(var t=!0,n=0;n<this.m_enemyList.length;n++)if(this.m_enemyList[n]==e){this.m_enemyList.splice(n,1),e.active=!1;var o=e.getComponent("Enemy");o||(t=!1,o=e.getComponent("EnemyItem")),a.default.instance.addScore(o.selfScore);break}1==t&&this.m_gameCtrl.checkGameState()}},t.prototype.removeAll=function(){for(var e,t=0;t<this.m_enemyList.length;t++)e=this.m_enemyList[t].getComponent("Enemy"),e&&e.removeAllBullet(),this.m_enemyList[t].active=!1},t.prototype.removeAllBullet=function(){for(var e,t=0;t<this.m_enemyList.length;t++)e=this.m_enemyList[t].getComponent("Enemy"),e&&e.removeAllBullet()},t.prototype.checkState=function(){for(var e,t=0;t<this.m_enemyList.length;t++)e=this.m_enemyList[t].getComponent("Enemy"),e&&e.checkState()},t.prototype.isAllDead=function(){for(var e,t=0;t<this.m_enemyList.length;t++)if(e=this.m_enemyList[t].getComponent("Enemy"),e||(e=this.m_enemyList[t].getComponent("EnemyItem")),!(e.enemy_type>=i.default.EnemyType.E_BOX&&e.enemy_type<i.default.EnemyType.E_MAX)&&1==this.m_enemyList[t].active)return!1;return!0},t.prototype.setTerrainLevel=function(){var e=cc.find("Canvas/bg/TiledMap/terrain");e?e.setSiblingIndex(0):cc.log("Get terrain Error!");var t=cc.find("Canvas/bg/TiledMap/shadow");t&&t.setSiblingIndex(1);var n=cc.find("Canvas/bg/TiledMap/\u77f3\u5934");n&&n.setSiblingIndex(2);var o=cc.find("Canvas/bg/TiledMap/\u77f3\u59342");o&&o.setSiblingIndex(3);var a=cc.find("Canvas/bg/TiledMap/tree");a||(a=cc.find("Canvas/bg/TiledMap/\u6811")),a&&a.setSiblingIndex(4)},__decorate([c(cc.Prefab)],t.prototype,"m_bullet",void 0),__decorate([c(cc.Prefab)],t.prototype,"m_prefab_dong",void 0),__decorate([c(o.default)],t.prototype,"m_gameCtrl",void 0),__decorate([c(Number)],t.prototype,"maxEnemyNum",void 0),__decorate([c(cc.Node)],t.prototype,"enemyGeneratePoint",void 0),__decorate([c(cc.Node)],t.prototype,"m_enemyList",void 0),__decorate([c(cc.TiledMap)],t.prototype,"tiledMapCom",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./GameCtrl":"GameCtrl","./GameData":"GameData","./Globaldef":"Globaldef"}],Enemy:[function(e,t,n){"use strict";cc._RF.push(t,"f1de3zIOd9HMLGJ02Oarji9","Enemy"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameCtrl"),a=e("./Globaldef"),i=e("./GameData"),r=e("./Raycast"),s=e("./EnemyManager"),c=e("./EffManager"),l=e("./TankDataMgr"),d=cc._decorator,u=d.ccclass,h=d.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rayPrefab=null,t.bulletList=[],t.gameCtrl=null,t.enemyManager=null,t.body=null,t.collider=null,t.tank_bottom=null,t.tank_fire=null,t.curState=2,t.enemy_type=0,t.curTime=2,t.checkInterval=2,t.curFireTime=2,t.checkFireInterval=2,t.ray=null,t.rayComPonent=null,t.curHp=1,t.isDead=!1,t.selfScore=1,t.tempTime=1,t.tempInterval=1,t.bullet_prefab=null,t.bullet_prefab_yellow=null,t.bullet_prefab_blue=null,t.bullet_prefab_pao=null,t.bullet_prefab_power=null,t.fllow_move=!1,t.sprite=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.body=this.getComponent(cc.RigidBody),this.collider=this.getComponent(cc.PhysicsBoxCollider),this.body.fixedRotation=!0},t.prototype.onDestroy=function(){},t.prototype.start=function(){this.enemy_type==a.default.EnemyType.E_RED&&(this.checkFireInterval=100*Math.random()%5+2),this.checkState()},t.prototype.update=function(e){if(1!=i.default.instance.isPause&&this.gameCtrl){if(this.rayComPonent&&this.gameCtrl){var t=this.node.getPosition(),n=(o=this.gameCtrl.hero.node.getPosition()).sub(t);if(n.normalizeSelf(),this.rayComPonent.setCenter(t.addSelf(n.mulSelf(10))),this.gameCtrl.hero.isDead)this.rayComPonent.setTarget(0,0);else{var o=this.gameCtrl.hero.node.getPosition();this.rayComPonent.setTarget(o.x,o.y)}}if(this.curFireTime+=e,this.curFireTime>=this.checkFireInterval&&!this.gameCtrl.hero.isDead&&this.enemy_type==a.default.EnemyType.E_RED)return this.curState=a.default.EnemyState.S_FIRE,this.curFireTime=0,void this.checkState();if(this.rayComPonent&&this.rayComPonent.curCollider)switch(this.rayComPonent.curCollider.tag){case a.default.TagType.WALL:case a.default.TagType.ENEMY:break;case a.default.TagType.HERO:case a.default.TagType.ITEM:return void(this.curFireTime>=this.checkFireInterval&&(this.curState=a.default.EnemyState.S_FIRE,this.curFireTime=0,this.checkState()))}if(this.curTime+=e,this.curTime>=this.checkInterval)return this.curTime=0,void this.checkState();if(this.gameCtrl){var r=this.gameCtrl.hero.node.getPosition(),s=this.node.getPosition();400>r.sub(s).mag()&&this.refreshPaoAngle()}}else this.body.linearVelocity=cc.v2(0,0)},t.prototype.init=function(e,t,n){this.gameCtrl=t,this.enemyManager=n,this.isDead=!1,this.curHp=this.getMaxHp(),this.addRay()},t.prototype.reset=function(){this.curHp=this.getMaxHp(),this.isDead=!1,this.removeAllBullet(),this.body&&(this.body.linearVelocity=cc.v2(0,0))},t.prototype.getMaxHp=function(){return this.enemy_type==a.default.EnemyType.E_GRAY?2:this.enemy_type==a.default.EnemyType.E_YELLOW?3:this.enemy_type==a.default.EnemyType.E_BLUE?4:this.enemy_type==a.default.EnemyType.E_RED?5:(this.enemy_type,a.default.EnemyType.E_T_POWER,6)},t.prototype.onHP=function(e){this.curHp+=e,0>=this.curHp&&(this.enemyManager.removeEnemy(this.node),this.ray.active=!1,this.isDead=!0,this.removeAllBullet(),c.default.instance.addDieEff(this.node.getPosition(),this.node),l.default.instance.totalKillNum++)},t.prototype.removeAllBullet=function(){for(var e=0;e<this.bulletList.length;e++)this.bulletList[e].active=!1;this.curFireTime=0},t.prototype.checkState=function(){if(1!=i.default.instance.isPause)switch(this.curState){case a.default.EnemyState.S_FIRE:var e=this.gameCtrl.hero.node.getPosition(),t=this.node.getPosition(),n=e.sub(t);n.normalizeSelf(),this.fire(n,t),this.curState=a.default.EnemyState.S_PATROL;break;case a.default.EnemyState.S_IDLE:case a.default.EnemyState.S_PATROL:this.changeMoveDir();break;case a.default.EnemyState.S_DEAD:}else console.log("can not checkState, game is pause")},t.prototype.fire=function(e,t){this.enemy_type==a.default.EnemyType.E_GRAY?this.bullet_prefab?this.createBullet(this.bullet_prefab,e,t):cc.loader.loadRes("prefabs/bullet_gray",function(n,o){n?cc.error(n.message||n):(this.bullet_prefab=o,this.createBullet(this.bullet_prefab,e,t))}.bind(this)):this.enemy_type==a.default.EnemyType.E_YELLOW?this.bullet_prefab_yellow?this.createBullet(this.bullet_prefab_yellow,e,t):cc.loader.loadRes("prefabs/bullet_yellow",function(n,o){n?cc.error(n.message||n):(this.bullet_prefab_yellow=o,this.createBullet(this.bullet_prefab_yellow,e,t))}.bind(this)):this.enemy_type==a.default.EnemyType.E_BLUE?this.bullet_prefab_blue?this.fireThree(this.bullet_prefab_blue,e,t,this.gameCtrl.bgImg.node):cc.loader.loadRes("prefabs/bullet_blue",function(n,o){n?cc.error(n.message||n):(this.bullet_prefab_blue=o,this.fireThree(this.bullet_prefab_blue,e,t,this.gameCtrl.bgImg.node))}.bind(this)):this.enemy_type==a.default.EnemyType.E_RED?this.bullet_prefab_pao?this.firePao(this.bullet_prefab_pao,e,t,this.gameCtrl.bgImg.node):cc.loader.loadRes("prefabs/bullet_pao",function(n,o){n?cc.error(n.message||n):(this.bullet_prefab_pao=o,this.firePao(this.bullet_prefab_pao,e,t,this.gameCtrl.bgImg.node))}.bind(this)):this.enemy_type==a.default.EnemyType.E_T_POWER&&(this.bullet_prefab_power?this.firePowerBomb(this.bullet_prefab_power,e,t,this.gameCtrl.bgImg.node):cc.loader.loadRes("prefabs/bullet_bomb_enemy",function(n,o){n?cc.error(n.message||n):(this.bullet_prefab_power=o,this.firePowerBomb(this.bullet_prefab_power,e,t,this.gameCtrl.bgImg.node))}.bind(this)))},t.prototype.fireThree=function(e,t,n,o){if(!this.isDead){var a=cc.v2(t.x,t.y),i=cc.v2(t.x,t.y).rotateSelf(.1),r=cc.v2(t.x,t.y).rotateSelf(-.1),s=this.node.getPosition().addSelf(a.mulSelf(50));this.createBullet(e,t,n,o,s),this.createBullet(e,i,n,o,s),this.createBullet(e,r,n,o,s)}},t.prototype.firePao=function(e,t,n,o,i){if(void 0===i&&(i=null),!this.isDead){var r=this.gameCtrl.hero.node.getPosition(),s=this.gameCtrl.hero.node.parent.convertToWorldSpaceAR(r),c=this.node.convertToNodeSpaceAR(s),l=cc.instantiate(e);l.parent=o;var d=t.mulSelf(50);c=c.subSelf(d);var u=this.node.getPosition().addSelf(d);i?l.setPosition(i.x,i.y):l.setPosition(u.x,u.y),this.bulletList.push(l);var h=l.getComponent("Bullet_pao");h.setTargetType(a.default.TagType.HERO),h.setTarget(c,r),this.refreshPaoAngle()}},t.prototype.firePowerBomb=function(e,t,n,o){if(!this.isDead){this.fllow_move=!1,t=t.normalize();var i=this.gameCtrl.hero.node.getPosition(),r=this.gameCtrl.hero.node.parent.convertToWorldSpaceAR(i),s=this.node.convertToNodeSpaceAR(r),l=cc.instantiate(e);this.bulletList.push(l),l.active=!0,l.parent=o;var d=t.mul(50);s=s.subSelf(d);var u=this.node.getPosition().addSelf(d);l.setPosition(u.x,u.y);var h=l.getComponent(cc.RigidBody);h.linearVelocity=cc.v2(300*t.x,300*t.y),h.fixedRotation=!0;var p=l.getComponent("Bullet_power");p.bullet_type=a.default.BULLET_TYPE.E_POWER_BOMB,p.refreshAngle(),c.default.instance.addFireEff(l.getPosition(),this.node),this.refreshPaoAngle()}},t.prototype.createBullet=function(e,t,n,o,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null);var i=cc.instantiate(e);i.parent=this.gameCtrl.bgImg.node,i.group="bullet_enemy";var r=this.node.getPosition();r.x+=30*t.x,r.y+=30*t.y,i.setPosition(r.x,r.y),this.bulletList.push(i);var s=i.getComponent(cc.RigidBody);s.linearVelocity=cc.v2(300*t.x,300*t.y),s.fixedRotation=!0,i.getComponent("Bullet").refreshAngle(),this.refreshPaoAngle()},t.prototype.refreshPaoAngle=function(){var e=this.gameCtrl.hero.node.getPosition(),t=this.node.getPosition(),n=e.sub(t),o=cc.v2(1,0),a=Math.atan2(n.y-o.y,n.x-o.x)*(180/Math.PI);this.tank_fire.node.rotation=-a},t.prototype.changeMoveDir=function(){var e=1280*Math.random()%1135+this.node.x-500,t=720*Math.random()%720+this.node.y-500,n=this.node.getPosition(),o=cc.v2(e,t).sub(n).normalizeSelf();this.body.linearVelocity=cc.v2(100*o.x,100*o.y);var a=cc.v2(this.body.linearVelocity.x,this.body.linearVelocity.y),i=cc.v2(1,0);Math.atan2(a.y-i.y,a.x-i.x),Math.PI;this.tank_bottom&&this.tank_bottom.node.rotation},t.prototype.stopMove=function(){this.body.linearVelocity=cc.v2(0,0)},t.prototype.move=function(e,t){console.log(this.sprite,"==this.sprite=="),this.body.linearVelocity=e.mulSelf(.7),this.sprite.node.rotation=-t},t.prototype.onPostSolve=function(e){var t=e.colliderA.tag;switch(this.collider==e.colliderA&&(t=e.colliderB.tag),t){case a.default.TagType.WALL:var n=Date.now()/1e3;if(0==this.tempTime&&(this.tempTime=n),n-this.tempTime<this.tempInterval)return;this.tempTime=n,this.changeMoveDir();break;case a.default.TagType.ENEMY:case a.default.TagType.HERO:}},t.prototype.addRay=function(){this.ray=cc.instantiate(this.rayPrefab),this.ray.parent=this.gameCtrl.bgImg.node,this.rayComPonent=this.ray.getComponent(r.default),this.node.getPosition(),this.node.convertToWorldSpaceAR(cc.v2(0,0)),console.log("cncdf",this.node.x,this.node.y),this.rayComPonent.setCenter(this.node.x,this.node.y);var e=this.gameCtrl.hero.node.getPosition();this.rayComPonent.setTarget(e.x,e.y),this.ray.setPosition(0,0)},__decorate([h(cc.Prefab)],t.prototype,"rayPrefab",void 0),__decorate([h(cc.Node)],t.prototype,"bulletList",void 0),__decorate([h(o.default)],t.prototype,"gameCtrl",void 0),__decorate([h(s.default)],t.prototype,"enemyManager",void 0),__decorate([h(cc.RigidBody)],t.prototype,"body",void 0),__decorate([h(cc.PhysicsBoxCollider)],t.prototype,"collider",void 0),__decorate([h(cc.Sprite)],t.prototype,"tank_bottom",void 0),__decorate([h(cc.Sprite)],t.prototype,"tank_fire",void 0),__decorate([h(Number)],t.prototype,"curState",void 0),__decorate([h(Number)],t.prototype,"enemy_type",void 0),__decorate([h(Number)],t.prototype,"curTime",void 0),__decorate([h(Number)],t.prototype,"checkInterval",void 0),__decorate([h(Number)],t.prototype,"curFireTime",void 0),__decorate([h(Number)],t.prototype,"checkFireInterval",void 0),__decorate([h(Number)],t.prototype,"curHp",void 0),__decorate([h(Boolean)],t.prototype,"isDead",void 0),__decorate([h(Number)],t.prototype,"selfScore",void 0),__decorate([h(Number)],t.prototype,"tempTime",void 0),__decorate([h(Number)],t.prototype,"tempInterval",void 0),t=__decorate([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./EffManager":"EffManager","./EnemyManager":"EnemyManager","./GameCtrl":"GameCtrl","./GameData":"GameData","./Globaldef":"Globaldef","./Raycast":"Raycast","./TankDataMgr":"TankDataMgr"}],EventCallBack:[function(e,t,n){"use strict";cc._RF.push(t,"e8b5dh5vN5J1qPfbZb9n7Bj","EventCallBack"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.once=!1,o}return __extends(t,e),t.prototype.clone=function(){var e=new t(this.callback,this.thisObj);return e.index=this.index,e.type=this.type,e},t}(e("./../../base/Callback").default);n.default=o,cc._RF.pop()},{"./../../base/Callback":"Callback"}],EventData:[function(e,t,n){"use strict";cc._RF.push(t,"5ea5bFhvbtMmooNMG83ob03","EventData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){this._isStopedPropagation=!1,this.type=e,this.data=t}return Object.defineProperty(e.prototype,"isStopedPropagation",{get:function(){return this._isStopedPropagation},enumerable:!0,configurable:!0}),e.prototype.stopPropagation=function(){this._isStopedPropagation=!0},e}();n.default=o,cc._RF.pop()},{}],EventDispacher:[function(e,t,n){"use strict";cc._RF.push(t,"da270Q483FIbJEkZFQ9J8tS","EventDispacher"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./EventData"),a=e("./EventCallBack"),i=e("../../base/Dictionary"),r=function(){function e(){this._callbackMaps=new i.default,this._sendBuffer=[]}return e.prototype.addEventListener=function(e,t,n,o,i){if(void 0===o&&(o=0),void 0===i&&(i=!1),t&&n){var r=new a.default(t,n);r.type=e,r.index=o,r.once=i;var s=this._callbackMaps.get(e);if(s){for(var c=!1,l=s.length-1;l>=0;l--){var d=s[l];if(d.thisObj===n&&d.callback===t){d.once=i,d.index=o,c=!0;break}}c||(s.push(r),s.sort(this.sortPriority))}else this._callbackMaps.add(e,[r])}},e.prototype.sortPriority=function(e,t){return t.index-e.index},e.prototype.hasEventListener=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o=this._callbackMaps.get(e);if(o){if(!t||!n)return!0;for(var a=0,i=o.length;a<i;a++){var r=o[a];if(r.callback===t&&r.thisObj===n)return!0}}return!1},e.prototype.removeEventListener=function(e,t,n){var o=this._callbackMaps.get(e);if(o)for(var a=0,i=o.length;a<i;a++){var r=o[a];r.callback===t&&r.thisObj===n&&(o.splice(a,1),i--,a--)}},e.prototype.dispatchEvent=function(e){for(e.target=this,this._sendBuffer.push(e);this._sendBuffer.length>0;){e=this._sendBuffer.shift();var t=this._callbackMaps.get(e.type);if(t)for(var n=t.concat(),o=0,a=n.length;o<a;o++){var i=n[o];if(-1!=t.indexOf(i)&&(i.callback.call(i.thisObj,e),i.once&&this.removeEventListener(e.type,i.callback,i.thisObj),e.isStopedPropagation))break}}},e.prototype.dispatchEventWith=function(e,t){void 0===t&&(t=null);var n=new o.default(e,t);this.dispatchEvent(n)},e.prototype.destory=function(){this._callbackMaps=new i.default,this._sendBuffer=[]},e}();n.default=r,cc._RF.pop()},{"../../base/Dictionary":"Dictionary","./EventCallBack":"EventCallBack","./EventData":"EventData"}],FirstUI:[function(e,t,n){"use strict";cc._RF.push(t,"db777XGr4RAi5o449xfyM0L","FirstUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quan=null,t}return __extends(t,e),t.prototype.start=function(){cc.director.loadScene("mainScene")},t.prototype.update=function(e){this.quan&&(this.quan.rotation+=90*e)},__decorate([i(cc.Node)],t.prototype,"quan",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],ForLaya:[function(e,t,n){"use strict";cc._RF.push(t,"0f7bedMNBVKJ7g0upO8XgE0","ForLaya"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./deer/DeerSDK"),a=e("./deer/DeerRequest"),i=e("./wechat/WXShare"),r=function(){return function(){o.default,a.default,i.default}}();n.default=r,cc._RF.pop()},{"./deer/DeerRequest":"DeerRequest","./deer/DeerSDK":"DeerSDK","./wechat/WXShare":"WXShare"}],FrameAni:[function(e,t,n){"use strict";cc._RF.push(t,"e0af4CG81VNKrmpE1Aka1/+","FrameAni"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.col=8,t.row=8,t.maxFrame=64,t.playTimes=-1,t.frame=null,t.curTime=0,t.interval=.05,t.curIdx=0,t.autoDestroy=!0,t.isEnd=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.isEnd=!1},t.prototype.start=function(){},t.prototype.onEnable=function(){this.curTime=0},t.prototype.update=function(e){if((-1==this.playTimes||1!=this.isEnd)&&(this.curTime+=e,this.curTime>=this.interval)){if(this.curTime=0,this.curIdx>=this.maxFrame&&(this.curIdx=0,-1!=this.playTimes&&(this.playTimes--,0>=this.playTimes)))return 1==this.autoDestroy?void this.node.destroy():void(this.isEnd=!0);var t=this.curIdx%this.col,n=parseInt(""+this.curIdx/this.col);this.frame.node.x=-t*this.node.width-this.node.width*this.node.anchorX,this.frame.node.y=n*this.node.height+this.node.height*this.node.anchorY,this.curIdx++}},__decorate([i(Number)],t.prototype,"col",void 0),__decorate([i(Number)],t.prototype,"row",void 0),__decorate([i(Number)],t.prototype,"maxFrame",void 0),__decorate([i(Number)],t.prototype,"playTimes",void 0),__decorate([i(cc.Sprite)],t.prototype,"frame",void 0),__decorate([i(Number)],t.prototype,"curTime",void 0),__decorate([i(Number)],t.prototype,"interval",void 0),__decorate([i(Number)],t.prototype,"curIdx",void 0),__decorate([i(Boolean)],t.prototype,"autoDestroy",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],GameConfig:[function(e,t,n){"use strict";cc._RF.push(t,"65350aXc3xNHoDbTvUjWQd3","GameConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("../../gamecore/deer/DeerSDK"),i=e("../../gamecore/wechat/WXOpenData"),r=e("../../module/data/MainDataMgr"),s=e("../../GameUtils"),c=e("../../module/data/StageDataMgr"),l=e("../mainscene/RoleMgr"),d=function(){return function(){}}();n.LevelConfig=d,function(e){e[e.UNLOCK=0]="UNLOCK",e[e.SKIP=1]="SKIP",e[e.HEIGHTEST=2]="HEIGHTEST",e[e.LOCK=3]="LOCK"}(o=n.STAGE_STATE_STRUCT||(n.STAGE_STATE_STRUCT={}));var u,h=function(){return function(){this.skip=o.LOCK}}();n.PassStageInfo=h,function(e){e[e.MODE1=0]="MODE1",e[e.MODE2=1]="MODE2",e[e.MODE3=2]="MODE3",e[e.MODE4=3]="MODE4"}(u=n.MODE_TYPE_STRUCT||(n.MODE_TYPE_STRUCT={}));var p=cc._decorator,f=p.ccclass,g=(p.property,function(){function e(){this.gameMeta=null,this.lastscene="",this.nowscene="",this.scene="",this.isSiginId=0,this.getAwardP1=null,this.getAwardResult=null}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),e.prototype.saveScoreToService=function(e){var t=e;a.default.instance.game_saveScoreToService(t,function(e){},function(e){}),i.default.saveUserScoreToCloud(t)},e.prototype.isSigin=function(){var e=!1,t=r.default.instance.getData(r.default.KEY_USER_SIGIN_RECORD);if(t.length>0){var n=new Date(t[t.length-1]),o=s.default.instance.serverTime;o.getDate()==n.getDate()&&o.getMonth()==n.getMonth()||t.length>=7&&r.default.instance.setData(r.default.KEY_USER_SIGIN_RECORD,[],!1),o.getDate()==n.getDate()&&(e=!0)}return e},e.prototype.getItemState=function(e){var t=0,n=r.default.instance.getData(r.default.KEY_USER_SIGIN_RECORD),o=n.length,a=n[e],i=n[n.length-1],c=new Date(i),l=new Date(a),d=s.default.instance.serverTime;return 0==o?(t=1,this.isSiginId=0):(e<o&&(d.getDate()==l.getDate()&&(this.isSiginId=e),t=2),e==o&&(d.getDate()==c.getDate()?t=4:(t=3,this.isSiginId=e)),e>o&&(t=5)),t},e.prototype.getAward=function(e){return e===this.getAwardP1?this.getAwardResult:(this.getAwardP1=e,this.getAwardResult=this.gameMeta.signInMeta[e].coinNum,this.getAwardResult)},e.prototype.getCurRoleSKinInfo=function(){for(var e=r.default.instance.getData(r.default.KEY_ROLE_SKIN_ARR),n=0;n<e.length;n++)e[n]||(e=l.default.calcuRoleData());for(n=0;n<e.length;n++)if(1==e[n].equip)return t.instance.gameMeta.imageUpgradeMeta[n];return e[e.length-1].equip=!0,t.instance.gameMeta.imageUpgradeMeta[e.length-1]},e.prototype.getKeyNumByGoldNum=function(){return{price:t.instance.gameMeta.keyRewardMeta[0].price,num:t.instance.gameMeta.keyRewardMeta[0].num}},e.prototype.getHpNumByGoldNum=function(){return{price:t.instance.gameMeta.keyRewardMeta[0].price,num:t.instance.gameMeta.keyRewardMeta[0].num}},e.prototype.getCurModeInfo=function(e){var n=new m,o=c.default.instance.getAllModeStars();return n.lockState=o>=t.instance.gameMeta.newModeUnlockMeta[e].starsNum,0==n.lockState?(n.needStars=o+"/"+t.instance.gameMeta.newModeUnlockMeta[e].starsNum,n):(n.isNewMode=c.default.instance.isNewMode(e),n.modeStars=c.default.instance.getStarsByMode(e),n)},e.prototype.getModeStageNumByMode=function(e){return e==u.MODE1?t.instance.gameMeta.classicalModeLevelMeta.length:e==u.MODE2?t.instance.gameMeta.grenadeModeLevelMeta.length:e==u.MODE3?t.instance.gameMeta.hostageModeLevelMeta.length:e==u.MODE4?t.instance.gameMeta.survivalModeLevelMeta.length:0},e._instance=null,e.gameCdn="https://xz-cdn.youkongwan.com/game/mrbullet/meta/",e.TextConfig={welfWare:{dayRecieved:"\u4eca\u65e5\u5df2\u9886\u53d6"},skipPanelVideoKey:3,goldGiftRewardNum:1e3,winGameGoldNum:20,moreRewardGoldNum:180},e=t=__decorate([f],e)}());n.default=g;var m=function(){return function(){this.modeStars=0,this.needStars=null}}();n.ModeInfo=m,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/wechat/WXOpenData":"WXOpenData","../../module/data/MainDataMgr":"MainDataMgr","../../module/data/StageDataMgr":"StageDataMgr","../mainscene/RoleMgr":"RoleMgr"}],GameCoreEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"f8d06PIOkhBAoz7QjUrEGiG","GameCoreEventNames"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.COMMON_CLOSE="commonClose",t.COMMON_READY="commonReady",t.DATA_CHANGE="dataChange",t.DATA_REMOTE_CHANGE="dataRemoteChange",t.DATA_REMOTE_RETRIVE="dataRemoteRetrive",t.RES_PROGRESS="ResProgress",t.RES_COMPLETE="ResComplete",t.POP_UP_ADD="popUpAdd",t.POP_UP_REMOVE="popUpRemove",t.ITEM_ADDED="itemAdded",t.ITEM_REMOVED="itemRemoved",t.ITEM_USED="itemUsed",t.TAG_CHANGE="tagChange",t=__decorate([a],t)}(cc.Event));n.default=i,cc._RF.pop()},{}],GameCoreLocation:[function(e,t,n){"use strict";cc._RF.push(t,"c7911qaNFZKH4+Ct1D4rJxs","GameCoreLocation"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator;o.ccclass,o.property;(function(e){e[e.TOP_CENTER=1]="TOP_CENTER",e[e.TOP_LEFT=2]="TOP_LEFT",e[e.TOP_RIGHT=3]="TOP_RIGHT",e[e.BOTTOM_CENTER=11]="BOTTOM_CENTER",e[e.BOTTOM_LEFT=12]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=13]="BOTTOM_RIGHT"})(n.GameCoreLocation||(n.GameCoreLocation={})),cc._RF.pop()},{}],GameCoreUIConfig:[function(e,t,n){"use strict";cc._RF.push(t,"1013eSeHvJJQZ0M4a77p5FX","GameCoreUIConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],GameCtrl:[function(e,t,n){"use strict";cc._RF.push(t,"e8a3fgRU1ZAMYsd4Y7mejbo","GameCtrl"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameData"),a=e("./TankDataMgr"),i=e("./Globaldef"),r=e("../gamecore/managers/GameManager"),s=e("./Hero_physic"),c=e("./EnemyManager"),l=e("../GameStart"),d=e("./UIManager"),u=(Math.sqrt,Math.pow,Math.sin),h=Math.cos,p=Math.PI,f=(Math.atan2,cc._decorator),g=f.ccclass,m=f.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hero=null,t.enemyManager=null,t.bgImg=null,t.bullet=null,t.levelCol=null,t.startWaitFire=!1,t.fireContinueCnt=0,t.fireContinueMaxCnt=2,t.fireContinueTime=0,t.fireContinueInterval=.2,t.fireTime=0,t.fireTimeInterval=1,t.mapRes=null,t.jsonRes=null,t}var n;return __extends(t,e),n=t,t.prototype.onload=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,o.default.instance.m_curMapType=0;var e=a.default.instance.getData(a.default.KEY_CUR_STAGE_NUM);e>40?o.default.instance.m_curMapType=1:e>80&&(o.default.instance.m_curMapType=2)},t.prototype.start=function(){this.fireContinueInterval=.4;var e=cc.find("Canvas/bg");this.bgImg=e.getComponent(cc.Sprite),this.bgImg.node.on(cc.Node.EventType.TOUCH_START,this.onTouch,this);var t=cc.find("Canvas/bg/hero");this.hero=t.getComponent(s.default);var n=cc.find("Canvas/bg/EnemyManager");this.enemyManager=n.getComponent(c.default),this.enemyManager.init(this),this.hero.init(this),this.hero.node.zIndex=10,this.loadLevel(a.default.instance.getData(a.default.KEY_CUR_STAGE_NUM)),o.default.instance.m_isDirty=!0},t.prototype.testDirRota=function(e){var t=cc.v2(600,200),n=cc.instantiate(e),o=cc.instantiate(e),a=cc.instantiate(e),i=cc.instantiate(e);n.parent=this.bgImg.node,o.parent=this.bgImg.node,a.parent=this.bgImg.node,i.parent=this.bgImg.node,n.setPosition(t),o.setPosition(0,0),a.setPosition(0,0),i.setPosition(0,0);var r=cc.v2(1,0);t=cc.v2(600,200),(r=cc.v2(1,0)).normalizeSelf();var s=p/180*45,c=r.x*h(s)-r.y*u(s),l=r.x*u(s)+r.y*h(s),d=cc.v2(c,l).normalizeSelf();a.setPosition(t.addSelf(d.mulSelf(50))),d=cc.v2(r.x,r.y),r.normalizeSelf(),d.normalizeSelf();var f=Math.atan2(d.y,d.x)-Math.atan2(r.y,r.x);cc.log("B "+s+" A "+f+" angel: "+180*f/p)},t.prototype.reset=function(){o.default.instance.reset(),this.hero&&this.hero.reset(),this.enemyManager&&this.enemyManager.reset()},t.prototype.onDestroy=function(){},t.prototype.update=function(e){a.default.instance.totalGameTime+=e,this.fireContinueTime+=e,1==this.startWaitFire&&(this.fireTime+=e,this.fireTime>=this.fireTimeInterval&&(this.startWaitFire=!1,this.fireContinueCnt=0,this.fireTime=0))},t.prototype.onTouch=function(e){if(!this.hero.isDead&&1!=a.default.instance.useFightBtn&&1!=this.startWaitFire){this.fireContinueTime<this.fireContinueInterval&&(this.fireContinueCnt++,this.fireContinueCnt>=this.fireContinueMaxCnt&&(this.startWaitFire=!0,this.fireTime=0)),this.fireContinueTime=0;var t=e.getLocation();t=this.bgImg.node.convertToNodeSpaceAR(t);var n=this.hero.node.getPosition(),o=cc.v2(t.x,t.y).sub(n);o.normalizeSelf(),a.default.instance.bulletType==i.default.BULLET_TYPE.E_ONE?this.hero.fire(o,t,this.bgImg.node):a.default.instance.bulletType==i.default.BULLET_TYPE.E_THREE?this.hero.fireThree(o,t,this.bgImg.node):a.default.instance.bulletType==i.default.BULLET_TYPE.E_BOMB?this.hero.firePao(o,t,this.bgImg.node):a.default.instance.bulletType==i.default.BULLET_TYPE.E_FLLOW?this.hero.fireFllow(o,t,this.bgImg.node):a.default.instance.bulletType==i.default.BULLET_TYPE.E_POWER_BOMB&&this.hero.firePowerBomb(o,t,this.bgImg.node);var r=Math.atan2(t.y-n.y,t.x-n.x)*(180/p);this.hero.setFireAngle(r)}},t.prototype.checkGameState=function(){this.scheduleOnce(this.timerCallBack,1)},t.prototype.timerCallBack=function(){if(this.hero.isDead){var e=(t=cc.find("Canvas")).getComponent(d.default);return t.getComponent(n),o.default.instance.isPause=!0,e.showUI("RebornUI"),void cc.director.pause()}var t;if(this.enemyManager.isAllDead())return e=(t=cc.find("Canvas")).getComponent(d.default),o.default.instance.m_isWin=!0,o.default.instance.isPause=!0,void e.showUI(i.default.UI_NAME[i.default.UI_ID.E_GAME_END_UI])},t.prototype.reBorn=function(){this.enemyManager&&this.enemyManager.removeAllBullet(),this.hero.reborn(),o.default.instance.isPause=!1},t.prototype.loadLevel=function(e){var t=this;o.default.instance.m_curMapType=0;var n=a.default.instance.getData(a.default.KEY_CUR_STAGE_NUM);console.log(n,"stage"),n>40?o.default.instance.m_curMapType=1:n>80&&(o.default.instance.m_curMapType=2),e=n%40;var s=cc.find("Canvas/bg/TiledMap");e<40&&(s.x=35),0==o.default.instance.m_curMapType&&e<=14&&(e=14-e);var c="level_"+e,d="level_col_"+e;1==o.default.instance.m_curMapType?(c="x_level_"+e,d="x_level_col_"+e):2==o.default.instance.m_curMapType&&(c="y_level_"+e,d="y_level_col_"+e);var u=0;this.mapRes=null,this.jsonRes=null;var h=function(){2==++u&&(cc.find("Canvas/bg/TiledMap").addComponent(cc.TiledMap).tmxAsset=t.mapRes,t.scheduleOnce(function(){t.hero&&t.hero.reset(),t.enemyManager&&t.enemyManager.reset(),t.levelCol=new cc.Node(t.jsonRes.name),t.levelCol.addComponent(l.default).init(t.jsonRes.json,t.levelCol),t.levelCol.active=!0,cc.find("Canvas/bg/TiledMap").addChild(t.levelCol)}))};cc.loader.loadRes("map/"+c,function(e,n){e||(t.mapRes=n,h())}),this.levelCol&&(this.levelCol.destroy(),this.levelCol=null),cc.loader.loadRes("jsonData/"+d,cc.JsonAsset,function(e,n){e||(t.jsonRes=n,h())});var p=cc.find("Canvas").getComponent("UIManager");if(p.hideUI(i.default.UI_NAME[i.default.UI_ID.E_GAME_END_UI]),r.default.soundsManager.pushSceneBgMusic("sounds/bgm/bigrock.mp3"),0!=o.default.instance.m_curMapType||0!=a.default.instance.finish_xinshou||0!=e){var f,g=cc.find("Canvas/GameUI");g?(f=g.getComponent("GameUI"))&&f.countDownAni():(g=cc.find("Canvas/GameNewUI"))&&(f=g.getComponent("GameNewUI"))&&f.countDownAni()}else p.showUI("XinShou")},t.prototype.lookRebornAD=function(){a.default.instance.curAdType=2;var e=this,t=wx.createRewardedVideoAd({adUnitId:"adunit-24b79ea75ae00e48"});t.load().then(function(){return t.show()}).catch(function(){t.load().then(function(){return t.show()})}),t.onError(function(e){console.log(e),2==a.default.instance.curAdType&&cc.find("Canvas").getComponent("UIManager").showTip("\u5e7f\u544a\u64ad\u653e\u9519\u8bef\uff01\u8bf7\u4ece\u65b0\u5c1d\u8bd5",function(){cc.director.resume(),o.default.instance.m_isWin=!1,o.default.instance.isPause=!0,cc.find("Canvas").getComponent("UIManager").showUI(i.default.UI_NAME[i.default.UI_ID.E_GAME_END_UI])})}),t.onClose(function(t){if(2==a.default.instance.curAdType)if(cc.director.resume(),(t&&t.isEnded||void 0===t)&&2==a.default.instance.curAdType){var n=cc.find("Canvas/GameUI");if(n){e&&e.enemyManager&&e.enemyManager.removeAllBullet();var r=n.getComponent("GameUI");r&&r.countDownAniReBorn()}}else o.default.instance.m_isWin=!1,o.default.instance.isPause=!0,cc.find("Canvas").getComponent("UIManager").showUI(i.default.UI_NAME[i.default.UI_ID.E_GAME_END_UI])})},__decorate([m(cc.Sprite)],t.prototype,"bgImg",void 0),__decorate([m(cc.Prefab)],t.prototype,"bullet",void 0),t=n=__decorate([g],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../GameStart":"GameStart","../gamecore/managers/GameManager":"GameManager","./EnemyManager":"EnemyManager","./GameData":"GameData","./Globaldef":"Globaldef","./Hero_physic":"Hero_physic","./TankDataMgr":"TankDataMgr","./UIManager":"UIManager"}],GameData:[function(e,t,n){"use strict";cc._RF.push(t,"5fe8fMVKQ9DK46rEwFtmVIQ","GameData"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_curMapType=0,t.m_curLevelType=0,t.m_curLevel=0,t.m_curMaxMon=2,t.m_acuracyRating=0,t.m_acuracyRatingMax=0,t.m_healthRatinig=0,t.m_levelScore=0,t.m_killRating=0,t.m_fireNum=0,t.m_killNum=0,t.m_curBlood=3,t.m_isWin=!1,t.isPause=!1,t.m_isDirty=!1,t._gameUI=null,t.curStep=0,t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameUI",{get:function(){if(!this._gameUI){var e=cc.find("Canvas/GameUI");if(!e)return null;this._gameUI=e.getComponent("GameUI")}return this._gameUI},set:function(e){this._gameUI=e},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){cc.log("GameData ")},t.prototype.onDestroy=function(){this.gameUI=null},t.prototype.start=function(){var e=cc.find("Canvas/GameUI");this.gameUI=e.getComponent("GameUI"),this.m_isDirty=!0},t.prototype.reset=function(){this.m_fireNum=0,this.m_killNum=0,this.m_curBlood=3,this.m_isWin=!1,this.m_killRating=0,this.m_isDirty=!0},t.prototype.addScore=function(e){this.m_killRating+=e,this.m_isDirty=!0},t._instance=null,t=n=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],GameEndUI:[function(e,t,n){"use strict";cc._RF.push(t,"2f076EoCf1CwJhwd3NYfHSw","GameEndUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameData"),a=e("../SoundMgr"),i=e("./TankDataMgr"),r=e("./GameCtrl"),s=e("../GameUtils"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winImg=null,t.failImg=null,t.menuBtn=null,t.reTryBtn=null,t.nextBtn=null,t.proName=[],t.proValue=[],t.stars=[],t}return __extends(t,e),t.prototype.onEnable=function(){this.refresh()},t.prototype.refresh=function(){console.log("xxxxx    gameEndUI");var e=100*(o.default.instance.m_curLevel+1),t=100*o.default.instance.m_curMaxMon,n=e+300+1e3+t,r=0,c=0,l=0,d=0,u=0,h=3;if(o.default.instance.m_isWin){this.winImg.node.active=!0,this.failImg.node.active=!1,u=(r=e)+(c=300)+(l=3==o.default.instance.m_curBlood?1e3:parseInt(""+1e3/3*o.default.instance.m_curBlood))+(d=t),this.nextBtn.node.active=!0,h=u>=n?3:u>=n/2?2:1,this.showStar(h);var p=o.default.instance.m_curMapType;i.default.instance.setLevelData(o.default.instance.m_curLevel,1,n,h,p),39<=o.default.instance.m_curLevel&&(this.nextBtn.node.active=!1),a.default.instance.playWinBg();var f=JSON.stringify({mode:o.default.instance.m_curMapType,level:i.default.instance.getData(i.default.KEY_CUR_STAGE_NUM)});s.default.buriedPoint(3,f)}else this.winImg.node.active=!1,this.failImg.node.active=!0,r=0,c=0,l=0,d=0,u=0,this.nextBtn.node.active=!1,h=0,a.default.instance.playLoseBg();this.proValue[0].string=r+" / "+e,this.proValue[1].string=c+" / 300",this.proValue[2].string=l+" / 1000",this.proValue[3].string=d+" / "+t,this.proValue[4].string=u+" / "+n},t.prototype.clickMenuBtn=function(){o.default.instance.reset(),cc.director.loadScene("mainScene")},t.prototype.clickRetryBtn=function(){a.default.instance.playGameBg(),this.node.active=!1,o.default.instance.reset(),cc.find("Canvas").getComponent(r.default).reset();var e,t=cc.find("Canvas/GameUI");t?(e=t.getComponent("GameUI"))&&e.countDownAni():(t=cc.find("Canvas/GameNewUI"))&&(e=t.getComponent("GameNewUI"))&&e.countDownAni()},t.prototype.clickNextBtn=function(){var e=cc.find("Canvas").getComponent(r.default);e.reset(),o.default.instance.m_curLevel++;var t=o.default.instance.m_curLevel;i.default.instance.setData(i.default.KEY_CUR_STAGE_NUM,i.default.instance.getData(i.default.KEY_CUR_STAGE_NUM)+1),cc.log("loadLevel: "+t),e.loadLevel(t)},t.prototype.showStar=function(e){for(var t=0;t<this.stars.length;t++)this.stars[t].active=!1,this.stars[t].scaleX=2,this.stars[t].scaleY=2;var n=cc.scaleTo(.3,1);if(n.easing(cc.easeBackIn()),1<=e){this.stars[0].active=!0;var a=cc.sequence(n,cc.callFunc(function(){if(2<=e){this.stars[1].active=!0;var t=cc.sequence(n,cc.callFunc(function(){if(39<=o.default.instance.m_curLevel){var t=cc.find("Canvas").getComponent("UIManager");0==o.default.instance.m_curMapType?t.showTip("????? \n???? ???? \n??? ???? ???",function(){this.clickMenuBtn()}.bind(this)):1==o.default.instance.m_curMapType&&t.showTip("????? \n???? ??? \n??? ???? ???",function(){this.clickMenuBtn()}.bind(this))}3<=e&&(this.stars[2].active=!0,this.stars[2].runAction(n))}.bind(this)));this.stars[1].runAction(t)}}.bind(this)));this.stars[0].runAction(a)}},t.prototype.clickShareBtn=function(){cc.sys.browserType==cc.sys.BROWSER_TYPE_WECHAT_GAME&&wx.shareAppMessage({title:"\u56de\u5473\u7ecf\u5178 \u91cd\u6e29\u7ae5\u5e74 \u4e00\u8d77\u6765\u6218\uff01",imageUrl:"share.jpg"})},__decorate([d(cc.Sprite)],t.prototype,"winImg",void 0),__decorate([d(cc.Sprite)],t.prototype,"failImg",void 0),__decorate([d(cc.Button)],t.prototype,"menuBtn",void 0),__decorate([d(cc.Button)],t.prototype,"reTryBtn",void 0),__decorate([d(cc.Button)],t.prototype,"nextBtn",void 0),__decorate([d(cc.Label)],t.prototype,"proName",void 0),__decorate([d(cc.Label)],t.prototype,"proValue",void 0),__decorate([d(cc.Node)],t.prototype,"stars",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../GameUtils":"GameUtils","../SoundMgr":"SoundMgr","./GameCtrl":"GameCtrl","./GameData":"GameData","./TankDataMgr":"TankDataMgr"}],GameMain1:[function(e,t,n){"use strict";cc._RF.push(t,"47379Ur8nZFXIT1r47kmixL","GameMain1"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PrfabsManager"),a=e("./AudioManager"),i=e("./BulletController"),r=e("../../module/data/StageDataMgr"),s=e("./GameMainMgr"),c=e("./TopContent"),l=e("./GameConfig"),d=e("./Common"),u=e("../../control/NodePoolMgr"),h=e("../../GameUtils"),p=e("./GrenadeController"),f=e("./PhysicPlayer"),g=e("../../gamecore/wechat/WXDevice"),m=e("../../gamecore/deer/DeerSDK"),_=e("./StageEnd"),y=e("../../module/data/MainDataMgr"),v=e("./Guide"),M=cc._decorator,C=M.ccclass,E=M.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hand=null,t.gunLine=null,t.zhunxin=null,t.playerNode=null,t.gun=null,t.firedPositionNode=null,t.grenadeLine=null,t.bulletControllerComp=null,t.RoleListNode=null,t.content=null,t.dirNode=null,t.TopContentComp=null,t.playerController=null,t.gameStart=!1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=cc.instantiate(o.default.instance.prfabsAry.adNode);this.node.addChild(e),1==r.default.CUR_LEVEL&&h.default.loadRes("prefabs/stage/guide",cc.Prefab,!0,function(e){var t=cc.instantiate(e);t.getComponent(v.default).guide.spriteFrame=t.getComponent(v.default).guideSpfmArr[r.default.CUR_MODE-1],cc.find("Canvas").addChild(t)})},t.prototype.init=function(){var e=this;if(this.content=this.node.getChildByName("content"),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4?(this.content.getChildByName("Player_Left")?this.playerNode=this.content.getChildByName("Player_Left"):this.content.getChildByName("Player_Right")&&(this.playerNode=this.content.getChildByName("Player_Right")),this.playerController=this.playerNode.getComponent(f.default)):this.playerNode=this.content.getChildByName("Player"),this.hand=this.playerNode.getChildByName("left_hand"),this.gunLine=this.hand.getChildByName("line"),this.zhunxin=this.playerNode.getChildByName("crosshair"),this.gun=this.hand.getChildByName("gun"),this.firedPositionNode=this.hand.getChildByName("FirePositionNode"),this.hand.getChildByName("line")&&(this.grenadeLine=this.hand.getChildByName("line")),this.RoleListNode=this.content.getChildByName("RoleListNode"),this.scheduleOnce(function(){e.loadPlayerSkin(),e.loadEnemySkin()}),this.initUi(),r.default.IS_FROM_EGGLAYER){r.default.IS_FROM_EGGLAYER=!1;var t=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);return this.node.addChild(t,0),void t.getComponent(_.default).showEggReward()}this.initListener(),s.default.curGameState=s.default.gameState.READY,s.default.activeBulletCount=0,this.initNodePool()},t.prototype.start=function(){var e=this.node.getChildByName("content").getChildByName("background"),t=e.getComponent(cc.Widget);t.enabled=!0,e.zIndex=-999,e.getComponent(cc.Sprite).type=1,e.getComponent(cc.Sprite).sizeMode=0;var n=Math.ceil(r.default.CUR_LEVEL/16),a="bg_10";n<10?a=a+"0"+n:a+=n,e.getComponent(cc.Sprite).spriteFrame=o.default.instance.bgArr[a],t.isAlignTop=!0,t.isAlignBottom=!0,t.isAlignRight=!0,t.isAlignLeft=!0,t.top=0,t.bottom=0},t.prototype.loadPlayerSkin=function(){var e=this,t=l.default.instance.getCurRoleSKinInfo().imageId;if(r.default.CUR_MODE!=l.MODE_TYPE_STRUCT.MODE4){var n=this.playerNode;this.hand.getChildByName("gun").active=!0,h.default.loadRes("textures/players/"+t+"/right_hand",cc.SpriteFrame,!1,function(e){n.getChildByName("right_hand").getComponent(cc.Sprite).sizeMode=0,n.getChildByName("right_hand").getComponent(cc.Sprite).spriteFrame=e}),h.default.loadRes("textures/players/"+t+"/body",cc.SpriteFrame,!1,function(e){n.getChildByName("body").getComponent(cc.Sprite).sizeMode=0,n.getChildByName("body").getComponent(cc.Sprite).spriteFrame=e}),h.default.loadRes("textures/players/"+t+"/left_foot",cc.SpriteFrame,!1,function(e){n.getChildByName("left_foot").getComponent(cc.Sprite).sizeMode=0,n.getChildByName("left_foot").getComponent(cc.Sprite).spriteFrame=e}),h.default.loadRes("textures/players/"+t+"/right_foot",cc.SpriteFrame,!1,function(e){n.getChildByName("right_foot").getComponent(cc.Sprite).sizeMode=0,n.getChildByName("right_foot").getComponent(cc.Sprite).spriteFrame=e}),h.default.loadRes("textures/players/"+t+"/head",cc.SpriteFrame,!1,function(e){n.getChildByName("head").getComponent(cc.Sprite).sizeMode=0,n.getChildByName("head").getComponent(cc.Sprite).spriteFrame=e}),h.default.loadRes("textures/players/"+t+"/left_hand",cc.SpriteFrame,!1,function(e){n.getChildByName("left_hand").getComponent(cc.Sprite).sizeMode=0,n.getChildByName("left_hand").getComponent(cc.Sprite).spriteFrame=e})}else{var o=t+"/";-1!==this.playerNode.name.indexOf("Right")&&(o=t+"_right/");for(var a=function(n){"crosshair"!=i.playerNode.children[n].name&&"left_hand"!=i.playerNode.children[n].name&&"Blood_2"!=i.playerNode.children[n].name?h.default.loadRes("textures/players/live/"+o+i.playerNode.children[n].name,cc.SpriteFrame,!1,function(t){e.playerNode.children[n].getComponent(cc.Sprite).sizeMode=0,e.playerNode.children[n].getComponent(cc.Sprite).spriteFrame=t}):"left_hand"==i.playerNode.children[n].name&&h.default.loadRes("textures/players/"+t+"/left_hand",cc.SpriteFrame,!1,function(t){e.playerNode.children[n].getComponent(cc.Sprite).sizeMode=0,e.playerNode.children[n].getComponent(cc.Sprite).spriteFrame=t})},i=this,s=0;s<this.playerNode.childrenCount;s++)a(s)}},t.prototype.loadEnemySkin=function(){for(var e=this.content.getChildByName("RoleListNode"),t=0;t<e.childrenCount;t++)if(-1!=e.children[t].name.indexOf("Role_Left_Black"))for(var n=e.children[t],o=function(e){var t=n.children[e];h.default.loadRes("textures/players/enemy1/"+t.name,cc.SpriteFrame,!1,function(e){t.getComponent(cc.Sprite).sizeMode=0,t.getComponent(cc.Sprite).spriteFrame=e})},a=0;a<n.childrenCount;a++)o(a);else if(-1!=e.children[t].name.indexOf("Role_Right_Black")){n=e.children[t];var i=function(e){var t=n.children[e];h.default.loadRes("textures/players/enemy1_right/"+t.name,cc.SpriteFrame,!1,function(e){t.getComponent(cc.Sprite).sizeMode=0,t.getComponent(cc.Sprite).spriteFrame=e})};for(a=0;a<n.childrenCount;a++)i(a)}else if(-1!=e.children[t].name.indexOf("Trane")){n=e.children[0].children[0];var r=function(e){var t=n.children[e];h.default.loadRes("textures/players/enemy1_right/"+t.name,cc.SpriteFrame,!1,function(e){t.getComponent(cc.Sprite).sizeMode=0,t.getComponent(cc.Sprite).spriteFrame=e})};for(a=0;a<n.childrenCount;a++)r(a)}},t.prototype.initNodePool=function(){if(r.default.CUR_MODE!=l.MODE_TYPE_STRUCT.MODE2){var e=o.default.instance.prfabsAry.bullet;u.default.instance.createNodePool(e.name,e,s.default.totalBulletCount)}},t.prototype.initUi=function(){var e=this;this.dirNode=new cc.Node,this.dirNode.name="dirNode",this.dirNode.width=46,this.dirNode.height=46,this.scheduleOnce(function(){s.default.enemy_count=e.RoleListNode.childrenCount,e.gameStart=!0});var t=cc.instantiate(o.default.instance.prfabsAry.topContent2);this.content.addChild(t,0),this.TopContentComp=t.getComponent(c.default),this.initTopBulletInfo()},t.prototype.initTopBulletInfo=function(){s.default.normalBulletCount=3;var e=l.default.instance.gameMeta.classicalModeLevelMeta;r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE1||(r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2?e=l.default.instance.gameMeta.grenadeModeLevelMeta:r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?e=l.default.instance.gameMeta.hostageModeLevelMeta:r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4&&(e=l.default.instance.gameMeta.survivalModeLevelMeta)),e.length<r.default.CUR_LEVEL?s.default.lightBulletCount=2:s.default.lightBulletCount=e[r.default.CUR_LEVEL-1].goldBulletNum,1==r.default.IS_REVIVE_STATE&&(r.default.IS_REVIVE_STATE=!1,s.default.lightBulletCount+=l.default.instance.gameMeta.settlementRewardMeta[0].lose,h.default.showToast("\u606d\u559c\u590d\u6d3b\uff0c\u5b50\u5f39\u6570\u91cf+"+l.default.instance.gameMeta.settlementRewardMeta[0].lose)),s.default.totalBulletCount=s.default.normalBulletCount+s.default.lightBulletCount,this.TopContentComp.refreshAllBullet(s.default.normalBulletCount,s.default.lightBulletCount)},t.prototype.addBulletEvent=function(e){e&&e.stopPropagation(),s.default.totalBulletCount++,s.default.normalBulletCount++,this.TopContentComp.addNormalBulletItem()},t.prototype.reviveEvent=function(e){e&&e.stopPropagation(),s.default.isRevive=!0,s.default.curGameState==s.default.gameState.LOST&&(s.default.curGameState=s.default.gameState.READY,console.log("\u590d\u6d3b")),s.default.totalBulletCount=l.default.instance.gameMeta.settlementRewardMeta[0].lose,s.default.normalBulletCount=l.default.instance.gameMeta.settlementRewardMeta[0].lose,this.TopContentComp.addNormalBulletItem(),this.TopContentComp.addNormalBulletItem()},t.prototype.initListener=function(){this.node.on(d.default.eventMessage.addBullet,this.addBulletEvent,this),this.node.on(d.default.eventMessage.bulletRemove,this.bulletRemoveEvent,this),this.node.on(d.default.eventMessage.enemyDie,this.enemyDieEvent,this),this.node.on(d.default.eventMessage.gameFail,this.showGameLostEvent,this),this.node.on(d.default.eventMessage.gameWin,this.showGameWinEvent,this),this.node.on(d.default.eventMessage.grendaDestroy,this.bulletRemoveEvent,this),r.default.IS_ANI||(this.node.getChildByName("content").on(cc.Node.EventType.TOUCH_START,this.onTouchStartEvent,this),this.node.getChildByName("content").on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoveEvent,this),this.node.getChildByName("content").on(cc.Node.EventType.TOUCH_END,this.onTouchEndEvent,this),this.node.getChildByName("content").on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEndEvent,this))},t.prototype.onTouchStartEvent=function(e,t){var n=this;e&&g.default.vibrateShort();var o=e?e.getLocation():t;s.default.curGameState==s.default.gameState.READY&&(s.default.curGameState=s.default.gameState.ACTIVE),s.default.totalBulletCount>0&&s.default.curGameState==s.default.gameState.ACTIVE?(this.rotateHand(o),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2?this.changeCrossLine(o):r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4&&(s.default.curGameState==s.default.gameState.LOST||(this.hand.active=!0,this.playerNode.name.indexOf("Right"),this.playerController.leftHandTopRigBody.node.getComponent(cc.Sprite).enabled=!1,this.playerController.leftHandBottomRigBody.node.getComponent(cc.Sprite).enabled=!1))):s.default.totalBulletCount<=0&&this.scheduleOnce(function(){n.showGameLostEvent(null)},6)},t.prototype.onTouchMoveEvent=function(e){this.rotateHand(e.getLocation()),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2&&this.changeCrossLine(e.getLocation())},t.prototype.showAni=function(){for(var e=this,t=function(t,n){e.scheduleOnce(function(){var t=r.default.USER_OP.location[n],o=e.content.getChildByName("map").convertToWorldSpaceAR(t);e.onTouchStartEvent(null,cc.v2(o.x,o.y)),e.onTouchEndEvent(null,cc.v2(o.x,o.y))},t/1e3)},n=0;n<r.default.USER_OP.location.length;n++)t(r.default.USER_OP.time[n],n)},t.prototype.onTouchEndEvent=function(e,t){if(s.default.curGameState==s.default.gameState.ACTIVE){var n=e?e.getLocation():t;e&&(g.default.vibrateShort(),1==r.default.NEED_SUB_HP&&(r.default.instance.setData(r.default.KEY_USER_HP_NUM,r.default.instance.getData(r.default.KEY_USER_HP_NUM)-1),r.default.NEED_SUB_HP=!1)),this.rotateHand(n),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2?(this.changeCrossLine(n),this.throwGrenade(n)):this.fired(),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4&&(s.default.curGameState!==s.default.gameState.ACTIVE||(-1==this.playerNode.name.indexOf("Right")?(this.playerController.leftHandTopRigBody.node.getComponent(cc.Sprite).enabled=!0,this.playerController.leftHandBottomRigBody.node.getComponent(cc.Sprite).enabled=!0):(this.playerController.rightHandTopRigBody.node.getComponent(cc.Sprite).enabled=!0,this.playerController.rightHandBottomRigBody.node.getComponent(cc.Sprite).enabled=!0),this.hand.active=!1)),this.gunLine.active=!1,this.zhunxin.active=!1}},t.prototype.showGameLostEvent=function(e){var t=this;if(console.log("\u6e38\u620f\u5931\u8d25"),e&&e.stopPropagation(),s.default.curGameState==s.default.gameState.ACTIVE||r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3){if(r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3&&s.default.activeBulletCount<=0&&s.default.curGameState==s.default.gameState.WIN)return;if(s.default.curGameState=s.default.gameState.LOST,1==m.default.instance.canUseEasingPolicy){var n=m.default.instance.game_config;if(void 0!=n&&r.default.CUR_LEVEL%n.goldenEggInterval==0&&n.goldenEggSwitch&&r.default.instance.goldEggLimit<n.goldenEggLimit)this.scheduleOnce(function(){h.default.instance.loadSceneWithOperate("giftScene")},r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?1.5:1);else{var a=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);this.scheduleOnce(function(){t.node?t.node.addChild(a,0):a.destroy()},r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?1.5:1)}}else{a=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);this.scheduleOnce(function(){t.node?t.node.addChild(a,0):a.destroy()},r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?1.5:1)}}},t.prototype.showGameWinEvent=function(e){var t=this;if(r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4&&(this.hand.active=!1),e&&e.stopPropagation(),console.log("\u6e38\u620f\u80dc\u5229"),s.default.curGameState==s.default.gameState.ACTIVE){var n=!1;if(r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE1&&r.default.CUR_LEVEL>=64?r.default.CUR_LEVEL<l.default.instance.gameMeta.classicalModeLevelMeta.length-3&&(n=!0):r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2?r.default.CUR_LEVEL<l.default.instance.gameMeta.grenadeModeLevelMeta.length-3&&(n=!0):r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?r.default.CUR_LEVEL<l.default.instance.gameMeta.hostageModeLevelMeta.length-3&&(n=!0):r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4&&r.default.CUR_LEVEL<l.default.instance.gameMeta.survivalModeLevelMeta.length-3&&(n=!0),n)for(var a=1;a<5;a++){var i="mode/"+(r.default.CUR_MODE+1)+"tmx"+(r.default.CUR_LEVEL+1);h.default.loadRes(i,cc.TiledMapAsset,!1)}s.default.curGameState=s.default.gameState.WIN;var c=r.default.CUR_LEVEL;if(r.default.instance.savePassStage(c,l.STAGE_STATE_STRUCT.UNLOCK,s.default.calcuStars(),r.default.CUR_MODE),r.default.instance.totalStage=0,l.default.instance.saveScoreToService(r.default.instance.getBestStageNum()),y.default.instance.getData(y.default.KEY_LOGIN_DAY)==(new Date).getDate()){var d=0+r.default.CUR_MODE,u=0+r.default.CUR_LEVEL,p=JSON.stringify({mode:d,level:u});h.default.buriedPoint(29,p)}if(c++,r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE1?c>l.default.instance.gameMeta.classicalModeLevelMeta.length&&(c=l.default.instance.gameMeta.classicalModeLevelMeta.length):r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2?c>l.default.instance.gameMeta.grenadeModeLevelMeta.length&&(c=l.default.instance.gameMeta.grenadeModeLevelMeta.length):r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?c>l.default.instance.gameMeta.hostageModeLevelMeta.length&&(c=l.default.instance.gameMeta.hostageModeLevelMeta.length):r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4&&c>l.default.instance.gameMeta.survivalModeLevelMeta.length&&(c=l.default.instance.gameMeta.survivalModeLevelMeta.length),r.default.instance.setData(r.default.KEY_CUR_STAGE_NUM,c),console.log("\u521d\u59cb\u5316\u6e38\u620f\u80dc\u5229\u9875\u9762"),1==m.default.instance.canUseEasingPolicy){if(void 0!=(p=m.default.instance.game_config)&&r.default.CUR_LEVEL%p.goldenEggInterval==0&&p.goldenEggSwitch&&r.default.instance.goldEggLimit<p.goldenEggLimit)this.scheduleOnce(function(){h.default.instance.loadSceneWithOperate("giftScene")},r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?35==r.default.CUR_LEVEL?3:1.6:1.1);else{var f=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);this.scheduleOnce(function(){t.node?t.node.addChild(f,0):f.destroy()},r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?35==r.default.CUR_LEVEL?3:1.6:1.1)}}else{f=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);this.scheduleOnce(function(){t.node?t.node.addChild(f,0):f.destroy()},r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?35==r.default.CUR_LEVEL?3:1.6:1.1)}}},t.prototype.bulletRemoveEvent=function(e){var t=this;e&&e.stopPropagation(),s.default.activeBulletCount--,console.log(s.default.totalBulletCount,s.default.activeBulletCount),0==s.default.totalBulletCount&&s.default.activeBulletCount<=0&&(console.log(s.default.activeBulletCount,"==\u5b50\u5f39\u6253\u5b8c=="),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4?this.scheduleOnce(function(){t.showGameLostEvent(null)},1.9):this.scheduleOnce(function(){t.showGameLostEvent(null)},1))},t.prototype.enemyDieEvent=function(e){var t=this;if(e&&e.stopPropagation(),s.default.enemy_count--,0==s.default.enemy_count){if(r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3)return void(69==r.default.CUR_LEVEL?this.scheduleOnce(function(){t.showGameWinEvent(null)},3):this.scheduleOnce(function(){t.showGameWinEvent(null)},1));if(r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4)return void(56==r.default.CUR_LEVEL||65==r.default.CUR_LEVEL||67==r.default.CUR_LEVEL?this.scheduleOnce(function(){t.showGameWinEvent(null)},5):this.scheduleOnce(function(){t.showGameWinEvent(null)},1.9));this.scheduleOnce(function(){t.showGameWinEvent(null)})}},t.prototype.rotateHand=function(e){if(s.default.curGameState===s.default.gameState.ACTIVE){this.gunLine.active=!0,this.zhunxin.active=!0,this.firedPosition=e;var t=this.hand.parent.convertToWorldSpaceAR(this.hand.position),n=this.gun.parent.convertToWorldSpaceAR(this.gun.position),o=e,a=this.firedPositionNode.parent.convertToWorldSpaceAR(this.firedPositionNode.position),i=o.sub(t),r=n.sub(t),c=o.sub(t),l=1*cc.misc.radiansToDegrees(c.signAngle(cc.v2(0,-1)));if(-1==this.playerNode.scaleX&&(l=-l),this.hand.setRotation(l),i.mag()<r.mag()){var d=this.playerNode.convertToNodeSpaceAR(a);l<0?d.x+=21:d.x-=21,this.zhunxin.setPosition(d)}else(d=this.playerNode.convertToNodeSpaceAR(e)).x-=21,this.zhunxin.setPosition(d)}},t.prototype.changeCrossLine=function(e){this.grenadeLine.active=!0;var t=this.grenadeLine.parent.convertToWorldSpaceAR(this.grenadeLine.position),n=e.sub(t).mag();n>220&&(n=220),this.grenadeLine.width=n},t.prototype.fired=function(){if(s.default.totalBulletCount<1)a.default.instance.playSound("nobullet");else{s.default.totalBulletCount--,s.default.activeBulletCount++,this.TopContentComp.removeBulletItem(),a.default.instance.playSound("fired");var e=this.firedPositionNode.parent.convertToWorldSpaceAR(this.firedPositionNode.position),t=u.default.instance.getNodePool(o.default.instance.prfabsAry.bullet.name);t.position=this.node.convertToNodeSpaceAR(e),cc.find("Canvas").addChild(t),this.bulletControllerComp=t.getComponent(i.default);var n=this.hand.getChildByName("dirNode");e=(e=n.parent.convertToWorldSpaceAR(n.position).sub(e)).normalize().mul(5e3),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3&&(e=e.normalize().mul(1e7)),this.bulletControllerComp.bulletBody.applyLinearImpulse(e,this.bulletControllerComp.bulletBody.getWorldCenter(),!0)}},t.prototype.throwGrenade=function(e){if(s.default.totalBulletCount<1)a.default.instance.playSound("nobullet");else{s.default.totalBulletCount--,s.default.activeBulletCount++,this.TopContentComp.removeBulletItem();var t=this;this.hand.runAction(cc.sequence(cc.rotateBy(.1,360),cc.callFunc(function(){var n=t.firedPositionNode.parent.convertToWorldSpaceAR(t.firedPositionNode.position),a=cc.instantiate(o.default.instance.prfabsAry.grenade);a.position=t.node.convertToNodeSpaceAR(n),a.name=(new Date).getTime().toString(),cc.find("Canvas").addChild(a),t.grenadeControllerComp=a.getComponent(p.default);var i=t.hand.getChildByName("dirNode");n=i.parent.convertToWorldSpaceAR(i.position).sub(n);var r=t.grenadeLine.parent.convertToWorldSpaceAR(t.grenadeLine.position),s=175*Math.sqrt(e.sub(r).mag());s<1100?s/=2:s>3500?s*=1.1:s>5e3&&(s*=1.55),n=n.normalize().mul(s),t.grenadeControllerComp.grenadeBody.applyLinearImpulse(n,t.grenadeControllerComp.grenadeBody.getWorldCenter(),!0)})))}},t.prototype.onDestroy=function(){cc.director.getPhysicsManager().enabled=!1,cc.director.getCollisionManager().enabled=!1,u.default.instance.NodePoolclearUp(o.default.instance.prfabsAry.bullet.name)},__decorate([E(cc.Node)],t.prototype,"hand",void 0),__decorate([E(cc.Node)],t.prototype,"gunLine",void 0),__decorate([E(cc.Node)],t.prototype,"zhunxin",void 0),__decorate([E(cc.Node)],t.prototype,"playerNode",void 0),__decorate([E(cc.Node)],t.prototype,"gun",void 0),__decorate([E(cc.Node)],t.prototype,"firedPositionNode",void 0),__decorate([E(cc.Node)],t.prototype,"grenadeLine",void 0),__decorate([E(i.default)],t.prototype,"bulletControllerComp",void 0),__decorate([E(cc.Node)],t.prototype,"RoleListNode",void 0),__decorate([E(cc.Node)],t.prototype,"content",void 0),__decorate([E(f.default)],t.prototype,"playerController",void 0),t=__decorate([C],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../control/NodePoolMgr":"NodePoolMgr","../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/wechat/WXDevice":"WXDevice","../../module/data/MainDataMgr":"MainDataMgr","../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./BulletController":"BulletController","./Common":"Common","./GameConfig":"GameConfig","./GameMainMgr":"GameMainMgr","./GrenadeController":"GrenadeController","./Guide":"Guide","./PhysicPlayer":"PhysicPlayer","./PrfabsManager":"PrfabsManager","./StageEnd":"StageEnd","./TopContent":"TopContent"}],GameMainMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2d9abSXu+hOsbArLzANCI4c","GameMainMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}var t;return t=e,e.init=function(){},e.calcuStars=function(){var e=0;return e=t.totalBulletCount>=3?3:t.totalBulletCount>=2?2:t.totalBulletCount<=0?0:1,this.curEarnStars=e,e},e.isTryAgain=!1,e.gameState=cc.Enum({UNREADY:"unReady",READY:"ready",ACTIVE:"active",LOST:"lost",WIN:"win"}),e.curGameState=t.gameState.UNREADY,e.isRevive=!1,e.normalBulletCount=0,e.lightBulletCount=0,e.totalBulletCount=0,e.activeBulletCount=0,e.enemy_count=0,e.curEarnStars=0,e=t=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],GameMain:[function(e,t,n){"use strict";cc._RF.push(t,"459e3N3kKpJko0cpOxgMdqx","GameMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./PrfabsManager"),a=e("./AudioManager"),i=e("./BulletController"),r=e("../../module/data/StageDataMgr"),s=e("./GameMainMgr"),c=e("./TopContent"),l=e("./GameConfig"),d=e("./Common"),u=e("../../control/NodePoolMgr"),h=e("../../GameUtils"),p=e("../../gamecore/wechat/WXDevice"),f=e("../../gamecore/deer/DeerSDK"),g=e("./StageEnd"),m=e("../../module/data/MainDataMgr"),_=cc._decorator,y=_.ccclass,v=_.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hand=null,t.gunLine=null,t.zhunxin=null,t.playerNode=null,t.gun=null,t.firedPositionNode=null,t.grenadeLine=null,t.bulletControllerComp=null,t.RoleListNode=null,t.content=null,t.dirNode=null,t.TopContentComp=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.content.getChildByName("background").zIndex=-999,cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.loadPlayerSkin(),this.loadEnemySkin();var e=cc.instantiate(o.default.instance.prfabsAry.adNode);this.node.addChild(e)},t.prototype.start=function(){this.node.getChildByName("content").getChildByName("background").getComponent(cc.Widget).enabled=!0;var e=this.node.getChildByName("content").getChildByName("background");if(e.anchorY=0,e.getComponent(cc.Widget).isAlignLeft=!1,e.getComponent(cc.Widget).isAlignRight=!1,e.getComponent(cc.Widget).isAlignTop=!1,e.getComponent(cc.Widget).isAlignBottom=!0,e.getComponent(cc.Widget).bottom=0,e.getComponent(cc.Sprite).type=0,r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE1&&r.default.CUR_LEVEL<=32?e.scale=1.07:e.scale=1.45,e.getComponent(cc.Sprite).sizeMode=1,e.getComponent(cc.Sprite).spriteFrame=o.default.instance.bgArr["bg_100"+Math.ceil(r.default.CUR_LEVEL/16)],this.initUi(),r.default.IS_FROM_EGGLAYER){r.default.IS_FROM_EGGLAYER=!1;var t=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);return this.node.addChild(t,0),void t.getComponent(g.default).showEggReward()}this.initListener(),s.default.curGameState=s.default.gameState.READY,s.default.activeBulletCount=0,this.initNodePool()},t.prototype.loadPlayerSkin=function(){var e=this.node.getChildByName("content").getChildByName("player");e.getChildByName("left_hand").getChildByName("gun").active=!0;var t=l.default.instance.getCurRoleSKinInfo().imageId;h.default.loadRes("textures/players/"+t+"/right_hand",cc.SpriteFrame,!1,function(t){e?(e.getChildByName("right_hand").getComponent(cc.Sprite).sizeMode=0,e.getChildByName("right_hand").getComponent(cc.Sprite).spriteFrame=t):t=null}),h.default.loadRes("textures/players/"+t+"/body",cc.SpriteFrame,!1,function(t){e?(e.getChildByName("body").getComponent(cc.Sprite).sizeMode=0,e.getChildByName("body").getComponent(cc.Sprite).spriteFrame=t):t=null}),h.default.loadRes("textures/players/"+t+"/left_foot",cc.SpriteFrame,!1,function(t){e?(e.getChildByName("left_foot").getComponent(cc.Sprite).sizeMode=0,e.getChildByName("left_foot").getComponent(cc.Sprite).spriteFrame=t):t=null}),h.default.loadRes("textures/players/"+t+"/right_foot",cc.SpriteFrame,!1,function(t){e?(e.getChildByName("right_foot").getComponent(cc.Sprite).sizeMode=0,e.getChildByName("right_foot").getComponent(cc.Sprite).spriteFrame=t):t=null}),h.default.loadRes("textures/players/"+t+"/head",cc.SpriteFrame,!1,function(t){e?(e.getChildByName("head").getComponent(cc.Sprite).sizeMode=0,e.getChildByName("head").getComponent(cc.Sprite).spriteFrame=t):t=null}),h.default.loadRes("textures/players/"+t+"/left_hand",cc.SpriteFrame,!1,function(t){e?(e.getChildByName("left_hand").getComponent(cc.Sprite).sizeMode=0,e.getChildByName("left_hand").getComponent(cc.Sprite).spriteFrame=t):t=null})},t.prototype.loadEnemySkin=function(){for(var e=this.node.getChildByName("content").getChildByName("RoleListNode"),t=0;t<e.childrenCount;t++)if("Role_Left_Black"==e.children[t].name)for(var n=e.children[t],o=function(e){var t=n.children[e];h.default.loadRes("textures/players/enemy1/"+t.name,cc.SpriteFrame,!1,function(e){t.getComponent(cc.Sprite).sizeMode=0,t.getComponent(cc.Sprite).spriteFrame=e})},a=0;a<n.childrenCount;a++)o(a);else if("Role_Right_Black"==e.children[t].name){n=e.children[t];var i=function(e){var t=n.children[e];h.default.loadRes("textures/players/enemy1_right/"+t.name,cc.SpriteFrame,!1,function(e){t.getComponent(cc.Sprite).sizeMode=0,t.getComponent(cc.Sprite).spriteFrame=e})};for(a=0;a<n.childrenCount;a++)i(a)}},t.prototype.initNodePool=function(){if(r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE1){var e=o.default.instance.prfabsAry.bullet;u.default.instance.createNodePool(e.name,e,s.default.totalBulletCount)}},t.prototype.initUi=function(){this.dirNode=new cc.Node,this.dirNode.name="dirNode",this.dirNode.width=46,this.dirNode.height=46,s.default.enemy_count=this.RoleListNode.childrenCount;var e=null;e=r.default.CUR_LEVEL<=32?cc.instantiate(o.default.instance.prfabsAry.topContent):cc.instantiate(o.default.instance.prfabsAry.topContent2),this.content.addChild(e,0),this.TopContentComp=e.getComponent(c.default),this.initTopBulletInfo()},t.prototype.initTopBulletInfo=function(){s.default.normalBulletCount=3;var e=l.default.instance.gameMeta.classicalModeLevelMeta;r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE1||(r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2?e=l.default.instance.gameMeta.grenadeModeLevelMeta:r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3?e=l.default.instance.gameMeta.hostageModeLevelMeta:r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE4&&(e=l.default.instance.gameMeta.survivalModeLevelMeta)),e.length<r.default.CUR_LEVEL?s.default.lightBulletCount=2:s.default.lightBulletCount=e[r.default.CUR_LEVEL-1].goldBulletNum,1==r.default.IS_REVIVE_STATE&&(r.default.IS_REVIVE_STATE=!1,s.default.lightBulletCount+=l.default.instance.gameMeta.settlementRewardMeta[0].lose,h.default.showToast("\u606d\u559c\u590d\u6d3b\uff0c\u5b50\u5f39\u6570\u91cf+"+l.default.instance.gameMeta.settlementRewardMeta[0].lose)),s.default.totalBulletCount=s.default.normalBulletCount+s.default.lightBulletCount,this.TopContentComp.refreshAllBullet(s.default.normalBulletCount,s.default.lightBulletCount)},t.prototype.addBulletEvent=function(e){e&&e.stopPropagation(),s.default.totalBulletCount++,s.default.normalBulletCount++,this.TopContentComp.addNormalBulletItem()},t.prototype.initListener=function(){this.node.on(d.default.eventMessage.addBullet,this.addBulletEvent,this),this.node.on(d.default.eventMessage.bulletRemove,this.bulletRemoveEvent,this),this.node.on(d.default.eventMessage.enemyDie,this.enemyDieEvent,this),this.node.on(d.default.eventMessage.gameFail,this.showGameLostEvent,this),this.node.on(d.default.eventMessage.gameWin,this.showGameWinEvent,this),this.node.getChildByName("content").on(cc.Node.EventType.TOUCH_START,this.onTouchStartEvent,this),this.node.getChildByName("content").on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoveEvent,this),this.node.getChildByName("content").on(cc.Node.EventType.TOUCH_END,this.onTouchEndEvent,this),this.node.getChildByName("content").on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEndEvent,this)},t.prototype.onTouchStartEvent=function(e){var t=this;console.log(s.default.totalBulletCount,"\u5f00\u59cb\u70b9\u51fb"),e&&p.default.vibrateShort(),s.default.curGameState==s.default.gameState.READY&&(s.default.curGameState=s.default.gameState.ACTIVE),s.default.totalBulletCount>0&&s.default.curGameState==s.default.gameState.ACTIVE?(this.rotateHand(e.getLocation()),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2&&this.changeCrossLine(e.getLocation())):s.default.totalBulletCount<=0&&this.scheduleOnce(function(){t.showGameLostEvent(null)},6)},t.prototype.onTouchMoveEvent=function(e){this.rotateHand(e.getLocation()),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2&&this.changeCrossLine(e.getLocation())},t.prototype.onTouchEndEvent=function(e){e&&(p.default.vibrateShort(),1==r.default.NEED_SUB_HP&&(r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE1&&r.default.CUR_LEVEL<=16||r.default.instance.setData(r.default.KEY_USER_HP_NUM,r.default.instance.getData(r.default.KEY_USER_HP_NUM)-1),r.default.NEED_SUB_HP=!1),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE1&&r.default.CUR_LEVEL<=16&&this.content.getChildByName("helpPanel")&&this.content.getChildByName("helpPanel").destroy()),this.rotateHand(e.getLocation()),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE2||(this.fired(),this.gunLine.active=!1,this.zhunxin.active=!1)},t.prototype.showGameLostEvent=function(e){if(e&&e.stopPropagation(),s.default.curGameState==s.default.gameState.ACTIVE)if(s.default.curGameState=s.default.gameState.LOST,1==f.default.instance.canUseEasingPolicy){var t=f.default.instance.game_config;if(void 0!=t&&r.default.CUR_LEVEL%t.goldenEggInterval==0&&t.goldenEggSwitch&&r.default.instance.goldEggLimit<t.goldenEggLimit)this.scheduleOnce(function(){h.default.instance.loadSceneWithOperate("giftScene")},1);else{var n=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);this.node.addChild(n)}}else{n=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);this.node.addChild(n)}},t.prototype.showGameWinEvent=function(e){var t=this;if(e&&e.stopPropagation(),console.log("\u6e38\u620f\u80dc\u5229"),s.default.curGameState==s.default.gameState.ACTIVE){r.default.CUR_LEVEL<63&&(cc.director.preloadScene("map"+(r.default.CUR_LEVEL+2)),cc.director.preloadScene("map"+(r.default.CUR_LEVEL+1))),s.default.curGameState=s.default.gameState.WIN;var n=r.default.CUR_LEVEL;if(r.default.instance.savePassStage(n,l.STAGE_STATE_STRUCT.UNLOCK,s.default.calcuStars(),r.default.CUR_MODE),r.default.instance.totalStage=0,l.default.instance.saveScoreToService(r.default.instance.getBestStageNum()),m.default.instance.getData(m.default.KEY_LOGIN_DAY)==(new Date).getDate()){var a=0+r.default.CUR_MODE,i=0+r.default.CUR_LEVEL,c=JSON.stringify({mode:a,level:i});h.default.buriedPoint(29,c)}if(++n>l.default.instance.gameMeta.classicalModeLevelMeta.length&&(n=l.default.instance.gameMeta.classicalModeLevelMeta.length),r.default.instance.setData(r.default.KEY_CUR_STAGE_NUM,n),console.log("\u521d\u59cb\u5316\u6e38\u620f\u80dc\u5229\u9875\u9762"),1==f.default.instance.canUseEasingPolicy){if(void 0!=(c=f.default.instance.game_config)&&r.default.CUR_LEVEL%c.goldenEggInterval==0&&c.goldenEggSwitch&&r.default.instance.goldEggLimit<c.goldenEggLimit)this.scheduleOnce(function(){h.default.instance.loadSceneWithOperate("giftScene")},1.5);else{var d=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);this.scheduleOnce(function(){t.node?t.node.addChild(d):d.destroy()},1.5)}}else{d=cc.instantiate(o.default.instance.prfabsAry.gameWinPanel);this.scheduleOnce(function(){t.node?t.node.addChild(d):d.destroy()},1.5)}}},t.prototype.bulletRemoveEvent=function(e){var t=this;e&&e.stopPropagation(),s.default.activeBulletCount--,console.log(s.default.totalBulletCount,s.default.activeBulletCount),0==s.default.totalBulletCount&&s.default.activeBulletCount<=0&&(console.log(s.default.activeBulletCount,"==\u5b50\u5f39\u6253\u5b8c=="),this.scheduleOnce(function(){t.showGameLostEvent(null)},1))},t.prototype.enemyDieEvent=function(e){e&&e.stopPropagation(),s.default.enemy_count--,0==s.default.enemy_count&&this.showGameWinEvent(null)},t.prototype.rotateHand=function(e){if(s.default.curGameState===s.default.gameState.ACTIVE){this.gunLine.active=!0,this.zhunxin.active=!0,this.firedPosition=e;var t=this.hand.parent.convertToWorldSpaceAR(this.hand.position),n=this.gun.parent.convertToWorldSpaceAR(this.gun.position),o=e,a=this.firedPositionNode.parent.convertToWorldSpaceAR(this.firedPositionNode.position),i=o.sub(t),r=n.sub(t),c=o.sub(t),l=1*cc.misc.radiansToDegrees(c.signAngle(cc.v2(0,-1)));if(-1==this.playerNode.scaleX&&(l=-l),this.hand.setRotation(l),i.mag()<r.mag()){var d=this.playerNode.convertToNodeSpaceAR(a);l<0?d.x+=21:d.x-=21,this.zhunxin.setPosition(d)}else(d=this.playerNode.convertToNodeSpaceAR(e)).x-=21,this.zhunxin.setPosition(d)}},t.prototype.changeCrossLine=function(e){this.grenadeLine.active=!0;var t=this.grenadeLine.parent.convertToWorldSpaceAR(this.grenadeLine.position),n=e.sub(t).mag();n>220&&(n=220),this.grenadeLine.width=n},t.prototype.fired=function(){if(s.default.totalBulletCount<1)a.default.instance.playSound("nobullet");else{s.default.totalBulletCount--,s.default.activeBulletCount++,this.TopContentComp.removeBulletItem(),a.default.instance.playSound("fired");var e=this.firedPositionNode.parent.convertToWorldSpaceAR(this.firedPositionNode.position),t=u.default.instance.getNodePool(o.default.instance.prfabsAry.bullet.name);t.position=this.node.convertToNodeSpaceAR(e),cc.find("Canvas").addChild(t),this.bulletControllerComp=t.getComponent(i.default);var n=this.hand.getChildByName("dirNode");e=(e=n.parent.convertToWorldSpaceAR(n.position).sub(e)).normalize().mul(5e3),r.default.CUR_MODE==l.MODE_TYPE_STRUCT.MODE3&&(e=e.normalize().mul(1e7)),this.bulletControllerComp.bulletBody.applyLinearImpulse(e,this.bulletControllerComp.bulletBody.getWorldCenter(),!0)}},t.prototype.onDestroy=function(){cc.director.getPhysicsManager().enabled=!1,cc.director.getCollisionManager().enabled=!1,u.default.instance.NodePoolclearUp(o.default.instance.prfabsAry.bullet.name)},__decorate([v(cc.Node)],t.prototype,"hand",void 0),__decorate([v(cc.Node)],t.prototype,"gunLine",void 0),__decorate([v(cc.Node)],t.prototype,"zhunxin",void 0),__decorate([v(cc.Node)],t.prototype,"playerNode",void 0),__decorate([v(cc.Node)],t.prototype,"gun",void 0),__decorate([v(cc.Node)],t.prototype,"firedPositionNode",void 0),__decorate([v(cc.Node)],t.prototype,"grenadeLine",void 0),__decorate([v(i.default)],t.prototype,"bulletControllerComp",void 0),__decorate([v(cc.Node)],t.prototype,"RoleListNode",void 0),__decorate([v(cc.Node)],t.prototype,"content",void 0),t=__decorate([y],t)}(cc.Component);n.default=M,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../control/NodePoolMgr":"NodePoolMgr","../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/wechat/WXDevice":"WXDevice","../../module/data/MainDataMgr":"MainDataMgr","../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./BulletController":"BulletController","./Common":"Common","./GameConfig":"GameConfig","./GameMainMgr":"GameMainMgr","./PrfabsManager":"PrfabsManager","./StageEnd":"StageEnd","./TopContent":"TopContent"}],GameManager:[function(e,t,n){"use strict";cc._RF.push(t,"45538n7JE1EJqcBQxxgUtw1","GameManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,e("./SoundsManager")),r=e("./PopUpManager"),s=e("./DataManager"),c=e("./item/ItemManager"),l=e("./Utils"),d=e("./legs/Context"),u=e("./event/EventDispacher"),h=e("./SceneManager"),p=e("./ResManager"),f=e("../base/GameValues"),g=e("./TagManager"),m=function(){function e(){}var t;return t=e,Object.defineProperty(e,"eventManager",{get:function(){return t._eventManager},enumerable:!0,configurable:!0}),Object.defineProperty(e,"dataManager",{get:function(){return t._dataManager},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sceneManager",{get:function(){return t._sceneManager},enumerable:!0,configurable:!0}),Object.defineProperty(e,"soundsManager",{get:function(){return t._soundsManager},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpManager",{get:function(){return t._popUpManager},enumerable:!0,configurable:!0}),Object.defineProperty(e,"itemManager",{get:function(){return t._itemManager||(t._itemManager=new c.default),t._itemManager},enumerable:!0,configurable:!0}),Object.defineProperty(e,"tagManager",{get:function(){return t._tagManager||(t._tagManager=new g.default),t._tagManager},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resManager",{get:function(){return t._resManager},enumerable:!0,configurable:!0}),Object.defineProperty(e,"context",{get:function(){return t._context},enumerable:!0,configurable:!0}),Object.defineProperty(e,"canVibrate",{get:function(){return t._canVibrate},enumerable:!0,configurable:!0}),e.vibrateOff=function(){t._canVibrate&&(t._canVibrate=!1,t.dataManager.setData("__deer__vibrateoff",!0,!0))},e.vibrateOn=function(){t._canVibrate||(t._canVibrate=!0,t.dataManager.setData("__deer__vibrateoff",!1,!0))},e.lockScene=function(){var e=cc.director.getScene();if(t._lockSceneNode&&t._lockSceneNode.getParent()){if(t._lockSceneNode.getParent()==e)return;t._lockSceneNode.destroy(),t._lockSceneNode=null}var n=cc.winSize,o=new cc.Node;o.width=n.width,o.height=n.height,o.x=n.width/2,o.y=n.height/2,o.addComponent(cc.BlockInputEvents),t._lockSceneNode=o,e.addChild(t._lockSceneNode)},e.unlockScene=function(){t._lockSceneNode&&t._lockSceneNode.getParent()&&(t._lockSceneNode.destroy(),t._lockSceneNode=null)},e.showToast=function(e,t){void 0===t&&(t=1.5),t<=0&&(t=0);var n=new cc.Node;n.y=-2;var o=n.addComponent(cc.Label);o.fontSize=28,o.lineHeight=36,o.string=e||"";var a=new cc.Node;return a.addChild(n),a.x=cc.winSize.width/2,a.y=cc.winSize.height/2,cc.director.getScene().addChild(a),a.opacity=0,a.runAction(cc.sequence(cc.fadeTo(.1,63.75),cc.callFunc(function(){var e=n.width+30,t=n.height+16,o=a.addComponent(cc.Graphics);o.fillColor=new cc.Color(0,0,0,200),o.fillRect(-e/2,-t/2,e,t)}),cc.fadeTo(.3,255),cc.delayTime(t),cc.fadeTo(.3,0),cc.callFunc(a.destroy.bind(a)))),a},Object.defineProperty(e,"isAndroid",{get:function(){return t._isAndroid},enumerable:!0,configurable:!0}),e.init=function(){if(!t._initialized){t._initialized=!0,t._dataManager=new s.default,t._soundsManager=new i.default,t._sceneManager=new h.default,t._popUpManager=new r.default,t._resManager=new p.default,t._context=new d.default,setTimeout(function(){var e=null;cc.director.getScene()&&cc.director.getScene().children.length>0&&(e=cc.director.getScene().children[0]),null!=e&&e.on(cc.Node.EventType.TOUCH_END,function(t){if(!(t.getLocationInView().y>150)){var n="____ts";if(void 0==e[n]&&(e[n]=0,e.____tst=(new Date).getTime()),e[n]++,(new Date).getTime()-e.____tst<5e3){if(20==e[n]){var o="sho,wM,odal,aiale,conaena,7248674358F0660E,7248674362406709,6E5653576E389E7F4FE1606F79D1628067099650516C53F8".split(","),a=function(e){for(var t=0;t<e.length;t+=4)e=e.slice(0,t)+"%u"+e.slice(t),t+=2;return unescape(e)},i={};i[o[3].replace(/a/g,"t")]=a(o[5]),i[o[4].replace(/a/g,"t")]=a(o[6])+" "+a(o[7]),wx[o.slice(0,3).join("")](i)}}else e[n]=0,e.____tst=(new Date).getTime()}},e)},2e4),t._canVibrate=!0,t._canVibrate=!1!==t.dataManager.getData("__deer__vibrateoff");try{var e=navigator.userAgent.toLowerCase();t._isAndroid=e.indexOf("android")>=0}catch(e){}}},e._eventManager=new u.default,e._canVibrate=!0,e._isAndroid=!1,e._temp=t.init(),e=t=__decorate([a],e)}();n.default=m,n.addVersionInfo=function(){var e=new cc.Node,t=e.addComponent(cc.Label);t.fontSize=20,t.lineHeight=1.1*t.fontSize,f.default.isDebug&&(e.color=(new cc.Color).fromHEX("#ff0000"));var n=f.default.gameVersion;f.default.gameInternalVersionCode&&(n+="."+f.default.gameInternalVersionCode),f.default.isDebug&&(n+="\u3010\u6d4b\u8bd5\u3011"),t.string=n;var o=cc.winSize;e.anchorX=0,l.default.isIphoneX?(e.x=20,e.y=o.height-t.lineHeight/2):(e.x=0,e.y=o.height-t.lineHeight/2),cc.director.getScene().addChild(e)},cc._RF.pop()},{"../base/GameValues":"GameValues","./DataManager":"DataManager","./PopUpManager":"PopUpManager","./ResManager":"ResManager","./SceneManager":"SceneManager","./SoundsManager":"SoundsManager","./TagManager":"TagManager","./Utils":"Utils","./event/EventDispacher":"EventDispacher","./item/ItemManager":"ItemManager","./legs/Context":"Context"}],GameOverAdItemMain:[function(e,t,n){"use strict";cc._RF.push(t,"76d5565AsFN9rnNdS27jEzA","GameOverAdItemMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../scripts/gamecore/managers/GameManager"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.imgSprite=null,t.infoBgSprite=null,t.nameLabel=null,t.infoLabel=null,t.infoBgSFs=[],t}return __extends(t,e),t.prototype.start=function(){this._imageOriginalSize=new cc.Size(this.imgSprite.node.width,this.imgSprite.node.height),this.refreshUI(),this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this)},t.prototype.refreshUI=function(){var e=this;if(this.data){this.data.index;if(this.infoBgSFs.length,this.nameLabel.string=this.data.name,void 0!=this.data.ad_count)this.infoLabel.string=this.data.ad_count+"\u4eba\u6b63\u5728\u73a9";else{var t=Math.floor(5e3*Math.random()+5e3);this.infoLabel.string=t+"\u4eba\u6b63\u5728\u73a9"}var n=this.data.img_256_129;n&&cc.loader.load(n,function(t,n){t||n&&e.imgSprite&&(e.imgSprite.spriteFrame=new cc.SpriteFrame(n),e.imgSprite.node.width=n.width,e.imgSprite.node.height=n.height,e.imgSprite.node.scaleX=e._imageOriginalSize.width/n.width,e.imgSprite.node.scaleY=e._imageOriginalSize.height/n.height)})}},t.prototype.tapHandler=function(e){o.default.soundsManager.playTapSound(),this.data&&this.data.navigate()},__decorate([r(cc.Sprite)],t.prototype,"imgSprite",void 0),__decorate([r(cc.Sprite)],t.prototype,"infoBgSprite",void 0),__decorate([r(cc.Label)],t.prototype,"nameLabel",void 0),__decorate([r(cc.Label)],t.prototype,"infoLabel",void 0),__decorate([r([cc.SpriteFrame])],t.prototype,"infoBgSFs",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../../scripts/gamecore/managers/GameManager":"GameManager"}],GameOverAdsPanelMain:[function(e,t,n){"use strict";cc._RF.push(t,"06ca2Zjd/RCFJYIDtYnY4El","GameOverAdsPanelMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../scripts/gamecore/deer/DeerSDK"),a=e("../../../scripts/gamecore/xiaoyaoji/XYJAPI"),i=e("../../../scripts/gamecore/deer/DeerSDKEventNames"),r=e("./GameOverAdItemMain"),s=e("../../../scripts/module/data/MainDataMgr"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adItemPrefab=null,t.adsCount=6,t.adsContainer=null,t.locationFlg="",t}return __extends(t,e),t.prototype.start=function(){o.default.instance.isReady||a.default.userOpenID?this.loadAdData():o.default.instance.addEventListener(i.default.READY,this.sdkReadyHandler,this)},t.prototype.sdkReadyHandler=function(e){this.loadAdData()},t.prototype.loadAdData=function(){var e=this;o.default.instance.removeEventListener(i.default.READY,this.sdkReadyHandler,this),o.default.instance.ad_getAdData(o.DeerAdType.GAME_OVER,function(t){t&&e.showAds(t.concat())},null,this.locationFlg)},t.prototype.showAds=function(e){if(this.adsContainer){this.adsContainer.removeAllChildren(!0);var t=e;if(t&&t.length>0){var n=t.length;this.adsCount>0&&n>this.adsCount&&(n=this.adsCount);for(var o=0;o<n;o++){t[o].index=o;var a=cc.instantiate(this.adItemPrefab);s.default.CUR_DEATH_AD_INDEX++,s.default.CUR_DEATH_AD_INDEX>=t.length&&(s.default.CUR_DEATH_AD_INDEX=0);var i=s.default.CUR_DEATH_AD_INDEX;a.getComponent(r.default).data=t[i],this.adsContainer.addChild(a)}}}},t.prototype.onDestroy=function(){o.default.instance.removeEventListener(i.default.READY,this.sdkReadyHandler,this)},__decorate([d({type:cc.Prefab,displayName:"\u5355\u4e2a\u5e7f\u544a\u9884\u5236\u4f53"})],t.prototype,"adItemPrefab",void 0),__decorate([d({displayName:"\u663e\u793a\u5e7f\u544a\u6570\u91cf",tooltip:"0\u8868\u793a\u5c55\u73b0\u5168\u90e8\u5e7f\u544a"})],t.prototype,"adsCount",void 0),__decorate([d({type:cc.Node,displayName:"\u5e7f\u544a\u5bb9\u5668"})],t.prototype,"adsContainer",void 0),__decorate([d({type:String,displayName:"\u4f4d\u7f6e\u6807\u8bc6"})],t.prototype,"locationFlg",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../scripts/gamecore/deer/DeerSDK":"DeerSDK","../../../scripts/gamecore/deer/DeerSDKEventNames":"DeerSDKEventNames","../../../scripts/gamecore/xiaoyaoji/XYJAPI":"XYJAPI","../../../scripts/module/data/MainDataMgr":"MainDataMgr","./GameOverAdItemMain":"GameOverAdItemMain"}],GameStart:[function(e,t,n){"use strict";cc._RF.push(t,"93523sAFgtL2IP/FnzFMaiL","GameStart"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameUtils"),a=e("./tank/JoystickBG"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jsonData=null,t.tarNode=null,t.findMap=!1,t.uidNodeArr={},t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e,t){this.jsonData=e,this.node=t,this.getData2(null,JSON.stringify(e))},t.prototype.getChildByUid=function(e){return this.uidNodeArr[e]},t.prototype.getData2=function(e,t){var n=this;t=JSON.parse(t);var i=null;if((i=e?new cc.Node(t.name):this.node).active=t.active,i.setAnchorPoint(cc.v2(t.anchor.x,t.anchor.y)),i.color=t.color._val,i.group=t.group,i.opacity=t.opacity,console.log(t.position,"position",i.name),i.position=t.position,i.setContentSize(t.rect.x,t.rect.y),t.rotationX&&t.rotationY?(i.rotationX=t.rotationX,i.rotationY=t.rotationY):i.rotation=t.rotation?t.rotation:0,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.skewX=t.skewX,i.skewY=t.skewY,this.uidNodeArr[t.uuid]=i,i.zIndex=t.zIndex,e&&e.addChild(i),t.child)for(var r=0;r<t.child.length;r++)this.getData2(i,t.child[r]);if(t.comp){var s=function(e){var r=t.comp[e];if(!r||!r.name)return"continue";if(-1!=r.name.indexOf("Tiled")||-1!=r.name.indexOf("Widget"))return"continue";var s=null;if("LoadMap"!=r.name)try{s=i.addComponent(r.name)}catch(e){console.error(e,r,"\u8bf7\u68c0\u67e5comp",r.name)}if(-1!=r.name.indexOf("cc.Button"))!0,r.clickEvents.length>1&&console.error("\u4e8b\u4ef6\u4e0d\u80fd\u5927\u4e8e1",r.clickEvents.length,r.name),s.enabled=r.enabled,s.clickEvents[0]={component:r.component,customEventData:r.customEventData,handler:r.handler,target:c.getChildByUid(r.targetUid)};else if(-1!=r.name.indexOf("cc.Graphics"))!0,s.enabled=r.enabled,s.lineCap=r.lineCap,s.lineJoin=r.lineJoin,s.lineWidth=r.lineWidth,s.miterLimit=r.miterLimit;else if(-1!=r.name.indexOf("cc.Mask"))console.log(r,"compMask"),!0;else if(-1!=r.name.indexOf("cc.Label"))!0,s.fontSize=r.fontSize,s.horizontalAlign=r.horizontalAlign,s.lineHeight=r.lineHeight,s.overflow=r.overflow,s.string=r.string;else if(-1!=r.name.indexOf("cc.Sprite")){if(!0,r.spriteFrame&&""!=r.spriteFrame._textureFilename)return o.default.loadRes(r.spriteFrame._textureFilename,cc.Texture2D,!1,function(e){s.spriteFrame=new cc.SpriteFrame(e,new cc.Rect(r.spriteFrame.rect.x,r.spriteFrame.rect.y,r.spriteFrame.rect.width,r.spriteFrame.rect.height),r.spriteFrame._rotated,cc.v2(0,0),new cc.Size(r.spriteFrame.rect.width,r.spriteFrame.rect.height))}),s.type=r.type,s.trim=r.trim,s.sizeMode=r.sizeMode,s.enabled=r.enabled,"continue"}else if(-1!=r.name.indexOf("RigidBody"))!0,s.active=r.active,s.enabledContactListener=r.enabledContactListener,s.bullet=r.bullet,s.type=r.type,s.allowSleep=r.allowSleep,s.gravityScale=r.gravityScale,s.linearDamping=r.linearDamping,s.angularDamping=r.angularDamping,s.linearVelocity=cc.v2(r.linearVelocity.x,r.linearVelocity.y),s.angularVelocity=r.angularVelocity,s.fixedRotation=r.fixedRotation,s.awakeOnLoad=r.awakeOnLoad;else if(-1!=r.name.indexOf("PhysicsCircleCollider"))!0,s.enabled=r.enabled,s.tag=r.tag,s.density=r.density,s.sensor=r.sensor,s.friction=r.friction,s.restitution=r.restitution,s.offset=cc.v2(r.offset.x,r.offset.y),s.radius=r.radius,s.apply();else if(-1!=r.name.indexOf("RevoluteJoint")){if(!0,s.enabled=r.enabled,!r.enabled)return"continue";r.uuidArr&&c.scheduleOnce(function(){var e=n.getChildByUid(r.uuidArr[r.uuidArr.length-1]);s.connectedBody=e.getComponent(cc.RigidBody)||s.node.getComponent(cc.RigidBody),s.apply()}),s.anchor=r.anchor,s.connectedAnchor=r.connectedAnchor,s.collideConnected=r.collideConnected,s.referenceAngle=r.referenceAngle,s.lowerAngle=r.lowerAngle,s.upperAngle=r.upperAngle,s.maxMotorTorque=r.maxMotorTorque,s.motorSpeed=r.motorSpeed,s.enableLimit=r.enableLimit,s.enableMotor=r.enableMotor,s.apply()}else if(-1!=r.name.indexOf("PhysicsBoxCollider"))!0,s.enabled=r.enabled,s.tag=r.tag,s.density=r.density,s.sensor=r.sensor,s.friction=r.friction,s.restitution=r.restitution,s.offset=cc.v2(r.offset.x,r.offset.y),s.size=r.size,s.apply();else if(-1!=r.name.indexOf("WeldJoint")){if(!0,0==r.enabled)return s.enabled=!1,"continue";r.uuidArr&&c.scheduleOnce(function(){var e=n.getChildByUid(r.uuidArr[r.uuidArr.length-1]);s.connectedBody=e.getComponent(cc.RigidBody)||s.node.getComponent(cc.RigidBody),s.apply()}),s.anchor=r.anchor,s.connectedAnchor=r.connectedAnchor,s.collideConnected=r.collideConnected,s.referenceAngle=r.referenceAngle,s.frequency=r.frequency,s.dampingRatio=r.dampingRatio,s.apply()}else if(-1!=r.name.indexOf("PhysicsPolygonCollider")){!0,s.enabled=r.enabled,s.tag=r.tag,s.density=r.density,s.sensor=r.sensor,s.friction=r.friction,s.restitution=r.restitution,s.offset=cc.v2(r.offset.x,r.offset.y),s.points=[];for(var l=0;l<r.points.length;l++)s.points[l]=cc.v2(0,0),s.points[l].x=r.points[l].x,s.points[l].y=r.points[l].y;s.apply()}else if(-1!=r.name.indexOf("MouseJoint"))!0,r.enabled||(s.enabled=!1),s.enabled=r.enabled,r.uuidArr&&c.scheduleOnce(function(){var e=n.getChildByUid(r.uuidArr[r.uuidArr.length-1]);s.connectedBody=e.getComponent(cc.RigidBody)||s.node.getComponent(cc.RigidBody),s.apply()}),r.mouseRegion&&console.error(r.mouseRegion),s.frequency=r.frequency,s.dampingRatio=r.dampingRatio,s.apply();else if(-1!=r.name.indexOf("RopeJoint"))!0,c.scheduleOnce(function(){s.anchor=r.anchor,s.connectedAnchor=r.connectedAnchor,s.collideConnected=r.collideConnected,s.maxLength=r.maxLength,s.connectedBody=n.getChildByUid(r.connectedBodyUid).getComponent(cc.RigidBody),s.apply()}),s.apply();else if(-1!=r.name.indexOf("WheelJoint"))!0,r.enabled||(s.enabled=!1),c.scheduleOnce(function(){s.connectedBody=n.getChildByUid(r.connectedBodyUid).getComponent(cc.RigidBody),s.apply()}),s.anchor=r.anchor,s.connectedAnchor=r.connectedAnchor,s.collideConnected=r.collideConnected,s.localAxisA=r.localAxisA,s.maxMotorTorque=r.maxMotorTorque,s.motorSpeed=r.motorSpeed,s.enableMotor=r.enableMotor,s.frequency=r.frequency,s.dampingRatio=r.dampingRatio,s.apply();else if("GameUI"===r.name){s.enabled=r.enabled;for(var d=0;d<r.bulletTypeUid_Arr.length;d++)s.bulletType.push(c.getChildByUid(r.bulletTypeUid_Arr[d]).getComponent(cc.Button));s.cdNode=c.getChildByUid(r.cdNodeUid);for(var u=0;u<r.cd_timeUid_Arr.length;u++)s.cd_time.push(c.getChildByUid(r.cd_timeUid_Arr[u]).getComponent(cc.Label));for(var h=0;h<r.curBloodUid_Arr.length;h++)s.curBlood.push(c.getChildByUid(r.curBloodUid_Arr[h]).getComponent(cc.Sprite));s.fightBtn=c.getChildByUid(r.fightBtnUid).getComponent(cc.Button),s.pauseBtn=c.getChildByUid(r.pauseBtnUid).getComponent(cc.Button),s.pauseGroup=c.getChildByUid(r.pauseGroupUid),s.score=c.getChildByUid(r.scoreUid).getComponent(cc.Label),s.select=c.getChildByUid(r.selectUid).getComponent(cc.Sprite)}else if(-1!=r.name.indexOf("XinShou"))s.enabled=r.enabled,s.clickCircle=c.getChildByUid(r.clickCircleUid),s.hand=c.getChildByUid(r.handUid);else if(-1!=r.name.indexOf("EnemyManager"))s.enabled=r.enabled;else if(-1!=r.name.indexOf("Raycast"))s.enabled=r.enabled;else if(-1!=r.name.indexOf("Hero_physic"))s.enabled=r.enabled,s.arrNode=c.getChildByUid(r.arrNodeUid),s.top=c.getChildByUid(r.topUid).getComponent(cc.Sprite);else if("Enemy"===r.name)s.enabled=r.enabled,c.scheduleOnce(function(){s.tank_fire=n.getChildByUid(r.tank_fireUid).getComponent(cc.Sprite),s.tank_bottom=n.getChildByUid(r.tank_bottomUid).getComponent(cc.Sprite),console.log(s,"info11111")});else if("EnemyItem"===r.name)s.enabled=r.enabled,r.normalImgUid&&(s.normalImg=c.getChildByUid(r.normalImgUid)),r.brokeImgUid&&(s.brokeImg=c.getChildByUid(r.brokeImgUid));else if("Joystick"===r.name)s.enabled=r.enabled,c.scheduleOnce(function(){s.dot=n.getChildByUid(r.dotUid),s.ring=n.getChildByUid(r.ringUid).getComponent(a.default)});else if("JoystickBG"===r.name)s.enabled=r.enabled,s.area=c.getChildByUid(r.areaUid),s.dot=c.getChildByUid(r.dotUid);else if(-1!=r.name.indexOf("RoleController"))s.enabled=r.enabled,s.grendaBoomNodeName=r.grendaBoomNodeName,s.hitDir=r.hitDir,s.hitJointRgBody=r.hitJointRgBody,s.hitPoint=r.hitPoint,s.isHit=r.isHit,s.isRoadDead=r.isRoadDead,s.isTrigger=r.isTrigger,s.leftFootBody=c.getChildByUid(r.leftFootBodyUid).getComponent(cc.RigidBody),s.leftFootBody2=c.getChildByUid(r.leftFootBody2Uid).getComponent(cc.RigidBody),s.rightFootBody=c.getChildByUid(r.rightFootBodyUid).getComponent(cc.RigidBody),s.rightFootBody2=c.getChildByUid(r.rightFootBody2Uid).getComponent(cc.RigidBody),s.roleBody=c.getChildByUid(r.roleBodyUid).getComponent(cc.RigidBody),s.trigger=r.trigger,s.triggerType=r.triggerType;else if(-1!=r.name.indexOf("RoleJointController"))s.blood=r.blood,r.blood&&console.log("RoleJointController.blood"),s.enabled=r.enabled,s.isBlood=r.isBlood,s.tntTrigger=r.tntTrigger;else if(-1!=r.name.indexOf("LinkSwitch"))s.linkType=r.linkType,s.isOpen=r.isOpen,r.linkNodeUid&&c.scheduleOnce(function(){s.linkNode=n.getChildByUid(r.linkNodeUid)});else if(-1!=r.name.indexOf("TNTBox"))s.bomImg=c.getChildByUid(r.bomImgUid),s.enabled=r.enabled,s.colliderSize=r.colliderSize,s.hitSwitch=r.hitSwitch,s.isBoom=r.isBoom,s.isHit=r.isHit,s.isLink=r.isLink,s.isOpenBoom=r.isOpenBoom,s.isReboundBullet=r.isReboundBullet,s.isRoadBoom=r.isRoadBoom,s.particleNode=null;else if(-1!=r.name.indexOf("BoomBox")){if(s.isBoom=r.isBoom,s.BoxSpriteNode=c.getChildByUid(r.BoxSpriteNodeUid),s.colliderCount=r.colliderCount,s.colliderTotalCount=r.colliderTotalCount,r.countLabelUid){var p=c.getChildByUid(r.countLabelUid);s.countLabel=p.addComponent(cc.Label),s.countNode=c.getChildByUid(r.countNodeUid)}s.enabled=r.enabled}else-1!=r.name.indexOf("CubeBox")?(s.isCollider=r.isCollider,s.grendaBoomCount=r.grendaBoomCount):-1!=r.name.indexOf("Transparent")?s.bulletPass=r.bulletPass:-1!=r.name.indexOf("RopeCollider")?c.scheduleOnce(function(){s.jointBody=n.getChildByUid(r.jointBodyUid).getComponent(cc.RigidBody)}):-1!=r.name.indexOf("HostageController")?(s.enabled=r.enabled,o.default.loadRes(r.deathSpriteFrame._textureFilename,cc.Texture2D,!1,function(e){s.deathSpriteFrame=new cc.SpriteFrame(e,new cc.Rect(r.deathSpriteFrame.rect.x,r.deathSpriteFrame.rect.y,r.deathSpriteFrame.rect.width,r.deathSpriteFrame.rect.height),r.deathSpriteFrame._rotated,cc.v2(0,0),new cc.Size(r.deathSpriteFrame.rect.width,r.deathSpriteFrame.rect.height)),s.deathSpriteFrame.name=r.deathSpriteFrame.name}),s.headSprite=c.getChildByUid(r.headSpriteNodeUid).getComponent(cc.Sprite),s.grendaBoomNodeName=r.grendaBoomNodeName,s.hitDir=r.hitDir,s.hitJointRgBody=r.hitJointRgBody,s.hitPoint=r.hitPoint,s.isHit=r.isHit,s.isRoadDead=r.isRoadDead,s.isTrigger=r.isTrigger,s.leftFootBody=c.getChildByUid(r.leftFootBodyUid).getComponent(cc.RigidBody),s.leftFootBody2=c.getChildByUid(r.leftFootBody2Uid).getComponent(cc.RigidBody),s.rightFootBody=c.getChildByUid(r.rightFootBodyUid).getComponent(cc.RigidBody),s.rightFootBody2=c.getChildByUid(r.rightFootBody2Uid).getComponent(cc.RigidBody),s.roleBody=c.getChildByUid(r.roleBodyUid).getComponent(cc.RigidBody),s.trigger=r.trigger,s.triggerType=r.triggerType):-1!=r.name.indexOf("HostageJointController")?(s.blood=r.blood,s.enabled=r.enabled,s.isBlood=r.isBlood,s.tntTrigger=r.tntTrigger):-1!=r.name.indexOf("PhysicPlayer")?(s.enabled=r.enabled,s.bodyRigBody=c.getChildByUid(r.bodyRigBodyUid).getComponent(cc.RigidBody),s.grendaBoomNodeName=r.grendaBoomNodeName,s.headRigBody=c.getChildByUid(r.headRigBodyUid).getComponent(cc.RigidBody),s.headSprite=c.getChildByUid(r.headSpriteUid).getComponent(cc.Sprite),s.hitDir=r.hitDir,s.hitPoint=r.hitPoint,s.isHit=r.isHit,s.isRoadDead=r.isRoadDead,s.isTrigger=r.isTrigger,s.trigger=r.trigger,s.triggerType=r.triggerType,s.leftFootBottomRigBody=c.getChildByUid(r.leftFootBottomRigBodyUid).getComponent(cc.RigidBody),s.leftFootTopRigBody=c.getChildByUid(r.leftFootTopRigBodyUid).getComponent(cc.RigidBody),s.leftHandBottomRigBody=c.getChildByUid(r.leftHandBottomRigBodyUid).getComponent(cc.RigidBody),s.leftHandTopRigBody=c.getChildByUid(r.leftHandTopRigBodyUid).getComponent(cc.RigidBody),s.leftMoveHand=c.getChildByUid(r.leftMoveHandUid),s.rightFootBottomRigBody=c.getChildByUid(r.rightFootBottomRigBodyUid).getComponent(cc.RigidBody),s.rightFootTopRigBody=c.getChildByUid(r.rightFootTopRigBodyUid).getComponent(cc.RigidBody),s.rightHandBottomRigBody=c.getChildByUid(r.rightHandBottomRigBodyUid).getComponent(cc.RigidBody),s.rightHandTopRigBody=c.getChildByUid(r.rightHandTopRigBodyUid).getComponent(cc.RigidBody)):-1!=r.name.indexOf("PhysicsPlayerLocal")&&(s.blood=r.blood,s.enabled=r.enabled,s.isBlood=r.isBlood,s.tntTrigger=r.tntTrigger)},c=this;for(r=0;r<t.comp.length;r++)s(r)}},t.prototype.start=function(){},t.prototype.onDestroy=function(){this.uidNodeArr=null},__decorate([s(cc.JsonAsset)],t.prototype,"jsonData",void 0),__decorate([s(cc.Node)],t.prototype,"tarNode",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./GameUtils":"GameUtils","./tank/JoystickBG":"JoystickBG"}],GameSystem:[function(e,t,n){"use strict";cc._RF.push(t,"872b4MJpo5HYLzaP9lPgfDJ","GameSystem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./gamecore/base/GameValues"),a=e("./gamecore/managers/GameManager"),i=e("./gamecore/wechat/WXRewardVideoAd"),r=e("./gamecore/managers/PopUpType"),s=e("./control/WXScreenAdMgr"),c=cc._decorator,l=c.ccclass,d=(c.property,function(){function e(){}var t;return t=e,e.init=function(){!0!==t._initialized&&(t._initialized=!0,o.default.currentPlatform=o.PlatformName.WECHAT,o.default.isDebug=!1,o.default.enableLog=!0,o.default.gameVersion="1.0",a.default.popUpManager.popUpType=r.PopUpType.NONE,a.default.soundsManager.tapSoundSource="sounds/dianji",i.default.adID="adunit-24e3fbbbaa8da145",s.default.instance.adList=["adunit-236f8ec7e76753fb","adunit-e763469ce06edc03","adunit-426fb0b8575ddc77","adunit-9b9b2ba465e654b1"])},e.appId="wx82e19f0459bf8701",e.defaultChannelID=24,e.defaultAdID=55,e._initialized=!1,e=t=__decorate([l],e)}());n.default=d,cc._RF.pop()},{"./control/WXScreenAdMgr":"WXScreenAdMgr","./gamecore/base/GameValues":"GameValues","./gamecore/managers/GameManager":"GameManager","./gamecore/managers/PopUpType":"PopUpType","./gamecore/wechat/WXRewardVideoAd":"WXRewardVideoAd"}],GameUI:[function(e,t,n){"use strict";cc._RF.push(t,"4965cWcJmZBZoChLXq81lod","GameUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameCtrl"),a=e("./GameData"),i=e("./TankDataMgr"),r=e("../gamecore/managers/GameManager"),s=e("../GameUtils"),c=e("./Globaldef"),l=e("./JoystickBG"),d=e("./UIManager"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.score=null,t.pauseGroup=null,t.curBlood=[],t.select=null,t.pauseBtn=null,t.bulletType=[],t.fightBtn=null,t.joyStickBG=null,t.cd_time=[],t.cdNode=null,t.bannerAd=null,t.gameCtrl=null,t.uiMgr=null,t.videoAd=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.bannerAd=null},t.prototype.start=function(){this.refreshBg(),0==a.default.instance.m_curMapType&&(15==a.default.instance.m_curLevel||16==a.default.instance.m_curLevel||17==a.default.instance.m_curLevel||18==a.default.instance.m_curLevel||20==a.default.instance.m_curLevel||a.default.instance.m_curLevel);var e=cc.find("Canvas");e&&(this.gameCtrl=e.getComponent(o.default),this.uiMgr=e.getComponent("UIManager")),this.refreshArrow(),this.refreshBulletType(i.default.instance.bulletType),this.pauseGroup.active=!1},t.prototype.onEnable=function(){},t.prototype.refreshBg=function(){1==a.default.instance.m_curMapType?cc.loader.loadRes("map_tex/bg_1",cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=cc.find("Canvas/BackGround").getComponent(cc.Sprite);n&&t&&(n.spriteFrame=t)}}.bind(this)):2==a.default.instance.m_curMapType?22<a.default.instance.m_curLevel?cc.loader.loadRes("map_tex/bg_4",cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=cc.find("Canvas/BackGround").getComponent(cc.Sprite);n&&t&&(n.spriteFrame=t)}}.bind(this)):0<a.default.instance.m_curLevel?cc.loader.loadRes("map_tex/bg_3",cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=cc.find("Canvas/BackGround").getComponent(cc.Sprite);n&&t&&(n.spriteFrame=t)}}.bind(this)):cc.loader.loadRes("map_tex/bg_2",cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=cc.find("Canvas/BackGround").getComponent(cc.Sprite);n&&t&&(n.spriteFrame=t)}}.bind(this)):cc.loader.loadRes("map_tex/bg",cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=cc.find("Canvas/BackGround").getComponent(cc.Sprite);n&&t&&(n.spriteFrame=t)}}.bind(this)),this.bulletType[4]&&this.bulletType[4].node.active,1!=a.default.instance.m_curMapType&&a.default.instance.m_curMapType},t.prototype.countDownAni=function(){if(this.refreshBg(),"level_debug"!=cc.director.getScene().name){a.default.instance.isPause=!0,this.cdNode.active=!0;for(var e=0;e<this.cd_time.length;e++)this.cd_time[e].node.active=!1,this.cd_time[e].node.scaleX=2,this.cd_time[e].node.scaleY=2;var t=0;this.cd_time[t].node.active=!0;var n=cc.scaleTo(.5,1),o=cc.sequence(n,cc.callFunc(function(){return this.cd_time[t].node.active=!1,++t>=this.cd_time.length?(this.cdNode.active=!1,a.default.instance.isPause=!1,void(this.gameCtrl&&this.gameCtrl.enemyManager.checkState())):(this.cd_time[t].node.active=!0,void this.cd_time[t].node.runAction(o))}.bind(this)));this.cd_time[t].node.runAction(o)}},t.prototype.playCDSound=function(e){0==e?r.default.soundsManager.playSound("countdown_one.MP3",!1,"",.5):1==e?r.default.soundsManager.playSound("countdown_two.MP3",!1,"",.5):2==e&&r.default.soundsManager.playSound("countdown_three.MP3",!1,"",.5)},t.prototype.countDownAniReBorn=function(){a.default.instance.isPause=!0,this.cdNode.active=!0;for(var e=0;e<this.cd_time.length;e++)this.cd_time[e].node.active=!1,this.cd_time[e].node.scaleX=2,this.cd_time[e].node.scaleY=2;var t=0;this.cd_time[t].node.active=!0;var n=cc.scaleTo(.5,1),o=cc.sequence(n,cc.callFunc(function(){return this.cd_time[t].node.active=!1,++t>=this.cd_time.length?(this.cdNode.active=!1,a.default.instance.isPause=!1,void(this.gameCtrl&&this.gameCtrl.reBorn())):(this.cd_time[t].node.active=!0,void this.cd_time[t].node.runAction(o))}.bind(this)));this.cd_time[t].node.runAction(o)},t.prototype.refresh=function(){for(var e=a.default.instance.m_curBlood,t=0;t<this.curBlood.length;t++)this.curBlood[t].node.color=cc.Color.BLACK;for(t=0;t<e;t++)this.curBlood[t].node.color=cc.Color.WHITE;var n=a.default.instance.m_killRating,o=a.default.instance.m_curLevel;this.score.string="\u7b2c"+(o+1)+"\u5173\n\u5206\u6570 "+n},t.prototype.update=function(){a.default.instance&&1==a.default.instance.m_isDirty&&(this.refresh(),a.default.instance.m_isDirty=!1)},t.prototype.watchVideoAd=function(){var e=this;s.default.instance.showVideoAd(function(){a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_BOMB,i.default.instance.bullet_pao=1,console.log("TankDataMgr.instance.saveData()"),e.refreshBulletType(i.default.instance.bulletType),e.selectAni(e.select.node)},function(){s.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891",function(){e.watchVideoAd()},function(){a.default.instance.isPause=!1,cc.director.resume()})},function(){s.default.instance.playFailOnShare(function(t){switch(t){case 1:a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_BOMB,i.default.instance.bullet_pao=1,console.log("TankDataMgr.instance.saveData()"),e.refreshBulletType(i.default.instance.bulletType),e.selectAni(e.select.node)}},"yuanchengpao")})},t.prototype.watchVideoAd1=function(){var e=this;s.default.instance.showVideoAd(function(){a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_FLLOW,i.default.instance.bullet_fllow=1,i.default.instance.saveData("watchVideoAd1"),e.refreshBulletType(i.default.instance.bulletType),e.selectAni(e.select.node)},function(){s.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891",function(){e.watchVideoAd1()},function(){a.default.instance.isPause=!1,cc.director.resume()})},function(){s.default.instance.playFailOnShare(function(t){switch(t){case 1:a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_FLLOW,i.default.instance.bullet_fllow=1,i.default.instance.saveData("watchVideoAd1"),e.refreshBulletType(i.default.instance.bulletType),e.selectAni(e.select.node)}},"yuanchengpao")})},t.prototype.watchVideoAd2=function(){var e=this;s.default.instance.showVideoAd(function(){a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_POWER_BOMB,i.default.instance.bullet_power=1,i.default.instance.saveData("---dd 004"),e.refreshBulletType(i.default.instance.bulletType),e.selectAni(e.select.node)},function(){s.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891",function(){e.watchVideoAd2()},function(){console.log("---dd watchVideoAd2"),a.default.instance.isPause=!1,cc.director.resume()})},function(){s.default.instance.playFailOnShare(function(t){switch(t){case 1:a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_POWER_BOMB,i.default.instance.bullet_power=1,i.default.instance.saveData("---dd 004"),e.refreshBulletType(i.default.instance.bulletType),e.selectAni(e.select.node)}},"yuanchengpao")})},t.prototype.watchVideoAd3=function(){var e=this;s.default.instance.showVideoAd(function(){a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_THREE,i.default.instance.bullet_three=!0,i.default.instance.saveData("-xx 004"),e.refreshBulletType(i.default.instance.bulletType),e.selectAni(e.select.node)},function(){s.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891",function(){e.watchVideoAd3()},function(){console.log("---dd watchVideoAd3"),a.default.instance.isPause=!1,cc.director.resume()})},function(){s.default.instance.playFailOnShare(function(t){switch(t){case 1:a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_THREE,i.default.instance.bullet_three=!0,i.default.instance.saveData("-xx 004"),e.refreshBulletType(i.default.instance.bulletType),e.selectAni(e.select.node)}},"yuanchengpao")})},t.prototype.onClickBullet=function(e){if(e.currentTarget==this.bulletType[0].node)i.default.instance.bulletType=c.default.BULLET_TYPE.E_ONE;else if(e.currentTarget!=this.bulletType[1].node)e.currentTarget==this.bulletType[2].node?1==i.default.instance.bullet_pao?i.default.instance.bulletType=c.default.BULLET_TYPE.E_BOMB:(a.default.instance.isPause=!0,(!this.uiMgr||0==this.uiMgr.isValid)&&(t=cc.find("Canvas"),this.gameCtrl=t.getComponent(o.default),this.uiMgr=t.getComponent(d.default)),this.uiMgr.showTipOKCancel("\u770b\u89c6\u9891\u53ef\u4ee5\u89e3\u9501 \u8fdc\u7a0b\u70ae\uff01\n\u53ef\u4ee5\u653b\u51fb\u65e0\u6cd5\u5230\u8fbe\u7684\u533a\u57df\uff01",function(){console.log("---bb 001"),this.watchVideoAd()}.bind(this),function(){a.default.instance.isPause=!1,cc.director.resume()}.bind(this)),cc.director.pause()):e.currentTarget==this.bulletType[3].node?1==i.default.instance.bullet_fllow?i.default.instance.bulletType=c.default.BULLET_TYPE.E_FLLOW:(a.default.instance.isPause=!0,(!this.uiMgr||0==this.uiMgr.isValid)&&(t=cc.find("Canvas"),this.gameCtrl=t.getComponent(o.default),this.uiMgr=t.getComponent(d.default)),this.uiMgr.showTipOKCancel("\u770b\u89c6\u9891\u53ef\u4ee5\u89e3\u9501 \u8ddf\u8e2a\u70ae\uff01\n\u53ef\u4ee5\u8ffd\u8e2a\u654c\u65b9\uff01",function(){console.log("---cc 001"),this.watchVideoAd1()}.bind(this),function(){a.default.instance.isPause=!1,cc.director.resume()}.bind(this)),cc.director.pause()):e.currentTarget==this.bulletType[4].node&&(1==i.default.instance.bullet_power?i.default.instance.bulletType=c.default.BULLET_TYPE.E_POWER_BOMB:(a.default.instance.isPause=!0,(!this.uiMgr||0==this.uiMgr.isValid)&&(t=cc.find("Canvas"),this.gameCtrl=t.getComponent(o.default),this.uiMgr=t.getComponent(d.default)),this.uiMgr.showTipOKCancel("\u770b\u89c6\u9891\u53ef\u4ee5\u89e3\u9501 \u8d85\u7ea7\u70ae\uff01\n\u6a2a\u626b\u4e00\u5207\u969c\u788d\u7269\uff01",function(){console.log("---dd 001"),cc.sys.browserType==cc.sys.BROWSER_TYPE_WECHAT_GAME?this.watchVideoAd2():(a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_POWER_BOMB,i.default.instance.bullet_power=1,i.default.instance.saveData("nnnnnnnn1"),this.refreshBulletType(i.default.instance.bulletType),this.selectAni(this.select.node))}.bind(this),function(){a.default.instance.isPause=!1,cc.director.resume()}.bind(this)),cc.director.pause()));else if(1==i.default.instance.bullet_three)i.default.instance.bulletType=c.default.BULLET_TYPE.E_THREE;else{if(a.default.instance.isPause=!0,!this.uiMgr||0==this.uiMgr.isValid){var t=cc.find("Canvas");this.gameCtrl=t.getComponent(o.default),this.uiMgr=t.getComponent(d.default)}this.uiMgr.showTipOKCancel("\u770b\u89c6\u9891\u53ef\u4ee5\u89e3\u9501 \u4e09\u8fde\u53d1\uff01\n\u706b\u529b\u8d85\u5f3a\uff01",function(){console.log("---xx 001"),cc.sys.browserType==cc.sys.BROWSER_TYPE_WECHAT_GAME?this.watchVideoAd3():(a.default.instance.isPause=!1,cc.director.resume(),i.default.instance.bulletType=c.default.BULLET_TYPE.E_THREE,i.default.instance.bullet_three=!0,i.default.instance.saveData("nnnnnnn2"),this.refreshBulletType(i.default.instance.bulletType),this.selectAni(this.select.node))}.bind(this),function(){a.default.instance.isPause=!1,cc.director.resume()}.bind(this)),cc.director.pause()}this.refreshBulletType(i.default.instance.bulletType)},t.prototype.lookRebornAD=function(e,t,n){},t.prototype.refreshBulletType=function(e){var t;1==i.default.instance.bullet_three&&(t=this.bulletType[1].node.getChildByName("lock"))&&(t.active=!1),1==i.default.instance.bullet_pao&&(t=this.bulletType[2].node.getChildByName("lock"))&&(t.active=!1),1==i.default.instance.bullet_fllow&&(t=this.bulletType[3].node.getChildByName("lock"))&&(t.active=!1),1==i.default.instance.bullet_power&&(t=this.bulletType[4].node.getChildByName("lock"))&&(t.active=!1),e==c.default.BULLET_TYPE.E_ONE?(this.select.node.x=this.bulletType[0].node.x,this.select.node.y=this.bulletType[0].node.y):e==c.default.BULLET_TYPE.E_THREE?(this.select.node.x=this.bulletType[1].node.x,this.select.node.y=this.bulletType[1].node.y):e==c.default.BULLET_TYPE.E_BOMB?(this.select.node.x=this.bulletType[2].node.x,this.select.node.y=this.bulletType[2].node.y):e==c.default.BULLET_TYPE.E_FLLOW?(this.select.node.x=this.bulletType[3].node.x,this.select.node.y=this.bulletType[3].node.y):e==c.default.BULLET_TYPE.E_POWER_BOMB&&(this.select.node.x=this.bulletType[4].node.x,this.select.node.y=this.bulletType[4].node.y)},t.prototype.selectAni=function(e){var t=cc.scaleTo(.5,2);t.easing(cc.easeBackIn());var n=cc.sequence(t,cc.callFunc(function(){var t=cc.scaleTo(.5,1);e.runAction(t)}.bind(this)));e.runAction(n)},t.prototype.onClickPause=function(){this.pauseGroup.active=!0,this.showBannerAd(),cc.director.pause()},t.prototype.clickMenuBtn=function(){this.hideBannerAD(),a.default.instance.reset(),cc.director.loadScene("mainScene"),cc.director.resume()},t.prototype.clickRetryBtn=function(){this.pauseGroup.active=!1,this.hideBannerAD(),a.default.instance.reset(),cc.find("Canvas").getComponent(o.default).reset(),this.countDownAni(),cc.director.resume()},t.prototype.clickContinueBtn=function(){this.pauseGroup.active=!1,this.hideBannerAD(),cc.director.resume()},t.prototype.clickUseFightBtn=function(e){console.log(e),i.default.instance.useFightBtn=1==e.isChecked?1:0,this.refreshArrow()},t.prototype.clickFightBtn=function(){var e=this.gameCtrl.hero.curMoveDir;e.normalizeSelf();var t=this.gameCtrl.hero.node.getPosition().add(cc.v2(e.x,e.y).mulSelf(200));i.default.instance.bulletType==c.default.BULLET_TYPE.E_ONE?this.gameCtrl.hero.fire(e,t,this.gameCtrl.bgImg.node):i.default.instance.bulletType==c.default.BULLET_TYPE.E_THREE?this.gameCtrl.hero.fireThree(e,t,this.gameCtrl.bgImg.node):i.default.instance.bulletType==c.default.BULLET_TYPE.E_BOMB?this.gameCtrl.hero.firePao(e,t,this.gameCtrl.bgImg.node):i.default.instance.bulletType==c.default.BULLET_TYPE.E_FLLOW?this.gameCtrl.hero.fireFllow(e,t,this.gameCtrl.bgImg.node):i.default.instance.bulletType==c.default.BULLET_TYPE.E_POWER_BOMB&&this.gameCtrl.hero.firePowerBomb(e,t,this.gameCtrl.bgImg.node)},t.prototype.refreshArrow=function(){1==i.default.instance.useFightBtn?(this.gameCtrl.hero.arrNode.active=!0,this.fightBtn.node.active=!0):(this.gameCtrl.hero.arrNode.active=!1,this.fightBtn.node.active=!1)},t.prototype.clickPassBtn=function(){cc.director.resume(),this.pauseGroup.active=!1,this.gameCtrl.enemyManager.removeAll(),this.gameCtrl.checkGameState()},t.prototype.showBannerAd=function(){},t.prototype.hideBannerAD=function(){},__decorate([p(cc.Label)],t.prototype,"score",void 0),__decorate([p(cc.Node)],t.prototype,"pauseGroup",void 0),__decorate([p(cc.Sprite)],t.prototype,"curBlood",void 0),__decorate([p(cc.Sprite)],t.prototype,"select",void 0),__decorate([p(cc.Button)],t.prototype,"pauseBtn",void 0),__decorate([p(cc.Button)],t.prototype,"bulletType",void 0),__decorate([p(cc.Button)],t.prototype,"fightBtn",void 0),__decorate([p(l.default)],t.prototype,"joyStickBG",void 0),__decorate([p(cc.Label)],t.prototype,"cd_time",void 0),__decorate([p(cc.Node)],t.prototype,"cdNode",void 0),t=__decorate([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../GameUtils":"GameUtils","../gamecore/managers/GameManager":"GameManager","./GameCtrl":"GameCtrl","./GameData":"GameData","./Globaldef":"Globaldef","./JoystickBG":"JoystickBG","./TankDataMgr":"TankDataMgr","./UIManager":"UIManager"}],GameUtils:[function(e,t,n){"use strict";cc._RF.push(t,"7b60elJuqlHL7ngukcCpoUT","GameUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./gamecore/wechat/WXRewardVideoAd"),a=e("./gamecore/managers/GameManager"),i=e("./gamecore/wechat/WXEventNames"),r=e("./gamecore/wechat/WXUtils"),s=e("./gamecore/deer/DeerSDK"),c=e("./gamecore/wechat/WXShare"),l=e("./module/data/MainDataMgr"),d=e("./control/point/BuriedPoints"),u=e("./view/stageMode/GameConfig"),h=e("./module/data/StageDataMgr"),p=e("./view/mainscene/HpGift"),f=e("./control/WXScreenAdMgr"),g=e("./GameStart"),m=cc._decorator,_=m.ccclass,y=(m.property,function(){function e(){this.sucCallbackFunc=null,this.failCallbackFunc=null,this.errCallbackFunc=null,this._mapJsonData=null,this._tiledMapAsset=null,this.assertArray=[],this.tryTimeArr={}}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),e.prototype.showVideoAd=function(e,t,n){this.sucCallbackFunc=e,this.failCallbackFunc=t,this.errCallbackFunc=n,cc.sys.platform!==cc.sys.WECHAT_GAME&&this.errCallbackFunc&&(console.log("\u975e\u5fae\u4fe1\u73af\u5883\u4e0b\u8fd4\u56de\u6210\u529f"),this.sucCallbackFunc()),o.default.isReady?(a.default.eventManager.addEventListener(i.default.REWARD_VIDEO_AD_CLOSE,this.videoBack,this),a.default.eventManager.addEventListener(i.default.REWARD_VIDEO_AD_COMPLETE,this.videoBack,this),a.default.eventManager.addEventListener(i.default.REWARD_VIDEO_AD_ERROR,this.videoBack,this),o.default.show()):(r.default.showToast("\u89c6\u9891\u5e7f\u544a\u5c1a\u672a\u51c6\u5907"),this.errCallbackFunc&&this.errCallbackFunc())},e.prototype.videoBack=function(e){a.default.eventManager.removeEventListener(i.default.REWARD_VIDEO_AD_CLOSE,this.videoBack,this),a.default.eventManager.removeEventListener(i.default.REWARD_VIDEO_AD_COMPLETE,this.videoBack,this),a.default.eventManager.removeEventListener(i.default.REWARD_VIDEO_AD_ERROR,this.videoBack,this),e.type==i.default.REWARD_VIDEO_AD_COMPLETE?(r.default.showToast("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u6210\u529f"),this.errCallbackFunc&&this.sucCallbackFunc()):(r.default.showToast("\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u5931\u8d25"),this.failCallbackFunc&&this.failCallbackFunc())},e.showAlert=function(e,t,n){n=function(){console.log("\u5fae\u4fe1\u63d2\u5c4f\u5e7f\u544ashowAlert"),f.default.instance.showRandAd()},r.default.showAlert("\u5e7f\u544a\u53d6\u6d88",e,"\u91cd\u65b0\u89c2\u770b","\u77e5\u9053\u4e86",t,n)},e.prototype.playFailOnShare=function(e,n){if(0!=s.default.instance.isOnline){var o=s.default.instance.game_config;if(o){var a=o.adToSharingSwitch,i=o.dailySharingLimit;if(1==a){var r=l.default.instance.getData(l.default.KEY_SHARE_COUNT),c=r[n];void 0==c?(c=1,this.onShare(function(){e(1),r[n]=c,l.default.instance.setData(l.default.KEY_SHARE_COUNT,r,!0)})):c<i?this.onShare(function(){c++,r[n]=c,l.default.instance.setData(l.default.KEY_SHARE_COUNT,r,!0),e(1)}):(t.showToast("\u4eca\u65e5\u83b7\u53d6\u5956\u52b1\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"),e(2))}}}},e.buriedPoint=function(e,t){if(cc.sys.platform==cc.sys.WECHAT_GAME){var n="";n=void 0!=t?d.default.pointwhil[e-1]+"("+t+")":d.default.pointwhil[e-1],3==e?wx.aldSendEvent(d.default.pointsname[e-1],{type:e,content:d.default.pointsname[e-1],data:t}):e<=3&&wx.aldSendEvent(d.default.pointsname[e-1],n)}},e.prototype.onShare=function(e,t){var n=this.shareData();c.default.shareApp(n.data,n.img,null,e,t)},e.prototype.shareData=function(){var e=s.default.instance.game_getAShareData();return null==e?{data:"\u5766\u514b\u4e4b\u795e",img:u.default.gameCdn+"config/defut.png"}:{data:e.share_info,img:e.share_img}},Object.defineProperty(e.prototype,"serverTime",{get:function(){return s.default.instance.serverTime},enumerable:!0,configurable:!0}),e.prototype.substrName=function(e,t){return void 0===e||null==e?"":(e.length>t&&(e=e.substring(0,t)+"..."),e)},e.prototype.showLoading=function(e){if("undefined"!=typeof wx)try{wx.showLoading({title:e,mask:!0})}catch(e){}},e.prototype.closeLoading=function(){if("undefined"!=typeof wx)try{wx.hideLoading()}catch(e){}},e.showToast=function(e,t){r.default.showToast(e,t)},e.prototype.getFormatBySecond=function(e){if(void 0===e&&(e=0),e<=0)return"00:00:00";var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),o=Math.floor((e-3600*t)%60);return(0==t?"00":t<10?"0"+t:""+t)+":"+(0==n?"00":n<10?"0"+n:""+n)+":"+(0==o?"00":o<10?"0"+o:""+o)},e.prototype.limit=function(e,t){e=Math.min(e,t);var n=(t=Math.max(e,t))-e;return e+Math.random()*n},e.prototype.limitInteger=function(e,t){return Math.floor(this.limit(e,t+1))},Object.defineProperty(e.prototype,"mapJsonData",{get:function(){return this._mapJsonData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tiledMapAsset",{get:function(){return this._tiledMapAsset},enumerable:!0,configurable:!0}),e.prototype.loadSceneWithOperate=function(e){if("map"==e){if(h.default.CUR_MODE==u.MODE_TYPE_STRUCT.MODE1&&h.default.CUR_LEVEL<=64)return e="map"+h.default.CUR_LEVEL,void t.instance.loadScene(e);if(t.fileLock)return void r.default.showToast("\u6587\u4ef6\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e");t.fileLock=!0;var n,o,a=setTimeout(function(){t.fileLock&&(t.fileLock=!1)},5e3);if(n=h.default.CUR_MODE+1+"/"+(h.default.CUR_MODE+1)+"map"+h.default.CUR_LEVEL,o="mode/"+(h.default.CUR_MODE+1)+"tmx"+h.default.CUR_LEVEL,console.log("JSON\u540d\uff1a"+n,"\u5730\u56fetmx\u540d\uff1a"+o),t.mapSceneNodePool){if(t.mapSceneNodePool.size()<80)for(i=t.mapSceneNodePool.size();i<80;i++)t.mapSceneNodePool.put(new cc.Node)}else{t.mapSceneNodePool=new cc.NodePool;for(var i=0;i<80;i++)t.mapSceneNodePool.put(new cc.Node)}var s=0;if(cc.sys.platform==cc.sys.WECHAT_GAME){var c=h.default.CUR_MODE+1+"map"+h.default.CUR_LEVEL+".json",l=wx.getFileSystemManager();l.readFile({filePath:wx.env.USER_DATA_PATH+"/"+(h.default.CUR_MODE+1)+"/"+c,encoding:"utf-8",success:function(n){t.instance._mapJsonData=JSON.parse(n.data),console.log("\u52a0\u8f7d\u5730\u56fe\u5b8c\u6210"),2==++s&&(a&&clearTimeout(a),t.fileLock=!1,t.instance.loadScene(e))},fail:function(n){wx.downloadFile({url:t.MAP_REMOTE_URL+(h.default.CUR_MODE+1)+".zip",success:function(n){var o=n.tempFilePath;l.unzip({zipFilePath:o,targetPath:wx.env.USER_DATA_PATH,success:function(n){console.log("\u89e3\u538b\u7f29\u6210\u529f",n),l.readFile({filePath:wx.env.USER_DATA_PATH+"/"+(h.default.CUR_MODE+1)+"/"+c,encoding:"utf-8",success:function(n){console.log("\u89e3\u538b\u7f29\u5e76\u4e14\u52a0\u8f7d\u5730\u56fe\u5b8c\u6210"),t.instance._mapJsonData=JSON.parse(n.data),2==++s&&(a&&clearTimeout(a),t.fileLock=!1,t.instance.loadScene(e))},complete:function(e,t){console.log("\u52a0\u8f7d\u5b8c\u6210")}})},fail:function(e){console.log("\u89e3\u538b\u7f29\u5931\u8d25",e);for(var n=function(e){e!=h.default.CUR_MODE+1&&l.stat({path:wx.env.USER_DATA_PATH+"/"+e,success:function(t){console.log(t.stats.isDirectory(),"\u662f\u6587\u4ef6\u5939"),t.stats.isDirectory()&&l.rmdir({dirPath:wx.env.USER_DATA_PATH+"/"+e,recursive:!0,success:function(t){console.log("\u5220\u9664\u76ee\u5f55"+wx.env.USER_DATA_PATH+"/"+e+"\u6210\u529f")},complete:function(t){console.log("\u5220\u9664\u76ee\u5f55"+wx.env.USER_DATA_PATH+"/"+e+"\u5b8c\u6210")}})},complete:function(e){console.log(e,"\u89e3\u538b\u7f29\u5931\u8d25")}})},o=1;o<5;o++)n(o);t.fileLock=!1}})},fail:function(e){console.log("\u4e0b\u8f7d\u5931\u8d25"),t.fileLock=!1}}).onProgressUpdate(function(e){console.log("\u4e0b\u8f7d\u7684\u8fdb\u5ea6:"+e.progress)})},complete:function(e,t){console.log("readFile\u52a0\u8f7d\u5b8c\u6210")}})}else cc.loader.load(t.MAP_REMOTE_URL+n+".json",function(n,o){n?console.log(n):(t.instance._mapJsonData=o,s++,console.log("\u52a0\u8f7d\u5730\u56fe\u5b8c\u6210"),2==s&&(a&&clearTimeout(a),t.fileLock=!1,t.instance.loadScene(e)))});t.loadRes(o,cc.TiledMapAsset,!1,function(n){t.instance._tiledMapAsset=n,2==++s&&(a&&clearTimeout(a),t.fileLock=!1,t.instance.loadScene(e))})}else this.loadScene(e)},e.prototype.loadScene=function(e){var n=this;cc.director.preloadScene(e,function(){},function(o){if(o)n.loadSceneWithOperate(e);else if(cc.director.loadScene(e),-1!=e.indexOf("map")){for(var a=h.default.instance.getData(h.default.KEY_TRY_STAGE_COUNT_ARR),i=0;i<h.default.CUR_LEVEL;i++)a[h.default.CUR_MODE][i]||(a[h.default.CUR_MODE][i]=0),i==h.default.CUR_LEVEL-1&&a[h.default.CUR_MODE][i]++;h.default.instance.setData(h.default.KEY_TRY_STAGE_COUNT_ARR,a);var r=JSON.stringify({mode:h.default.CUR_MODE,level:i});t.buriedPoint(18,r)}})},e.loadRes=function(e,n,o,a){void 0===o&&(o=!0),void 0===a&&(a=null),cc.loader.loadRes(e,n,function(n,o){n?console.log(e,"\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u52a0\u8f7d",t.instance.tryTimeArr[e]):a&&a(o)})},e.prototype.wxOnshow=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.onShow(function(e){u.default.instance.scene=e.scene+""})},e.prototype.setWXItemLocation=function(e){if(cc.sys.platform===cc.sys.WECHAT_GAME){var t=wx.getSystemInfoSync(),n=cc.winSize.width/t.screenWidth,o=wx.getMenuButtonBoundingClientRect(),a=o.left*n-e.width/2,i=cc.winSize.height-o.top*n-o.height*n/2,r=cc.find("Canvas").convertToNodeSpaceAR(cc.v2(a,i));e.position=r}},e.prototype.isWXonHide=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.onHide(function(){console.error("\u79bb\u5f00\u6e38\u620f,\u4fdd\u5b58\u79bb\u7ebf\u65f6\u95f4TODO")})},e.prototype.wxGetLaunchOptionsSync=function(){if(cc.sys.platform===cc.sys.WECHAT_GAME){var e=wx.getLaunchOptionsSync();u.default.instance.scene=e.scene+""}},e.prototype.wxOpenCustomerServiceConversation=function(){"undefined"!=typeof wx&&wx.openCustomerServiceConversation()},e.timeFormat=function(e){var t=new Date(e);return(t.getMinutes()>9&&t.getMinutes()||"0"+t.getMinutes())+":"+(t.getSeconds()>9&&t.getSeconds()||"0"+t.getSeconds())},e.prototype.openKeyGiftEvent=function(e,n){void 0===n&&(n=1),t.loadRes("prefabs/hall/hpGiftPanel",cc.Prefab,!0,function(t){var o=cc.instantiate(t);o.getComponent(p.default).tarAniNode=e,cc.find("Canvas").addChild(o,n),1080==cc.winSize.width&&(o.scaleX=1.45,o.scaleY=1.45)})},e._instance=null,e.MAP_REMOTE_URL="https://xz-cdn.youkongwan.com/game/mrbullet/map/",e.mapSceneNodePool=null,e.fileLock=!1,e.loadPfb=function(e,t,n){cc.loader.loadRes(e,t,function(e,t){if(n){var o=new cc.Node;o.addComponent(g.default).init(t.json,o),n(null,o)}})},e.loadJSON=function(e,t){cc.loader.loadRes(e,cc.JsonAsset,function(e,n){t&&t(null,n.json)})},e=t=__decorate([_],e)}());n.default=y,cc._RF.pop()},{"./GameStart":"GameStart","./control/WXScreenAdMgr":"WXScreenAdMgr","./control/point/BuriedPoints":"BuriedPoints","./gamecore/deer/DeerSDK":"DeerSDK","./gamecore/managers/GameManager":"GameManager","./gamecore/wechat/WXEventNames":"WXEventNames","./gamecore/wechat/WXRewardVideoAd":"WXRewardVideoAd","./gamecore/wechat/WXShare":"WXShare","./gamecore/wechat/WXUtils":"WXUtils","./module/data/MainDataMgr":"MainDataMgr","./module/data/StageDataMgr":"StageDataMgr","./view/mainscene/HpGift":"HpGift","./view/stageMode/GameConfig":"GameConfig"}],GameValues:[function(e,t,n){"use strict";var o;cc._RF.push(t,"7d6bfVaXp9FAq05Rssr//mz","GameValues"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.DEFAULT="default",e.ROTATED_LEFT="rotatedLeft",e.ROTATED_RIGHT="rotatedRight",e.UPSIDE_DOWN="upsideDown"}(o=n.Orientation||(n.Orientation={}));var a,i=function(){function e(){}return Object.defineProperty(e,"canvas",{get:function(){try{return cc.game.canvas}catch(e){}try{return cc.Game.canvas}catch(e){}return null},enumerable:!0,configurable:!0}),e.saveLocalData=function(e,t){try{cc.sys.localStorage.setItem("gv_"+e,t)}catch(e){}},e.getLocalData=function(e){try{return cc.sys.localStorage.getItem("gv_"+e)}catch(e){}},Object.defineProperty(e,"enableLog",{get:function(){return e._enableLog},set:function(t){e._enableLog!=t&&(e._enableLog=t,null==e._originalLogFun&&(e._originalLogFun=console.log,console.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._enableLog&&e._originalLogFun.apply(null,t),e.logHandler&&e.logHandler(t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"currentPlatform",{get:function(){return 0==e._currentPlatform&&("undefined"!=typeof BK?e.currentPlatform=a.QQCM:"undefined"!=typeof tt?e.currentPlatform=a.TOUTIAO:"undefined"!=typeof wx?e.currentPlatform=a.WECHAT:"undefined"!=typeof qg?e.currentPlatform=a.OPPO:"undefined"!=typeof FBInstant?e.currentPlatform=a.FACEBOOK:e.currentPlatform=a.WECHAT),e._currentPlatform},set:function(t){e._currentPlatform!=t&&(e._currentPlatform=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIOS",{get:function(){if(void 0==e._isIOS)try{navigator.userAgent&&(e._isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)),!e._isIOS&&navigator.platform&&(e._isIOS=/iPad|iPhone|iPod/.test(navigator.platform))}catch(t){e._isIOS=!1}return e._isIOS},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){if(void 0==e._isAndroid)try{var t=navigator.userAgent.toLowerCase();e._isAndroid=t.indexOf("android")>-1}catch(t){e._isAndroid=!1}return e._isAndroid},enumerable:!0,configurable:!0}),e.gameVersion="1.0",e.isDebug=!1,e.orientation=o.DEFAULT,e._enableLog=!0,e._originalLogFun=null,e.logHandler=null,e._currentPlatform=0,e._isIOS=void 0,e._isAndroid=void 0,e}();n.default=i,function(e){e[e.WECHAT=1]="WECHAT",e[e.TOUTIAO=2]="TOUTIAO",e[e.QQCM=3]="QQCM",e[e.FACEBOOK=4]="FACEBOOK",e[e.OPPO=5]="OPPO",e[e.IOS=6]="IOS"}(a=n.PlatformName||(n.PlatformName={})),cc._RF.pop()},{}],GestureManager:[function(e,t,n){"use strict";cc._RF.push(t,"90f48rfL7dKbJOFQ5zHzirJ","GestureManager"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=-1,i=Math.PI/12,r="left",s="right",c="down",l="up",d="can't tell",u=function(){function e(){return this._x=-1,this._y=-1,this._endX=-1,this._endY=-1,this._id=a,this}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endX",{get:function(){return this._endX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endY",{get:function(){return this._endY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._id=a},e.prototype.initialize=function(e,t,n){this._id=e,this._x=t,this._y=n,this._endX=t,this._endY=n},e.prototype.isReleased=function(){return this._id===a},e.prototype.isId=function(e){return this._id===e},e.prototype.setEndPosition=function(e,t){this._endX=e,this._endY=t},e.prototype.isValidDistance=function(e){var t=this._endY-this._y,n=this._endX-this._x;return Math.sqrt(n*n+t*t)>e},e}();function h(e){for(var t=0;t<e.length;t+=1){var n=e[t];void 0==n.id&&(void 0!=n._id?n.id=n._id:void 0!=n.__instanceId&&(n.id=n.__instanceId))}}(function(e){e[e.ST_POSSIBLE=0]="ST_POSSIBLE",e[e.ST_BEGAN=1]="ST_BEGAN",e[e.ST_MOVED=2]="ST_MOVED",e[e.ST_ENDED=3]="ST_ENDED",e[e.ST_CANCELED=4]="ST_CANCELED",e[e.ST_FAILED=5]="ST_FAILED"})(o||(o={})),n.__doTouches=h;var p,f=function(){function e(e){return this._status=o.ST_POSSIBLE,this._touchesInfo=[],this._callback=e,this._id="",this._startTime=-1,this._fingers=0,this._currentTouchIdCount=-1,this}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),e.prototype.clearTouchId=function(e){var t=this.getTouchIdPositionInCaptureArray(e);-1!==t&&this._touchesInfo[t].reset()},e.prototype.__setStatus=function(e){this._status=e},e.prototype.setCaptureTouchIdLen=function(e){this._fingers=e,this._touchesInfo=[];for(var t=0;t<e;t++)this._touchesInfo.push(new u);this._currentTouchIdCount=0},e.prototype.addTouchInfo=function(e){this._touchesInfo[this._currentTouchIdCount].initialize(e.id,e._point.x,e._point.y),this._currentTouchIdCount+=1},e.prototype.getCurrentTouchIdCount=function(){return this._currentTouchIdCount},e.prototype.resetTouchIds=function(){this._currentTouchIdCount=0,this._touchesInfo.forEach(function(e){e.reset()})},e.prototype.allCapturedTouchIdsReleased=function(){for(var e=0;e<this._touchesInfo.length;e++)if(!this._touchesInfo[e].isReleased())return!1;return!0},e.prototype.getTouchIdPositionInCaptureArray=function(e){if(!this._touchesInfo)return-1;for(var t=0;t<this._touchesInfo.length;t++)if(this._touchesInfo[t].isId(e))return t;return-1},e.prototype.getTouchInfoById=function(e){if(!this._touchesInfo)return null;for(var t=0;t<this._touchesInfo.length;t++)if(this._touchesInfo[t].isId(e))return this._touchesInfo[t];return null},e.prototype.getGestureElapsedTime=function(){return(new Date).getTime()-this._startTime},e.prototype.touchesBegan=function(e){var t=e.getTouches();h(t),-1===this._startTime&&(this._startTime=(new Date).getTime());for(var n=!1,a=0;a<t.length;a+=1){var i=t[a];if(!this.getTouchInfoById(i.id)){n=!0;break}}if(n)if(this.getCurrentTouchIdCount()<this._fingers&&this.getGestureElapsedTime()>300)this.failed();else if(this.getCurrentTouchIdCount()+e.getTouches().length>this._fingers)this.failed();else{for(a=0;a<t.length;a+=1)this.addTouchInfo(t[a]);this.getCurrentTouchIdCount()===this._fingers&&this.__setStatus(o.ST_BEGAN)}},e.prototype.touchesMoved=function(e){this.__setStatus(o.ST_MOVED)},e.prototype.touchesEnded=function(e){this.__setStatus(o.ST_ENDED)},e.prototype.touchesCanceled=function(e){this.__setStatus(o.ST_CANCELED),this.failed()},e.prototype.failed=function(){this.__setStatus(o.ST_FAILED)},e.prototype.reset=function(){this.__setStatus(o.ST_POSSIBLE),this.resetTouchIds(),this._startTime=-1},e.prototype.acceptsInput=function(){return!(this._status===o.ST_FAILED||this._status===o.ST_CANCELED||this._status===o.ST_ENDED)},e.prototype.getStatus=function(){return this._status},e}(),g=function(e){function t(t,n){var o=e.call(this,n)||this;return t|=0,o.setCaptureTouchIdLen(t),o.id="Tap "+t,o}return __extends(t,e),t.prototype.touchesMoved=function(t){e.prototype.touchesMoved.call(this,t);var n=t.getTouches();h(n);for(var o=0;o<n.length;o+=1){var a=this.getTouchIdPositionInCaptureArray(n[o].id);if(-1!=a){var i=this._touchesInfo[a],r=Math.abs(i.x-n[o]._point.x),s=Math.abs(i.y-n[o]._point.y);if(r>20||s>20)return void this.failed()}}},t.prototype.touchesEnded=function(t){var n=t.getTouches();if(h(n),this.getCurrentTouchIdCount()===this._fingers)if(this.getGestureElapsedTime()>300)this.failed();else{for(var o=0;o<n.length;o+=1)this.clearTouchId(n[o].id);this.allCapturedTouchIdsReleased()&&(e.prototype.touchesEnded.call(this,t),this._callback&&this._callback(this._fingers))}else this.failed()},t}(f),m=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.id="DoubleTap",o._prevTime=0,o}return __extends(t,e),t.prototype.touchesEnded=function(e){var t=e.getTouches();if(h(t),this.getCurrentTouchIdCount()!==this._fingers)return this._prevTime=0,void this.failed();if(this.getGestureElapsedTime()>180)return this._prevTime=0,void this.failed();for(var n=0;n<t.length;n+=1)this.clearTouchId(t[n].id);if(this.allCapturedTouchIdsReleased()){var o=(new Date).getTime();o-this._prevTime<300&&this._callback&&this._callback(t[0]),this._prevTime=o}},t}(g),_=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.id="LongTap "+t,o._timer=-1,o}return __extends(t,e),t.prototype.touchesBegan=function(t){e.prototype.touchesBegan.call(this,t),this.getStatus()===o.ST_BEGAN&&(this.__cancelTimer(),this._timer=setTimeout(this.__fireEvent.bind(this),800))},t.prototype.__fireEvent=function(){this._callback&&this._callback(this._fingers)},t.prototype.touchesEnded=function(e){this.__cancelTimer()},t.prototype.failed=function(){e.prototype.failed.call(this),this.__cancelTimer()},t.prototype.__cancelTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=-1)},t}(g),y=function(e){function t(t,n){var o=e.call(this,n)||this;return o._fingers=0|t,o.id="Swipe "+t,o.setCaptureTouchIdLen(t),o}return __extends(t,e),t.prototype.touchesEnded=function(t){var n=t.getTouches();if(h(n),this.getCurrentTouchIdCount()===this._fingers)if(this.getGestureElapsedTime()>1e3)this.failed();else{for(var o=0;o<n.length;o+=1){var a=n[o],i=a.id,r=this.getTouchInfoById(i);if(r&&(r.setEndPosition(a._point.x,a._point.y),!r.isValidDistance(100)))return void this.failed();this.clearTouchId(i)}if(this.allCapturedTouchIdsReleased()){var s=this.__getSwipeDirection(this._touchesInfo[0]);for(o=1;o<this.getCurrentTouchIdCount();o+=1)if(s!==this.__getSwipeDirection(this._touchesInfo[o]))return void this.failed();e.prototype.touchesEnded.call(this,t),this._callback&&this._callback(s)}}else this.failed()},t.prototype.__getSwipeDirection=function(e){var t=e.endY-e.y,n=Math.abs(Math.atan2(t,e.endX-e.x));return n<Math.PI/2&&n<i?s:n<Math.PI&&n>Math.PI-i?r:n>=Math.PI/2-i&&n<Math.PI/2+i?t<0?l:c:d},t}(f),v=function(e){function t(t){var n=e.call(this,t)||this;return n._contour=0,n._started=!1,n.setCaptureTouchIdLen(5),n.id="Pinch5",n}return __extends(t,e),t.prototype.touchesBegan=function(t){e.prototype.touchesBegan.call(this,t),this.getStatus()===o.ST_BEGAN&&(this._contour=this.__getContourLength())},t.prototype.__getContourLength=function(){var e=0,t=this._touchesInfo[0];return this._touchesInfo.forEach(function(n){e+=Math.sqrt((n.endX-t.endX)*(n.endX-t.endX)+(n.endY-t.endY)*(n.endY-t.endY))}),e},t.prototype.touchesMoved=function(e){var t=e.getTouches();if(h(t),this.acceptsInput())if(this.getCurrentTouchIdCount()===this._fingers){for(var n=0;n<t.length;n+=1){var o=t[n],a=o.id,i=this.getTouchInfoById(a);i&&i.setEndPosition(o._point.x,o._point.y)}var r=this.__getContourLength(),s=r/this._contour;this._started?this.__notify(s):r/this._contour<.94&&(this._started=!0,this.__notify(s))}else this.failed()},t.prototype.__notify=function(e){this._callback&&this._callback(e)},t.prototype.touchesEnded=function(t){var n=t.getTouches();if(h(n),this._started)if(this.getCurrentTouchIdCount()===this._fingers){for(var o=0;o<n.length;o+=1)this.clearTouchId(n[o].id);this.allCapturedTouchIdsReleased()&&(e.prototype.touchesEnded.call(this,t),this._callback&&this._callback(0))}else this.failed();else this.failed()},t.prototype.reset=function(){e.prototype.reset.call(this),this._started=!1},t}(f),M=function(e){function t(t){var n=e.call(this,t)||this;return n.setCaptureTouchIdLen(2),n.id="Pinch and Zoom",n._gestureRotation=0,n._gestureScale=0,n._scale=1,n._rotation=0,n._started=!1,n}return __extends(t,e),t.prototype.touchesBegan=function(t){if(e.prototype.touchesBegan.call(this,t),this.getStatus()===o.ST_BEGAN){var n=this._touchesInfo[0],a=this._touchesInfo[1];this._scale=1,this._rotation=0,this._gestureScale=Math.sqrt((a.y-n.y)*(a.y-n.y)+(a.x-n.x)*(a.x-n.x)),this._gestureRotation=Math.atan2(a.y-n.y,a.x-n.x)}},t.prototype.touchesMoved=function(t){var n=t.getTouches();if(h(n),this.acceptsInput()&&this.getCurrentTouchIdCount()===this._fingers){for(var o=0;o<n.length;o+=1){var a=n[o],i=a.id,r=this.getTouchInfoById(i);r&&r.setEndPosition(a._point.x,a._point.y)}if(!this._started){if(this._gestureManager.hasGesture(p.LONGTAP)&&this.getGestureElapsedTime()>700)return void this.failed();for(o=0;o<this._touchesInfo.length;o++)this._touchesInfo[o].isValidDistance(20);this._started=!0}e.prototype.touchesMoved.call(this,t);var s=this._touchesInfo[0],c=this._touchesInfo[1],l=Math.atan2(c.endY-s.endY,c.endX-s.endX);this._rotation+=l-this._gestureRotation,this._gestureRotation=l;var d=Math.sqrt((c.endY-s.endY)*(c.endY-s.endY)+(c.endX-s.endX)*(c.endX-s.endX)),u=this._scale+d/this._gestureScale-1;u<.2?this._scale=.2:(this._scale=u,this._gestureScale=d);var f=s.endX-s.x,g=s.endY-s.y;this._callback&&this._callback({scale:this._scale,rotation:180*this._rotation/Math.PI,x:f,y:g})}},t.prototype.touchesEnded=function(t){this.allCapturedTouchIdsReleased()?e.prototype.touchesEnded.call(this,t):this.failed()},t.prototype.reset=function(){e.prototype.reset.call(this),this._started=!1},t}(f),C=function(){function e(e){return this.__onGestures=[],this._gestureRecognizerList=[],this._touchIds=[],this._target=null,this._touchStartFn=this.__touchStartHandler.bind(this),this._touchMoveFn=this.__touchMoveHandler.bind(this),this._touchEndFn=this.__touchEndHandler.bind(this),this._touchCancelFn=this.__touchCancelHandler.bind(this),e&&this.__setTarget(e),this}return e.prototype.__findIdPos=function(e){for(var t=0;t<this._touchIds.length;t++)if(this._touchIds[t]===e)return t;return-1},e.prototype.__setTarget=function(e){this._target&&(this._target.off(cc.Node.EventType.TOUCH_START,this._touchStartFn,this),this._target.off(cc.Node.EventType.TOUCH_MOVE,this._touchMoveFn,this),this._target.off(cc.Node.EventType.TOUCH_END,this._touchEndFn,this),this._target.off(cc.Node.EventType.TOUCH_CANCEL,this._touchEndFn,this)),this._target=e,this._target&&(this._target.on(cc.Node.EventType.TOUCH_START,this._touchStartFn,this),this._target.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveFn,this),this._target.on(cc.Node.EventType.TOUCH_END,this._touchEndFn,this),this._target.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndFn,this))},e.prototype.__touchStartHandler=function(e){var t=e.getTouches();h(t);for(var n=0;n<t.length;n+=1){var o=t[n].id;-1===this.__findIdPos(o)&&this._touchIds.push(o)}this._gestureRecognizerList.forEach(function(t){t.acceptsInput()&&t.touchesBegan(e)})},e.prototype.__touchMoveHandler=function(e){h(e.getTouches()),this._gestureRecognizerList.forEach(function(t){t.acceptsInput()&&t.touchesMoved(e)})},e.prototype.__touchEndHandler=function(e){var t=e.getTouches();h(t);for(var n=0;n<t.length;n+=1){var o=t[n].id,a=this.__findIdPos(o);-1!==a&&this._touchIds.splice(a,1)}this._gestureRecognizerList.forEach(function(t){t.acceptsInput()&&t.touchesEnded(e)}),this.__shouldReset()},e.prototype.__touchCancelHandler=function(e){var t=e.getTouches();h(t);for(var n=0;n<t.length;n+=1){var o=t[n].id,a=this.__findIdPos(o);-1!==a&&this._touchIds.splice(a,1)}this._gestureRecognizerList.forEach(function(t){t.acceptsInput()&&t.touchesCanceled(e)}),this.__shouldReset()},e.prototype.__shouldReset=function(){0===this._touchIds.length&&this.__resetGestureRecognizers()},e.prototype.addGestureRecognizer=function(e){return e._gestureManager=this,this._gestureRecognizerList.push(e),this},e.prototype.__resetGestureRecognizers=function(){this._gestureRecognizerList.forEach(function(e){e.reset()})},e.prototype.hasGesture=function(e){return this.__onGestures.indexOf(e)>=0},e.prototype.on=function(e,t,n){switch(e){case p.TAP:this.addGestureRecognizer(new g(n,t));break;case p.LONGTAP:this.addGestureRecognizer(new _(n,t));break;case p.DOUBLETAP:this.addGestureRecognizer(new m(n,t));break;case p.SWIPE:this.addGestureRecognizer(new y(n,t));break;case p.PINCHZOOM:this.addGestureRecognizer(new M(t));break;case p.PINCH5:this.addGestureRecognizer(new v(t))}},e.prototype.destroy=function(){this.__setTarget(null)},e}();n.GestureManager=C,function(e){e.TAP="tap",e.LONGTAP="longtap",e.DOUBLETAP="doubletap",e.SWIPE="swipe",e.PINCHZOOM="pinchzoom",e.PINCH5="pinch5"}(p=n.GestureName||(n.GestureName={})),cc._RF.pop()},{}],Globaldef:[function(e,t,n){"use strict";cc._RF.push(t,"f5f06JuWR5MjofkFiY2EEFN","Globaldef"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.TagType=cc.Enum({BULLET_HERO:0,BULLET_ENEMY:1,WALL:2,ENEMY:3,HERO:4,ITEM:5,DONG:6}),e.Channel=cc.Enum({C_WX:1e4,C_TOUTIAO:10001,C_WEB:10002}),e.EnemyState=cc.Enum({S_IDLE:0,S_FIRE:1,S_PATROL:2,S_DEAD:3}),e.EnemyType=cc.Enum({E_GRAY:0,E_YELLOW:1,E_BLUE:2,E_RED:3,E_BOX:4,E_BOX_XUE:5,E_BOX_NORMAL:6,E_TONG_XUE:7,E_TONG:8,E_DONG:9,E_TREE_1:10,E_TREE_2:11,E_TREE_3:12,E_TREE_4:13,E_TREE_5:14,E_TREE_6:15,E_WALL_1:16,E_WALL_2:17,E_TREE_8:18,E_TREE_9:19,E_MAX:20,E_T_POWER:30}),e.BULLET_TYPE=cc.Enum({E_ONE:1,E_THREE:2,E_BOMB:3,E_FLLOW:4,E_POWER_BOMB:5,E_XX:6}),e.UI_ID=cc.Enum({E_LOGIN_UI:0,E_LEVELLIST_UI:1,E_GAME_END_UI:2,E_WAIT_UI:3,E_RANK_UI:4}),e.UI_NAME=["LoginUI","LevelListUI","GameEndUI","WaitingUI","RankUI"],e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],GoldenEggReceive:[function(e,t,n){"use strict";cc._RF.push(t,"53e76u5p8hA47ED3dkFtGd9","GoldenEggReceive"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/managers/GameManager"),a=e("../../gamecore/base/GameValues"),i=e("../../gamecore/wechat/WXRewardVideoAd"),r=e("../../gamecore/wechat/WXUtils"),s=e("../../gamecore/wechat/WXEventNames"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtGoldNum=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onReceive=function(e){},t.prototype.onCloseClickEvent=function(e){o.default.soundsManager.playTapSound(),this.onReceive(1)},t.prototype.onDestroy=function(){},t.prototype.rewardVideoBtnTouchHandler=function(e){o.default.soundsManager.playTapSound(),a.default.isDebug&&"undefined"==typeof wx?this.onReceive(3):i.default.isReady?(o.default.eventManager.addEventListener(s.default.REWARD_VIDEO_AD_CLOSE,this.rewardVideoEventsHandler,this),o.default.eventManager.addEventListener(s.default.REWARD_VIDEO_AD_ERROR,this.rewardVideoEventsHandler,this),o.default.eventManager.addEventListener(s.default.REWARD_VIDEO_AD_COMPLETE,this.rewardVideoEventsHandler,this),i.default.show()):r.default.showToast("\u5fae\u4fe1\u89c6\u9891\u6682\u65f6\u65e0\u6cd5\u5c55\u73b0!")},t.prototype.rewardVideoEventsHandler=function(e){o.default.eventManager.removeEventListener(s.default.REWARD_VIDEO_AD_CLOSE,this.rewardVideoEventsHandler,this),o.default.eventManager.removeEventListener(s.default.REWARD_VIDEO_AD_ERROR,this.rewardVideoEventsHandler,this),o.default.eventManager.removeEventListener(s.default.REWARD_VIDEO_AD_COMPLETE,this.rewardVideoEventsHandler,this),e.type==s.default.REWARD_VIDEO_AD_COMPLETE&&this.onReceive(3)},t.prototype.onShareClickEvent=function(e){o.default.soundsManager.playTapSound(),console.log("\u5206\u4eab",'=="\u5206\u4eab"==')},__decorate([d(cc.Label)],t.prototype,"txtGoldNum",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../gamecore/base/GameValues":"GameValues","../../gamecore/managers/GameManager":"GameManager","../../gamecore/wechat/WXEventNames":"WXEventNames","../../gamecore/wechat/WXRewardVideoAd":"WXRewardVideoAd","../../gamecore/wechat/WXUtils":"WXUtils"}],GoldenEgg:[function(e,t,n){"use strict";cc._RF.push(t,"215bbGm0BRDSYVuHe25Sfa1","GoldenEgg"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/wechat/WXDevice"),a=e("../../gamecore/wechat/WXBannerAd"),i=e("../../gamecore/managers/GameManager"),r=e("../../module/data/StageDataMgr"),s=e("../../gamecore/deer/DeerSDK"),c=e("../../GameUtils"),l=e("../stageMode/AudioManager"),d=e("../../control/NodePoolMgr"),u=e("../stageMode/PrfabsManager"),h=e("../stageMode/BulletController"),p=e("../stageMode/Common"),f=cc._decorator,g=f.ccclass,m=f.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progress=null,t.btnHammer=null,t.btnClose=null,t.fireNode=null,t.hand=null,t.progressNum=0,t.bLocked=!1,t._touchIntervalTime=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;a.default.currentAd&&a.default.currentAd.hide(),cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0;var t=u.default.instance.prfabsAry.bullet;d.default.instance.createNodePool(t.name,t,35),this.progressNum=0,this.progress.progress=this.progressNum,this.btnHammer.on(cc.Node.EventType.TOUCH_END,this.onHitClickEvent,this),this.btnClose.on(cc.Node.EventType.TOUCH_END,this.onCloseClickEvent,this),this.btnClose.active=!1,this.scheduleOnce(function(){e.btnClose&&(e.btnClose.active=!0)},2)},t.prototype.start=function(){this.handRun(!0)},t.prototype.handRun=function(e){this.hand.stopAllActions(),e&&this.hand.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.2,.9),cc.scaleTo(.1,1))))},t.prototype.update=function(){var e=this;if(!this.bLocked){if(this.progressNum>=.85){this.bLocked=!0,this.progressNum=1,o.default.vibrateLong();var t=s.default.instance.game_config;t&&t.videoSafeuserRate>=Math.random()?this.watchVideo():(a.default.currentAd&&a.default.currentAd.show(),this.scheduleOnce(function(){r.default.IS_EGG_SUCC=!0,r.default.instance.goldEggLimit+=1,e.onCloseClickEvent(null)},2))}else this.progressNum<=.01?this.progressNum=0:this.progressNum-=.001;this.progress.progress=Number(this.progressNum)}},t.prototype.watchVideo=function(){var e=this,t=s.default.instance.game_config;t&&t.goldenEggEnergyBonus&&(r.default.IS_EGG_SUCC=!0,c.default.instance.showVideoAd(function(){r.default.instance.goldEggLimit+=1,e.onCloseClickEvent(null)},function(){c.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u83b7\u5f97"+t.goldenEggEnergyBonus+"\u4f53\u529b",function(){e.watchVideo()},function(){e.onCloseClickEvent(null)})},function(){c.default.instance.playFailOnShare(function(t){switch(t){case 1:r.default.instance.goldEggLimit+=1,e.onCloseClickEvent(null)}},"goldenEgg123")}))},t.prototype.onHitClickEvent=function(e){0==this.progressNum&&this.handRun(!1);var t=(new Date).getTime();if(!(t-this._touchIntervalTime<90)){this._touchIntervalTime=t;var n=0;this.progressNum>=1?l.default.instance.playSound("nobullet"):(this.progressNum<.55?n=.08:this.progressNum<.7?n=.028:this.progressNum<.8?n=.025:this.progressNum<1&&(n=.018),o.default.vibrateShort(),this.progressNum+=n,this.fired())}},t.prototype.fired=function(){l.default.instance.playSound("fired");var e=this.fireNode.parent.convertToWorldSpaceAR(this.fireNode.position),t=d.default.instance.getNodePool(u.default.instance.prfabsAry.bullet.name);t.getComponent(h.default)&&t.removeComponent(h.default),t.bulletCount=0,t.getComponent(cc.RigidBody).onEndContact=function(e,t,n){n.tag==p.default.Tag.tagPlat&&(0==t.node.getComponent(cc.PhysicsCircleCollider).sensor?l.default.instance.playSound("plat"):(t.node.getComponent(cc.PhysicsCircleCollider).sensor=!1,t.node.getComponent(cc.PhysicsCircleCollider).apply())),n.tag==p.default.Tag.tagBodyJoint&&(t.node.bulletCount++,t.node.bulletCount>40&&t.node.destroy())},t.getComponent(cc.PhysicsCircleCollider).sensor=!0,t.position=this.node.convertToNodeSpaceAR(e),cc.find("Canvas").addChild(t),this.bulletControllerComp=t.getComponent(h.default),e=cc.v2(0,200),this.bulletControllerComp.bulletBody.applyLinearImpulse(e,this.bulletControllerComp.bulletBody.getWorldCenter(),!0)},t.prototype.onCloseClickEvent=function(e){e&&i.default.soundsManager.playTapSound(),r.default.IS_FROM_EGGLAYER=!0,c.default.instance.loadSceneWithOperate("map")},t.prototype.onDestroy=function(){cc.director.getPhysicsManager().enabled=!1,cc.director.getCollisionManager().enabled=!1,d.default.instance.NodePoolclearUp(u.default.instance.prfabsAry.bullet.name)},__decorate([m(cc.ProgressBar)],t.prototype,"progress",void 0),__decorate([m(cc.Node)],t.prototype,"btnHammer",void 0),__decorate([m(cc.Node)],t.prototype,"btnClose",void 0),__decorate([m(cc.Node)],t.prototype,"fireNode",void 0),__decorate([m(cc.Node)],t.prototype,"hand",void 0),t=__decorate([g],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../control/NodePoolMgr":"NodePoolMgr","../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/managers/GameManager":"GameManager","../../gamecore/wechat/WXBannerAd":"WXBannerAd","../../gamecore/wechat/WXDevice":"WXDevice","../../module/data/StageDataMgr":"StageDataMgr","../stageMode/AudioManager":"AudioManager","../stageMode/BulletController":"BulletController","../stageMode/Common":"Common","../stageMode/PrfabsManager":"PrfabsManager"}],GrenadeCollider:[function(e,t,n){"use strict";cc._RF.push(t,"9a0c91/OLlKZ5RcXoYyI6Fw","GrenadeCollider"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("./GrenadeController"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grenadeController=null,t.soundCount=0,t.onBeginContact=function(e,t,n){if(n.tag==o.default.Tag.tagBodyJoint&&this.grenadeController.isBoom&&(e.disabled=!0),n.tag==o.default.Tag.tagPlat){var i=this.grenadeController.grenadeBody.getMass();this.grenadeController.isBoom||i<1.5&&this.soundCount<=3&&(a.default.instance.playSound("plat"),this.soundCount++)}},t}return __extends(t,e),__decorate([c(i.default)],t.prototype,"grenadeController",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./AudioManager":"AudioManager","./Common":"Common","./GrenadeController":"GrenadeController"}],GrenadeController:[function(e,t,n){"use strict";cc._RF.push(t,"581bf6TEYBNg5+fPko05v99","GrenadeController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AudioManager"),a=e("./PrfabsManager"),i=e("./GameConfig"),r=e("../../module/data/StageDataMgr"),s=e("./Common"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grenadeBody=null,t.bomImg=null,t.motionStreak=null,t.colliderNode=null,t.finshTime=3,t.isBoom=!1,t.particleNode=null,t.colliderSize=200,t.circleSize=2,t.isDestroy=!1,t}return __extends(t,e),t.prototype.start=function(){r.default.CUR_LEVEL>=21&&(this.finshTime=2),77==r.default.CUR_LEVEL?(this.circleSize=5,this.finshTime=1,this.colliderSize=250):42==r.default.CUR_LEVEL?(this.finshTime=3.2,this.colliderSize=450):80==r.default.CUR_LEVEL&&(this.finshTime=1.5),this.scheduleOnce(this.boomEffct,this.finshTime),7==r.default.CUR_LEVEL&&(this.circleSize=5,this.bomImg.scale=0,this.circleSize=.2)},t.prototype.boomEffct=function(){if(this.isBoom=!0,this.colliderNode.getComponent(cc.PhysicsBoxCollider)&&(this.colliderNode.getComponent(cc.PhysicsBoxCollider).sensor=!0,this.colliderNode.getComponent(cc.PhysicsBoxCollider).apply()),this.colliderNode.getComponent(cc.PhysicsCircleCollider)){this.colliderNode.getComponent(cc.PhysicsCircleCollider).sensor=!0,this.colliderNode.getComponent(cc.PhysicsCircleCollider).apply();var e=r.default.CUR_LEVEL;7!=e&&22!=e&&25!=e&&27!=e&&32!=e&&33!=e&&46!=e&&47!=e&&48!=e&&49!=e&&50!=e&&53!=e&&58!=e&&59!=e&&60!=e&&61!=e&&65!=e&&66!=e&&68!=e&&71!=e&&72!=e&&74!=e&&75!=e&&77!=e&&78!=e&&80!=e&&81!=e&&90!=e&&95!=e&&94!=e&&97!=e&&82!=e&&83!=e&&84!=e&&85!=e&&88!=e&&89!=e&&91!=e&&86!=e&&87!=e&&100!=e||r.default.CUR_MODE!=i.MODE_TYPE_STRUCT.MODE2||(this.colliderNode.getComponent(cc.RigidBody).type=cc.RigidBodyType.Animated)}o.default.instance.playSound("bomb"),this.particleNode=cc.instantiate(a.default.instance.prfabsAry.TNTEffectNode),this.particleNode.getComponent(cc.ParticleSystem).resetSystem(),this.colliderNode.addChild(this.particleNode),this.particleNode.active=!0,this.bomImg.active=!0,this.node.runAction(cc.fadeOut(.2))},t.prototype.update=function(e){this.motionStreak.node.position=this.colliderNode.position,this.isBoom&&(this.colliderNode.getComponent(cc.PhysicsCircleCollider).radius=cc.misc.lerp(this.colliderNode.getComponent(cc.PhysicsCircleCollider).radius,this.colliderSize,.2),this.colliderNode.getComponent(cc.PhysicsCircleCollider).apply(),this.bomImg.scale=cc.misc.lerp(this.bomImg.scale,this.circleSize,.1),this.colliderNode.getComponent(cc.PhysicsCircleCollider).radius>=this.colliderSize-.1&&(this.isDestroy||(this.isDestroy=!0,this.node.destroy(),this.node.dispatchEvent(new cc.Event.EventCustom(s.default.eventMessage.grendaDestroy,!0)))))},__decorate([d(cc.RigidBody)],t.prototype,"grenadeBody",void 0),__decorate([d(cc.Node)],t.prototype,"bomImg",void 0),__decorate([d(cc.MotionStreak)],t.prototype,"motionStreak",void 0),__decorate([d(cc.Node)],t.prototype,"colliderNode",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./Common":"Common","./GameConfig":"GameConfig","./PrfabsManager":"PrfabsManager"}],Guide:[function(e,t,n){"use strict";cc._RF.push(t,"6ead8858x9BSJwfyhmcPjd6","Guide"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../SoundMgr"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guideSpfmArr=[],t.guide=null,t}return __extends(t,e),t.prototype.start=function(){var e=this;o.default.instance.playTapSound(),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.node.destroy()},this)},__decorate([r(cc.SpriteFrame)],t.prototype,"guideSpfmArr",void 0),__decorate([r(cc.Sprite)],t.prototype,"guide",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../SoundMgr":"SoundMgr"}],Hero_physic:[function(e,t,n){"use strict";cc._RF.push(t,"e42e8VocptKUq6p3HKj3TLt","Hero_physic"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./TankDataMgr"),a=e("./GameData"),i=e("./Globaldef"),r=e("./EffManager"),s=e("./GameUI"),c=e("./Bullet_fllow"),l=e("./Raycast"),d=e("./UIManager"),u=e("./Bullet_power"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.body=null,t.sprite=null,t.top=null,t.bulletPrefab=null,t.bulletThreePrefab=null,t.bulletPaoPrefab=null,t.bulletFollowPrefab=null,t.bulletBombPrefab=null,t.bulletList=[],t.rayPrefab=null,t.arrNode=null,t.originPos=cc.v2(0,0),t.gameCtrl=null,t.ray=null,t.curHp=3,t.isDead=!1,t.keyDownMove=!1,t.joyStickBg=null,t.fllow_move=!0,t.notFllowCurTime=0,t.notFllowIntervalTime=1,t.tiledMapCom=null,t.tiledPointGroup=null,t.curMoveDir=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.originPos=this.node.getPosition(),this.node.on("mousedown",function(){console.log("Hello!")}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=0,this.body=this.getComponent(cc.RigidBody),this.body.fixedRotation=!0;var e=cc.find("Canvas/GameUI");e||(e=cc.find("Canvas/GameNewUI"));var t=e.getComponent(s.default);this.joyStickBg=t.joyStickBG},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.init=function(e){this.gameCtrl=e},t.prototype.reborn=function(){this.curHp=3,this.node.x=this.originPos.x,this.node.y=this.originPos.y,a.default.instance.m_curBlood=this.curHp,a.default.instance.m_isDirty=!0,this.isDead=!1,this.node.active=!0,this.body.linearVelocity=cc.v2(0,0);for(var e=0;e<this.bulletList.length;e++)this.bulletList[e].active=!1},t.prototype.reset=function(){var e=this;this.scheduleOnce(function(){e.curHp=3,e.isDead=!1,e.node.active=!0,e.body.linearVelocity=cc.v2(0,0);var t=cc.find("Canvas/bg/TiledMap");e.tiledMapCom=t.getComponent(cc.TiledMap),e.tiledPointGroup=e.tiledMapCom.getObjectGroup("point");for(var n=!1,o=e.tiledPointGroup.getObjects(),a=0;a<o.length;a++)if("hero"==o[a].name){var i=o[a].x+t.x,r=o[a].y;e.node.x=i,e.node.y=r,e.originPos.x=i,e.originPos.y=r,n=!0;break}for(n||(e.node.x=e.originPos.x,e.node.y=e.originPos.y),a=0;a<e.bulletList.length;a++)e.bulletList[a].active=!1})},t.prototype.update=function(e){this.joyStickBg&&this.joyStickBg._startMove?this.move(this.joyStickBg._dir,this.joyStickBg._angle):1==this.keyDownMove||(this.body.linearVelocity=cc.v2(0,0)),0==this.fllow_move&&(this.notFllowCurTime+=e,this.notFllowCurTime>=this.notFllowIntervalTime&&(this.notFllowCurTime=0,this.fllow_move=!0))},t.prototype.stopMove=function(){this.body.linearVelocity=cc.v2(0,0)},t.prototype.move=function(e,t){this.body&&(0==e.x&&0==e.y||(this.curMoveDir=cc.v2(e.x,e.y)),this.body.linearVelocity=e.mulSelf(.7),this.sprite.node.rotation=-t,1==this.fllow_move&&this.setFireAngle(t))},t.prototype.setFireAngle=function(e){this.top.node.rotation=-e,1==o.default.instance.useFightBtn&&(this.arrNode.rotation=-e)},t.prototype.addRay=function(){this.ray=cc.instantiate(this.rayPrefab),this.ray.parent=this.gameCtrl.bgImg.node;var e=this.ray.getComponent(l.default);e.setCenter(this.node.x,this.node.y),e.setTarget(500,500),this.ray&&this.ray.setPosition(0,0)},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.w:this.keyDownMove=!0,this.move(cc.v2(0,200),0);break;case cc.macro.KEY.s:this.keyDownMove=!0,this.move(cc.v2(0,-200),0);break;case cc.macro.KEY.a:this.keyDownMove=!0,this.move(cc.v2(-200,0),0);break;case cc.macro.KEY.d:this.keyDownMove=!0,this.move(cc.v2(200,0),0);break;case cc.macro.KEY.e:var t=cc.find("Canvas").getComponent(d.default);a.default.instance.m_isWin=!0,a.default.instance.isPause=!0,t.showUI(i.default.UI_NAME[i.default.UI_ID.E_GAME_END_UI])}},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.w:case cc.macro.KEY.s:case cc.macro.KEY.a:case cc.macro.KEY.d:this.keyDownMove=!1,this.body.linearVelocity=cc.v2(0,0)}},t.prototype.onHP=function(e){if(this.curHp+=e,a.default.instance.m_curBlood=this.curHp,a.default.instance.m_isDirty=!0,0>=this.curHp){this.gameCtrl.checkGameState(),this.node.active=!1,this.isDead=!0;for(var t=0;t<this.bulletList.length;t++)this.bulletList[t].active=!1;r.default.instance.addDieEff(this.node.getPosition(),this.node)}},t.prototype.fire=function(e,t,n,o,a){if(!this.isDead){if(this.fllow_move=!1,e=e.normalize(),!(s=this.getBulllet(i.default.BULLET_TYPE.E_ONE))){a||(a=this.bulletPrefab);var s=cc.instantiate(a);this.bulletList.push(s)}if(s.active=!0,s.parent=n,this.node.getPosition(),o)s.setPosition(o.x,o.y);else{var c=cc.v2(e.x,e.y),l=this.node.getPosition().addSelf(c.mulSelf(50));s.setPosition(l.x,l.y)}var d=s.getComponent(cc.RigidBody);d.linearVelocity=cc.v2(350*e.x,350*e.y),d.fixedRotation=!0;var u=s.getComponent("Bullet");u.bullet_type=i.default.BULLET_TYPE.E_ONE,u.canColNum=2,u.refreshAngle(),r.default.instance.addFireEff(s.getPosition(),this.node)}},t.prototype.fire_2=function(e,t,n,o,a){if(void 0===a&&(a=null),!this.isDead){if(this.fllow_move=!1,e=e.normalize(),!(r=this.getBulllet(i.default.BULLET_TYPE.E_ONE))){a||(a=this.bulletPrefab);var r=cc.instantiate(a);this.bulletList.push(r)}if(r.active=!0,r.parent=n,this.node.getPosition(),o)r.setPosition(o.x,o.y);else{var s=cc.v2(e.x,e.y),c=this.node.getPosition().addSelf(s.mulSelf(50));r.setPosition(c.x,c.y)}var l=r.getComponent(cc.RigidBody);l.linearVelocity=cc.v2(350*e.x,350*e.y),l.fixedRotation=!0;var d=r.getComponent("Bullet");return d.bullet_type=i.default.BULLET_TYPE.E_ONE,d.canColNum=2,d.refreshAngle(),r.getPosition()}},t.prototype.fireThree=function(e,t,n){if(!this.isDead){this.fllow_move=!1;var o=cc.v2(e.x,e.y).rotateSelf(.1),a=cc.v2(e.x,e.y).rotateSelf(-.1),i=this.node.getPosition().addSelf(e.mulSelf(50));this.fire_2(e,t,n,i),this.fire_2(o,t,n,i);var s=this.fire_2(a,t,n,i);r.default.instance.addFireEff(s,this.node)}},t.prototype.firePao=function(e,t,n,o){if(!this.isDead){this.fllow_move=!1;var a=this.node.convertToNodeSpaceAR(t),r=this.gameCtrl.hero.node.parent.convertToWorldSpaceAR(a),s=cc.instantiate(this.bulletPaoPrefab);this.bulletList.push(s),s.parent=n,s.active=!0;var c=e.mulSelf(50);r=r.subSelf(c);var l=this.node.getPosition().addSelf(c);o?s.setPosition(o.x,o.y):s.setPosition(l.x,l.y);var d=s.getComponent("Bullet_pao");d.bullet_type=i.default.BULLET_TYPE.E_BOMB,d.setTargetType(i.default.TagType.ENEMY),d.setTarget(r,t)}},t.prototype.fireFllow=function(e,t,n,o){if(!this.isDead){this.fllow_move=!1,e=e.normalize();var a=cc.instantiate(this.bulletFollowPrefab);this.bulletList.push(a),a.parent=n,a.active=!0;var r=this.node.getPosition();o?a.setPosition(o.x,o.y):a.setPosition(r.x,r.y),a.getComponent(cc.RigidBody).fixedRotation=!0;var s=a.getComponent(c.default);s.moveDir=e,s.startMove=!0,s.bullet_type=i.default.BULLET_TYPE.E_FLLOW,s.refreshAngle()}},t.prototype.firePowerBomb=function(e,t,n,o,a){if(!this.isDead){if(this.fllow_move=!1,e=e.normalize(),!(s=this.getBulllet(i.default.BULLET_TYPE.E_POWER_BOMB))){a||(a=this.bulletBombPrefab);var s=cc.instantiate(a);this.bulletList.push(s)}if(s.active=!0,s.parent=n,this.node.getPosition(),o)s.setPosition(o.x,o.y);else{var c=cc.v2(e.x,e.y),l=this.node.getPosition().addSelf(c.mulSelf(50));s.setPosition(l.x,l.y)}var d=s.getComponent(cc.RigidBody);d.linearVelocity=cc.v2(350*e.x,350*e.y),d.fixedRotation=!0;var h=s.getComponent(u.default);h.bullet_type=i.default.BULLET_TYPE.E_POWER_BOMB,h.canColNum=2,h.refreshAngle(),r.default.instance.addFireEff(s.getPosition(),this.node)}},t.prototype.getBulllet=function(e){for(var t=0;t<this.bulletList.length;t++)if(1!=this.bulletList[t].active){if(e==i.default.BULLET_TYPE.E_ONE){if(!this.bulletList[t].getComponent("Bullet"))continue;return this.bulletList[t]}if(e==i.default.BULLET_TYPE.E_BOMB){if(!this.bulletList[t].getComponent("Bullet_pao"))continue;return this.bulletList[t]}if(e==i.default.BULLET_TYPE.E_FLLOW){if(!this.bulletList[t].getComponent("Bullet_fllow"))continue;return this.bulletList[t]}}return null},__decorate([f(cc.RigidBody)],t.prototype,"body",void 0),__decorate([f(cc.Sprite)],t.prototype,"sprite",void 0),__decorate([f(cc.Sprite)],t.prototype,"top",void 0),__decorate([f(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([f(cc.Prefab)],t.prototype,"bulletThreePrefab",void 0),__decorate([f(cc.Prefab)],t.prototype,"bulletPaoPrefab",void 0),__decorate([f(cc.Prefab)],t.prototype,"bulletFollowPrefab",void 0),__decorate([f(cc.Prefab)],t.prototype,"bulletBombPrefab",void 0),__decorate([f(cc.Node)],t.prototype,"bulletList",void 0),__decorate([f(cc.Prefab)],t.prototype,"rayPrefab",void 0),__decorate([f(cc.Node)],t.prototype,"arrNode",void 0),__decorate([f(cc.Vec2)],t.prototype,"originPos",void 0),t=__decorate([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"./Bullet_fllow":"Bullet_fllow","./Bullet_power":"Bullet_power","./EffManager":"EffManager","./GameData":"GameData","./GameUI":"GameUI","./Globaldef":"Globaldef","./Raycast":"Raycast","./TankDataMgr":"TankDataMgr","./UIManager":"UIManager"}],Hero:[function(e,t,n){"use strict";cc._RF.push(t,"16e84bhD3tChpUtQVRQITfB","Hero"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchingNumber=0,t.collisionX=0,t.jumping=!1,t.collisionY=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on("mousedown",function(){console.log("Hello!")}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);var e=cc.director.getCollisionManager();e.enabled=!0,e.enabledDebugDraw=!0},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.w:console.log("Press w key"),this.node.y+=6;break;case cc.macro.KEY.s:console.log("Press s key"),this.node.y-=6;break;case cc.macro.KEY.a:console.log("Press a key");break;case cc.macro.KEY.d:console.log("Press d key")}},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.a:console.log("release a key")}},t.prototype.onCollisionEnter=function(e,t){console.log("on collision enter"),this.node.color=cc.Color.RED,this.node.color=cc.Color.RED,this.touchingNumber++;var n=e.world.aabb,o=e.world.preAabb.clone(),a=t.world.aabb,i=t.world.preAabb.clone();return i.x=a.x,o.x=n.x,cc.Intersection.rectRect(i,o)?(i.xMax>o.xMax?(this.node.x=o.xMax-this.node.parent.x,this.collisionX=-1):i.xMin<o.xMin&&(this.node.x=o.xMin-i.width-this.node.parent.x,this.collisionX=1),void(e.touchingX=!0)):(i.y=a.y,o.y=n.y,void(cc.Intersection.rectRect(i,o)&&(i.yMax>o.yMax?(this.node.y=o.yMax-this.node.parent.y,this.jumping=!1,this.collisionY=-1):i.yMin<o.yMin&&(this.node.y=o.yMin-i.height/2,this.collisionY=1),e.touchingY=!0)))},t.prototype.onCollisionStay=function(e,t){console.log("on collision stay"),this.node.color=cc.Color.RED,this.touchingNumber++;var n=e.world.aabb,o=e.world.preAabb.clone(),a=t.world.aabb,i=t.world.preAabb.clone();return i.x=a.x,o.x=n.x,cc.Intersection.rectRect(i,o)?(i.xMax>o.xMax?(this.node.x=o.xMax-this.node.parent.x,this.collisionX=-1):i.xMin<o.xMin&&(this.node.x=o.xMin-i.width-this.node.parent.x,this.collisionX=1),void(e.touchingX=!0)):(i.y=a.y,o.y=n.y,void(cc.Intersection.rectRect(i,o)&&(i.yMax>o.yMax?(this.node.y=o.yMax-this.node.parent.y,this.jumping=!1,this.collisionY=-1):i.yMin<o.yMin&&(this.node.y=o.yMin-i.height/2,this.collisionY=1),e.touchingY=!0)))},t.prototype.onCollisionExit=function(){console.log("on collision exit")},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],HisDataUI:[function(e,t,n){"use strict";cc._RF.push(t,"88be9kNI4lKjpNfKl/yuWhf","HisDataUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./TankDataMgr"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.info=null,t}return __extends(t,e),t.prototype.onEnable=function(){this.refresh()},t.prototype.refresh=function(){var e=parseInt(""+o.default.instance.totalGameTime/60);0==e&&0<o.default.instance.totalGameTime&&(e=1),this.info.string="\u79ef\u5206\uff1a"+o.default.instance.totalScore+"\n\u51fb\u8d25\uff1a"+o.default.instance.totalKillNum+"\n\u6e38\u620f\u65f6\u95f4\uff1a"+e+"\u5206\u949f\n"},__decorate([r(cc.Label)],t.prototype,"info",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./TankDataMgr":"TankDataMgr"}],HostageController:[function(e,t,n){"use strict";cc._RF.push(t,"d82eaPJT7NBYrl6o+Pqt2Rr","HostageController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftFootBody=null,t.rightFootBody=null,t.leftFootBody2=null,t.rightFootBody2=null,t.roleBody=null,t.headSprite=null,t.deathSpriteFrame=null,t.isRoadDead=!1,t.isHit=!1,t.hitJointRgBody=null,t.hitDir=null,t.hitPoint=null,t.trigger=null,t.isTrigger=!1,t.triggerType=1,t.grendaBoomNodeName="",t.hitEffct=function(){this.headSprite.spriteFrame=this.deathSpriteFrame,this.leftFootBody.gravityScale=1,this.rightFootBody.gravityScale=1,this.leftFootBody2.gravityScale=1,this.rightFootBody2.gravityScale=1,this.hitJointRgBody.applyLinearImpulse(this.hitDir.mul(6e3),this.hitPoint,!0),this.runTrigger()},t.tntEffct=function(){this.headSprite.spriteFrame=this.deathSpriteFrame,this.leftFootBody.gravityScale=1,this.rightFootBody.gravityScale=1,this.leftFootBody2.gravityScale=1,this.rightFootBody2.gravityScale=1,this.hitJointRgBody.applyLinearImpulse(this.hitDir.mul(6e3),this.hitPoint,!0)},t.runTrigger=function(){this.trigger&&!this.isTrigger&&(this.isTrigger=!0,this.scheduleOnce(function(){this.trigger.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,this.trigger.getComponent(cc.PhysicsCircleCollider).tag=o.default.Tag.tagCircle,this.trigger.getComponent(cc.PhysicsCircleCollider).apply()},0))},t}return __extends(t,e),__decorate([r(cc.RigidBody)],t.prototype,"leftFootBody",void 0),__decorate([r(cc.RigidBody)],t.prototype,"rightFootBody",void 0),__decorate([r(cc.RigidBody)],t.prototype,"leftFootBody2",void 0),__decorate([r(cc.RigidBody)],t.prototype,"rightFootBody2",void 0),__decorate([r(cc.RigidBody)],t.prototype,"roleBody",void 0),__decorate([r(cc.Sprite)],t.prototype,"headSprite",void 0),__decorate([r(cc.SpriteFrame)],t.prototype,"deathSpriteFrame",void 0),__decorate([r(cc.Node)],t.prototype,"trigger",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./Common":"Common"}],HostageJointController:[function(e,t,n){"use strict";cc._RF.push(t,"9f9fbbhQEhEEoHGi4+Akogd","HostageJointController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("./PrfabsManager"),r=e("./GameConfig"),s=e("../../module/data/StageDataMgr"),c=e("./CubeBox"),l=e("./TNTBox"),d=cc._decorator,u=d.ccclass,h=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hostageController=null,t.isBlood=!1,t.blood=null,t.tntTrigger=!1,t.onLoad=function(){},t.update=function(e){this.blood&&(this.blood.position=this.node.position),this.hostageController.roleBody.linearVelocity.mag()>320&&s.default.CUR_MODE==r.MODE_TYPE_STRUCT.MODE3&&14==s.default.CUR_LEVEL&&!this.hostageController.isHit?(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.hostageController.roleBody.node.position,this.hostageController.roleBody.node.addChild(this.blood,1e3))):37==s.default.CUR_LEVEL&&s.default.CUR_MODE==r.MODE_TYPE_STRUCT.MODE3&&this.hostageController.node.getChildByName("role_head").getComponent(cc.RigidBody).linearVelocity.mag()>300&&(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.hostageController.node.getChildByName("role_head").position,this.hostageController.node.getChildByName("role_head").addChild(this.blood,1e3))))},t}return __extends(t,e),t.prototype.onBeginContact=function(e,t,n){var d=this;if(0!=n.enabled){var u=e.getWorldManifold().points;if(n.tag==o.default.Tag.tagBullet)e.disabled=!0,this.hostageController.isHit||(a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),t.name.indexOf("hand")<0&&u[0]&&this.playEffectBld(u[0],n.node.getComponent(cc.RigidBody).linearVelocity),this.hostageController.isHit=!0,this.hostageController.hitJointRgBody=t.node.getComponent(cc.RigidBody),this.hostageController.hitDir=n.node.getComponent(cc.RigidBody).linearVelocity.normalize(),this.hostageController.hitPoint=e.getWorldManifold().points[0],u[0]&&this.hostageController.hitEffct();else if(n.tag==o.default.Tag.tagCubeBox)if(n.node.getComponent(c.default).isCollider||this.hostageController.isHit){var h=s.default.CUR_LEVEL,p=s.default.CUR_MODE;38!=h&&45!=h&&25!=h||p!=r.MODE_TYPE_STRUCT.MODE3||(a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),u[0]&&this.playEffectBld(u[0],n.node.getComponent(cc.RigidBody).linearVelocity))}else n.node.getComponent(c.default).isCollider=!0,this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),u[0]&&this.playEffectBld(u[0],n.node.getComponent(cc.RigidBody).linearVelocity);else if(n.tag==o.default.Tag.tagCircle)this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),this.playEffectBld(u[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagMoveBox)n.node.getComponent(c.default).isCollider||(n.node.getComponent(c.default).isCollider=!0,a.default.instance.playSound("scream"),this.scheduleOnce(function(){d.node&&(d.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),n.node.getComponent(cc.RigidBody).linearDamping=1)},.5),this.playEffectBld(u[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagPlat)this.hostageController.isRoadDead&&!this.hostageController.isHit&&(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),this.playEffectBld(u[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagTNT){if(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),!this.tntTrigger){this.tntTrigger=!0;var f=n.node.parent.convertToWorldSpaceAR(n.node.position),g=this.hostageController.roleBody.node.parent.convertToWorldSpaceAR(this.hostageController.roleBody.node.position).sub(f).normalize();n.node.getComponent(l.default).isLink?this.hostageController.roleBody.applyLinearImpulse(cc.v2(0,1e4),this.hostageController.roleBody.getWorldCenter(),!0):this.hostageController.roleBody.applyLinearImpulse(g.mul(6e3),this.hostageController.roleBody.getWorldCenter(),!0)}this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3))}else if(n.tag==o.default.Tag.tagGrenade&&n.node.parent.getComponent("GrenadeController").isBoom){if(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),-1==this.hostageController.grendaBoomNodeName.indexOf(n.node.parent.name)){this.hostageController.grendaBoomNodeName+=n.node.parent.name+",",f=n.node.parent.convertToWorldSpaceAR(n.node.position),g=this.hostageController.roleBody.node.parent.convertToWorldSpaceAR(this.hostageController.roleBody.node.position).sub(f).normalize();var m=this.hostageController.grendaBoomNodeName.split(",").length;2==m?this.hostageController.roleBody.applyLinearImpulse(g.mul(5e4),this.hostageController.roleBody.getWorldCenter(),!0):this.hostageController.roleBody.applyLinearImpulse(g.mul(5e4*m),this.hostageController.roleBody.getWorldCenter(),!0)}this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3))}else n.tag==o.default.Tag.tagDeath&&t.tag==o.default.Tag.tagBodyJoint&&(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3)))}},t.prototype.playEffectBld=function(e,t){if(!this.isBlood){this.isBlood=!0;var n=t.signAngle(cc.v2(1,0));n=cc.misc.radiansToDegrees(n),this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem();var o=this.node.parent.convertToNodeSpaceAR(e);this.blood.position=o,this.blood.rotation=n,this.node.parent.addChild(this.blood,1e3)}},t.prototype.start=function(){this.hostageController=this.node.parent.getComponent("HostageController")},t=__decorate([u],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./Common":"Common","./CubeBox":"CubeBox","./GameConfig":"GameConfig","./PrfabsManager":"PrfabsManager","./TNTBox":"TNTBox"}],HotAdsPanelMain:[function(e,t,n){"use strict";cc._RF.push(t,"9013bQ5Ur9GeKJbY38ZxwPN","HotAdsPanelMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../scripts/gamecore/deer/DeerSDK"),a=e("../../../scripts/gamecore/xiaoyaoji/XYJAPI"),i=e("../../../scripts/gamecore/deer/DeerSDKEventNames"),r=e("../../../scripts/gamecore/managers/GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adSprite=null,t.renewDelay=8,t.locationFlg="",t}return __extends(t,e),t.prototype.start=function(){this.node.active=!1,this._imageOriginalSize=new cc.Size(this.adSprite.node.width,this.adSprite.node.height),this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this),o.default.instance.isReady||a.default.userOpenID?this.loadAdData():o.default.instance.addEventListener(i.default.READY,this.sdkReadyHandler,this)},t.prototype.sdkReadyHandler=function(e){o.default.instance.removeEventListener(i.default.READY,this.sdkReadyHandler,this),this.loadAdData()},t.prototype.loadAdData=function(){var e=this;o.default.instance.ad_getAdData(o.DeerAdType.HOT,function(t){e.showAds(t)},null,this.locationFlg)},t.prototype.showAds=function(e){e&&(this._ads=e.concat(),this.next())},t.prototype.next=function(){var e=this;if(this._ads&&0!=this._ads.length){var t=this._ads.indexOf(this._currentData);t=(t+1)%this._ads.length,this.node.active=!0,this._currentData=this._ads[t];var n=this._currentData.icon;n&&cc.loader.load(n,function(t,n){n&&e.adSprite.node.runAction(cc.sequence(cc.fadeTo(.3,0),cc.callFunc(function(){e.adSprite.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),e.adSprite.node.width=n.width,e.adSprite.node.height=n.height,e.adSprite.node.scaleX=e._imageOriginalSize.width/n.width,e.adSprite.node.scaleY=e._imageOriginalSize.height/n.height},e),cc.delayTime(.1),cc.fadeTo(.3,255)))}),this.unschedule(this.next),this._ads.length>1&&this.renewDelay>0&&this.scheduleOnce(this.next,this.renewDelay)}},t.prototype.tapHandler=function(e){this._currentData&&(r.default.soundsManager.playTapSound(),this._currentData.navigate(),this.next())},t.prototype.onDestroy=function(){o.default.instance.removeEventListener(i.default.READY,this.sdkReadyHandler,this)},__decorate([l({type:cc.Sprite,displayName:"\u5e7f\u544a\u663e\u793aSprite"})],t.prototype,"adSprite",void 0),__decorate([l({displayName:"\u8f6e\u64ad\u95f4\u9694(s)"})],t.prototype,"renewDelay",void 0),__decorate([l({type:String,displayName:"\u4f4d\u7f6e\u6807\u8bc6"})],t.prototype,"locationFlg",void 0),t=__decorate([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../scripts/gamecore/deer/DeerSDK":"DeerSDK","../../../scripts/gamecore/deer/DeerSDKEventNames":"DeerSDKEventNames","../../../scripts/gamecore/managers/GameManager":"GameManager","../../../scripts/gamecore/xiaoyaoji/XYJAPI":"XYJAPI"}],HpGift:[function(e,t,n){"use strict";cc._RF.push(t,"9506c7TZKBA+Ik6401g2PV7","HpGift"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/BasePanelComp"),a=e("../../GameUtils"),i=e("../stageMode/GameConfig"),r=e("../../module/data/StageDataMgr"),s=e("../../gamecore/managers/GameManager"),c=e("../../SoundMgr"),l=e("../../module/data/MainDataMgr"),d=e("../../gamecore/deer/DeerSDK"),u=e("./MainWelfare"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtVideoNum=null,t.txtGoldHpNum=null,t.welfareNode=null,t.tarAniNode=null,t.goldenergyExchange=1,t.info=null,t}return __extends(t,e),t.prototype.onLoad=function(){if(l.default.instance.getData(l.default.KEY_WELFAREDAY)===d.default.instance.serverTime.getDate()||0!==r.default.instance.getData(r.default.KEY_USER_HP_NUM)||l.default.instance.getData(l.default.KEY_SHOW_WELFARE_DAY)==(new Date).getDate())this.welfareNode.destroy();else{var e=this;this.welfareNode.getComponent(u.default).getAward=function(){l.default.instance.getData(l.default.KEY_WELFAREDAY)!==d.default.instance.serverTime.getDate()?"1104"==i.default.instance.scene?(r.default.instance.setData(r.default.KEY_USER_HP_NUM,r.default.instance.getData(r.default.KEY_USER_HP_NUM)+i.default.instance.gameMeta.welfareCentreMeta[0].coinReward),a.default.showToast("\u606d\u559c\u83b7\u5f97"+i.default.instance.gameMeta.welfareCentreMeta[0].coinReward+"\u4f53\u529b"),l.default.instance.setData(l.default.KEY_WELFAREDAY,d.default.instance.serverTime.getDate(),!1),e.showFlyGoldEvent(e.node,e.tarAniNode,2),a.default.buriedPoint(14),e.scheduleOnce(function(){e.welfareNode&&(e.welfareNode.getComponent(u.default).close(),e.close())},1)):a.default.showToast("\u8bf7\u4ece\u6211\u7684\u5c0f\u7a0b\u5e8f\u6253\u5f00\u6e38\u620f"):a.default.showToast("\u4eca\u65e5\u5df2\u9886\u53d6")},e.welfareNode.active=!0,l.default.instance.setData(l.default.KEY_SHOW_WELFARE_DAY,(new Date).getDate())}},t.prototype.start=function(){this.init(),this.info=i.default.instance.getHpNumByGoldNum(),this.info.num=i.default.instance.gameMeta.energyMeta[0].energyExchange,this.goldenergyExchange=i.default.instance.gameMeta.energyMeta[0].goldenergyExchange,this.txtVideoNum.string="x"+this.info.num,this.txtGoldHpNum.string="x"+this.goldenergyExchange},t.prototype.getKeyByGoldClick=function(e){var t=r.default.instance.getData(r.default.KEY_USER_GOLD_NUM);t<this.info.price?a.default.showToast("\u60a8\u7684\u91d1\u5e01\u4e0d\u8db3"):(r.default.instance.setData(r.default.KEY_USER_GOLD_NUM,t-this.info.price),c.default.instance.playSound("sounds/useMoney"),r.default.instance.setData(r.default.KEY_USER_HP_NUM,r.default.instance.getData(r.default.KEY_USER_HP_NUM)+this.goldenergyExchange),a.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97"+this.goldenergyExchange+"\u4f53\u529b"),this.showFlyGoldEvent(this.node,this.tarAniNode,2),a.default.buriedPoint(4),this.close())},t.prototype.getCoinVideoClick=function(e){var t=this;e&&s.default.soundsManager.playTapSound();var n=0+this.info.num;a.default.instance.showVideoAd(function(){t.node&&(t.showFlyGoldEvent(t.node,t.tarAniNode,2),t.close()),r.default.instance.setData(r.default.KEY_USER_HP_NUM,r.default.instance.getData(r.default.KEY_USER_HP_NUM)+n),a.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97:"+n+"\u4f53\u529b"),a.default.buriedPoint(3)},function(){t.info&&t.info.num&&a.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u83b7\u5f97"+t.info.num+"\u4f53\u529b",function(){console.log("\u91cd\u65b0\u89c2\u770b"),t.getCoinVideoClick(null)})},function(){a.default.instance.playFailOnShare(function(e){switch(e){case 1:t.node&&(t.showFlyGoldEvent(t.node,t.tarAniNode,2),t.close()),r.default.instance.setData(r.default.KEY_USER_HP_NUM,r.default.instance.getData(r.default.KEY_USER_HP_NUM)+n),a.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97:"+n+"\u4f53\u529b")}},"mainHpGift")})},__decorate([f(cc.Label)],t.prototype,"txtVideoNum",void 0),__decorate([f(cc.Label)],t.prototype,"txtGoldHpNum",void 0),__decorate([f(cc.Node)],t.prototype,"welfareNode",void 0),t=__decorate([p],t)}(o.default);n.default=g,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/managers/GameManager":"GameManager","../../module/data/MainDataMgr":"MainDataMgr","../../module/data/StageDataMgr":"StageDataMgr","../base/BasePanelComp":"BasePanelComp","../stageMode/GameConfig":"GameConfig","./MainWelfare":"MainWelfare"}],HpTip:[function(e,t,n){"use strict";cc._RF.push(t,"c2fe2T68cFNNKunzw+YJtOX","HpTip"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){var e=this;this.node.runAction(cc.sequence(cc.moveBy(.4,cc.v2(0,70)),cc.callFunc(function(){e.node.isValid&&e.node.destroy()})))},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],IOS:[function(e,t,n){"use strict";cc._RF.push(t,"37f5d2pwolKta6ZJjJzR7o8","IOS"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Base");n.IOS_init=function(){o.Base_init();var e=window.wx;e.__callJSB=function(e,t,n,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),t||(t={}),console.log("call jsb",e,t);var a=JSON.stringify(t),i=jsb.reflection.callStaticMethod("NativeAPI",e+":",a);console.log("\t\t call result",i);try{var r=JSON.parse(i);return 0==r.err_code?void(n&&n(r.data)):void(o&&o(r))}catch(e){console.log("\t\t jsb data error",e)}o&&o({})},e.login=function(t){console.log("------\u3010IOS\u3011 login-------"),console.log(JSON.stringify(t));var n=t?t.success:null,o=t?t.fail:null,a=t?t.complete:null;e.__callJSB("login",null,function(t){e.__userInfoRes={userInfo:{openId:t.uid,nickName:t.nickName,avatarUrl:t.avatar,gender:"M"==t.sex?"1":"2"},rawData:"",encryptedData:"",signature:""},n&&n({code:t.uid}),a&&a()},function(e){o&&o(e),a&&a()})},e.navigateToMiniProgram=function(t){console.log("------\u3010IOS\u3011 navigateToMiniProgram-------");var n=t?t.success:null,o=t?t.fail:null,a=t?t.complete:null;e.__callJSB("showApp",null,function(e){n&&n(e),a&&a()},function(e){o&&o(e),a&&a()})}},cc._RF.pop()},{"./Base":"Base"}],IconAdBase:[function(e,t,n){"use strict";cc._RF.push(t,"bea17affLpHfrPeeZgdslJW","IconAdBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adSprite=null,t.adNameLabel=null,t.enableEffect=!1,t.txtGameName=null,t._isFirstTimeShow=!0,t._needToRenew=!1,t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"adPool",{set:function(e){e&&(n._adPool=e.concat())},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.enableEffect&&(this.node.opacity=0)},t.prototype.start=function(){this.adSprite||(this.adSprite=this.node.getComponent(cc.Sprite),this.adSprite||(this.adSprite=this.node.addComponent(cc.Sprite))),this._adOriginalHeight=this.adSprite.node.height,this._adOriginalWidth=this.adSprite.node.width,this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndHandler,this),this._data&&this.showAd(),"undefined"!=typeof wx&&wx.onShow(this.wxOnShowCallback.bind(this))},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data!=e&&(this._data=e,this.showAd())},enumerable:!0,configurable:!0}),t.prototype.touchEndHandler=function(e){this._data&&this._data.navigate()},t.prototype.tryRenew=function(){this._needToRenew=!0},t.prototype.renew=function(){this._needToRenew=!1,n._adPool&&n._adPool.length>0&&(this.data=n._adPool[0])},t.prototype.showAd=function(){var e=this;if(this._isOnLoadCalled&&this._data&&(cc.loader.load({url:this._data.icon,type:"png"},function(t,n){if(n&&(e.adSprite.spriteFrame=new cc.SpriteFrame(n),e.adSprite.node.width=e._adOriginalWidth,e.adSprite.node.height=e._adOriginalHeight,e.txtGameName&&(e.txtGameName.string=e._data.name),e._isFirstTimeShow&&e.enableEffect)){e._isFirstTimeShow=!1;var o=.1;e.data.index&&(o+=.1*e.data.index),e.node.scale=.8,e.node.opacity=1,e.node.runAction(cc.sequence(cc.delayTime(o),cc.spawn(cc.fadeTo(.5,255),cc.scaleTo(.5,1,1).easing(cc.easeBackOut()))))}e._data&&e._data.reportShown()}),this.adNameLabel&&(this.adNameLabel.string=""+this._data.name),n._adPool)){var t=n._adPool.indexOf(this._data);n._adPool.splice(t,1)}},t.prototype.wxOnShowCallback=function(){this._needToRenew&&this.renew()},t.prototype.onDestroy=function(){"undefined"!=typeof wx&&wx.offShow(this.wxOnShowCallback.bind(this))},__decorate([i({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Sprite})],t.prototype,"adSprite",void 0),__decorate([i({displayName:"\u5e7f\u544a\u540d\u79f0",type:cc.Label})],t.prototype,"adNameLabel",void 0),__decorate([i({displayName:"\u5f00\u542f\u7f13\u52a8\u6548\u679c"})],t.prototype,"enableEffect",void 0),__decorate([i(cc.Label)],t.prototype,"txtGameName",void 0),t=n=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],ItemBase:[function(e,t,n){"use strict";cc._RF.push(t,"12de4lUZw5GT503c7HLEXLt","ItemBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../event/EventDispacher"),a=e("../GameManager"),i=e("../../GameCoreEventNames"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=e.call(this)||this;return t._isUsed=!1,a.default.eventManager.addEventListener(i.default.ITEM_USED,t.itemUseHandler,t),t}return __extends(t,e),t.prototype.itemUseHandler=function(e){e.data==this&&(this.useItem(),this._isUsed=!0,this.destory())},Object.defineProperty(t.prototype,"property",{get:function(){return this._prop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"desc",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUsed",{get:function(){return this._isUsed},enumerable:!0,configurable:!0}),t.prototype.useItem=function(){},t.prototype.destory=function(){a.default.eventManager.removeEventListener(i.default.ITEM_USED,this.itemUseHandler,this)},t=__decorate([s],t)}(o.default));n.default=c,cc._RF.pop()},{"../../GameCoreEventNames":"GameCoreEventNames","../GameManager":"GameManager","../event/EventDispacher":"EventDispacher"}],ItemManager:[function(e,t,n){"use strict";cc._RF.push(t,"4bf59H9GfRAO7IC7tU9MuAh","ItemManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GameManager"),a=e("../../GameCoreEventNames"),i=e("./ItemProp"),r=cc._decorator,s=r.ccclass,c=(r.property,"__im_items"),l=function(){function e(){this._itemFactor=null,this._allItems=[],this._inGameItemUsedCount={},this._itemUsedCountTotal={},this._timeOut=-1}return Object.defineProperty(e.prototype,"itemFactor",{set:function(e){if(null!=this._itemFactor)throw new Error("\u8bf7\u52ff\u91cd\u590d\u8bbe\u7f6e\u9053\u5177\u5de5\u5382\u65b9\u6cd5");this._itemFactor=e,this.unserializeData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allItems",{get:function(){return this._allItems.concat()},enumerable:!0,configurable:!0}),e.prototype.getItemsByName=function(e){var t=[];return this._allItems.forEach(function(n){n.name==e&&t.push(n)}),t},e.prototype.getItemCount=function(e){var t=0;return this._allItems.forEach(function(n){n.type==e&&t++}),t},e.prototype.getItemUsedCountInGame=function(e){var t;return void 0!=this._inGameItemUsedCount[e]&&(t=this._inGameItemUsedCount[e]),(isNaN(t)||t<0)&&(t=0),t},e.prototype.getItemUsedCountTotal=function(e){var t;return void 0!=this._itemUsedCountTotal[e]&&(t=this._itemUsedCountTotal[e]),(isNaN(t)||t<0)&&(t=0),t},e.prototype.getAItemByType=function(e){for(var t=0,n=this._allItems.length;t<n;t++){var o=this._allItems[t];if(o.type==e)return o}return null},e.prototype.useItem=function(e){if(e.isUsed)throw new Error("This item had been used!");var t=this._allItems.indexOf(e);if(-1!=t){var n=e.type,i=this._inGameItemUsedCount[n];(isNaN(i)||i<0)&&(i=0),this._inGameItemUsedCount[n]=i+1,i=this._itemUsedCountTotal[n],(isNaN(i)||i<0)&&(i=0),this._itemUsedCountTotal[n]=i+1,this._allItems.splice(t,1),o.default.eventManager.dispatchEventWith(a.default.ITEM_USED,e),e.destory(),this.doSerializeLater()}},e.prototype.useItemByType=function(e){var t=this.getAItemByType(e);t&&this.useItem(t)},e.prototype.addItem=function(e){if(e.isUsed)throw new Error("This item had been used!");e&&e.property!=i.ItemProp.ABSTRACT&&-1==this._allItems.indexOf(e)&&(this._allItems.push(e),o.default.eventManager.dispatchEventWith(a.default.ITEM_ADDED,e),this.doSerializeLater())},e.prototype.removeItem=function(e){if(e.isUsed)throw new Error("This item had been used!");var t=this.allItems.indexOf(e);-1!=t&&(this._allItems.splice(t,1),e.destory(),o.default.eventManager.dispatchEventWith(a.default.ITEM_REMOVED,e),this.doSerializeLater())},e.prototype.gameOver=function(){for(var e=0;e<this._allItems.length;e++){this._allItems[e].type==i.ItemProp.IN_GAME&&(this._allItems.splice(e,1),e--)}this._inGameItemUsedCount={},this.doSerializeLater()},e.prototype.doSerializeLater=function(){this._timeOut>=0&&clearTimeout(this._timeOut),this._timeOut=setTimeout(function(){o.default.itemManager.serializeData()},5e3)},e.prototype.serializeData=function(){var e=[];this._allItems.forEach(function(t){e.push(t.type)}),o.default.dataManager.setData(c,{items:e},!0)},e.prototype.unserializeData=function(){var e=this;if(null!=this._itemFactor&&!0!==this._unserialized){this._unserialized=!0;var t=o.default.dataManager.getData(c);if(t){var n=t.items;n&&0!=n.length&&n.forEach(function(t){var n=e._itemFactor.call(null,t);n&&e.addItem(n)})}}},e=__decorate([s],e)}();n.default=l,cc._RF.pop()},{"../../GameCoreEventNames":"GameCoreEventNames","../GameManager":"GameManager","./ItemProp":"ItemProp"}],ItemProp:[function(e,t,n){"use strict";cc._RF.push(t,"694417d15RL+KVXO56auIK+","ItemProp"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator;o.ccclass,o.property;(function(e){e[e.ABSTRACT=1]="ABSTRACT",e[e.GLOBAL=2]="GLOBAL",e[e.IN_GAME=4]="IN_GAME"})(n.ItemProp||(n.ItemProp={})),cc._RF.pop()},{}],JRTT:[function(e,t,n){"use strict";cc._RF.push(t,"8516aw3UeNKV6eFeFhngdI5","JRTT"),Object.defineProperty(n,"__esModule",{value:!0}),n.JRTT_init=function(){new Date,"undefined"!=typeof tt&&(window.wx=tt,tt.getMenuButtonBoundingClientRect=tt.getMenuButtonLayout,wx.createUserInfoButton=function(e){return void 0===e&&(e=null),console.log("------\u3010JRTT\u3011 createUserInfoButton-------"),console.log(e),null})},cc._RF.pop()},{}],JoystickBG:[function(e,t,n){"use strict";cc._RF.push(t,"54577lAZMlDjadI3cgXi1D6","JoystickBG"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./JoystickCommon"),a=e("./GameData"),i=e("./Joystick"),r=Math.sqrt,s=Math.pow,c=Math.sin,l=Math.cos,d=Math.PI,u=(Math.atan2,cc._decorator),h=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.area=null,t.dot=null,t._joyCom=null,t._playerNode=null,t._angle=null,t._radian=null,t._speed=0,t._speed1=100,t._speed2=200,t._opacity=0,t._startMove=!1,t._stickPos=null,t._radius=0,t}return __extends(t,e),t.prototype.onLoad=function(){this._joyCom=this.node.parent.getComponent(i.default),this._joyCom.touchType==o.default.TouchType.DEFAULT&&this._initTouchEvent()},t.prototype.start=function(){},t.prototype._initTouchEvent=function(){this.area.on(cc.Node.EventType.TOUCH_START,this._touchAreaStartEvent,this),this.area.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.area.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.area.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},t.prototype.update=function(){switch(this._joyCom.directionType){case o.default.DirectionType.ALL:this._startMove?this._allDirectionsMove():this._dir=cc.v2(0,0)}},t.prototype._allDirectionsMove=function(){var e=l(this._angle*(d/180))*this._speed*2,t=c(this._angle*(d/180))*this._speed*2;0==e&&0==t||(this._dir=cc.v2(e,t))},t.prototype._getDistance=function(e,t){return r(s(e.x-t.x,2)+s(e.y-t.y,2))},t.prototype._getRadian=function(e){return this._radian=d/180*this._getAngle(e),this._radian},t.prototype._getAngle=function(e){var t=this.node.getPosition();return this._angle=Math.atan2(e.y-t.y,e.x-t.x)*(180/d),this._angle},t.prototype._setSpeed=function(e){this._speed=this._getDistance(e,this.node.getPosition())<this._radius?this._speed1:this._speed2},t.prototype._touchAreaStartEvent=function(e){var t=this._joyCom.node.convertToNodeSpaceAR(e.getLocation());cc.log("touchPos: "+e.getLocation().x+" "+e.getLocation().y),cc.log("touchPos: "+t.x+" "+t.y),40>a.default.instance.m_curLevel&&(this.node.x=t.x,this.node.y=t.y),this.dot.x=t.x,this.dot.y=t.y,this._startMove=!0},t.prototype._touchStartEvent=function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation()),n=this._getDistance(t,cc.v2(0,0)),o=this.node.width/2;this._stickPos=t;var a=this.node.getPosition().x+t.x,i=this.node.getPosition().y+t.y;return this._startMove=!0,o>n&&(this.dot.setPosition(cc.v2(a,i)),!0)},t.prototype._touchMoveEvent=function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation()),n=this._getDistance(t,cc.v2(0,0)),o=this.node.width/2,a=this.node.getPosition().x+t.x,i=this.node.getPosition().y+t.y;if(o>n)this.dot.setPosition(cc.v2(a,i));else{var r=this.node.getPosition().x+l(this._getRadian(cc.v2(a,i)))*o,s=this.node.getPosition().y+c(this._getRadian(cc.v2(a,i)))*o;this.dot.setPosition(cc.v2(r,s))}this._getAngle(cc.v2(a,i)),this._setSpeed(cc.v2(a,i))},t.prototype._touchEndEvent=function(){this.dot.setPosition(this.node.getPosition()),this._speed=0,this._startMove=!1},__decorate([p({type:cc.Node})],t.prototype,"area",void 0),__decorate([p({type:cc.Node})],t.prototype,"dot",void 0),__decorate([p({type:i.default,displayName:"joy Node"})],t.prototype,"_joyCom",void 0),__decorate([p({displayName:"\u88ab\u64cd\u4f5c\u7684\u76ee\u6807Node"})],t.prototype,"_playerNode",void 0),__decorate([p({displayName:"\u5f53\u524d\u89e6\u6478\u7684\u89d2\u5ea6"})],t.prototype,"_angle",void 0),__decorate([p({displayName:"\u5f27\u5ea6"})],t.prototype,"_radian",void 0),t=__decorate([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"./GameData":"GameData","./Joystick":"Joystick","./JoystickCommon":"JoystickCommon"}],JoystickCommon:[function(e,t,n){"use strict";cc._RF.push(t,"0865ayAKe5GjrzbwqsrUUyF","JoystickCommon"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.TouchType=cc.Enum({DEFAULT:0,FOLLOW:1}),e.DirectionType=cc.Enum({FOUR:4,EIGHT:8,ALL:0}),e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],Joystick:[function(e,t,n){"use strict";cc._RF.push(t,"7e378GRm5lGpruaDEuxoczH","Joystick"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./JoystickCommon"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ring=null,t.dot=null,t.stickX=0,t.stickY=0,t.touchType=o.default.TouchType.DEFAULT,t.directionType=o.default.DirectionType.ALL,t._stickPos=null,t._touchLocation=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this._createStickSprite(),this.touchType==o.default.TouchType.FOLLOW&&this._initTouchEvent()},t.prototype._createStickSprite=function(){var e=this;this.scheduleOnce(function(){e.ring.node.setPosition(e.stickX,e.stickY),e.dot.setPosition(e.stickX,e.stickY)})},t.prototype._initTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},t.prototype._touchStartEvent=function(e){this._touchLocation=e.getLocation();var t=this.node.convertToNodeSpaceAR(e.getLocation());this.ring.node.setPosition(t),this.dot.setPosition(t),this._stickPos=t},t.prototype._touchMoveEvent=function(e){if(this._touchLocation.x==e.getLocation().x&&this._touchLocation.y==e.getLocation().y)return!1;var t=this.ring.node.convertToNodeSpaceAR(e.getLocation()),n=this.ring._getDistance(t,cc.v2(0,0)),o=this.ring.node.width/2,a=this._stickPos.x+t.x,i=this._stickPos.y+t.y;if(o>n)this.dot.setPosition(cc.v2(a,i));else{var r=this._stickPos.x+Math.cos(this.ring._getRadian(cc.v2(a,i)))*o,s=this._stickPos.y+Math.sin(this.ring._getRadian(cc.v2(a,i)))*o;this.dot.setPosition(cc.v2(r,s))}this.ring._getAngle(cc.v2(a,i)),this.ring._setSpeed(cc.v2(a,i))},t.prototype._touchEndEvent=function(){this.dot.setPosition(this.ring.node.getPosition()),this.ring._speed=0},__decorate([r(cc.Component)],t.prototype,"ring",void 0),__decorate([r({type:cc.Node})],t.prototype,"dot",void 0),__decorate([r({displayName:"\u6447\u6746X\u4f4d\u7f6e"})],t.prototype,"stickX",void 0),__decorate([r({displayName:"\u6447\u6746Y\u4f4d\u7f6e"})],t.prototype,"stickY",void 0),__decorate([r({type:o.default.TouchType,displayName:"\u89e6\u6478\u7c7b\u578b"})],t.prototype,"touchType",void 0),__decorate([r({type:o.default.DirectionType,displayName:"\u65b9\u5411\u7c7b\u578b"})],t.prototype,"directionType",void 0),__decorate([r({type:cc.Vec2,displayName:"\u6447\u6746\u5f53\u524d\u4f4d\u7f6e"})],t.prototype,"_stickPos",void 0),__decorate([r({type:cc.Vec2,displayName:"\u6447\u6746\u5f53\u524d\u4f4d\u7f6e"})],t.prototype,"_touchLocation",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./JoystickCommon":"JoystickCommon"}],KeyGift:[function(e,t,n){"use strict";cc._RF.push(t,"443f7CuRUxHOJPQNNV5+c5p","KeyGift"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/BasePanelComp"),a=e("../../GameUtils"),i=e("../stageMode/GameConfig"),r=e("../../module/data/StageDataMgr"),s=e("../../gamecore/managers/GameManager"),c=e("../../SoundMgr"),l=cc._decorator,d=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.info=null,t}return __extends(t,e),t.prototype.start=function(){this.init(),this.info=i.default.instance.getKeyNumByGoldNum()},t.prototype.getKeyByGoldClick=function(e){var t=r.default.instance.getData(r.default.KEY_USER_GOLD_NUM);t<this.info.price?a.default.showToast("\u60a8\u7684\u91d1\u5e01\u4e0d\u8db3"):(r.default.instance.setData(r.default.KEY_USER_GOLD_NUM,t-this.info.price),c.default.instance.playSound("sounds/useMoney"),r.default.instance.setData(r.default.KEY_USER_DIMOND_NUM,r.default.instance.getData(r.default.KEY_USER_DIMOND_NUM)+this.info.num),a.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97\u94a5\u5319:"+this.info.num+"\u628a"),this.showFlyGoldEvent(this.node,cc.find("Canvas/leftnode/dimondbg/dimondtext"),0),a.default.buriedPoint(9),this.close())},t.prototype.getCoinVideoClick=function(e){var t=this;e&&s.default.soundsManager.playTapSound();var n=0+this.info.num;a.default.instance.showVideoAd(function(){t.node&&(t.showFlyGoldEvent(t.node,cc.find("Canvas/leftnode/dimondbg/dimondtext"),0),t.close()),r.default.instance.setData(r.default.KEY_USER_DIMOND_NUM,r.default.instance.getData(r.default.KEY_USER_DIMOND_NUM)+n),a.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97\u94a5\u5319:"+n+"\u628a"),a.default.buriedPoint(8)},function(){t.info&&t.info.num&&a.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u83b7\u5f97\u94a5\u5319"+t.info.num+"\u628a",function(){t.getCoinVideoClick(null)})},function(){a.default.instance.playFailOnShare(function(e){switch(e){case 1:t.node&&(t.showFlyGoldEvent(t.node,cc.find("Canvas/leftnode/dimondbg/dimondtext"),0),t.close()),r.default.instance.setData(r.default.KEY_USER_DIMOND_NUM,r.default.instance.getData(r.default.KEY_USER_DIMOND_NUM)+n),a.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97\u94a5\u5319:"+n+"\u628a"),a.default.buriedPoint(8)}},"mainKeyGift")})},t=__decorate([d],t)}(o.default));n.default=u,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../gamecore/managers/GameManager":"GameManager","../../module/data/StageDataMgr":"StageDataMgr","../base/BasePanelComp":"BasePanelComp","../stageMode/GameConfig":"GameConfig"}],LevelItem:[function(e,t,n){"use strict";cc._RF.push(t,"fff36RkzC9F/bJS+I3xzRBd","LevelItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./LevelListUI"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelLabel=null,t.toggle=null,t.levelListUI=null,t.lockImg=null,t.level=0,t.levelStar=0,t.levelOpened=!1,t.levelPassed=!1,t.levelScore=0,t}return __extends(t,e),t.prototype.start=function(){this.toggle=this.node.getComponent(cc.Toggle),this.levelLabel.string="\u5173\u5361 "+(this.level+1)},t.prototype.onChange=function(){this.levelListUI.select(this.level)},t.prototype.refresh=function(e){this.level=e.level,this.levelStar=0,this.levelOpened=0!=e.unLocked,this.levelScore=e.score,this.lockImg.node.active=!this.levelOpened},t.prototype.unlock=function(){this.lockImg.node.active=!1},__decorate([r(cc.Label)],t.prototype,"levelLabel",void 0),__decorate([r(cc.Toggle)],t.prototype,"toggle",void 0),__decorate([r(o.default)],t.prototype,"levelListUI",void 0),__decorate([r(cc.Sprite)],t.prototype,"lockImg",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./LevelListUI":"LevelListUI"}],LevelListUI:[function(e,t,n){"use strict";cc._RF.push(t,"c353eAclkhMoLGrvDgj2wOL","LevelListUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameData"),a=e("./TankDataMgr"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.scrollContentNode=null,t.levelItem=null,t.test=11,t.items=[],t.curSelectLevel=0,t.hisScore=null,t.stars=[],t.itemList=[],t.dataArr=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onEnable=function(){this.refreshItems()},t.prototype.onDisable=function(){},t.prototype.refreshItems=function(){var e=0;0==o.default.instance.m_curMapType?(this.dataArr=a.default.instance.levelData,e=a.default.instance.curMaxLevel):1==o.default.instance.m_curMapType?(this.dataArr=a.default.instance.levelDataXueDi,e=a.default.instance.curMaxLevelXueDi):2==o.default.instance.m_curMapType&&(this.dataArr=a.default.instance.levelDataGongChang,e=a.default.instance.curMaxLevelGongChang),0==this.dataArr.length&&(0==o.default.instance.m_curMapType?(a.default.instance.initLevelData(),this.dataArr=a.default.instance.levelData,e=a.default.instance.curMaxLevel):1==o.default.instance.m_curMapType?(a.default.instance.initLevelDataXueDi(),this.dataArr=a.default.instance.levelDataXueDi,e=a.default.instance.curMaxLevelXueDi):2==o.default.instance.m_curMapType&&(a.default.instance.initLevelDataGongChang(),this.dataArr=a.default.instance.levelDataGongChang,e=a.default.instance.curMaxLevelGongChang));for(var t,n=this.dataArr.length,i=0;i<n;i++){(t=this.getItemByIdx(i))||((t=cc.instantiate(this.levelItem)).parent=this.scrollContentNode,t.active=!0,this.itemList.push(t)),t.x=0;var r=t.getComponent(cc.Toggle);r.isChecked=!1;var s=this.dataArr[i],c=t.getComponent("LevelItem");c.levelListUI=this,c.refresh(s),this.items.push(r)}this.scrollContentNode.height=80*n,this.curSelectLevel=e;var l=this.items[e];l.isChecked=!0;var d=this.dataArr[this.curSelectLevel];this.refreshScore(d);var u=l.getComponent("LevelItem");u&&u.unlock();var h=90*e;if(h<=this.scrollView.node.height/2);else{var p=h-this.scrollView.node.height/2;this.scrollView.scrollToOffset(cc.v2(0,p),3)}},t.prototype.onClickPlayBtn=function(){if(console.log("this.dataArr",this.dataArr),1!=this.dataArr[this.curSelectLevel].unLocked){var e=0;if(0==o.default.instance.m_curMapType?e=a.default.instance.curMaxLevel:1==o.default.instance.m_curMapType?e=a.default.instance.curMaxLevelXueDi:2==o.default.instance.m_curMapType&&(e=a.default.instance.curMaxLevelGongChang),this.curSelectLevel!=e)return void console.log("\u5f53\u524d\u5173\u5361\u672a\u89e3\u9501")}o.default.instance.m_curLevel=this.curSelectLevel,cc.director.loadScene("map")},t.prototype.select=function(e){if(!(0>e||e>=this.items.length)&&(this.unCheckAll(),this.items[e].isChecked=!0,this.curSelectLevel=e,0<=e&&e<this.dataArr.length)){var t=this.dataArr[e];this.refreshScore(t)}},t.prototype.refreshScore=function(e){this.hisScore.string="\u5386\u53f2\u9ad8\u5206\uff1a0";for(var t=0;t<this.stars.length;t++)this.stars[t].active=!1;if(e&&(this.hisScore.string="\u5386\u53f2\u9ad8\u5206\uff1a"+e.score,e.unLocked))for(t=0;t<e.star;t++)this.stars[t].active=!0},t.prototype.unCheckAll=function(){for(var e=0;e<this.items.length;e++)this.items[e].isChecked=!1},t.prototype.clickBackBtn=function(){this.node.active=!1},t.prototype.getItemByIdx=function(e){return 0>e||e>=this.itemList.length?null:this.itemList[e]},t.instance=null,__decorate([s(cc.ScrollView)],t.prototype,"scrollView",void 0),__decorate([s(cc.Node)],t.prototype,"scrollContentNode",void 0),__decorate([s(cc.Prefab)],t.prototype,"levelItem",void 0),__decorate([s(cc.Toggle)],t.prototype,"items",void 0),__decorate([s(cc.Label)],t.prototype,"hisScore",void 0),__decorate([s(cc.Node)],t.prototype,"stars",void 0),__decorate([s(cc.Node)],t.prototype,"itemList",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./GameData":"GameData","./TankDataMgr":"TankDataMgr"}],LevelTypeUI:[function(e,t,n){"use strict";cc._RF.push(t,"204eeRWKTFDJ6HZkrpCM+uG","LevelTypeUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameData"),a=e("./UIManager"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curMapType=0,t.curSelectType=null,t.caoDiToggle=null,t.xueDiToggle=null,t.gongChangToggle=null,t.uiMgr=null,t}return __extends(t,e),t.prototype.start=function(){var e=cc.find("Canvas");this.uiMgr=e.getComponent(a.default)},t.prototype.onEnable=function(){this.refresh()},t.prototype.refresh=function(){var e;this.xueDiToggle.interactable=!1,this.xueDiToggle.isChecked=!1,this.gongChangToggle.interactable=!1,this.gongChangToggle.isChecked=!1,this.caoDiToggle.isChecked=!0,o.default.instance.m_curMapType=0,this.curMapType=0,this.curSelectType.string="\u5f53\u524d\u9009\u62e9\uff1a\u8349\u5730",this.xueDiToggle.interactable=!0,this.gongChangToggle.isChecked=!1,this.caoDiToggle.isChecked=!1,this.xueDiToggle.isChecked=!0,(e=this.xueDiToggle.node.getChildByName("lock"))&&(e.active=!1),o.default.instance.m_curMapType=1,this.curMapType=1,this.curSelectType.string="\u5f53\u524d\u9009\u62e9\uff1a\u96ea\u5730",this.gongChangToggle.interactable=!0,this.xueDiToggle.isChecked=!1,this.caoDiToggle.isChecked=!1,this.gongChangToggle.isChecked=!0,(e=this.gongChangToggle.node.getChildByName("lock"))&&(e.active=!1),o.default.instance.m_curMapType=2,this.curMapType=2,this.curSelectType.string="\u5f53\u524d\u9009\u62e9\uff1a\u5de5\u5382"},t.prototype.clickMapType=function(e,t){this.curMapType=parseInt(t),0==this.curMapType?(this.curSelectType.string="\u5f53\u524d\u9009\u62e9\uff1a\u8349\u5730",o.default.instance.m_curMapType=0):1==this.curMapType?(this.curSelectType.string="\u5f53\u524d\u9009\u62e9\uff1a\u96ea\u5730",o.default.instance.m_curMapType=1):2==this.curMapType&&(this.curSelectType.string="\u5f53\u524d\u9009\u62e9\uff1a\u5de5\u5382",o.default.instance.m_curMapType=2)},t.prototype.clickOkBtn=function(){0==this.curMapType||1==this.curMapType||this.curMapType,o.default.instance.m_curMapType=this.curMapType;var e=cc.find("Canvas");this.uiMgr=e.getComponent(a.default),this.uiMgr.showUI("LevelListUI")},t.prototype.clickBackBtn=function(){this.node.active=!1;var e=cc.find("Canvas/LoginUI");if(e){var t=e.getComponent("LoginUI");t&&t.showBannerAD()}},__decorate([s(cc.Label)],t.prototype,"curSelectType",void 0),__decorate([s(cc.Toggle)],t.prototype,"caoDiToggle",void 0),__decorate([s(cc.Toggle)],t.prototype,"xueDiToggle",void 0),__decorate([s(cc.Toggle)],t.prototype,"gongChangToggle",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./GameData":"GameData","./UIManager":"UIManager"}],LinkSwitch:[function(e,t,n){"use strict";cc._RF.push(t,"461e9nHzwlPKo3KQ4BSngaZ","LinkSwitch"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("../../module/data/StageDataMgr"),r=e("./GameConfig"),s=e("./TNTBox"),c=e("./MoveNode"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.linkNode=null,t.isOpen=!1,t.linkType=0,t.offSpriteFrame=null,t}return __extends(t,e),t.prototype.onBeginContact=function(e,t,n){(n.tag!=o.default.Tag.tagBullet||this.isOpen)&&(n.tag!=o.default.Tag.tagBodyJoint||this.isOpen)&&(n.tag!=o.default.Tag.tagCircle||this.isOpen)&&(n.tag!=o.default.Tag.tagGrenade||n.node.parent.getComponent("GrenadeController").isBoom||this.isOpen)&&(n.tag!=o.default.Tag.tagCubeBox||this.isOpen)||(a.default.instance.playSound("link"),this.isOpen=!0,this.switchEffct())},t.prototype.switchEffct=function(){var e=i.default.CUR_LEVEL,t=i.default.CUR_MODE,n=this;if(this.scheduleOnce(function(){0==n.node.rotation?n.node.y+=30:180==n.node.rotation?n.node.y-=30:90==n.node.rotation?n.node.x+=20:-90==n.node.rotation?n.node.x-=20:-90==n.node.rotation?n.node.x-=20:-41==n.node.rotation?(n.node.x=-320,n.node.y=708):32==n.node.rotation&&(n.node.x=296,n.node.y=729),7==e&&45==n.node.rotation&&t==r.MODE_TYPE_STRUCT.MODE2?(n.node.x=360,n.node.y=560):7==e&&-41==n.node.rotation&&t==r.MODE_TYPE_STRUCT.MODE2?(n.node.x=-352,n.node.y=557):26==e&&t==r.MODE_TYPE_STRUCT.MODE2?(n.node.x=259.2,n.node.y=439):50==e&&t==r.MODE_TYPE_STRUCT.MODE2&&"LinkSwitch2"==n.node.name?(n.node.x=384,n.node.y=424):50==e&&t==r.MODE_TYPE_STRUCT.MODE2&&"LinkSwitch"==n.node.name?(n.node.x=-210,n.node.y=422):116==e&&t==r.MODE_TYPE_STRUCT.MODE1?(n.node.x=-65,n.node.y=-116):116==e&&t==r.MODE_TYPE_STRUCT.MODE1?(n.node.x=-65,n.node.y=-116):131==e&&t==r.MODE_TYPE_STRUCT.MODE1&&"Link1"==n.node.name?(n.node.x=-399,n.node.y=566):131==e&&t==r.MODE_TYPE_STRUCT.MODE1&&"Link2"==n.node.name?(n.node.x=-26,n.node.y=714):131==e&&t==r.MODE_TYPE_STRUCT.MODE1&&"Link3"==n.node.name?(n.node.x=357,n.node.y=558):134==e&&t==r.MODE_TYPE_STRUCT.MODE4&&"Link1"==n.node.name?(n.node.x=-133,n.node.y=727):134==e&&t==r.MODE_TYPE_STRUCT.MODE4&&"Link2"==n.node.name&&(n.node.x=153,n.node.y=727),n.node.getComponent(cc.Sprite).spriteFrame=n.offSpriteFrame,n.getComponent(cc.PhysicsBoxCollider).sensor=!0,n.getComponent(cc.PhysicsBoxCollider).apply()},0),1==this.linkType)try{this.linkNode&&this.linkNode.getComponent(s.default)&&this.linkNode.getComponent(s.default).boomEffct()}catch(e){}else if(2==this.linkType)this.linkNode.runAction(cc.sequence(cc.fadeOut(.1),cc.removeSelf()));else if(3==this.linkType)this.linkNode.opacity=0,this.linkNode.active=!0,"link_line"==this.linkNode.parent.name&&(this.linkNode.parent.getComponent(cc.Sprite).spriteFrame=null),this.linkNode.runAction(cc.fadeIn(.3)),this.linkNode.getComponent(cc.RigidBody)&&(this.linkNode.getComponent(cc.RigidBody).gravityScale=3);else if(4==this.linkType){var o=this,a=this.linkNode.children[0];this.linkNode.getComponent(cc.PhysicsCollider).sensor=!0,this.linkNode.getComponent(cc.PhysicsCollider).apply(),this.linkNode.runAction(cc.sequence(cc.callFunc(function(){if(a)for(var e=0;e<a.childrenCount;e++)a.children[e].getComponent(cc.RigidBody)&&(a.children[e].getComponent(cc.RigidBody).fixedRotation=!1)}),cc.callFunc(function(){o.linkNode.getComponent(cc.Sprite).spriteFrame=null})))}else 5==this.linkType&&this.linkNode.getComponent(c.default).trigger()},t.prototype.start=function(){},__decorate([u(cc.Node)],t.prototype,"linkNode",void 0),__decorate([u(Boolean)],t.prototype,"isOpen",void 0),__decorate([u(Number)],t.prototype,"linkType",void 0),__decorate([u(cc.SpriteFrame)],t.prototype,"offSpriteFrame",void 0),t=__decorate([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./Common":"Common","./GameConfig":"GameConfig","./MoveNode":"MoveNode","./TNTBox":"TNTBox"}],LoadMap1:[function(e,t,n){"use strict";cc._RF.push(t,"a2d56myB/VBA4Af670OhAYi","LoadMap1"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("../../GameUtils"),r=e("../../module/data/StageDataMgr"),s=e("./GameConfig"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tiledMap=null,t.index=1,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.node.position=r.default.MAP_POS,this.tiledMap=this.node.getComponent(cc.TiledMap),null!=i.default.instance.tiledMapAsset&&(this.tiledMap.tmxAsset=i.default.instance.tiledMapAsset),this.loadMap()},t.prototype.changeMap=function(e){var t=this;cc.director.getPhysicsManager().enabled=!1,cc.director.getCollisionManager().enabled=!1,i.default.loadRes("maps/map"+this.index,cc.TiledMapAsset,!0,function(e){t.tiledMap=t.node.getComponent(cc.TiledMap),t.tiledMap.tmxAsset=e,t.loadMap(),t.index++,cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0})},t.prototype.onBeginContact=function(e,t,n){n.tag==o.default.Tag.tagCubeBox&&n.getComponent(cc.RigidBody).linearVelocity.mag()>=300&&a.default.instance.playSound("road_pz")},t.prototype.loadMap=function(){var e=this.tiledMap.getObjectGroup("obj");if(e)for(var t=e.getObjects(),n=this.tiledMap.getTileSize(),a=this.tiledMap.getMapSize(),i=0;i<t.length;i++){for(var c=t[i],l=t[i].points,d=[],u=this.node.addComponent(cc.PhysicsPolygonCollider),h=0;h<l.length;h++)d.push(cc.v2(l[h].x+c.offset.x,-l[h].y+(n.height*a.height-c.offset.y)));u.tag=o.default.Tag.tagPlat;var p=r.default.CUR_LEVEL,f=r.default.CUR_MODE;55==p&&f==s.MODE_TYPE_STRUCT.MODE1?u.restitution=1:51!=p&&54!=p&&68!=p&&69!=p||f!=s.MODE_TYPE_STRUCT.MODE2?77==p&&f==s.MODE_TYPE_STRUCT.MODE2?u.restitution=.3:u.restitution=0:u.restitution=.45,u.friction=.5,u.points=d,u.apply()}},t=__decorate([l],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./Common":"Common","./GameConfig":"GameConfig"}],LoadMap:[function(e,t,n){"use strict";cc._RF.push(t,"0de51fa6ElB4b3aSX95+BCV","LoadMap"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("../../GameUtils"),r=e("../../module/data/StageDataMgr"),s=e("./GameConfig"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tiledMap=null,t.index=1,t.loadMap=function(){var e=this.tiledMap.getObjectGroup("obj"),t=cc.v2(0,0);if(r.default.CUR_LEVEL<=32&&r.default.CUR_MODE==s.MODE_TYPE_STRUCT.MODE1?(t.x=-400,t.y=-896):(t.x=-796,t.y=-1440),e)for(var n=e.getObjects(),a=this.tiledMap.getTileSize(),i=this.tiledMap.getMapSize(),c=0;c<n.length;c++){for(var l=n[c],d=n[c].points,u=[],h=this.node.addComponent(cc.PhysicsPolygonCollider),p=0;p<d.length;p++)u.push(cc.v2(d[p].x+l.offset.x+t.x,-d[p].y+(a.height*i.height-l.offset.y+t.y)));h.tag=o.default.Tag.tagPlat,h.points=u,h.apply()}},t}return __extends(t,e),t.prototype.start=function(){this.tiledMap=this.node.getComponent(cc.TiledMap),this.loadMap()},t.prototype.changeMap=function(e){var t=this;cc.director.getPhysicsManager().enabled=!1,cc.director.getCollisionManager().enabled=!1,i.default.loadRes("maps/map"+this.index,cc.TiledMapAsset,!0,function(e){t.tiledMap=t.node.getComponent(cc.TiledMap),t.tiledMap.tmxAsset=e,t.loadMap(),t.index++,cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0})},t.prototype.onBeginContact=function(e,t,n){n.tag==o.default.Tag.tagCubeBox&&n.getComponent(cc.RigidBody).linearVelocity.mag()>=300&&a.default.instance.playSound("road_pz")},t.prototype.loadTileMap=function(e,t,n){var a=e.getObjectGroup("obj");if(a)for(var i=a.getObjects(),r=e.getTileSize(),s=e.getMapSize(),c=0;c<i.length;c++){for(var l=i[c],d=i[c].points,u=[],h=0;h<d.length;h++)u.push(cc.v2(d[h].x+l.offset.x+n.x),-d[h].y+(r.height*s.height-l.offset.y+n.y));t.tag=o.default.Tag.tagPlat,t.points=u,t.apply()}},t=__decorate([l],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./Common":"Common","./GameConfig":"GameConfig"}],Load:[function(e,t,n){"use strict";cc._RF.push(t,"61c8eJmtFhAB5BeCiozPpoI","Load"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../module/data/MainDataMgr"),a=e("../GameSystem"),i=e("../module/meta/PBManager"),r=e("../gamecore/GameCoreEventNames"),s=e("../gamecore/deer/DeerSDK"),c=e("../gamecore/deer/DeerSDKEventNames"),l=e("../GameUtils"),d=e("../gamecore/wechat/WXShare"),u=e("../view/stageMode/GameConfig"),h=e("../gamecore/base/SyncDataToWXCloud"),p=e("../gamecore/managers/GameManager"),f=e("../gamecore/xiaoyaoji/XYJEventNames"),g=e("../gamecore/xiaoyaoji/XYJAPI"),m=e("../gamecore/base/GameValues"),_=e("../tank/GameData"),y=e("../tank/TankDataMgr"),v=cc._decorator,M=v.ccclass,C=v.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progre=null,t.resIndex=0,t.totalResIndex=5,t.adComplete=!1,t.timer=0,t}return __extends(t,e),t.prototype.onLoad=function(){if(_.default.instance.m_curLevel=y.default.instance.getData(y.default.KEY_CUR_STAGE_NUM)%40,cc.sys.platform===cc.sys.WECHAT_GAME){var e=l.default.instance.shareData();d.default.setOnShareAppMessage(e.data,e.img)}setTimeout(function(){cc.director.loadScene("mainScene")},2e3)},t.prototype.start=function(){},t.prototype.init=function(){a.default.init(),i.default.instance.isReady?this.pbCallBack():i.default.instance.addEventListener(r.default.COMMON_READY,this.pbCallBack,this),this.continue(),s.default.instance.addEventListener(c.default.READY,this.deerSdkInitEvent,this),s.default.initSDK(a.default.appId,a.default.defaultChannelID,a.default.defaultAdID),this.resIndex++,cc.sys.platform===cc.sys.WECHAT_GAME||this.deerSdkInitEvent(),this.initPrefabs()},t.prototype.loadSubPackage=function(){var e=this;cc.loader.downloader.loadSubpackage("sounds",function(t){t?(console.error("subpkg download failed"),e.loadSubPackage()):e.resIndex++})},t.prototype.pbCallBack=function(){u.default.instance.gameMeta||(u.default.instance.gameMeta=i.default.instance.gameMeta),this.resIndex++},t.prototype.continue=function(){cc.director.preloadScene("mainScene"),0==o.default.instance.getData(o.default.KEY_NEW_PLAYER)&&(console.log("\u7981\u6b62\u4e0b\u8f7d"),h.default.instance.forbidToSyncDataFromService()),l.default.instance.wxGetLaunchOptionsSync()},t.prototype.update=function(e){this.timer+=e,this.timer>2&&(this.timer=2),this.progre.progress=this.timer/2},t.prototype.loadScene=function(e){var t=this;u.default.instance.lastscene="loading",u.default.instance.nowscene=e,cc.director.loadScene(e,function(n){n?t.loadScene(e):1==o.default.instance.getData(o.default.KEY_NEW_PLAYER)&&(o.default.IS_FIRST_OPEN=!0,o.default.instance.setData(o.default.KEY_LOGIN_DAY,(new Date).getDate()))})},t.prototype.XYJSDKinitEvent=function(){var e=function(){if(cc.sys.platform===cc.sys.WECHAT_GAME){var e=l.default.instance.shareData();d.default.setOnShareAppMessage(e.data,e.img)}};p.default.eventManager.addEventListener(f.default.EVENT_USER_READY,e,this,0,!0),p.default.eventManager.addEventListener(f.default.EVENT_INIT_FAILED,e,this,0,!0),g.default.gameVersion=m.default.gameVersion,console.log("\u5c0f\u5e7a\u9e21\u521d\u59cb\u5316",'=="\u5c0f\u5e7a\u9e21\u521d\u59cb\u5316"=='),g.default.init("tank")},t.prototype.deerSdkInitEvent=function(){var e=this;this.XYJSDKinitEvent(),console.log("DeerSDK\u521d\u59cb\u5316\u5b8c\u6bd5",'=="DeerSDK\u521d\u59cb\u5316\u5b8c\u6bd5"'),h.default.instance.isReady;var t=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME&&s.default.instance.isNewUser&&e.resIndex==e.totalResIndex)return e.unschedule(t),void e.loadScene("mainScene");(h.default.instance.isReady&&e.resIndex==e.totalResIndex&&e.adComplete||cc.sys.platform!==cc.sys.WECHAT_GAME&&e.resIndex==e.totalResIndex)&&(e.unschedule(t),e.loadScene("mainScene"))};this.schedule(t,.2,cc.macro.REPEAT_FOREVER),this.resIndex++},t.prototype.initPrefabs=function(){this.resIndex++},__decorate([C(cc.ProgressBar)],t.prototype,"progre",void 0),t=__decorate([M],t)}(cc.Component);n.default=E,cc._RF.pop()},{"../GameSystem":"GameSystem","../GameUtils":"GameUtils","../gamecore/GameCoreEventNames":"GameCoreEventNames","../gamecore/base/GameValues":"GameValues","../gamecore/base/SyncDataToWXCloud":"SyncDataToWXCloud","../gamecore/deer/DeerSDK":"DeerSDK","../gamecore/deer/DeerSDKEventNames":"DeerSDKEventNames","../gamecore/managers/GameManager":"GameManager","../gamecore/wechat/WXShare":"WXShare","../gamecore/xiaoyaoji/XYJAPI":"XYJAPI","../gamecore/xiaoyaoji/XYJEventNames":"XYJEventNames","../module/data/MainDataMgr":"MainDataMgr","../module/meta/PBManager":"PBManager","../tank/GameData":"GameData","../tank/TankDataMgr":"TankDataMgr","../view/stageMode/GameConfig":"GameConfig"}],MainDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"8730fxZES5NQqM1uZA3lcai","MainDataMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/managers/GameManager"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){this.userOffAward=0,this.sharecount={},this.newPlayer=!0,this.welfareDay=-1,this.loginDay=0,this.roleSkinArr=[{id:0,state:1,equip:!0}],this.signinrecord=[],this.localKey={}}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastChangedKey",{get:function(){return this._lastChangedKey},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t,n){void 0===n&&(n=!1),this[e]=t,o.default.dataManager.setData(e,null,!0,n,!0),o.default.dataManager.setData(e,t,!0,n,!0)},e.prototype.getData=function(e){if(this.localKey[e])return this[e];var t=o.default.dataManager.getData(e);return void 0==t||null==t?this[e]:(this[e]=t,this.localKey[e]=!0,t)},e.KEY_USER_OFF_AWARD="userOffAward",e.KEY_SHARE_COUNT="sharecount",e.KEY_NEW_PLAYER="newPlayer",e.KEY_WELFAREDAY="welfareDay",e.KEY_ROLE_SKIN_ARR="roleSkinArr",e.KEY_USER_SIGIN_RECORD="signinrecord",e.KEY_LOGIN_DAY="loginDay",e.KEY_SHOW_WELFARE_DAY="showWelfareDay",e.IS_FIRST_ENTER_MAINSCENE=!0,e.coinAniComp=null,e.CUR_DEATH_AD_INDEX=0,e.CUR_DEATH_AD_TYPE=0,e.IS_FIRST_OPEN=!1,e.showWelfareDay=0,e._instance=null,e=t=__decorate([i],e)}());n.default=r;var s=function(){return function(e,t,n){void 0===n&&(n=!1),this.id=e,this.state=t,this.equip=n}}();n.RoleSKinInfo=s,cc._RF.pop()},{"../../gamecore/managers/GameManager":"GameManager"}],MainFeedBack:[function(e,t,n){"use strict";cc._RF.push(t,"9657b8qReFCSJSK4F7E0yh0","MainFeedBack"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/managers/GameManager"),a=e("../../gamecore/deer/DeerSDK"),i=e("../../GameUtils"),r=e("../base/BasePanelComp"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wx_Edit=null,t.phone_Edit=null,t.question_Edit=null,t}return __extends(t,e),t.prototype.submitInfo=function(){o.default.soundsManager.playTapSound();var e=this.wx_Edit.string.trim(),t=this.phone_Edit.string.trim(),n=this.question_Edit.string.trim();""==e.trim()||""==n.trim()?i.default.showToast("\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):""!=t?this.saveFeedBackInfo(e,t,n):this.saveFeedBackInfo(e,"",n)},t.prototype.saveFeedBackInfo=function(e,t,n){var o=this;a.default.instance.sendFeedback({cellphone:n,wx:e,content:t},function(){i.default.showToast("\u63d0\u4ea4\u6210\u529f"),o.close()},function(){i.default.showToast("\u63d0\u4ea4\u5931\u8d25"),o.wx_Edit.string="",o.wx_Edit.string="",o.wx_Edit.string=""})},__decorate([l(cc.EditBox)],t.prototype,"wx_Edit",void 0),__decorate([l(cc.EditBox)],t.prototype,"phone_Edit",void 0),__decorate([l(cc.EditBox)],t.prototype,"question_Edit",void 0),t=__decorate([c],t)}(r.default);n.default=d,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/managers/GameManager":"GameManager","../base/BasePanelComp":"BasePanelComp"}],MainGoldGift:[function(e,t,n){"use strict";cc._RF.push(t,"e375bRute1K/6LDUHZPjfIb","MainGoldGift"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/BasePanelComp"),a=e("../stageMode/GameConfig"),i=e("../../GameUtils"),r=e("../../module/data/StageDataMgr"),s=e("../../gamecore/managers/GameManager"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.coin=null,t.coins=null,t.shine=null,t}return __extends(t,e),t.prototype.start=function(){this.setCoin(),this.init(),this.shine.runAction(cc.repeatForever(cc.rotateBy(1,540)))},t.prototype.setCoin=function(){this.coin.string=a.default.instance.gameMeta.coinRewardMeta[0].rewardNum+""},t.prototype.getCoin=function(e){var t=this;s.default.soundsManager.playTapSound(),i.default.instance.showVideoAd(function(){r.default.instance.setData(r.default.KEY_USER_GOLD_NUM,r.default.instance.getData(r.default.KEY_USER_GOLD_NUM)+a.default.instance.gameMeta.coinRewardMeta[0].rewardNum),t.node&&t.coins&&(t.showFlyGoldEvent(t.coins,cc.find("Canvas/leftnode/coinbg/goldtext")),t.close()),i.default.buriedPoint(6),i.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97\u91d1\u5e01:"+a.default.instance.gameMeta.coinRewardMeta[0].rewardNum),i.default.buriedPoint(6)},function(){i.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u83b7\u5f97\u91d1\u5e01"+a.default.instance.gameMeta.coinRewardMeta[0].rewardNum,function(){t.getCoin(null)})},function(){i.default.instance.playFailOnShare(function(e){switch(e){case 1:r.default.instance.setData(r.default.KEY_USER_GOLD_NUM,r.default.instance.getData(r.default.KEY_USER_GOLD_NUM)+a.default.instance.gameMeta.coinRewardMeta[0].rewardNum),t.node&&t.coins&&(t.showFlyGoldEvent(t.coins,cc.find("Canvas/leftnode/coinbg/goldtext")),t.close()),i.default.buriedPoint(6),i.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97\u91d1\u5e01:"+a.default.instance.gameMeta.coinRewardMeta[0].rewardNum)}},"MainGoldGift")})},__decorate([d(cc.Label)],t.prototype,"coin",void 0),__decorate([d(cc.Node)],t.prototype,"coins",void 0),__decorate([d(cc.Node)],t.prototype,"shine",void 0),t=__decorate([l],t)}(o.default);n.default=u,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../gamecore/managers/GameManager":"GameManager","../../module/data/StageDataMgr":"StageDataMgr","../base/BasePanelComp":"BasePanelComp","../stageMode/GameConfig":"GameConfig"}],MainScene:[function(e,t,n){"use strict";cc._RF.push(t,"834f3pP3gNFLbvA0aD3FiUS","MainScene"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/managers/GameManager"),a=e("../../gamecore/GameCoreEventNames"),i=e("../../GameUtils"),r=e("../../module/data/StageDataMgr"),s=(e("../../../Script/gamecoreUI/boardads/BoardAdsPanel"),e("../../gamecore/deer/DeerSDK")),c=e("../../gamecore/wechat/WXBannerAd"),l=cc._decorator,d=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boardIdPanel=null,t}return __extends(t,e),t.prototype.onLoad=function(){o.default.eventManager.addEventListener(a.default.DATA_CHANGE,this.onDataChange,this),i.default.instance.wxOnshow()},t.prototype.start=function(){this.refreshDimond(),this.refreshGold(),i.default.instance.isWXonHide(),i.default.buriedPoint(1)},t.prototype.onDataChange=function(e){var t=e.data;t!=r.default.KEY_USER_GOLD_NUM?t!=r.default.KEY_USER_DIMOND_NUM||this.refreshDimond():this.refreshGold()},t.prototype.showRank=function(){var e=this;i.default.loadRes("prefabs/rank/rank",cc.Prefab,!0,function(t){var n=cc.instantiate(t);e.node.addChild(n)}),i.default.buriedPoint(11)},t.prototype.refreshGold=function(){r.default.instance.getData(r.default.KEY_USER_GOLD_NUM)},t.prototype.refreshDimond=function(){r.default.instance.getData(r.default.KEY_USER_DIMOND_NUM)},t.prototype.onDestroy=function(){o.default.eventManager.removeEventListener(a.default.DATA_CHANGE,this.onDataChange,this)},t.prototype.onAddPointlayout=function(){},t.prototype.showWelfareClickEvent=function(e){},t.prototype.showSettingPanelClickEvent=function(e){o.default.soundsManager.playTapSound()},t.prototype.showRoleSelectClickEvent=function(e){var t=this;o.default.soundsManager.playTapSound(),i.default.loadRes("prefabs/hall/roleSelectPanel",cc.Prefab,!0,function(e){var n=cc.instantiate(e);try{t.node.addChild(n)}catch(e){n.destroy()}})},t.prototype.showKeyGiftClickEvent=function(e){var t=this;o.default.soundsManager.playTapSound(),i.default.loadRes("prefabs/hall/keyGiftPanel",cc.Prefab,!0,function(e){var n=cc.instantiate(e);try{t.node.addChild(n)}catch(e){n.destroy()}}),i.default.buriedPoint(7)},t.prototype.showGoldGiftClickEvent=function(e){var t=this;o.default.soundsManager.playTapSound(),i.default.loadRes("prefabs/hall/goldGift",cc.Prefab,!0,function(e){var n=cc.instantiate(e);t.node.addChild(n)}),i.default.buriedPoint(5)},t.prototype.showSignClickEvent=function(e){var t=this;e&&o.default.soundsManager.playTapSound(),0!=s.default.instance.isOnline&&i.default.loadRes("prefabs/sigin/sigin",cc.Prefab,!0,function(e){try{c.default.currentAd&&c.default.currentAd.hide();var n=cc.instantiate(e);t.node&&t.node.addChild(n)}catch(t){e=null,c.default.currentAd&&c.default.currentAd.show()}})},t.prototype.onGameStart=function(e){e&&o.default.soundsManager.playTapSound(),cc.director.loadScene("stageScene"),i.default.buriedPoint(2)},t.prototype.update=function(e){},t=__decorate([d],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../../../Script/gamecoreUI/boardads/BoardAdsPanel":"BoardAdsPanel","../../GameUtils":"GameUtils","../../gamecore/GameCoreEventNames":"GameCoreEventNames","../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/managers/GameManager":"GameManager","../../gamecore/wechat/WXBannerAd":"WXBannerAd","../../module/data/StageDataMgr":"StageDataMgr"}],MainSetting:[function(e,t,n){"use strict";cc._RF.push(t,"85248eEjHtHnpYC+6P9hqqV","MainSetting"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/managers/GameManager"),a=e("../../GameUtils"),i=e("../../gamecore/wechat/WXUser"),r=e("../../gamecore/deer/DeerSDK"),s=e("../base/BasePanelComp"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.muscinode=null,t.soundnode=null,t.id=null,t}return __extends(t,e),t.prototype.start=function(){this.initState(),this.init(),r.default.instance.userVO&&r.default.instance.userVO.id&&(i.default.userInfo?this.id.string="ID:"+r.default.instance.userVO.id:i.default.onUserInfo(this.updateUserInfo))},t.prototype.initState=function(){var e=o.default.soundsManager.soundMuted,t=this.soundnode.getChildByName("onbg"),n=this.soundnode.getChildByName("offbg");e?(t.active=!1,n.active=!0):(t.active=!0,n.active=!1);var a=o.default.soundsManager.musicMuted,i=this.muscinode.getChildByName("onbg"),r=this.muscinode.getChildByName("offbg");a?(i.active=!1,r.active=!0):(i.active=!0,r.active=!1)},t.prototype.closeView=function(){this.close()},t.prototype.myGameInfo=function(){o.default.soundsManager.playTapSound()},t.prototype.onService=function(){o.default.soundsManager.playTapSound(),a.default.instance.wxOpenCustomerServiceConversation()},t.prototype.onShare=function(){o.default.soundsManager.playTapSound(),a.default.instance.onShare()},t.prototype.controlSound=function(){o.default.soundsManager.playTapSound();var e=o.default.soundsManager.soundMuted,t=this.soundnode.getChildByName("onbg"),n=this.soundnode.getChildByName("offbg");e?(o.default.soundsManager.unmuteSound(),t.active=!0,n.active=!1):(t.active=!1,n.active=!0,o.default.soundsManager.muteSound())},t.prototype.controlMusic=function(){o.default.soundsManager.playTapSound();var e=o.default.soundsManager.musicMuted,t=this.muscinode.getChildByName("onbg"),n=this.muscinode.getChildByName("offbg");e?(t.active=!0,n.active=!1,o.default.soundsManager.unmuteMusic()):(t.active=!1,n.active=!0,o.default.soundsManager.muteMusic())},t.prototype.showFeedBack=function(){var e=this;o.default.soundsManager.playTapSound(),cc.loader.loadRes("prefabs/hall/feedback",cc.Prefab,function(t,n){if(!t){var o=cc.instantiate(n);e.node.addChild(o)}})},t.prototype.updateUserInfo=function(){r.default.instance.userVO&&r.default.instance.userVO.id&&(this.id.string="ID:"+r.default.instance.userVO.id)},t.prototype.onDestroy=function(){i.default.offUserInfo(this.updateUserInfo)},__decorate([d(cc.Node)],t.prototype,"muscinode",void 0),__decorate([d(cc.Node)],t.prototype,"soundnode",void 0),__decorate([d(cc.Label)],t.prototype,"id",void 0),t=__decorate([l],t)}(s.default);n.default=u,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/managers/GameManager":"GameManager","../../gamecore/wechat/WXUser":"WXUser","../base/BasePanelComp":"BasePanelComp"}],MainSiginitem:[function(e,t,n){"use strict";cc._RF.push(t,"f0a58yb8X5PsJxhMWwegILp","MainSiginitem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../gamecore/managers/GameManager"),a=e("../../../gamecore/GameCoreEventNames"),i=e("../../../module/data/MainDataMgr"),r=e("../../stageMode/GameConfig"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.day=null,t.award=null,t.iconbg=null,t.shadow=null,t.id=0,t.MainSiginComp=null,t}return __extends(t,e),t.prototype.onLoad=function(){o.default.eventManager.addEventListener(a.default.DATA_CHANGE,this.onDataChange,this)},t.prototype.onDataChange=function(e){e.data==i.default.KEY_USER_SIGIN_RECORD&&this.init()},t.prototype.start=function(){},t.prototype.init=function(){var e=r.default.instance.getItemState(this.id);switch(this.day.string=""+(this.id+1),this.award.string=r.default.instance.getAward(this.id)+"",console.log("\u7b7e\u5230\u6570\u636e",e,this.id),e){case 1:0==this.id?(this.iconbg.spriteFrame=this.MainSiginComp.spfmArr[1],this.settingUi(1)):(this.iconbg.spriteFrame=this.MainSiginComp.spfmArr[0],this.settingUi(3));break;case 2:this.settingUi(2),this.iconbg.spriteFrame=this.MainSiginComp.spfmArr[0];break;case 3:this.iconbg.spriteFrame=this.MainSiginComp.spfmArr[1],this.settingUi(1);break;case 4:case 5:this.iconbg.spriteFrame=this.MainSiginComp.spfmArr[0],this.settingUi(3)}},t.prototype.settingUi=function(e){switch(e){case 1:this.shadow.node.active=!1;break;case 2:6==this.id?this.shadow.spriteFrame=this.MainSiginComp.spfmArr[3]:this.shadow.spriteFrame=this.MainSiginComp.spfmArr[2],this.iconbg.spriteFrame=this.MainSiginComp.spfmArr[0],this.shadow.node.active=!0;break;case 3:this.iconbg.spriteFrame=this.MainSiginComp.spfmArr[0],this.shadow.node.active=!1}},t.prototype.onDestroy=function(){o.default.eventManager.removeEventListener(a.default.DATA_CHANGE,this.onDataChange,this)},__decorate([l(cc.Label)],t.prototype,"day",void 0),__decorate([l(cc.Label)],t.prototype,"award",void 0),__decorate([l(cc.Sprite)],t.prototype,"iconbg",void 0),__decorate([l(cc.Sprite)],t.prototype,"shadow",void 0),t=__decorate([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../gamecore/GameCoreEventNames":"GameCoreEventNames","../../../gamecore/managers/GameManager":"GameManager","../../../module/data/MainDataMgr":"MainDataMgr","../../stageMode/GameConfig":"GameConfig"}],MainSigin:[function(e,t,n){"use strict";cc._RF.push(t,"7c6d05eQ99M36O4mRpn6wIf","MainSigin"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../base/BasePanelComp"),a=e("../../stageMode/GameConfig"),i=e("./MainSiginitem"),r=e("../../../GameUtils"),s=e("../../../module/data/MainDataMgr"),c=e("../../../module/data/StageDataMgr"),l=cc._decorator,d=l.ccclass,u=l.property,h=0,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.item=null,t.spfmArr=[],t}var n;return __extends(t,e),n=t,t.prototype.start=function(){this.init();var e=this.node.getChildByName("content").getChildByName("bg").getChildByName("item1").getComponent(i.default);e.id=6,e.MainSiginComp=this.node.getComponent(n),e.init();for(var t=0;t<6;t++){var o=cc.instantiate(this.item);o.getComponent(i.default).id=t,this.content.addChild(o),o.getComponent(i.default).MainSiginComp=this.node.getComponent(n),o.getComponent(i.default).init()}(this.onSiginAward(),1==a.default.instance.isSigin())&&(this.node.getChildByName("content").getChildByName("ReceiveBtn").getComponent(cc.RichText).string="<u>\u5df2\u9886\u53d6</u>")},t.prototype.onSiginAward=function(){h=a.default.instance.getAward(a.default.instance.isSiginId)},t.prototype.sigin=function(){0==a.default.instance.isSigin()?this.siginSuccss(1):r.default.showToast("\u4eca\u65e5\u5df2\u7b7e\u5230"),this.closeView()},t.prototype.threesigin=function(){var e=this;0==a.default.instance.isSigin()?r.default.instance.showVideoAd(function(){e.siginSuccss(2),e.closeView()},function(){r.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u9886\u53d6\u53cc\u500d\u91d1\u5e01\u5956\u52b1",function(){e.threesigin()})},function(){r.default.instance.playFailOnShare(function(t){switch(t){case 1:e.siginSuccss(2),e.closeView()}},"MainSigin1")}):(r.default.showToast("\u4eca\u65e5\u5df2\u7b7e\u5230"),this.closeView())},t.prototype.siginSuccss=function(e){var t=s.default.instance.getData(s.default.KEY_USER_SIGIN_RECORD);t[a.default.instance.isSiginId]=r.default.instance.serverTime.getTime(),c.default.instance.setData(c.default.KEY_USER_GOLD_NUM,c.default.instance.getData(c.default.KEY_USER_GOLD_NUM)+h*e),cc.find("Canvas/leftnode/coinbg/goldtext")&&this.showFlyGoldEvent(cc.find("Canvas"),cc.find("Canvas/leftnode/coinbg/goldtext")),r.default.showToast("\u606d\u559c\u83b7\u5f97"+h*e+"\u91d1\u5e01"),s.default.instance.setData(s.default.KEY_USER_SIGIN_RECORD,t)},t.prototype.closeView=function(){this.node&&this.close()},__decorate([u(cc.Node)],t.prototype,"content",void 0),__decorate([u(cc.Prefab)],t.prototype,"item",void 0),__decorate([u(cc.SpriteFrame)],t.prototype,"spfmArr",void 0),t=n=__decorate([d],t)}(o.default);n.default=p,cc._RF.pop()},{"../../../GameUtils":"GameUtils","../../../module/data/MainDataMgr":"MainDataMgr","../../../module/data/StageDataMgr":"StageDataMgr","../../base/BasePanelComp":"BasePanelComp","../../stageMode/GameConfig":"GameConfig","./MainSiginitem":"MainSiginitem"}],MainWelfare:[function(e,t,n){"use strict";cc._RF.push(t,"04fadUyd2FDL5NoPt5bQBjJ","MainWelfare"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/BasePanelComp"),a=e("../../GameUtils"),i=e("../../module/data/MainDataMgr"),r=e("../../gamecore/deer/DeerSDK"),s=e("../stageMode/GameConfig"),c=e("../../module/data/StageDataMgr"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bt1=null,t.txtCoinNum=null,t}return __extends(t,e),t.prototype.onLoad=function(){a.default.instance.wxOnshow()},t.prototype.start=function(){this.init(),this.txtCoinNum.string="x"+s.default.instance.gameMeta.welfareCentreMeta[0].coinReward},t.prototype.getAward=function(){var e=this;i.default.instance.getData(i.default.KEY_WELFAREDAY)!==r.default.instance.serverTime.getDate()?"1104"==s.default.instance.scene?(c.default.instance.setData(c.default.KEY_USER_HP_NUM,c.default.instance.getData(c.default.KEY_USER_HP_NUM)+s.default.instance.gameMeta.welfareCentreMeta[0].coinReward),a.default.showToast("\u606d\u559c\u83b7\u5f97"+s.default.instance.gameMeta.welfareCentreMeta[0].coinReward+"\u4f53\u529b"),i.default.instance.setData(i.default.KEY_WELFAREDAY,r.default.instance.serverTime.getDate(),!1),this.showFlyGoldEvent(this.bt1,cc.find("Canvas/leftnode/hpContent"),2),a.default.buriedPoint(14),this.scheduleOnce(function(){e.node&&e.close()},1)):a.default.showToast("\u8bf7\u4ece\u6211\u7684\u5c0f\u7a0b\u5e8f\u6253\u5f00\u6e38\u620f"):a.default.showToast("\u4eca\u65e5\u5df2\u9886\u53d6")},__decorate([u(cc.Node)],t.prototype,"bt1",void 0),__decorate([u(cc.Label)],t.prototype,"txtCoinNum",void 0),t=__decorate([d],t)}(o.default);n.default=h,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../gamecore/deer/DeerSDK":"DeerSDK","../../module/data/MainDataMgr":"MainDataMgr","../../module/data/StageDataMgr":"StageDataMgr","../base/BasePanelComp":"BasePanelComp","../stageMode/GameConfig":"GameConfig"}],ModeListItem:[function(e,t,n){"use strict";cc._RF.push(t,"c9a25uvJKNGWbkJslDRz3ss","ModeListItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../stageMode/GameConfig"),a=e("../../SoundMgr"),i=e("../../GameUtils"),r=e("../../module/data/StageDataMgr"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtIndex=null,t.itemBg=null,t.ModeListComp=null,t.passStageInfo=null,t.locked=!1,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.init=function(e){if(this.txtIndex.string=e.index+"",this.passStageInfo=e,this.itemBg.spriteFrame=this.ModeListComp.stateSpfmArr[e.skip],e.skip==o.STAGE_STATE_STRUCT.UNLOCK)for(var t=[cc.v2(-44,37),cc.v2(0,57),cc.v2(44,37)],n=0;n<3;n++){var a=cc.instantiate(this.ModeListComp.star);this.node.addChild(a),a.getComponent(cc.Sprite).spriteFrame=this.ModeListComp.starSpfmArr[n>=e.star?1:0],a.position=t[n]}else e.skip==o.STAGE_STATE_STRUCT.HEIGHTEST?this.txtIndex.node.color=cc.color(136,52,13,255):e.skip==o.STAGE_STATE_STRUCT.LOCK&&(this.node.opacity=180)},t.prototype.enterMapClickEvent=function(e){if(a.default.instance.playTapSound(),r.default.instance.getData(r.default.KEY_USER_HP_NUM)<=0&&!r.default.instance.judgeIsFreeStage(r.default.CUR_MODE,this.passStageInfo.index)){if(this.locked)return void i.default.instance.loadSceneWithOperate("map");try{i.default.instance.openKeyGiftEvent(cc.find("Canvas").getChildByName("content").getChildByName("hpContent"))}catch(e){}}else{if(this.passStageInfo.skip!=o.STAGE_STATE_STRUCT.LOCK)return r.default.CUR_MODE||(r.default.CUR_MODE=o.MODE_TYPE_STRUCT.MODE1),r.default.CUR_LEVEL=this.passStageInfo.index,this.locked||(this.locked=!0,r.default.NEED_SUB_HP=!0),void i.default.instance.loadSceneWithOperate("map");i.default.showToast("\u5f53\u524d\u5173\u5361\u5c1a\u672a\u89e3\u9501\uff0c\u8bf7\u5148\u5b8c\u6210\u524d\u9762\u7684\u5173\u5361\u3002")}},__decorate([l(cc.Label)],t.prototype,"txtIndex",void 0),__decorate([l(cc.Sprite)],t.prototype,"itemBg",void 0),t=__decorate([c],t)}(cc.Component);n.default=d,window.gotoStage||(window.gotoStage=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=1),r.default.CUR_MODE=e,r.default.CUR_LEVEL=t,"1map1"!=n?i.default.instance.loadSceneWithOperate("map"):cc.director.loadScene(n)}),window.showAni||(window.showAni=function(e,t,n,o){void 0===e&&(e=0),void 0===t&&(t=1),void 0===o&&(o=!1);var a="http://192.168.3.6/map/"+e+"map"+t+".json";cc.loader.load(a,function(i,s){console.log(i,s,"uuuuuuuu0"),r.default.CUR_MODE=s.mode,r.default.CUR_MODE=s.level,r.default.USER_OP.location=s.location,r.default.USER_OP.time=s.time,console.log(r.default.USER_OP,"uuuuuuuuuuuuuuuuuuuuuuuu"),i?console.log(a,"\u4e0d\u5b58\u5728"):(r.default.IS_ANI=n,o&&gotoStage(e,t))})}),cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../module/data/StageDataMgr":"StageDataMgr","../stageMode/GameConfig":"GameConfig"}],ModeList:[function(e,t,n){"use strict";cc._RF.push(t,"8ef0cbbY1NFo6UEqprUFbpf","ModeList"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../GameUtils"),a=e("../../SoundMgr"),i=e("../../module/data/StageDataMgr"),r=e("../stageMode/GameConfig"),s=e("./ModeListItem"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtModeStars=null,t.txtProgrs=null,t.subItem=null,t.content=null,t.item=null,t.star=null,t.starSpfmArr=[],t.stateSpfmArr=[],t.scrollView=null,t.freeHpNode=null,t.modeInfo=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){var e=this,t=r.default.instance.getModeStageNumByMode(i.default.CUR_MODE);this.txtModeStars.string=i.default.instance.getStarsByMode(i.default.CUR_MODE)+"/"+3*t,this.modeInfo=i.default.instance.getInfoByMode(i.default.CUR_MODE);var n=this.modeInfo.length;this.txtProgrs.string=n==t?"\u8fdb\u5ea6\uff1a\u5df2\u901a\u5173":"\u8fdb\u5ea6\uff1a\u7b2c"+(n+1)+"\u5173";for(var a=0,c=0,l=0,d=Math.floor(t/16),u=function(){var e=cc.instantiate(h.item);o.default.loadRes("textures/modeSelect/0/bg"+(c+1),cc.SpriteFrame,!1,function(t){e&&e.getChildByName("bg")&&(e.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=t)}),h.content.addChild(e),0==c&&i.default.CUR_MODE==r.MODE_TYPE_STRUCT.MODE1&&(h.freeHpNode.parent=e,h.freeHpNode.position=cc.v2(-300,316),h.freeHpNode.active=!0);for(var t=0;t<16;t++){var d=cc.instantiate(h.subItem);e.getChildByName("subContent").addChild(d),h.modeInfo[a]||(h.modeInfo[a]={skip:r.STAGE_STATE_STRUCT.LOCK,star:0,index:a+1},a==n&&(h.modeInfo[a].skip=r.STAGE_STATE_STRUCT.HEIGHTEST,l=c)),d.getComponent(s.default).ModeListComp=h,d.getComponent(s.default).init(h.modeInfo[a]),a++}},h=this;c<d;c++)u();if(t%16!=0){var p=cc.instantiate(this.item);this.content.addChild(p),o.default.loadRes("textures/modeSelect/0/bg"+(c+1),cc.SpriteFrame,!1,function(e){p.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=e});for(var f=0;f<t%16;f++){var g=cc.instantiate(this.subItem);p.getChildByName("subContent").addChild(g),this.modeInfo[a]||(this.modeInfo[a]={skip:r.STAGE_STATE_STRUCT.LOCK,star:0,index:a+1},a==n&&(this.modeInfo[a].skip=r.STAGE_STATE_STRUCT.HEIGHTEST)),g.getComponent(s.default).ModeListComp=this,g.getComponent(s.default).init(this.modeInfo[a]),a++}}this.scheduleOnce(function(){l>=e.scrollView.content.children.length||e.scrollView.scrollToOffset(cc.v2(e.scrollView.content.children[l].x,-e.scrollView.content.children[l].y-e.scrollView.content.children[l].height/2))})},t.prototype.backModeSelectSceneClickEvent=function(e){a.default.instance.playTapSound(),o.default.instance.loadSceneWithOperate("modeSelectScene")},__decorate([d(cc.Label)],t.prototype,"txtModeStars",void 0),__decorate([d(cc.Label)],t.prototype,"txtProgrs",void 0),__decorate([d(cc.Node)],t.prototype,"subItem",void 0),__decorate([d(cc.Node)],t.prototype,"content",void 0),__decorate([d(cc.Node)],t.prototype,"item",void 0),__decorate([d(cc.Node)],t.prototype,"star",void 0),__decorate([d(cc.SpriteFrame)],t.prototype,"starSpfmArr",void 0),__decorate([d(cc.SpriteFrame)],t.prototype,"stateSpfmArr",void 0),__decorate([d(cc.ScrollView)],t.prototype,"scrollView",void 0),__decorate([d(cc.Node)],t.prototype,"freeHpNode",void 0),t=__decorate([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../module/data/StageDataMgr":"StageDataMgr","../stageMode/GameConfig":"GameConfig","./ModeListItem":"ModeListItem"}],ModeSelectItem:[function(e,t,n){"use strict";cc._RF.push(t,"b1e772kS/VGhZxKVb8sorp/","ModeSelectItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../stageMode/GameConfig"),a=e("../../SoundMgr"),i=e("../../GameUtils"),r=e("../../module/data/StageDataMgr"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.newTagNode=null,t.unlockNode=null,t.lock=null,t.txtNeedStar=null,t.modeStars=null,t.modeName=null,t.curModeInfo=null,t.mode=null,t.locked=!1,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.init=function(e){this.mode=e,this.curModeInfo=o.default.instance.getCurModeInfo(e),this.curModeInfo.lockState?(this.lock.active=!1,this.unlockNode.active=!0,this.modeStars.string=this.curModeInfo.modeStars+"",this.newTagNode.active=this.curModeInfo.isNewMode):(this.lock.on(cc.Node.EventType.TOUCH_END,this.enterModeListClickEvent,this),this.lock.active=!0,this.unlockNode.active=!1,this.txtNeedStar.string=this.curModeInfo.needStars)},t.prototype.enterModeListClickEvent=function(e){if(a.default.instance.playTapSound(),this.curModeInfo.lockState)r.default.CUR_MODE=this.mode,i.default.instance.loadSceneWithOperate("modeListScene"),i.default.buriedPoint(17);else{var t=Number(this.curModeInfo.needStars.split("/")[1])-Number(this.curModeInfo.needStars.split("/")[0]);i.default.showToast("\u8fd8\u5dee"+t+"\u661f\u5373\u53ef\u5f00\u542f\uff0c\u52a0\u6cb9\u95ef\u5173\u5427!")}},t.prototype.enterHighestStageClickEvent=function(e){a.default.instance.playTapSound(),this.mode||(this.mode=o.MODE_TYPE_STRUCT.MODE1);var t=r.default.instance.getHighestStageByMode(this.mode),n=r.default.instance.getData(r.default.KEY_USER_HP_NUM);if(!this.locked&&n<=0&&!r.default.instance.judgeIsFreeStage(this.mode,t))try{i.default.instance.openKeyGiftEvent(cc.find("Canvas").getChildByName("content").getChildByName("hpContent"))}catch(e){}else r.default.CUR_MODE=this.mode,r.default.CUR_LEVEL=t,e&&(this.locked?i.default.showToast("\u5173\u5361\u6b63\u5728\u52a0\u8f7d\u4e2d"):(this.locked=!0,r.default.NEED_SUB_HP=!0),i.default.instance.loadSceneWithOperate("map"))},__decorate([l(cc.Node)],t.prototype,"newTagNode",void 0),__decorate([l(cc.Node)],t.prototype,"unlockNode",void 0),__decorate([l(cc.Node)],t.prototype,"lock",void 0),__decorate([l(cc.Label)],t.prototype,"txtNeedStar",void 0),__decorate([l(cc.Label)],t.prototype,"modeStars",void 0),__decorate([l(cc.Sprite)],t.prototype,"modeName",void 0),t=__decorate([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../module/data/StageDataMgr":"StageDataMgr","../stageMode/GameConfig":"GameConfig"}],ModeSelect:[function(e,t,n){"use strict";cc._RF.push(t,"f4e6f0dk8lL/ZT6Su86zH0Z","ModeSelect"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../GameUtils"),a=e("../../module/data/StageDataMgr"),i=e("./ModeSelectItem"),r=e("../../SoundMgr"),s=e("../stageMode/GameConfig"),c=e("../../gamecore/deer/DeerSDK"),l=e("../../control/WXScreenAdMgr"),d=cc._decorator,u=d.ccclass,h=d.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtTotalStars=null,t.content=null,t.item=null,t.moreMode=null,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.txtTotalStars.string=a.default.instance.getAllModeStars()+"",this.item.getComponent(i.default).init(0);var t=s.default.instance.getCurRoleSKinInfo().imageId;o.default.loadRes("textures/player/"+t,cc.SpriteFrame,!1,function(t){try{e.item.getChildByName("self").getComponent(cc.Sprite).spriteFrame=t}catch(e){t=null}}),this.moreMode.parent=this.content;for(var n=1;n<this.content.childrenCount-1;n++)c.default.instance.isOnline||(this.content.children[n].active=!1);this.content.children[1].getComponent(i.default).init(2),this.content.children[2].getComponent(i.default).init(1),this.content.children[3].getComponent(i.default).init(3),cc.director.preloadScene("modeListScene")},t.prototype.backMainSceneClickEvent=function(e){r.default.instance.playTapSound(),o.default.instance.loadSceneWithOperate("mainScene"),l.default.instance.showRandAd()},__decorate([h(cc.Label)],t.prototype,"txtTotalStars",void 0),__decorate([h(cc.Node)],t.prototype,"content",void 0),__decorate([h(cc.Node)],t.prototype,"item",void 0),__decorate([h(cc.Node)],t.prototype,"moreMode",void 0),t=__decorate([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../control/WXScreenAdMgr":"WXScreenAdMgr","../../gamecore/deer/DeerSDK":"DeerSDK","../../module/data/StageDataMgr":"StageDataMgr","../stageMode/GameConfig":"GameConfig","./ModeSelectItem":"ModeSelectItem"}],MoveAction:[function(e,t,n){"use strict";cc._RF.push(t,"c3f23Pa6SRGq5srYPcvDtS3","MoveAction"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.movedistance=0,t.time=0,t.movetype=!1,t}return __extends(t,e),t.prototype.start=function(){this.init()},t.prototype.init=function(){var e=this,t=null,n=null;0==this.movetype?(t=cc.moveBy(1,cc.v2(this.movedistance,0)),n=cc.moveBy(1,cc.v2(-this.movedistance,0))):(t=cc.moveBy(1,cc.v2(0,this.movedistance)),n=cc.moveBy(1,cc.v2(0,-this.movedistance)));var o=cc.sequence(t,n,cc.callFunc(function(){e.init()}));this.node.runAction(o)},__decorate([i()],t.prototype,"movedistance",void 0),__decorate([i()],t.prototype,"time",void 0),__decorate([i()],t.prototype,"movetype",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],MoveCollider:[function(e,t,n){"use strict";cc._RF.push(t,"df75eIXhz9KY7/MF7vncWzH","MoveCollider"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.start=function(){this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(-500,0)),cc.moveBy(2,cc.v2(500,0))).repeatForever())},t}return __extends(t,e),t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],MoveNode:[function(e,t,n){"use strict";cc._RF.push(t,"473bdphG9xF4I8428uZrpjd","MoveNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameConfig"),a=e("../../module/data/StageDataMgr"),i=cc._decorator,r=i.ccclass,s=(i.property,function(e){function t(){var t,n,a=null!==e&&e.apply(this,arguments)||this;return a.actions=((t={})[o.MODE_TYPE_STRUCT.MODE1]=((n={})[41]=function(){},n),t),a}return __extends(t,e),t.prototype.start=function(){var e=this,t=a.default.CUR_LEVEL,n=a.default.CUR_MODE;if(n==o.MODE_TYPE_STRUCT.MODE1)if(41==t){var i=cc.winSize.width-this.node.width;this.node.runAction(cc.sequence(cc.moveBy(10,cc.v2(+i,0)),cc.moveBy(10,cc.v2(-i,0))).repeatForever())}else 49==t||25==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,500)),cc.moveBy(2,cc.v2(0,-500))).repeatForever()):50==t?this.node.runAction(cc.sequence(cc.moveBy(3,cc.v2(0,-1e3)),cc.moveBy(3,cc.v2(0,1e3))).repeatForever()):59==t?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(0,150)),cc.moveBy(1.5,cc.v2(0,-150))).repeatForever()):65==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,-300)),cc.moveBy(2,cc.v2(0,300))).repeatForever()):71==t?this.node.runAction(cc.sequence(cc.moveBy(3,cc.v2(700,0)),cc.moveBy(3,cc.v2(-700,0))).repeatForever()):88==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(700,0)),cc.moveBy(2,cc.v2(-700,0))).repeatForever()):108==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(300,0)),cc.moveBy(2,cc.v2(-300,0))).repeatForever()):114==t?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(700,0)),cc.moveBy(4,cc.v2(-700,0))).repeatForever()):123==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,200)),cc.moveBy(2,cc.v2(0,-200))).repeatForever()):125==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,600)),cc.moveBy(2,cc.v2(0,-600))).repeatForever()):134==t&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(-150,0)),cc.moveBy(1.5,cc.v2(150,0))).repeatForever()):134==t&&"t2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(200,0)),cc.moveBy(1.5,cc.v2(-200,0))).repeatForever()):136==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,400)),cc.moveBy(2,cc.v2(0,-400))).repeatForever()):137==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(150,0)),cc.moveBy(2,cc.v2(-150,0))).repeatForever()):138==t&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(0,-200)),cc.moveBy(1.5,cc.v2(0,200))).repeatForever()):138==t&&"t2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(0,200)),cc.moveBy(1.5,cc.v2(0,-200))).repeatForever()):143==t?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(700,0)),cc.moveBy(4,cc.v2(-700,0))).repeatForever()):148==t?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(0,700)),cc.moveBy(4,cc.v2(0,-700))).repeatForever()):155==t&&"t2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(0,1030)),cc.moveBy(4,cc.v2(0,-1030))).repeatForever()):155==t&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(0,-1030)),cc.moveBy(4,cc.v2(0,1030))).repeatForever()):160==t?this.node.runAction(cc.sequence(cc.moveBy(3,cc.v2(0,1030)),cc.moveBy(3,cc.v2(0,-1030))).repeatForever()):166==t&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,550)),cc.moveBy(1,cc.v2(0,-550))).repeatForever()):166==t&&"t2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,-550)),cc.moveBy(1,cc.v2(0,550))).repeatForever()):166==t&&"t3"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,550)),cc.moveBy(1,cc.v2(0,-550))).repeatForever()):166==t&&"t4"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,-550)),cc.moveBy(1,cc.v2(0,550))).repeatForever()):169==t&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(550,0)),cc.moveBy(1,cc.v2(-550,0))).repeatForever()):169==t&&"t2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(-550,0)),cc.moveBy(1,cc.v2(550,0))).repeatForever()):169==t&&"t3"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,800)),cc.moveBy(1,cc.v2(0,-800))).repeatForever()):169==t&&"t4"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,-800)),cc.moveBy(1,cc.v2(0,800))).repeatForever()):171==t?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,600)),cc.moveBy(1,cc.v2(0,-600))).repeatForever()):175==t&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(-800,0)),cc.moveBy(1,cc.v2(800,0))).repeatForever()):175==t&&"t2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(800,0)),cc.moveBy(1,cc.v2(-800,0))).repeatForever()):196==t&&this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(0,-420)),cc.moveBy(1.5,cc.v2(0,420))).repeatForever());else n==o.MODE_TYPE_STRUCT.MODE2?5==t?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,-240)),cc.moveBy(1,cc.v2(0,240))).repeatForever()):30==t&&"cube_1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,-150)),cc.moveBy(1,cc.v2(0,150))).repeatForever()):30==t&&"cube_2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,150)),cc.moveBy(1,cc.v2(0,-150))).repeatForever()):31==t?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(0,640)),cc.moveBy(4,cc.v2(0,-640))).repeatForever()):42==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,1100)),cc.moveBy(2,cc.v2(0,-1100))).repeatForever()):65==t?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(640,0)),cc.moveBy(1.5,cc.v2(-640,0))).repeatForever()):70==t?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(-600,0)),cc.moveBy(1.5,cc.v2(600,0))).repeatForever()):70==t?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(-600,0)),cc.moveBy(1.5,cc.v2(600,0))).repeatForever()):98==t&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,-800)),cc.moveBy(2,cc.v2(0,800))).repeatForever()):98==t&&"t2"==this.node.name&&this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,800)),cc.moveBy(2,cc.v2(0,-800))).repeatForever()):n==o.MODE_TYPE_STRUCT.MODE3?12==t?this.node.runAction(cc.sequence(cc.moveBy(5,cc.v2(500,0)),cc.moveBy(5,cc.v2(-500,0))).repeatForever()):65==t?this.node.runAction(cc.sequence(cc.moveBy(.4,cc.v2(0,80)),cc.moveBy(.4,cc.v2(0,-80))).repeatForever()):114==t&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(0,800)),cc.moveBy(4,cc.v2(0,-800))).repeatForever()):114==t&&"t2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(0,-800)),cc.moveBy(4,cc.v2(0,800))).repeatForever()):115==t?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(300,-750)),cc.moveBy(1,cc.v2(-300,750))).repeatForever()):136==a.default.CUR_LEVEL&&"t4"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(490,0)),cc.moveBy(1,cc.v2(-490,0))).repeatForever()):133==a.default.CUR_LEVEL&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(750,0)),cc.moveBy(1,cc.v2(-750,0))).repeatForever()):133==a.default.CUR_LEVEL&&"t2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(-750,0)),cc.moveBy(1,cc.v2(750,0))).repeatForever()):126==a.default.CUR_LEVEL&&this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,670)),cc.moveBy(1,cc.v2(0,-670))).repeatForever()):n==o.MODE_TYPE_STRUCT.MODE4&&(39==t?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(220,0)),cc.moveBy(1,cc.v2(-220,0))).repeatForever()):41==t?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,-670)),cc.moveBy(1,cc.v2(0,670))).repeatForever()):43==t?this.node.runAction(cc.sequence(cc.moveBy(1,cc.v2(0,500)),cc.moveBy(1,cc.v2(0,-500))).repeatForever()):53==t?this.scheduleOnce(function(){e.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(800,0)),cc.moveBy(1.5,cc.v2(-800,0))).repeatForever())},.5):58==t&&"t1"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(0,650)),cc.moveBy(1.5,cc.v2(0,-650))).repeatForever()):58==t&&"t2"==this.node.name?this.node.runAction(cc.sequence(cc.moveBy(1.5,cc.v2(0,-650)),cc.moveBy(1.5,cc.v2(0,650))).repeatForever()):76==t?this.node.runAction(cc.sequence(cc.moveBy(2,cc.v2(0,300)),cc.moveBy(2,cc.v2(0,-300))).repeatForever()):79==t?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(700,0)),cc.moveBy(4,cc.v2(-700,0))).repeatForever()):94==t?this.node.runAction(cc.sequence(cc.moveBy(4,cc.v2(730,0)),cc.moveBy(4,cc.v2(-730,0))).repeatForever()):123==t&&this.node.runAction(cc.sequence(cc.moveTo(1,cc.v2(-158,477)),cc.moveTo(1,cc.v2(58,-262))).repeatForever()))},t.prototype.trigger=function(){a.default.CUR_MODE==o.MODE_TYPE_STRUCT.MODE1?165==a.default.CUR_LEVEL&&"t1"==this.node.name?this.node.runAction(cc.moveBy(1.5,cc.v2(0,440))):165==a.default.CUR_LEVEL&&"t2"==this.node.name?this.node.runAction(cc.moveBy(1.5,cc.v2(-540,0))):191==a.default.CUR_LEVEL&&"t1"==this.node.name?this.node.runAction(cc.moveBy(1,cc.v2(0,1170))):191==a.default.CUR_LEVEL&&"t2"==this.node.name&&this.node.runAction(cc.moveBy(1,cc.v2(-760,0))):a.default.CUR_MODE==o.MODE_TYPE_STRUCT.MODE3&&(117==a.default.CUR_LEVEL&&"t1"==this.node.name?this.node.runAction(cc.moveBy(1,cc.v2(0,420))):117==a.default.CUR_LEVEL&&"t2"==this.node.name?this.node.runAction(cc.moveBy(1,cc.v2(-620,0))):117==a.default.CUR_LEVEL&&"t3"==this.node.name?this.node.runAction(cc.moveBy(1,cc.v2(0,-350))):136==a.default.CUR_LEVEL&&"t1"==this.node.name?this.node.runAction(cc.moveBy(.5,cc.v2(150,0))):136==a.default.CUR_LEVEL&&"t2"==this.node.name?this.node.runAction(cc.moveBy(.5,cc.v2(150,0))):136==a.default.CUR_LEVEL&&"t3"==this.node.name&&this.node.runAction(cc.moveBy(.5,cc.v2(120,0))))},t=__decorate([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./GameConfig":"GameConfig"}],NodePoolMgr:[function(e,t,n){"use strict";cc._RF.push(t,"62e18om3mJOaI4+4jkRp2tw","NodePoolMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this.nodes={},this.prefabs={}}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._data||(t._data=new t),this._data},enumerable:!0,configurable:!0}),e.prototype.createNodePool=function(e,t,n,o){var a=this.nodes[e];if(void 0!==a&&a)for(i=0;i<n;++i){r=cc.instantiate(t);this.nodes[e].put(r)}else{a=new cc.NodePool(o);for(var i=0;i<n;++i){var r=cc.instantiate(t);a.put(r)}this.nodes[e]=a,this.prefabs[e]=t}},e.prototype.getNodePool=function(e,t){var n=this.nodes[e],o=this.prefabs[e];return n.size()>0?n.get(t):cc.instantiate(o)},e.prototype.recycleNodePool=function(e,t){this.nodes[e].put(t)},e.prototype.NodePoolclearUp=function(e){var t=this.nodes[e];t&&(t.clear(),this.nodes[e]=null)},e._data=new t,e=t=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],OnlineTimerMgr:[function(e,t,n){"use strict";cc._RF.push(t,"5bc03psRzVFxI3iELkEaCrc","OnlineTimerMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../gamecore/managers/GameManager"),a=e("../gamecore/deer/DeerSDK"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){this.nowRewardHpNum=0,this.onlineTime_cd=0,this.onlineTime_total=0,this.startTime_cd=0,this.startTime_total=0,this.canRecive=!1,this.timeOutFunc=null}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastChangedKey",{get:function(){return this._lastChangedKey},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t){this[e]=t,o.default.dataManager.setData(e,t,!0,!1,!0)},e.prototype.getData=function(e){var t=o.default.dataManager.getData(e);return void 0==t||null==t||""===t?this[e]:(t=t||this[e],t=JSON.parse(t))},e.prototype.initGlobalTimer=function(){var e=this;this.nowRewardHpNum=Number(t.instance.getData(t.KEY_NOW_REWARD_HP_NUM));var n=a.default.instance.serverTime.getTime();this.onlineTime_cd=n,this.onlineTime_total=n;var o=function(){if(e.nowRewardHpNum>=t.KEY_REWARD_MAX_HP_NUM){t.instance.canRecive=!1;var n=a.default.instance.serverTime.getTime();e.onlineTime_cd=n,e.onlineTime_total=n}else{t.instance.canRecive=!0;var i=a.default.instance.serverTime.getTime();e.startTime_cd=i-e.onlineTime_cd,e.startTime_total=i-e.onlineTime_total,e.startTime_cd>=t.KEY_CD_REWARD_HP_TIME&&(e.onlineTime_cd=i,e.nowRewardHpNum+=t.KEY_REWARD_HP_NUM_BY_CD,e.nowRewardHpNum>t.KEY_REWARD_MAX_HP_NUM&&(e.nowRewardHpNum=t.KEY_REWARD_MAX_HP_NUM),t.instance.setData(t.KEY_NOW_REWARD_HP_NUM,e.nowRewardHpNum)),e.startTime_total>=t.KEY_REWARD_HP_TIME&&(e.onlineTime_total=i)}e.timeOutFunc=setTimeout(o,1e3)};this.timeOutFunc&&clearTimeout(this.timeOutFunc),o()},e.prototype.canRececiveHp=function(){return t.instance.canRecive},e.prototype.refreshTime=function(){this.onlineTime_total=a.default.instance.serverTime.getTime()},e.timeFormat=function(e){var t=new Date(e);return(t.getMinutes()>9&&t.getMinutes()||"0"+t.getMinutes())+":"+(t.getSeconds()>9&&t.getSeconds()||"0"+t.getSeconds())},e.KEY_LAST_RECEIVE_TIME="lastReceiveTime",e.KEY_REWARD_HP_TIME=72e4,e.KEY_CD_REWARD_HP_TIME=4e4,e.KEY_REWARD_HP_NUM_BY_CD=2,e.KEY_REWARD_MAX_HP_NUM=9999,e.KEY_NOW_REWARD_HP_NUM="nowRewardHpNum",e._instance=null,e=t=__decorate([r],e)}());n.default=s,cc._RF.pop()},{"../gamecore/deer/DeerSDK":"DeerSDK","../gamecore/managers/GameManager":"GameManager"}],OpenDataProject:[function(e,t,n){"use strict";cc._RF.push(t,"2e73a1z4nBPGqeuIvvPjRef","OpenDataProject"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../scripts/gamecore/wechat/WXOpenData"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return e.showRankPanel=function(){o.default.postMessage({action:"call",fun:"showRank"})},e.hideRankPanel=function(){o.default.postMessage({action:"call",fun:"hideRank"})},e.showNextOpponent=function(){o.default.postMessage({action:"call",fun:"showNextOpponent"})},e.hideNextOpponent=function(){o.default.postMessage({action:"call",fun:"hideNextOpponent"})},e.setMyScore=function(e){o.default.postMessage({action:"call",fun:"setMyScore",data:e})},e=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../../../scripts/gamecore/wechat/WXOpenData":"WXOpenData"}],Oppo:[function(e,t,n){"use strict";cc._RF.push(t,"9cd2bRotAJAq6KLXUCC0Sp4","Oppo"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("../base/GameValues"),i=e("./Base");n.Oppo_init=function(e){i.Base_init(),o=e;var t=window.wx,n=a.default.canvas;n&&(n.toTempFilePathSync=function(e){return console.log("------\u3010Oppo\u3011 toTempFilePathSync-------"),null},n.toTempFilePath=function(e){console.log("------\u3010Oppo\u3011 toTempFilePath-------")}),t.createImage=function(){console.log("------\u3010Oppo\u3011 createImage-------");var e=new Image;return console.log("image is "+JSON.stringify(e)),e},t.createGameClubButton=function(e){return{onTap:function(e){},offTap:function(e){},show:function(){},hide:function(){},destory:function(){}}},t.login=function(e){if(console.log("------\u3010Oppo\u3011 login-------"),console.log(JSON.stringify(e)),"undefined"!=typeof qg){var n=e?e.success:null,a=e?e.fail:null,i=e?e.complete:null;console.log("\u5f00\u59cb\u767b\u9646 pkgName is",o),console.log("qg.login is",qg.login);var r=setInterval(function(){console.log("\u68c0\u67e5login, timer id is",r),void 0!=qg.login&&null!=qg.login&&(clearInterval(r),qg.login({pkgName:o,success:function(e){console.log(JSON.stringify(e)),t._userInfoRes={userInfo:{openId:e.uid,nickName:e.nickName,avatarUrl:e.avatar,gender:"M"==e.sex?"1":"2"},rawData:"",encryptedData:"",signature:""},n&&n({code:e.token}),i&&i()},fail:function(e){console.log(JSON.stringify(e)),a&&a(e),i&&i()}}))},.3)}},t.vibrateShort=function(e){console.log("------\u3010Oppo\u3011 vibrateShort-------"),"undefined"!=typeof qg&&qg.vibrateShort(e)},t.vibrateLong=function(e){console.log("------\u3010Oppo\u3011 vibrateLong-------"),"undefined"!=typeof qg&&qg.vibrateLong(e)},t.onMemoryWarning=function(e){console.log("------\u3010Oppo\u3011 onMemoryWarning-------")},t._userInfoRes=null,t._isGettingUserInfo=!1,t._getUserInfoStack=[],t.getUserInfo=function(e){void 0===e&&(e=null),console.log("------\u3010Oppo\u3011 getUserInfo-------");var n=e?e.success:null,o=e?e.fail:null,a=e?e.complete:null;null!=t._userInfoRes?(n&&n(t._userInfoRes),a&&a()):(t.login(),o&&o(),a&&a())},t.createUserInfoButton=function(e){return void 0===e&&(e=null),console.log("------\u3010Oppo\u3011 createUserInfoButton-------"),console.log(e),null},t.getFriendCloudStorage=function(e){console.log("------\u3010Oppo\u3011 getFriendCloudStorage-------"),console.log(e)},t.getUserCloudStorage=function(e){console.log("------\u3010Oppo\u3011 setUserCloudStorage-------")},t.setUserCloudStorage=function(e){console.log("------\u3010Oppo\u3011 setUserCloudStorage-------")},t.getSetting=function(e){console.log("------\u3010Oppo\u3011 getSetting-------")},t.navigateToMiniProgram=function(e){console.log("------\u3010Oppo\u3011 navigateToMiniProgram-------")},t.getOpenDataContext=function(){return null},t.onMessage=function(e){},t.getSystemInfo=function(e){console.log("------\u3010Oppo\u3011 getSetting-------")},t.exitMiniProgram=function(e){console.log("------\u3010Oppo\u3011 exitMiniProgram-------")},t.__query=null,t.getLaunchOptionsSync=function(){return console.log("------\u3010Oppo\u3011 getLaunchOptionsSync-------"),{scene:0,query:{},isSticky:0,shareTicket:null}},t.onHide=function(e){console.log("------\u3010Oppo\u3011 onHide-------")},t.onShow=function(e){console.log("------\u3010Oppo\u3011 onShow-------")},t.offHide=function(e){console.log("------\u3010Oppo\u3011 offHide-------")},t.offShow=function(e){console.log("------\u3010Oppo\u3011 offShow-------")},t.onClose=function(e){console.log("------\u3010Oppo\u3011 onClose-------")},t.offClose=function(e){console.log("------\u3010Oppo\u3011 offClose-------")},t.getFileSystemManager=function(){return console.log("------\u3010Oppo\u3011 getFileSystemManager-------"),"undefined"==typeof qg?null:qg.getFileSystemManager()},t.getShareInfo=function(e){},t.hideShareMenu=function(e){},t.showShareMenu=function(e){},t.updateShareMenu=function(e){},t.shareAppMessage=function(e){console.log("------\u3010Oppo\u3011 shareAppMessage-------");e&&e.success;var t=e?e.fail:null,n=e?e.complete:null;t&&t(),n&&n()},t.onShareAppMessage=function(e){console.log("------\u3010Oppo\u3011 onShareAppMessage-------")},t.offShareAppMessage=function(e){},t.createRewardedVideoAd=function(e){return console.log("------\u3010Oppo\u3011 createRewardedVideoAd-------"),null},t.createBannerAd=function(e){return console.log("------\u3010Oppo\u3011 createBannerAd-------"),null},t.requestMidasPayment=function(e){console.log("------\u3010Oppo\u3011 requestMidasPayment-------")},t.hideLoading=function(e){console.log("------\u3010Oppo\u3011 hideLoading-------")},t.hideToast=function(e){console.log("------\u3010Oppo\u3011 hideToast-------")},t.showLoading=function(e){console.log("------\u3010Oppo\u3011 showLoading-------")},t.showModal=function(e){console.log("------\u3010Oppo\u3011 showModal-------")},t.showToast=function(e){console.log("------\u3010Oppo\u3011 showToast-------")},t.getMenuButtonBoundingClientRect=function(){return console.log("------\u3010Oppo\u3011 getMenuButtonBoundingClientRect-------"),{top:0,left:0,width:0,height:0,bottom:0,right:0}},t.setMenuStyle=function(e){console.log("------\u3010Oppo\u3011 setMenuStyle-------")}},cc._RF.pop()},{"../base/GameValues":"GameValues","./Base":"Base"}],OtherGameUI:[function(e,t,n){"use strict";cc._RF.push(t,"b7323/k9hxPdIRFDzAZSpTB","OtherGameUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return __extends(t,e),t.prototype.start=function(){},__decorate([i(cc.Label)],t.prototype,"label",void 0),__decorate([i],t.prototype,"text",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],PBManager:[function(e,t,n){"use strict";cc._RF.push(t,"8b042VCJhRALr0I3JD2tnm0","PBManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./pbcus"),a=e("../../gamecore/managers/event/EventDispacher"),i=e("../../gamecore/base/GameValues"),r=e("../../gamecore/GameCoreEventNames"),s=e("../../view/stageMode/GameConfig"),c=cc._decorator,l=c.ccclass,d=(c.property,s.default.gameCdn+"meta13.jpg"),u=function(e){function t(){var t=e.call(this)||this;if(n._instance)throw new Error("please use PBManager.instance");return n._instance=t,t.init(),t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return n._instance||new n,n._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameMeta",{get:function(){return this._gameMeta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return this._isReady},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,t=d+"?vesion="+i.default.gameVersion,n=cc.loader.getXMLHttpRequest();n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(t){e.dataLoadedCallback(n.response)},n.onerror=function(e){console.log("\u3010PBManager\u3011init, by XMLHttpRequest"),console.log(e)},n.send(null)},t.prototype.dataLoadedCallback=function(e){this._gameMeta=o.GameMeta.decode(new Uint8Array(e)),console.log(this._gameMeta,"gameMeta"),this._isReady=!0,this.dispatchEventWith(r.default.COMMON_READY)},t=n=__decorate([l],t)}(a.default);n.default=u,cc._RF.pop()},{"../../gamecore/GameCoreEventNames":"GameCoreEventNames","../../gamecore/base/GameValues":"GameValues","../../gamecore/managers/event/EventDispacher":"EventDispacher","../../view/stageMode/GameConfig":"GameConfig","./pbcus":"pbcus"}],PeopleMgr:[function(e,t,n){"use strict";cc._RF.push(t,"71846SXGiZH47snirWeEgHE","PeopleMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("./PrfabsManager"),r=e("./GameConfig"),s=e("../../module/data/StageDataMgr"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hostageController=null,t.isBlood=!1,t.blood=null,t.tntTrigger=!1,t.onLoad=function(){this.hostageController=this.node.parent.getComponent("HostageController")},t.playBloodEffct=function(e,t){if(!this.isBlood){this.isBlood=!0;var n=t.signAngle(cc.v2(1,0));n=cc.misc.radiansToDegrees(n),this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem();var o=this.node.parent.convertToNodeSpaceAR(e);this.blood.position=o,this.blood.rotation=n,this.node.parent.addChild(this.blood,1e3)}},t.update=function(e){this.blood&&(this.blood.position=this.node.position),this.hostageController.roleBody.linearVelocity.mag()>320&&s.default.CUR_MODE==r.MODE_TYPE_STRUCT.MODE3&&51==s.default.CUR_LEVEL&&!this.hostageController.isHit?(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.hostageController.roleBody.node.position,this.hostageController.roleBody.node.addChild(this.blood,1e3))):80==s.default.CUR_LEVEL&&s.default.CUR_MODE==r.MODE_TYPE_STRUCT.MODE3&&this.hostageController.node.getChildByName("role_head").getComponent(cc.RigidBody).linearVelocity.mag()>300&&(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.hostageController.node.getChildByName("role_head").position,this.hostageController.node.getChildByName("role_head").addChild(this.blood,1e3))))},t}return __extends(t,e),t.prototype.onBeginContact=function(e,t,n){var c=this,l=e.getWorldManifold().points;if(n.tag==o.default.Tag.tagBullet)e.disabled=!0,this.hostageController.isHit||(a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),t.name.indexOf("hand")<0&&l[0]&&this.playBloodEffct(l[0],n.node.getComponent(cc.RigidBody).linearVelocity),this.hostageController.isHit=!0,this.hostageController.hitJointRgBody=t.node.getComponent(cc.RigidBody),this.hostageController.hitDir=n.node.getComponent(cc.RigidBody).linearVelocity.normalize(),this.hostageController.hitPoint=e.getWorldManifold().points[0],l[0]&&this.hostageController.hitEffct();else if(n.tag==o.default.Tag.tagCubeBox)if(n.node.getComponent("CubeBox").isCollider||this.hostageController.isHit){var d=s.default.CUR_LEVEL,u=s.default.CUR_MODE;38!=d&&45!=d&&68!=d||u!=r.MODE_TYPE_STRUCT.MODE3||(a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),l[0]&&this.playBloodEffct(l[0],n.node.getComponent(cc.RigidBody).linearVelocity))}else n.node.getComponent("CubeBox").isCollider=!0,this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),l[0]&&this.playBloodEffct(l[0],n.node.getComponent(cc.RigidBody).linearVelocity);else if(n.tag==o.default.Tag.tagCircle)this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),this.playBloodEffct(l[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagMoveBox)n.node.getComponent("CubeBox").isCollider||(n.node.getComponent("CubeBox").isCollider=!0,a.default.instance.playSound("scream"),this.scheduleOnce(function(){c.node&&(c.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),n.node.getComponent(cc.RigidBody).linearDamping=1)},.5),this.playBloodEffct(l[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagPlat)this.hostageController.isRoadDead&&!this.hostageController.isHit&&(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0)),this.playBloodEffct(l[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagTNT){if(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),!this.tntTrigger){this.tntTrigger=!0;var h=n.node.parent.convertToWorldSpaceAR(n.node.position),p=this.hostageController.roleBody.node.parent.convertToWorldSpaceAR(this.hostageController.roleBody.node.position).sub(h).normalize();n.node.getComponent("TNTBox").isLink?this.hostageController.roleBody.applyLinearImpulse(cc.v2(0,1e4),this.hostageController.roleBody.getWorldCenter(),!0):this.hostageController.roleBody.applyLinearImpulse(p.mul(6e3),this.hostageController.roleBody.getWorldCenter(),!0)}this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3))}else if(n.tag==o.default.Tag.tagGrenade&&n.node.parent.getComponent("GrenadeController").isBoom){if(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),-1==this.hostageController.grendaBoomNodeName.indexOf(n.node.parent.name)){this.hostageController.grendaBoomNodeName+=n.node.parent.name+",",h=n.node.parent.convertToWorldSpaceAR(n.node.position),p=this.hostageController.roleBody.node.parent.convertToWorldSpaceAR(this.hostageController.roleBody.node.position).sub(h).normalize();var f=this.hostageController.grendaBoomNodeName.split(",").length;2==f?this.hostageController.roleBody.applyLinearImpulse(p.mul(5e4),this.hostageController.roleBody.getWorldCenter(),!0):this.hostageController.roleBody.applyLinearImpulse(p.mul(5e4*f),this.hostageController.roleBody.getWorldCenter(),!0)}this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3))}else n.tag==o.default.Tag.tagDeath&&t.tag==o.default.Tag.tagBodyJoint&&(this.hostageController.isHit||(this.hostageController.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.gameFail,!0))),this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3)))},t.prototype.start=function(){},t=__decorate([l],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./Common":"Common","./GameConfig":"GameConfig","./PrfabsManager":"PrfabsManager"}],PhysicPlayer:[function(e,t,n){"use strict";cc._RF.push(t,"166d9GODKJLhYCn8/Y6tib+","PhysicPlayer"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../module/data/StageDataMgr"),a=e("./GameConfig"),i=e("./Common"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftFootTopRigBody=null,t.rightFootTopRigBody=null,t.leftFootBottomRigBody=null,t.rightFootBottomRigBody=null,t.bodyRigBody=null,t.headRigBody=null,t.leftHandTopRigBody=null,t.rightHandTopRigBody=null,t.leftHandBottomRigBody=null,t.rightHandBottomRigBody=null,t.leftMoveHand=null,t.headSprite=null,t.deathSpriteFrame=null,t.isRoadDead=!1,t.isHit=!1,t.hitJointRgBody=null,t.hitDir=null,t.hitPoint=null,t.trigger=null,t.isTrigger=!1,t.triggerType=1,t.grendaBoomNodeName="",t}return __extends(t,e),t.prototype.start=function(){},t.prototype.hitEffct=function(){var e=this,t=this;this.scheduleOnce(function(){e.leftFootTopRigBody.type=cc.RigidBodyType.Dynamic,e.rightFootTopRigBody.type=cc.RigidBodyType.Dynamic,e.leftFootBottomRigBody.type=cc.RigidBodyType.Dynamic,e.rightFootBottomRigBody.type=cc.RigidBodyType.Dynamic,e.bodyRigBody.type=cc.RigidBodyType.Dynamic,e.headRigBody.type=cc.RigidBodyType.Dynamic,e.leftHandTopRigBody.type=cc.RigidBodyType.Dynamic,e.rightHandTopRigBody.type=cc.RigidBodyType.Dynamic,e.leftHandBottomRigBody.type=cc.RigidBodyType.Dynamic,e.rightHandBottomRigBody.type=cc.RigidBodyType.Dynamic;var n=6e3;o.default.CUR_MODE==a.MODE_TYPE_STRUCT.MODE4&&(n=3e3),t.hitJointRgBody.applyLinearImpulse(e.hitDir.mul(n),e.hitPoint,!0),t.runTrigger()},0)},t.prototype.playTntEffct=function(){var e=this;this.scheduleOnce(function(){e.leftFootTopRigBody.type=cc.RigidBodyType.Dynamic,e.rightFootTopRigBody.type=cc.RigidBodyType.Dynamic,e.leftFootBottomRigBody.type=cc.RigidBodyType.Dynamic,e.rightFootBottomRigBody.type=cc.RigidBodyType.Dynamic,e.bodyRigBody.type=cc.RigidBodyType.Dynamic,e.headRigBody.type=cc.RigidBodyType.Dynamic,e.leftHandTopRigBody.type=cc.RigidBodyType.Dynamic,e.rightHandTopRigBody.type=cc.RigidBodyType.Dynamic,e.leftHandBottomRigBody.type=cc.RigidBodyType.Dynamic,e.rightHandBottomRigBody.type=cc.RigidBodyType.Dynamic,e.bodyRigBody.applyLinearImpulse(e.hitDir.mul(6e3),e.bodyRigBody.getWorldCenter(),!0)},0)},t.prototype.updateRigBody=function(){var e=this;this.scheduleOnce(function(){e.leftFootTopRigBody.type=cc.RigidBodyType.Dynamic,e.rightFootTopRigBody.type=cc.RigidBodyType.Dynamic,e.leftFootBottomRigBody.type=cc.RigidBodyType.Dynamic,e.rightFootBottomRigBody.type=cc.RigidBodyType.Dynamic,e.bodyRigBody.type=cc.RigidBodyType.Dynamic,e.headRigBody.type=cc.RigidBodyType.Dynamic,e.leftHandTopRigBody.type=cc.RigidBodyType.Dynamic,e.rightHandTopRigBody.type=cc.RigidBodyType.Dynamic,e.leftHandBottomRigBody.type=cc.RigidBodyType.Dynamic,e.rightHandBottomRigBody.type=cc.RigidBodyType.Dynamic},0)},t.prototype.tntEffct=function(){this.updateRigBody(),this.hitJointRgBody.applyLinearImpulse(this.hitDir.mul(6e3),this.hitPoint,!0)},t.prototype.runTrigger=function(){var e=this;this.trigger&&!this.isTrigger&&(this.isTrigger=!0,this.scheduleOnce(function(){e.trigger.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,e.trigger.getComponent(cc.PhysicsCircleCollider).tag=i.default.Tag.tagCircle,e.trigger.getComponent(cc.PhysicsCircleCollider).apply()},0))},__decorate([c(cc.RigidBody)],t.prototype,"leftFootTopRigBody",void 0),__decorate([c(cc.RigidBody)],t.prototype,"rightFootTopRigBody",void 0),__decorate([c(cc.RigidBody)],t.prototype,"leftFootBottomRigBody",void 0),__decorate([c(cc.RigidBody)],t.prototype,"rightFootBottomRigBody",void 0),__decorate([c(cc.RigidBody)],t.prototype,"bodyRigBody",void 0),__decorate([c(cc.RigidBody)],t.prototype,"headRigBody",void 0),__decorate([c(cc.RigidBody)],t.prototype,"leftHandTopRigBody",void 0),__decorate([c(cc.RigidBody)],t.prototype,"rightHandTopRigBody",void 0),__decorate([c(cc.RigidBody)],t.prototype,"leftHandBottomRigBody",void 0),__decorate([c(cc.RigidBody)],t.prototype,"rightHandBottomRigBody",void 0),__decorate([c(cc.Node)],t.prototype,"leftMoveHand",void 0),__decorate([c(cc.Sprite)],t.prototype,"headSprite",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"deathSpriteFrame",void 0),__decorate([c(cc.Node)],t.prototype,"trigger",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./Common":"Common","./GameConfig":"GameConfig"}],PhysicsPlayerLocal:[function(e,t,n){"use strict";cc._RF.push(t,"762c7OChflEFa6JX394OUik","PhysicsPlayerLocal"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../module/data/StageDataMgr"),a=e("./GameConfig"),i=e("./Common"),r=e("./PhysicPlayer"),s=e("./AudioManager"),c=e("./PrfabsManager"),l=e("./GrenadeController"),d=e("./CubeBox"),u=e("./TNTBox"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerController=null,t.isBlood=!1,t.blood=null,t.tntTrigger=!1,t.roleBody=null,t.update=function(e){this.blood&&(this.blood.position=this.node.position)},t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.playerController=this.node.parent.getComponent(r.default)},t.prototype.onBeginContact=function(e,t,n){var r=this,c=e.getWorldManifold().points;if(n.tag==i.default.Tag.tagBullet)e.disabled=!0,this.playerController.isHit||(s.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(i.default.eventMessage.gameFail,!0))),t.name.indexOf("hand")<0&&c[0]&&this.playBloodEffct(c[0],n.node.getComponent(cc.RigidBody).linearVelocity),this.playerController.isHit=!0,this.playerController.hitJointRgBody=t.node.getComponent(cc.RigidBody),this.playerController.hitDir=n.node.getComponent(cc.RigidBody).linearVelocity.normalize(),this.playerController.hitPoint=e.getWorldManifold().points[0],c[0]&&this.playerController.hitEffct();else if(n.tag==i.default.Tag.tagCubeBox)if(n.node.getComponent(d.default).isCollider||this.playerController.isHit){var h=o.default.CUR_LEVEL,p=o.default.CUR_MODE;38!=h&&45!=h&&68!=h||p!=a.MODE_TYPE_STRUCT.MODE3||(s.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(i.default.eventMessage.gameFail,!0)),c[0]&&this.playBloodEffct(c[0],n.node.getComponent(cc.RigidBody).linearVelocity))}else n.node.getComponent(d.default).isCollider=!0,this.playerController.isHit=!0,s.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(i.default.eventMessage.gameFail,!0)),c[0]&&this.playBloodEffct(c[0],n.node.getComponent(cc.RigidBody).linearVelocity);else if(n.tag==i.default.Tag.tagCircle)this.playerController.isHit||(this.playerController.isHit=!0,s.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(i.default.eventMessage.gameFail,!0)),this.playBloodEffct(c[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==i.default.Tag.tagMoveBox)n.node.getComponent(d.default).isCollider||(n.node.getComponent(d.default).isCollider=!0,s.default.instance.playSound("scream"),this.scheduleOnce(function(){r.node&&(r.node.dispatchEvent(new cc.Event.EventCustom(i.default.eventMessage.gameFail,!0)),n.node.getComponent(cc.RigidBody).linearDamping=1)},.5),this.playBloodEffct(c[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==i.default.Tag.tagPlat)this.playerController.isRoadDead&&!this.playerController.isHit&&(this.playerController.isHit=!0,s.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(i.default.eventMessage.gameFail,!0)),this.playBloodEffct(c[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==i.default.Tag.tagTNT){if(0==n.enabled)return;if(this.playerController.isHit||(this.playerController.isHit=!0,s.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(i.default.eventMessage.gameFail,!0))),!this.tntTrigger){this.tntTrigger=!0;var f=n.node.parent.convertToWorldSpaceAR(n.node.position),g=this.playerController.bodyRigBody.node.parent.convertToWorldSpaceAR(this.playerController.bodyRigBody.node.position).sub(f).normalize();n.node.getComponent(u.default).isLink?this.playerController.bodyRigBody.applyLinearImpulse(cc.v2(0,1e4),this.playerController.bodyRigBody.getWorldCenter(),!0):(this.playerController.hitDir=g,this.playerController.playTntEffct())}this.playBloodEffct()}else if(n.tag==i.default.Tag.tagGrenade&&n.node.parent.getComponent(l.default).isBoom){if(this.playerController.isHit||(this.playerController.isHit=!0,s.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(i.default.eventMessage.gameFail,!0))),-1==this.playerController.grendaBoomNodeName.indexOf(n.node.parent.name)){this.playerController.grendaBoomNodeName+=n.node.parent.name+",",f=n.node.parent.convertToWorldSpaceAR(n.node.position),g=this.playerController.bodyRigBody.node.parent.convertToWorldSpaceAR(this.playerController.bodyRigBody.node.position).sub(f).normalize();var m=this.playerController.grendaBoomNodeName.split(",").length;2==m?this.playerController.bodyRigBody.applyLinearImpulse(g.mul(5e4),this.playerController.bodyRigBody.getWorldCenter(),!0):this.playerController.bodyRigBody.applyLinearImpulse(g.mul(5e4*m),this.playerController.bodyRigBody.getWorldCenter(),!0)}this.playBloodEffct()}else n.tag==i.default.Tag.tagDeath&&t.tag==i.default.Tag.tagBodyJoint&&(this.playerController.isHit||(this.playerController.isHit=!0,s.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(i.default.eventMessage.gameFail,!0))),this.playBloodEffct())},t.prototype.playBloodEffct=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),!this.isBlood){if(this.isBlood=!0,this.blood=cc.instantiate(c.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),t&&e){var n=t.signAngle(cc.v2(1,0));n=cc.misc.radiansToDegrees(n);var o=this.node.parent.convertToNodeSpaceAR(e);this.blood.position=o,this.blood.rotation=n}else this.blood.position=this.node.position;this.node.parent.addChild(this.blood,1e3)}},t=__decorate([p],t)}(cc.Component));n.default=f,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./Common":"Common","./CubeBox":"CubeBox","./GameConfig":"GameConfig","./GrenadeController":"GrenadeController","./PhysicPlayer":"PhysicPlayer","./PrfabsManager":"PrfabsManager","./TNTBox":"TNTBox"}],Player:[function(e,t,n){"use strict";cc._RF.push(t,"27fb7kCHb1DxZWsJu6kA3jx","Player"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../SoundMgr"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.man=null,t.levelup=null,t.skinID=null,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.man.setAnimation(0,"idle"+Math.floor(10*Math.random()),!1)}),cc.delayTime(6))))},t.prototype.updateSkin=function(e){this.man.setSkin(e),null!=this.skinID&&(this.levelup.node.active=!0,this.levelup.setAnimation(0,"idle",!1),o.default.instance.playSound("sounds/levelUp",!1)),this.skinID=e,this.updateLocalSkin(e)},t.prototype.updateLocalSkin=function(e){},__decorate([r(sp.Skeleton)],t.prototype,"man",void 0),__decorate([r(sp.Skeleton)],t.prototype,"levelup",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../SoundMgr":"SoundMgr"}],PopUpManager:[function(e,t,n){"use strict";cc._RF.push(t,"a385bbYdJpEPI+qXxNTQmtC","PopUpManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),a=e("../GameCoreEventNames"),i=e("./PopUpType"),r=e("./Utils"),s=e("../wechat/WXDevice"),c=cc._decorator,l=c.ccclass,d=(c.property,function(){function e(){this.useBlurEffect=!1,this.popUpType=i.PopUpType.ZOOM,this.sceneChildren=null,this._popUpMap={},this._popUpCount=0,setInterval(this.checkPopUpNodes.bind(this),200)}return Object.defineProperty(e.prototype,"popUpCount",{get:function(){return this._popUpCount},enumerable:!0,configurable:!0}),e.prototype.createPopUpBg=function(e){void 0===e&&(e=160);var t=cc.winSize,n=new cc.Node;n.width=t.width,n.height=t.height;var o=n.addComponent(cc.Graphics);if(o.fillColor=new cc.Color(0,0,0,e),o.lineWidth=0,cc.ENGINE_VERSION>="2.0.0"?o.fillRect(-t.width/2,-t.height/2,t.width,t.height):o.fillRect(0,0,t.width,t.height),o.stroke(),!0!==this.useBlurEffect)return n.addComponent(cc.BlockInputEvents),n;var a=new cc.Node;return a.width=t.width,a.height=t.height,a.addChild(n),a.addComponent(cc.BlockInputEvents),a.addChild(r.default.newPoint()),a},e.prototype.addPopUp=function(e,t,n,r,c,l){var d=this;void 0===t&&(t=!0),void 0===n&&(n=!1),void 0===r&&(r=.8),void 0===c&&(c=160),void 0===l&&(l=!0);var u=cc.winSize,h=new cc.Vec2(0,0),p=cc.director.getScene().children[0];this.sceneChildren&&(p=this.sceneChildren);var f=e.uuid;this._popUpMap[f]=[e,null,l,this.popUpType];var g,m=null;t&&((m=this.createPopUpBg(c)).y=h.y,m.x=h.x,m.group=e.group,p.addChild(m),this._popUpMap[f][1]=m),p.addChild(e),this._popUpCount++,g=1==r?1:Math.min(u.width*r/e.width,u.height*r/e.height),e.stopAllActions();var _=cc.callFunc(function(){e.on(a.default.COMMON_CLOSE,d.nodeCloseEventHandler,d),m&&n&&m.on(cc.Node.EventType.TOUCH_END,d.popUpBgTapHandler,d),o.default.eventManager.dispatchEventWith(a.default.POP_UP_ADD,e)},this);switch(this.popUpType){case i.PopUpType.NONE:e.x=h.x,e.y=h.y,e.scale=g,e.runAction(_);break;case i.PopUpType.SLIDE:e.x=h.x-cc.winSize.width/2-e.width*g/2,e.y=h.y,e.scale=g,e.runAction(cc.sequence(cc.moveTo(.5,h.x,h.y).easing(cc.easeBackOut()),_));break;case i.PopUpType.ZOOM:e.x=h.x,e.y=h.y,e.scale=.5,e.runAction(cc.sequence(cc.scaleTo(.5,g,g).easing(cc.easeBackOut()),_))}o.default.soundsManager.playSound(o.default.soundsManager.popUpSoundSource),o.default.canVibrate&&s.default.vibrateShort()},e.prototype.popUpBgTapHandler=function(e){var t=e.currentTarget;for(var n in this._popUpMap){var o=this._popUpMap[n];if(o&&o[1]==t){var i=o[0];i&&i.dispatchEvent(new cc.Event(a.default.COMMON_CLOSE,!1))}}},e.prototype.nodeCloseEventHandler=function(e){var t=e.currentTarget;this.removePopUp(t)},e.prototype.removePopUp=function(e){if(e&&void 0!=this._popUpMap[e.uuid]){e.off(a.default.COMMON_CLOSE,this.nodeCloseEventHandler,this);var t=this._popUpMap[e.uuid][1];t&&t.off(cc.Node.EventType.TOUCH_END,this.popUpBgTapHandler,this);var n=this._popUpMap[e.uuid][2],r=this._popUpMap[e.uuid][3];if(delete this._popUpMap[e.uuid],this._popUpCount--,e.isValid){var s=cc.callFunc(function(){o.default.eventManager.dispatchEventWith(a.default.POP_UP_REMOVE,e),e&&e.getParent()&&(n?e.destroy():e.removeFromParent(!1)),t&&t.getParent()&&(n?t.destroy():t.removeFromParent(!1))});switch(e.stopAllActions(),r){case i.PopUpType.NONE:e.runAction(s);break;case i.PopUpType.SLIDE:var c=cc.winSize.width/2+e.width*e.scaleX/2;e.runAction(cc.sequence(cc.moveTo(.3,c,e.y).easing(cc.easeQuarticActionIn()),s));break;case i.PopUpType.ZOOM:e.runAction(cc.sequence(cc.spawn(cc.scaleTo(.3,.5,.5).easing(cc.easeBackIn()),cc.fadeTo(.3,0)),s))}}}},e.prototype.checkPopUpNodes=function(){if(0!=this._popUpCount)for(var e in this._popUpMap){var t=this._popUpMap[e][0];t&&!t.isValid&&this.removePopUp(t)}},e=__decorate([l],e)}());n.default=d,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","../wechat/WXDevice":"WXDevice","./GameManager":"GameManager","./PopUpType":"PopUpType","./Utils":"Utils"}],PopUpType:[function(e,t,n){"use strict";cc._RF.push(t,"64da0P/0OZIbqw5ZNBvJI1C","PopUpType"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.NONE=0]="NONE",e[e.ZOOM=1]="ZOOM",e[e.SLIDE=2]="SLIDE"}(n.PopUpType||(n.PopUpType={})),cc._RF.pop()},{}],PrefabMgr:[function(e,t,n){"use strict";cc._RF.push(t,"73205UoWPNEUYGjMvTliERP","PrefabMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.prototype.start=function(){},e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],PrfabsManager:[function(e,t,n){"use strict";cc._RF.push(t,"0b75fu8T2NHBZlZo2OtL5to","PrfabsManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../GameUtils"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){this.prfabsAry={bullet:null,GameContinue:null,Blood_2:null,gameWinPanel:null,topContent:null,topContent2:null,BoxBoomEffectNode:null,TNTEffectNode:null,grenade:null,hpContent:null,hpTipNode:null,adNode:null},this.bgArrLength=14,this.bgArr={bg_1001:null,bg_1002:null,bg_1003:null,bg_1004:null,bg_1005:null,bg_1006:null,bg_1007:null,bg_1008:null,bg_1009:null,bg_1010:null,bg_1011:null,bg_1012:null,bg_1013:null,bg_1014:null},this.allResLoaded=!1,this.create_all_prfabs=function(e){var t=this;if(!this.allResLoaded){for(var n=["bullet","GameContinue","Blood_2","gameWinPanel","topContent","topContent2","BoxBoomEffectNode","TNTEffectNode","grenade","hpContent","hpTipNode","adNode"],a=0,i=function(i){o.default.loadRes("prefabs/stage/"+n[i],cc.Prefab,!1,function(o){t.prfabsAry[n[i]]=o,++a==n.length&&e&&(e(),t.allResLoaded=!0)})},r=0;r<n.length;r++)i(r);var s=function(e){var n="bg_10";e<9?n=n+"0"+(e+1):n+=e+1,o.default.loadRes("textures/hall/bg/"+n,cc.SpriteFrame,!1,function(n){e<9?t.bgArr["bg_100"+(e+1)]=n:t.bgArr["bg_10"+(e+1)]=n})};for(r=0;r<this.bgArrLength;r++)s(r)}}}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),e._instance=null,e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../../GameUtils":"GameUtils"}],QQCM_gameInfo:[function(e,t,n){"use strict";cc._RF.push(t,"cc20flIiV5Mq4j5xqSbZ0pH","QQCM_gameInfo"),Object.defineProperty(n,"__esModule",{value:!0});n.default={gameId:null,gameName:null,roomId:null,openId:null,seesionId:null,sex:0,accessTokenCode:0,accessToken:null,gameParam:null,QQVer:null,platform:null,model:null},cc._RF.pop()},{}],QQCM_getAvatarFromOpenId:[function(e,t,n){"use strict";cc._RF.push(t,"e541fKOigBEw5nbCBuUR2ZM","QQCM_getAvatarFromOpenId"),Object.defineProperty(n,"__esModule",{value:!0});var o=[],a=!1,i=function(){if(!0!==a&&0!=o.length){var e=o.shift(),t=o.shift();a=!0,BK.MQQ.Account.getHeadEx(e,function(e,n){a=!1,t&&t(n),i()})}};n.QQCM_getAvatarFromOpenId=function(e,t){if(console.log("------\u3010QQCM\u3011 QQCM_getAvatarFromOpenId-------"),console.log(e),"undefined"!=typeof BK){var n="GameSandBox://_head/"+e+".jpg",a=BK.FileUtil.isFileExist(n);console.log(n+" is exit :"+a),a?t&&t(n):(o.push(e,t),i())}},cc._RF.pop()},{}],QQCM:[function(e,t,n){"use strict";cc._RF.push(t,"b6ae9RZEA5O26ZlDLYPPOj5","QQCM"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("./QQCM_gameInfo"),i=e("../base/GameValues"),r=function(e){var t="";if(e)for(var n in e)""!=t&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]);return t},s=function(e){return e.replace(/^\/?res\//,"GameRes://res/")};n.QQCM_init=function(e){void 0===e&&(e=null),o=new Date,window.wx={};var t=window.wx;"undefined"!=typeof GameStatusInfo&&(Object.keys(GameStatusInfo).forEach(function(e){a.default[e]=GameStatusInfo[e]}),a.default.gameName=e,console.log("\u3010QQCM\u3011GameStatusInfo"),console.log(JSON.stringify(GameStatusInfo)));var n=i.default.canvas;n&&(n.toTempFilePathSync=function(e){if(console.log("------\u3010QQCM\u3011 toTempFilePathSync-------"),e||(e={}),console.log(JSON.stringify(e)),"undefined"!=typeof BK){var t=e.x||0,n=e.y||0,o=e.width||0,a=e.height||0,i=e.fileType||"png";n=BK.Director.screenPixelSize.height-n-a;var r=new BK.ScreenShot;r.origin={x:t,y:n},r.size={width:o,height:a};var s="screenshot_"+(new Date).getTime(),c=r.shotToFile(s,i);return console.log("\u3010QQCM\u3011file saved at "+c),c}},n.toTempFilePath=function(e){if(console.log("------\u3010QQCM\u3011 toTempFilePath-------"),console.log(JSON.stringify(e)),e){var t=e?e.success:null,n=e?e.fail:null,o=e?e.complete:null;if("undefined"!=typeof BK){var a=e.x||0,i=e.y||0,r=e.width||0,s=e.height||0,c=e.fileType||"png";i=BK.Director.screenPixelSize.height-i-s;var l=new BK.ScreenShot;l.origin={x:a,y:i},l.size={width:r,height:s};var d="screenshot_"+(new Date).getTime();l.shotToFileFromGL(bkWebGLGetInstance(),d,c,function(e){console.log("\u3010QQCM\u3011file saved at "+e),e?(t&&t({tempFilePath:e}),o&&o()):(n&&n(),o&&o())})}}}),t.createImage=function(){console.log("------\u3010QQCM\u3011 createImage-------");var e=new Image;return console.log("image is "+JSON.stringify(e)),e},t.createGameClubButton=function(e){return{onTap:function(e){},offTap:function(e){},show:function(){},hide:function(){},destory:function(){}}},t.login=function(e){if(console.log("------\u3010QQCM\u3011 login-------"),"undefined"!=typeof BK){var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);BK.QQ.fetchOpenKey(function(e,o,a){console.log("fetchOpenKey",e,o,a);var i={};0!=e&&200!=e||(i.code=a.openKey),t&&t(i),n&&n()})}},t.vibrateShort=function(e){console.log("------\u3010QQCM\u3011 vibrateShort-------")},t.vibrateLong=function(e){console.log("------\u3010QQCM\u3011 vibrateLong-------")},t.onMemoryWarning=function(e){console.log("------\u3010QQCM\u3011 onMemoryWarning-------")},t._userInfoRes=null,t._isGettingUserInfo=!1,t._getUserInfoStack=[],t.getUserInfo=function(e){if(void 0===e&&(e=null),console.log("------\u3010QQCM\u3011 getUserInfo-------"),"undefined"!=typeof BK){if(null!=t._userInfoRes){var n=e?e.success:null,o=e?e.complete:null;return n&&n(t._userInfoRes),void(o&&o())}t._getUserInfoStack.push(e),!0!==t._isGettingUserInfo&&(t._isGettingUserInfo=!0,BK.MQQ.Account.getNick(a.default.openId,function(e,n){console.log("------\u3010QQCM\u3011 BK.MQQ.Account.getNick-------"),console.log(e,n),n&&(t._userInfoRes={userInfo:{nickName:n,avatarUrl:a.default.openId,gender:a.default.sex},rawData:"",encryptedData:"",signature:""}),t._getUserInfoStack.forEach(function(e){var n=e?e.success:null,o=e?e.fail:null,a=e?e.complete:null;t._userInfoRes?(n&&n(t._userInfoRes),a&&a()):(o&&o(),a&&a())}),t._getUserInfoStack=[],t._isGettingUserInfo=!1}))}},t.createUserInfoButton=function(e){return void 0===e&&(e=null),console.log("------\u3010QQCM\u3011 createUserInfoButton-------"),console.log(e),null},t.getFriendCloudStorage=function(e){if(console.log("------\u3010QQCM\u3011 getFriendCloudStorage-------"),console.log(e),e&&"undefined"!=typeof BK){var t=e?e.success:null,n=e?e.fail:null,o=e?e.complete:null;BK.QQ.getRankListWithoutRoom("score",1,0,function(e,a,i){if(console.log("getRankListWithoutRoom callback  cmd"+a+" errCode:"+e+"  data:"+JSON.stringify(i)),0!==e)return console.log("\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u5931\u8d25!\u9519\u8bef\u7801\uff1a"+e),n&&n(e),void(o&&o());var r=[];if(i)for(var s=0;s<i.data.ranking_list.length;++s){var c=i.data.ranking_list[s],l={avatarUrl:c.url,nickname:c.nick,openid:0,isSelf:1==c.selfFlag,KVDataList:[{key:"score",value:'{"wxgame": {"score": '+c.score+"}}"}]};r.push(l)}t&&t({data:r}),o&&o()})}},t.getUserCloudStorage=function(e){if(console.log("------\u3010QQCM\u3011 setUserCloudStorage-------"),console.log(e),e&&"undefined"!=typeof BK){e&&e.success;var t=e?e.fail:null,n=e?e.complete:null;t&&t(0),n&&n()}},t.setUserCloudStorage=function(e){if(console.log("------\u3010QQCM\u3011 setUserCloudStorage-------"),console.log(e),e&&"undefined"!=typeof BK){var t,n=e?e.success:null,i=e?e.fail:null,r=e?e.complete:null,s=e.KVDataList;if(s)for(var c=0;c<s.length;c++){var l=s[c],d=(l.key,l.value);try{var u=JSON.parse(d);u.wxgame&&(t=Math.floor(u.wxgame.score))}catch(e){}}if(console.log("\u3010\u4fdd\u5b58\u5206\u6570\u3011"+t),!isNaN(t)){var h={userData:[{openId:a.default.openId,startMs:o.getTime().toString(),endMs:(new Date).getTime().toString(),scoreInfo:{score:t}}],attr:{score:{type:"rank",order:1}}};BK.QQ.uploadScoreWithoutRoom(1,h,function(e,t,o){0!==e?(console.log("\u4e0a\u4f20\u5206\u6570\u5931\u8d25!\u9519\u8bef\u7801\uff1a"+e),i&&i(e),r&&r()):(console.log("\u4e0a\u4f20\u5206\u6570\u6210\u529f"+JSON.stringify(o)),n&&n(o),r&&r())})}}},t.getSetting=function(e){if(console.log("------\u3010QQCM\u3011 getSetting-------"),console.log(e),e){var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);t&&t({authSetting:{"scope.userInfo":!0}}),n&&n()}},t.navigateToMiniProgram=function(e){if(console.log("------\u3010QQCM\u3011 navigateToMiniProgram-------"),console.log(e),e){var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);t&&t();var o=e.appId,a=r(e.extraData);BK.QQ.skipGame(o,a),n&&n()}},t.__openDataContext={callbacks:[],postMessage:function(e){t.__openDataContext.callbacks.forEach(function(t){t(e)})}},t.getOpenDataContext=function(){return t.__openDataContext},t.onMessage=function(e){var n=t.__openDataContext.callbacks;-1==n.indexOf(e)&&n.push(e)},t.getSystemInfo=function(e){if(console.log("------\u3010QQCM\u3011 getSetting-------"),console.log(e),e){var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null),o={version:a.default.QQVer,SDKVersion:"2.3.0",platform:a.default.platform,model:a.default.model};t&&t(o),n&&n()}},t.exitMiniProgram=function(e){console.log("------\u3010QQCM\u3011 exitMiniProgram-------"),console.log(e);e&&e.success;var t=e?e.fail:null,n=e?e.complete:null;t&&t({}),n&&n()},t.__query=null,t.getLaunchOptionsSync=function(){if(console.log("------\u3010QQCM\u3011 getLaunchOptionsSync-------"),null==t.__query)try{var e=a.default.gameParam;t.__query=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(e){t.__query={}}return{scene:0,query:t.__query,isSticky:0,shareTicket:null}},t.onHide=function(e){console.log("------\u3010QQCM\u3011 onHide-------"),"undefined"!=typeof BK&&BK.onEnterBackground(e)},t.onShow=function(e){console.log("------\u3010QQCM\u3011 onShow-------"),"undefined"!=typeof BK&&BK.onEnterForeground(e)},t.offHide=function(e){console.log("------\u3010QQCM\u3011 offHide-------"),"undefined"!=typeof BK&&BK.offEnterBackground(e)},t.offShow=function(e){console.log("------\u3010QQCM\u3011 offShow-------"),"undefined"!=typeof BK&&BK.offEnterForeground(e)},t.onClose=function(e){console.log("------\u3010QQCM\u3011 onClose-------"),"undefined"!=typeof BK&&BK.onGameClose(e)},t.offClose=function(e){console.log("------\u3010QQCM\u3011 offClose-------"),"undefined"!=typeof BK&&BK.offGameClose(e)},t.getFileSystemManager=function(){return console.log("------\u3010QQCM\u3011 getFileSystemManager-------"),{readFileSync:function(e,t){if(void 0===t&&(t="binary"),e=s(e),console.log("------\u3010QQCM\u3011 getFileSystemManager readFileSync -------"),console.log("\t filePath = "+e),console.log("\t encoding = "+t),"undefined"!=typeof BK){try{var n=BK.FileUtil.readFile(e);console.log("file data is "+JSON.stringify(n));var o=BK.Misc.BKBufferToArrayBuffer(n),a=new Uint8Array(o);if("binary"==t);else{for(var i="",r=a.byteLength,c=0;c<r;c++)i+=String.fromCharCode(a[c]);a=i}return a}catch(e){}return null}},readFile:function(e){if(console.log("------\u3010QQCM\u3011 getFileSystemManager readFile -------"),console.log(JSON.stringify(e)),e&&"undefined"!=typeof BK){var t=e?e.success:null,n=e?e.fail:null,o=e?e.complete:null,a=e.filePath;a=s(a);var i=e.encoding;try{var r=BK.FileUtil.readFile(a);console.log("file data is "+JSON.stringify(r));var c=BK.Misc.BKBufferToArrayBuffer(r),l=new Uint8Array(c);if("binary"==i);else{for(var d="",u=l.byteLength,h=0;h<u;h++)d+=String.fromCharCode(l[h]);l=d}t&&t(l),o&&o()}catch(e){n&&n(e),o&&o()}}}}},t.getShareInfo=function(e){},t.hideShareMenu=function(e){},t.showShareMenu=function(e){},t.updateShareMenu=function(e){},t.shareAppMessage=function(e){if(console.log("------\u3010QQCM\u3011 shareAppMessage-------"),console.log(JSON.stringify(e)),e&&"undefined"!=typeof BK){var t=e?e.success:null,n=e?e.fail:null,o=e?e.complete:null,i=e.imageUrl;if(i&&BK.FileUtil.isFileExist(i)){var r=BK.FileUtil.readFile(i);console.log("buf is"+JSON.stringify(r)),BK.QQ.shareToArkFromBuff(a.default.roomId,e.title,a.default.gameParam,r),t&&t(),o&&o()}else BK.Share.share({qqImgUrl:i,summary:e.title,success:function(e){t&&t(e),BK.Console.log("\u5206\u4eab\u6210\u529f",e.code,JSON.stringify(e.data))},fail:function(e){n&&t(e),BK.Console.log("\u5206\u4eab\u5931\u8d25",e.code,JSON.stringify(e.msg))},complete:function(){o&&o(),BK.Console.log("\u5206\u4eab\u5b8c\u6210\uff0c\b\u4e0d\u8bba\u6210\u529f\u5931\u8d25")}})}},t.onShareAppMessage=function(e){if(console.log("------\u3010QQCM\u3011 onShareAppMessage-------"),"undefined"!=typeof BK){var t;try{t=e()}catch(e){return}if(t){console.log(JSON.stringify(t));var n=t.title,o=t.imageUrl,a=t.query;try{BK.onShare({summary:n,picUrl:o,extendInfo:a})}catch(e){}}}},t.offShareAppMessage=function(e){},t.createRewardedVideoAd=function(e){return console.log("------\u3010QQCM\u3011 createRewardedVideoAd-------"),console.log(e),"undefined"==typeof BK?null:new l(e)},t.createBannerAd=function(e){return console.log("------\u3010QQCM\u3011 createBannerAd-------"),console.log(e),"undefined"==typeof BK?null:new c(e)},t.requestMidasPayment=function(e){if(console.log("------\u3010QQCM\u3011 requestMidasPayment-------"),e&&(console.log(JSON.stringify(e)),"undefined"!=typeof BK)){var t=e?e.success:null,n=e?e.fail:null,o=e?e.complete:null,a=[{itemId:e.offerId,itemNum:e.buyQuantity}],r=1;i.default.orientation==i.Orientation.ROTATED_LEFT?r=3:i.default.orientation==i.Orientation.ROTATED_RIGHT&&(r=2),BK.QQ.qPayPurchase(r,!0,a,function(e,a){console.log("qPayPurchase errCode:"+e+" data:"+JSON.stringify(a)),0==e?(t&&t(a),o&&o()):(n&&n(e),o&&o())})}},t.hideLoading=function(e){if(console.log("------\u3010QQCM\u3011 hideLoading-------"),"undefined"!=typeof BK){var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);BK.UI.hideLoading(),t&&t(),n&&n()}},t.hideToast=function(e){if(console.log("------\u3010QQCM\u3011 hideToast-------"),"undefined"!=typeof BK){var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);BK.UI.hideToast(),t&&t(),n&&n()}},t.showLoading=function(e){if(console.log("------\u3010QQCM\u3011 showLoading-------"),e&&"undefined"!=typeof BK){var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);BK.UI.showLoading({title:e.title}),t&&t(),n&&n()}},t.showModal=function(e){if(console.log("------\u3010QQCM\u3011 showModal-------"),e&&"undefined"!=typeof BK){var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);BK.UI.showAlert({title:e.title,content:e.content,success:function(e){e.confirm?t&&t(!0):e.cancel&&t&&t(!1),n&&n()},complete:function(){}})}},t.showToast=function(e){if(console.log("------\u3010QQCM\u3011 showToast-------"),e&&"undefined"!=typeof BK){var t=e?e.success:null,n=(e&&e.fail,e?e.complete:null);BK.UI.showToast({title:e.title,duration:1500}),t&&t(),n&&n()}},t.getMenuButtonBoundingClientRect=function(){return console.log("------\u3010QQCM\u3011 getMenuButtonBoundingClientRect-------"),{top:0,left:0,width:0,height:0,bottom:0,right:0}},t.setMenuStyle=function(e){console.log("------\u3010QQCM\u3011 setMenuStyle-------")},t.request=function(e){if(console.log("------\u3010QQCM\u3011 request-------"),console.log(JSON.stringify(e)),e&&"undefined"!=typeof BK){var t=e.url;if(t){var n=e?e.success:null,o=e?e.fail:null,a=e?e.complete:null,i=e.method||"get";i=i.toLocaleLowerCase();var s=e.dataType||"json";s=s.toLowerCase();var c=e.data,l=r(c);console.log(l),"post"!=i&&(t.indexOf("?")>=0?t+="&"+l:t+="?"+l);var d=new BK.HttpUtil(t);d.setHttpMethod(i),"post"==i&&d.setHttpPostData(l);var u=e.header;if(u)for(var h in u)"Referer"===h?d.setHttpReferer&&d.setHttpReferer(u.Referer):"Cookie"===h&&d.setHttpCookie&&d.setHttpCookie(u.Cookie),d.setHttpHeader(h,u[h]);d.requestAsync(function(e,i){console.log("\u3010QQCM\u3011HttpUtil result, url = "+t+", code = "+i);var r=new Uint8Array(BK.Misc.BKBufferToArrayBuffer(e));try{if("json"==s){for(var c="",l=r.byteLength,d=0;d<l;d++)c+=String.fromCharCode(r[d]);r={data:r=JSON.parse(c)}}}catch(e){}console.log(JSON.stringify(r)),200==i?(n&&n(r),a&&a()):(o&&o(i),a&&a())})}}}};var c=function(){function e(t){var n=this;this.videoType=2,this._fetchInterval=0,this._isShowing=!0,this._destroied=!1,this._onResizeCallbacks=[],this._onLoadCallbacks=[],this._onErrorCallbacks=[],t&&(this._adUnitId=t.adUnitId),this.fetchAd(),setInterval(function(){console.log("\u5237\u65b0banner\u5e7f\u544a"),n.removeAd(),n.fetchAd()},e.REFRESH_DELAY)}return e.prototype.fetchAd=function(){if(!this._destroied){if(this._lastFetachTime)if((new Date).getTime()-this._lastFetachTime.getTime()<e.MIN_DELAY)return void console.log("\u95f4\u9694\u65f6\u95f4\u592a\u5c0f");this._lastFetachTime=new Date,BK.Advertisement.fetchBannerAd(this.fetchAdCallback.bind(this))}},e.prototype.fetchAdCallback=function(e,t,n){var o=this;0==e?(this._theAd=n,this._isShowing&&this.show(),console.log("\u3010\u6761\u5f62\u5e7f\u544a\u3011fetchAdCallback, this._destroied="+this._destroied),this._theAd.onClickClose(function(){o.removeAd()}),this.doLoaded()):this.doError(e,t)},e.prototype.show=function(){var e=this;console.log("\u3010\u6761\u5f62\u5e7f\u544a\u3011show"),this._isShowing=!0,this._theAd?this._theAd.show(function(t,n,o){if(console.log("\u3010\u6761\u5f62\u5e7f\u544a\u3011this._theAd.show's callback, this._destroied="+e._destroied),console.log(o),e._destroied)try{o.close()}catch(e){}else 0==t?e.doResize():console.log("\u5c55\u793a\u5931\u8d25 msg:"+n)}):this.fetchAd()},e.prototype.removeAd=function(){console.log("\u3010\u6761\u5f62\u5e7f\u544a\u3011removeAd");try{this._theAd&&this._theAd.close()}catch(e){}this._theAd=null},e.prototype.hide=function(){this._destroied||(this._isShowing=!1,this.removeAd())},e.prototype.destroy=function(){this._destroied||(this._destroied=!0,this.removeAd(),this._onResizeCallbacks=[],this._onErrorCallbacks=[],this._onLoadCallbacks=[],clearInterval(this._fetchInterval))},e.prototype.doResize=function(){var e=this;if(!this._adSize){this._adSize={};var t=cc.view.getFrameSize();i.default.orientation==i.Orientation.DEFAULT?(this._adSize.width=.78*t.width,this._adSize.height=.78*t.width*166/582):(this._adSize.width=0,this._adSize.height=0)}this._onResizeCallbacks.forEach(function(t){t(e._adSize)})},e.prototype.onResize=function(e){this._destroied||e&&-1==this._onResizeCallbacks.indexOf(e)&&this._onResizeCallbacks.push(e)},e.prototype.offResize=function(e){if(!this._destroied){var t=this._onResizeCallbacks.indexOf(e);t>=0&&this._onResizeCallbacks.splice(t,1)}},e.prototype.doLoaded=function(){var e={};this._onLoadCallbacks.forEach(function(t){t(e)})},e.prototype.onLoad=function(e){e&&-1==this._onLoadCallbacks.indexOf(e)&&this._onLoadCallbacks.push(e)},e.prototype.offLoad=function(e){var t=this._onLoadCallbacks.indexOf(e);t>=0&&this._onLoadCallbacks.splice(t,1)},e.prototype.doError=function(e,t){var n={errMsg:t,errCode:e};this._onErrorCallbacks.forEach(function(e){e(n)})},e.prototype.onError=function(e){e&&-1==this._onErrorCallbacks.indexOf(e)&&this._onErrorCallbacks.push(e)},e.prototype.offError=function(e){var t=this._onErrorCallbacks.indexOf(e);t>=0&&this._onErrorCallbacks.splice(t,1)},e.REFRESH_DELAY=3e4,e.MIN_DELAY=1e4,e}(),l=function(){function e(e){var t=this;this.videoType=2,this._isReady=!1,this._onLoadCallbacks=[],this._onErrorCallbacks=[],this._onCloseCallbacks=[],this._completed=!1,e&&(this._adUnitId=e.adUnitId),this._theAd=BK.Advertisement.createVideoAd(),this._isReady=!1,console.log("\u3010QQCM VideoAd\u3011\u8bf7\u6c42\u89c6\u9891\u5e7f\u544a",this._theAd),this._theAd.onLoad(this.doLoaded.bind(this)),this._theAd.onPlayStart(function(){t._completed=!1,console.log("\u3010QQCM VideoAd\u3011\u89c6\u9891\u5e7f\u544a\u5f00\u59cb\u64ad\u653e")}),this._theAd.onError(function(e){console.log("\u3010QQCM VideoAd\u3011\u89c6\u9891\u5e7f\u544a\u83b7\u53d6\u5931\u8d25"),t.doError(e.code,e.msg)}),this._theAd.onPlayFinish(function(){console.log("\u3010QQCM VideoAd\u3011\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u5b8c\u6210"),t._completed=!0}),this._theAd.onClose(function(){console.log("\u3010QQCM VideoAd\u3011\u89c6\u9891\u5e7f\u544a\u5173\u95ed"),t.doClose()})}return e.prototype.load=function(){},e.prototype.show=function(){this._theAd&&this._isReady&&this._theAd.show()},e.prototype.doLoaded=function(){console.log("\u3010QQCM VideoAd\u3011\u89c6\u9891\u5e7f\u544a\u83b7\u53d6\u6210\u529f"),this._isReady=!0;var e={};this._onLoadCallbacks.forEach(function(t){t(e)})},e.prototype.onLoad=function(e){e&&-1==this._onLoadCallbacks.indexOf(e)&&this._onLoadCallbacks.push(e)},e.prototype.offLoad=function(e){var t=this._onLoadCallbacks.indexOf(e);t>=0&&this._onLoadCallbacks.splice(t,1)},e.prototype.doError=function(e,t){void 0===e&&(e=0),void 0===t&&(t=null);var n={errMsg:t,errCode:e};this._onErrorCallbacks.forEach(function(e){e(n)})},e.prototype.onError=function(e){e&&-1==this._onErrorCallbacks.indexOf(e)&&this._onErrorCallbacks.push(e)},e.prototype.offError=function(e){var t=this._onErrorCallbacks.indexOf(e);t>=0&&this._onErrorCallbacks.splice(t,1)},e.prototype.doClose=function(){var e={isEnded:this._completed};this._onCloseCallbacks.forEach(function(t){t(e)})},e.prototype.onClose=function(e){e&&-1==this._onCloseCallbacks.indexOf(e)&&this._onCloseCallbacks.push(e)},e.prototype.offClose=function(e){var t=this._onCloseCallbacks.indexOf(e);t>=0&&this._onCloseCallbacks.splice(t,1)},e}();cc._RF.pop()},{"../base/GameValues":"GameValues","./QQCM_gameInfo":"QQCM_gameInfo"}],RankEventName:[function(e,t,n){"use strict";cc._RF.push(t,"d4908dbyhVAYKo75D3Pd2HZ","RankEventName"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.RANK_SHOW_WORD_VIEW="rankshowwordview",e.RANK_SHOW_FRIED_VIEW="rankshowfriedview",e.RANK_SETTING_DATE="ranksettingdate",e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],RankItemRender:[function(e,t,n){"use strict";cc._RF.push(t,"4bb12rif8BIrI9SSTAfXAAj","RankItemRender"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../gamecore/components/Comp_ListRenderer"),a=e("../../../gamecore/wechat/WXImage"),i=e("../../../GameUtils"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankLb=null,t.headImg=null,t.nameLb=null,t.imgs=[],t.rankimg=null,t.levelLb=null,t}return __extends(t,e),t.prototype.refreshUI=function(){var e=this.data;void 0!=this.imgs[this.index]?(this.rankLb.string="",this.rankimg.node.active=!0,this.rankimg.spriteFrame=this.imgs[this.index],3==this.index&&(this.rankLb.string=this.index+1+"")):(this.rankLb.string=this.index+1+"",this.rankimg.node.active=!0,this.rankimg.spriteFrame=this.imgs[3]),this.headImg.spriteFrame=a.default.createImage(e.avatar),this.nameLb.string=i.default.instance.substrName(e.nickname,5),this.levelLb.string=e.amount+"\u5173"},__decorate([c(cc.Label)],t.prototype,"rankLb",void 0),__decorate([c(cc.Sprite)],t.prototype,"headImg",void 0),__decorate([c(cc.Label)],t.prototype,"nameLb",void 0),__decorate([c([cc.SpriteFrame])],t.prototype,"imgs",void 0),__decorate([c(cc.Sprite)],t.prototype,"rankimg",void 0),__decorate([c(cc.Label)],t.prototype,"levelLb",void 0),t=__decorate([s],t)}(o.default);n.default=l,cc._RF.pop()},{"../../../GameUtils":"GameUtils","../../../gamecore/components/Comp_ListRenderer":"Comp_ListRenderer","../../../gamecore/wechat/WXImage":"WXImage"}],RankManage:[function(e,t,n){"use strict";cc._RF.push(t,"a6a7dVFfp9IOopxK4uRilz0","RankManage"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../gamecore/managers/event/EventDispacher"),a=e("../../../gamecore/deer/DeerSDK"),i=e("./RankEventName"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=e.call(this)||this;return t.worddata=[],t.frieddata=null,t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"Interest",{get:function(){return this.data},enumerable:!0,configurable:!0}),t.prototype.getServiceData=function(){var e=this;a.default.instance.game_getGlobalRankingData(function(t){var n=t.score_rank,o=t.my_score;e.worddata=n,e.frieddata=o,e.dispatchEventWith(i.default.RANK_SETTING_DATE)},function(){})},Object.defineProperty(t.prototype,"getWordData",{get:function(){return this.worddata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getMyData",{get:function(){return this.frieddata},enumerable:!0,configurable:!0}),t.data=new n,t=n=__decorate([s],t)}(o.default));n.default=c,cc._RF.pop()},{"../../../gamecore/deer/DeerSDK":"DeerSDK","../../../gamecore/managers/event/EventDispacher":"EventDispacher","./RankEventName":"RankEventName"}],RankRender:[function(e,t,n){"use strict";cc._RF.push(t,"d5f68IfP2RIoYKPNzhGuz4f","RankRender"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./RankManage"),a=e("./RankEventName"),i=e("../../../gamecore/components/Comp_List"),r=e("../../../gamecore/wechat/WXImage"),s=e("../../../GameUtils"),c=e("../../../gamecore/managers/GameManager"),l=e("../../base/BasePanelComp"),d=cc._decorator,u=d.ccclass,h=d.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.rank_Lb=null,t.head_sp=null,t.name_Lb=null,t.imgs=[],t.rankimg=null,t.levelLb=null,t.wesub=null,t.kuang1=null,t.kuang2=null,t.friedBt=null,t.wordBt=null,t}return __extends(t,e),t.prototype.onLoad=function(){o.default.Interest.addEventListener(a.default.RANK_SETTING_DATE,this.showWord,this),this.node.width=cc.winSize.width,this.node.height=cc.winSize.height},t.prototype.closeView=function(){this.close()},t.prototype.start=function(){this.init(),o.default.Interest.getServiceData(),this.showFried()},t.prototype.showWord=function(){var e=o.default.Interest.getWordData;e&&e.length>0&&(this.showWordItem(e),this.showMyItem(o.default.Interest.getMyData))},t.prototype.showWorld=function(){if(c.default.soundsManager.playTapSound(),this.kuang1.active=!1,this.kuang2.active=!0,this.node.getChildByName("content").getChildByName("bg").getChildByName("scroll").active=!0,this.node.getChildByName("content").getChildByName("bg").getChildByName("rankme").active=!0,"undefined"!=typeof wx){var e={state:2};wx.getOpenDataContext().postMessage(e)}this.wesub.active=!1},t.prototype.showFried=function(){if(c.default.soundsManager.playTapSound(),this.kuang1.active=!0,this.kuang2.active=!1,this.node.getChildByName("content").getChildByName("bg").getChildByName("scroll").active=!1,this.node.getChildByName("content").getChildByName("bg").getChildByName("rankme").active=!1,"undefined"!=typeof wx){var e={state:1};wx.getOpenDataContext().postMessage(e)}this.wesub.active=!1,this.wesub.active=!0},t.prototype.showWordItem=function(e){void 0!=e&&(console.log("this",e),this.content.getComponent(i.default).data=e)},t.prototype.showMyItem=function(e){void 0==e&&null==e||(e.index<0?this.rank_Lb.string="\u672a\u4e0a\u699c":(void 0!=this.imgs[e.index-1]?(this.rank_Lb.string="",this.rankimg.spriteFrame=this.imgs[e.index-1]):(this.rankimg.spriteFrame=this.imgs[3],this.rank_Lb.string=e.index+""),4==e.index&&(this.rank_Lb.string="4")),this.head_sp.spriteFrame=r.default.createImage(e.avatar),this.name_Lb.string=s.default.instance.substrName(e.nickname,6),this.levelLb.string=e.amount+"\u5173")},t.prototype.onDestroy=function(){o.default.Interest.removeEventListener(a.default.RANK_SETTING_DATE,this.showWord,this),this.node.on(a.default.RANK_SHOW_WORD_VIEW,this.showWord,this)},__decorate([h(cc.Node)],t.prototype,"content",void 0),__decorate([h(cc.Label)],t.prototype,"rank_Lb",void 0),__decorate([h(cc.Sprite)],t.prototype,"head_sp",void 0),__decorate([h(cc.Label)],t.prototype,"name_Lb",void 0),__decorate([h([cc.SpriteFrame])],t.prototype,"imgs",void 0),__decorate([h(cc.Sprite)],t.prototype,"rankimg",void 0),__decorate([h(cc.Label)],t.prototype,"levelLb",void 0),__decorate([h(cc.Node)],t.prototype,"wesub",void 0),__decorate([h(cc.Node)],t.prototype,"kuang1",void 0),__decorate([h(cc.Node)],t.prototype,"kuang2",void 0),__decorate([h(cc.Sprite)],t.prototype,"friedBt",void 0),__decorate([h(cc.Sprite)],t.prototype,"wordBt",void 0),t=__decorate([u],t)}(l.default);n.default=p,cc._RF.pop()},{"../../../GameUtils":"GameUtils","../../../gamecore/components/Comp_List":"Comp_List","../../../gamecore/managers/GameManager":"GameManager","../../../gamecore/wechat/WXImage":"WXImage","../../base/BasePanelComp":"BasePanelComp","./RankEventName":"RankEventName","./RankManage":"RankManage"}],RayEnemy:[function(e,t,n){"use strict";cc._RF.push(t,"ebd33hwqzlGTYNpQPRWR+SV","RayEnemy"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rayCastType=cc.RayCastType.Any,t.hero=null,t.radius=1e3,t.body=null,t.ctx=null,t.angle=0,t.center=null,t.target=null,t.drawLine=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.ctx=this.getComponent(cc.Graphics),this.angle=0,this.center=cc.v2(cc.winSize.width/2,cc.winSize.height/2),this.body=this.getComponent(cc.RigidBody);var e=this.body.getWorldPosition(cc.v2(0,0));cc.log("out: ",e.x,e.y),cc.log("out: ",this.node.x,this.node.y),this.center=cc.v2(this.node.x,this.node.y)},t.prototype.update=function(e){var t=this;this.angle+=Math.PI/10*e;var n=cc.v2(0,0);this.center=cc.v2(cc.winSize.width/2,cc.winSize.height/2);var o=cc.v2(Math.cos(this.angle),Math.sin(this.angle)).mulSelf(this.radius).addSelf(this.center),a=cc.director.getPhysicsManager().rayCast(n,o,this.rayCastType);this.ctx.clear(),this.rayCastType!==cc.RayCastType.Closest&&this.rayCastType!==cc.RayCastType.Any||a[0]&&(o=a[0].point),a.forEach(function(e){t.ctx.circle(e.point.x,e.point.y,5)}),this.ctx.fill(),this.ctx.moveTo(n.x,n.y),this.ctx.lineTo(o.x,o.y),this.ctx.stroke()},t.prototype.onClosestBtnClick=function(){this.rayCastType=cc.RayCastType.Closest},t.prototype.onAnyBtnClick=function(){this.rayCastType=cc.RayCastType.Any},t.prototype.onAllClosestBtnClick=function(){this.rayCastType=cc.RayCastType.AllClosest},t.prototype.onAllBtnClick=function(){this.rayCastType=cc.RayCastType.All},__decorate([i(cc.RayCastType.Any)],t.prototype,"rayCastType",void 0),__decorate([i(cc.RigidBody)],t.prototype,"body",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],Raycast:[function(e,t,n){"use strict";cc._RF.push(t,"a3b1cJCv4JFSYlLp8WiGQNF","Raycast"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rayCastType=0,t.curCollider=null,t.radius=1e3,t.ctx=null,t.angle=0,t.center=null,t.target=null,t.drawLine=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.ctx=this.getComponent(cc.Graphics),this.angle=0,this.center=cc.v2(cc.winSize.width/2,cc.winSize.height/2),this.center=cc.v2(699,184),this.target=cc.v2(799,284),this.rayCastType=cc.RayCastType.Closest,this.drawLine=!1},t.prototype.setCenter=function(e,t){void 0===t&&(t=0),this.center=cc.v2(e,t)},t.prototype.setTarget=function(e,t){this.target=cc.v2(e,t)},t.prototype.update=function(e){var t=this;this.angle+=Math.PI/10*e;var n=this.center,o=this.target,a=this.node.parent.convertToWorldSpaceAR(n),i=this.node.parent.convertToWorldSpaceAR(o),r=cc.director.getPhysicsManager().rayCast(a,i,this.rayCastType);1==this.drawLine&&this.ctx.clear(),this.rayCastType!==cc.RayCastType.Closest&&this.rayCastType!==cc.RayCastType.Any||(r[0]?(o=r[0].point,this.curCollider=r[0].collider):this.curCollider=null),1==this.drawLine&&(r.forEach(function(e){t.ctx.circle(e.point.x,e.point.y,5)}),this.ctx.fill(),this.ctx.moveTo(n.x,n.y),this.ctx.lineTo(o.x,o.y),this.ctx.stroke())},t.prototype.onClosestBtnClick=function(){this.rayCastType=cc.RayCastType.Closest},t.prototype.onAnyBtnClick=function(){this.rayCastType=cc.RayCastType.Any},t.prototype.onAllClosestBtnClick=function(){this.rayCastType=cc.RayCastType.AllClosest},t.prototype.onAllBtnClick=function(){this.rayCastType=cc.RayCastType.All},__decorate([i(cc.RayCastType.Any)],t.prototype,"rayCastType",void 0),__decorate([i(Number)],t.prototype,"radius",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],RebornUI:[function(e,t,n){"use strict";cc._RF.push(t,"6e03bU/LCJJRpvnoCPfojr4","RebornUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameData"),a=e("./GameUI"),i=e("./Globaldef"),r=e("./TankDataMgr"),s=e("./UIManager"),c=e("../GameUtils"),l=cc._decorator,d=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameCtrl=null,t.videoAd=null,t}return __extends(t,e),t.prototype.start=function(){var e=cc.find("Canvas");e&&(this.gameCtrl=e.getComponent("GameCtrl"))},t.prototype.watchVideoAd=function(){var e=this;r.default.instance.curAdType=2,c.default.instance.showVideoAd(function(){e.lookSuccess()},function(){c.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u590d\u6d3b",function(){e.watchVideoAd()},function(){e.lookCancel()})},function(){c.default.instance.playFailOnShare(function(t){switch(t){case 1:e.lookSuccess()}},"moreRewardGoldNum")})},t.prototype.clickLookBtn=function(){var e,t;cc.sys.browserType==cc.sys.BROWSER_TYPE_CHROME?(this.node.active=!1,cc.director.resume(),this.gameCtrl&&this.gameCtrl.enemyManager&&this.gameCtrl.enemyManager.removeAllBullet(),o.default.instance.isPause=!0,(e=cc.find("Canvas/GameUI"))&&(t=e.getComponent(a.default))&&t.countDownAniReBorn()):cc.sys.browserType==cc.sys.BROWSER_TYPE_WECHAT_GAME?(o.default.instance.isPause=!0,r.default.instance.curAdType=2,this.watchVideoAd()):(this.node.active=!1,cc.director.resume(),this.gameCtrl&&this.gameCtrl.enemyManager&&this.gameCtrl.enemyManager.removeAllBullet(),o.default.instance.isPause=!0,(e=cc.find("Canvas/GameUI"))&&(t=e.getComponent(a.default))&&t.countDownAniReBorn())},t.prototype.clickSkipBtn=function(){cc.director.resume(),this.node.active=!1,o.default.instance.m_isWin=!1,o.default.instance.isPause=!0,r.default.instance.getUIMgr().showUI(i.default.UI_NAME[i.default.UI_ID.E_GAME_END_UI])},t.prototype.lookSuccess=function(){this.node.active=!1,cc.director.resume();var e=cc.find("Canvas/GameUI");if(e){this.gameCtrl&&this.gameCtrl.enemyManager&&this.gameCtrl.enemyManager.removeAllBullet();var t=e.getComponent(a.default);t&&t.countDownAniReBorn()}},t.prototype.lookCancel=function(){this.node.active=!1,cc.director.resume(),o.default.instance.m_isWin=!1,o.default.instance.isPause=!0,cc.find("Canvas").getComponent(s.default).showUI(i.default.UI_NAME[i.default.UI_ID.E_GAME_END_UI])},t.prototype.lookError=function(){2==r.default.instance.curAdType&&cc.find("Canvas").getComponent(s.default).showTip("\u5e7f\u544a\u64ad\u653e\u9519\u8bef\uff01\u8bf7\u4ece\u65b0\u5c1d\u8bd5",function(){this.node.active=!1,cc.director.resume(),o.default.instance.m_isWin=!1,o.default.instance.isPause=!0,cc.find("Canvas").getComponent(s.default).showUI(i.default.UI_NAME[i.default.UI_ID.E_GAME_END_UI])})},t.prototype.onEnable=function(){this.showBannerAd()},t.prototype.onDisable=function(){this.hideBannerAD()},t.prototype.showBannerAd=function(){console.log("showBannerAd")},t.prototype.hideBannerAD=function(){console.log("hideBannerAD")},t=__decorate([d],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../GameUtils":"GameUtils","./GameData":"GameData","./GameUI":"GameUI","./Globaldef":"Globaldef","./TankDataMgr":"TankDataMgr","./UIManager":"UIManager"}],RecommendAdItemMain:[function(e,t,n){"use strict";cc._RF.push(t,"d516ebHQtBE5ZHC4qr6HJ9U","RecommendAdItemMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/IconAdBase"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.redPointNode=null,t}return __extends(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.showAd=function(){e.prototype.showAd.call(this),this.data&&this.redPointNode&&(this.redPointNode.active=1==this.data.ad_dot)},__decorate([r({displayName:"\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],t.prototype,"redPointNode",void 0),t=__decorate([i],t)}(o.default);n.default=s,cc._RF.pop()},{"../base/IconAdBase":"IconAdBase"}],RecommendAdListMain:[function(e,t,n){"use strict";cc._RF.push(t,"b12fcsezBFGB6L+umfAqOpW","RecommendAdListMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../scripts/gamecore/deer/DeerSDK"),a=e("../../../scripts/gamecore/xiaoyaoji/XYJAPI"),i=e("../../../scripts/gamecore/deer/DeerSDKEventNames"),r=e("../base/IconAdBase"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.adMaxCount=4,t.gapH=10,t.autoSlideDelay=0,t.autoZoomDelay=0,t.moveSpeed=0,t.adItemPrefab=null,t._isTouching=!1,t._currentIndex=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.opacity=0},t.prototype.start=function(){o.default.instance.isReady||a.default.userOpenID?this.loadAdData():o.default.instance.addEventListener(i.default.READY,this.deerSDKReadyHandler,this),this._maskerRect=this.node.getParent().getBoundingBoxToWorld(),0!=this.moveSpeed&&(this.node.on(cc.Node.EventType.TOUCH_START,this.touchHandler,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchHandler,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchHandler,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchHandler,this))},t.prototype.update=function(e){this._data&&(0==this.moveSpeed||this._isTouching||(this.node.x+=this.moveSpeed,this.moveSpeed>0?this.relayoutAdItem(!1,!0):this.relayoutAdItem(!0,!1)))},t.prototype.relayoutAdItem=function(e,t){var n=this.node.children[0],o=this.node.children[this.node.children.length-1];if(this.node.children.forEach(function(e){e.x<n.x?n=e:e.x>o.x&&(o=e)}),e){var a=new cc.Vec2(n.width/2+this.gapH,0);(a=n.convertToWorldSpaceAR(a)).x<this._maskerRect.x-n.width&&(n.x=o.x+o.width+this.gapH)}if(t){var i=new cc.Vec2(-o.width/2-this.gapH,0);(i=o.convertToWorldSpaceAR(i)).x>this._maskerRect.x+this._maskerRect.width+o.width&&(o.x=n.x-o.width-this.gapH)}},t.prototype.touchHandler=function(e){if(e.type==cc.Node.EventType.TOUCH_START)this._isTouching=!0;else if(e.type==cc.Node.EventType.TOUCH_END||e.type==cc.Node.EventType.TOUCH_CANCEL)this._isTouching=!1;else if(e.type==cc.Node.EventType.TOUCH_MOVE&&this._isTouching){var t=e.getDeltaX();this.node.x+=t,t>0?this.relayoutAdItem(!1,!0):this.relayoutAdItem(!0,!1)}},t.prototype.deerSDKReadyHandler=function(e){this.loadAdData()},t.prototype.loadAdData=function(){var e=this;o.default.instance.removeEventListener(i.default.READY,this.deerSDKReadyHandler,this),o.default.instance.ad_getAdData(o.DeerAdType.RECOMMEND,function(t){e.showAds(t)},null,this.locationFlg)},t.prototype.showAds=function(e){if(e&&0!=e.length&&this._data!=e){this._adItems&&this._adItems.forEach(function(e){e.removeFromParent(!0)}),this._data=e,this._adItems=[],this._currentIndex=0;var t=this.node.getParent();this.node.x=-t.width*t.anchorX,this.node.opacity=255;var n=e.length;this.autoSlideDelay<=0&&this.adMaxCount>0&&(n=Math.min(n,this.adMaxCount));for(var o=0,a=0;a<n;a++){var i=cc.instantiate(this.adItemPrefab);i.x=(i.width+this.gapH)*a+i.width/2+this.gapH;var s=e[a];s.index=a,i.getComponent(r.default).data=s,this.node.addChild(i),this._adItems.push(i),o=i.x+i.width/2+this.gapH}this.node.width=o,0!=this.moveSpeed||(this.unschedule(this.slideToNext),this.autoSlideDelay>0&&this.schedule(this.slideToNext,this.autoSlideDelay,cc.macro.REPEAT_FOREVER),this.unschedule(this.zoomNext),this.autoZoomDelay>0&&this.schedule(this.zoomNext,this.autoZoomDelay,cc.macro.REPEAT_FOREVER))}},t.prototype.slideToNext=function(){var e=this._adItems.length;this.adMaxCount>0&&(e-=this.adMaxCount-1),e>1&&(this.currentIndex=(this._currentIndex+1)%e)},t.prototype.zoomNext=function(){var e=this._adItems.length;if(this.adMaxCount>0&&(e=this.adMaxCount),this._adItems){var t=this._adItems.slice(this._currentIndex,this._currentIndex+e);t[Math.floor(Math.random()*t.length)].runAction(cc.sequence(cc.scaleTo(.6,1.1,1.1).easing(cc.easeBackInOut()),cc.delayTime(.3),cc.scaleTo(.3,1,1).easing(cc.easeIn(1))))}},Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this._currentIndex},set:function(e){if(!(e<0)){var t=this._adItems.length;if(this.adMaxCount>0&&(t-=this.adMaxCount-1),!(e>=t)){this._currentIndex=e;var n=this.node.getParent(),o=this.node.children[this._currentIndex],a=-(o.x-o.width/2-this.gapH)-n.width*n.anchorX;this.node.stopAllActions(),this.node.runAction(cc.moveTo(.5,a,this.node.y).easing(cc.easeQuadraticActionOut()));for(var i=0,r=this._adItems.length;i<r;i++){var s=!0;i<this._currentIndex?s=!1:this.adMaxCount>0&&i>=this._currentIndex+this.adMaxCount&&(s=!1);var c=this._adItems[i];s&&c.opacity<1?c.runAction(cc.fadeTo(.5,255)):!s&&c.opacity>254?c.runAction(cc.fadeTo(.5,0)):(c.stopAllActions(),this._adItems[i].opacity=s?255:0)}}}},enumerable:!0,configurable:!0}),t.prototype.onDestroy=function(){o.default.instance.removeEventListener(i.default.READY,this.deerSDKReadyHandler,this)},__decorate([l({displayName:"\u5e7f\u544a\u663e\u793a\u6570",tooltip:"\u8bbe\u7f6e\u4e3a0\uff0c\u5219\u663e\u793a\u6240\u6709\u5e7f\u544a"})],t.prototype,"adMaxCount",void 0),__decorate([l({displayName:"\u6c34\u5e73\u95f4\u8ddd"})],t.prototype,"gapH",void 0),__decorate([l({displayName:"\u81ea\u52a8\u8f6e\u64ad\u95f4\u9694(s)",tooltip:"0\u8868\u793a\u4e0d\u8f6e\u64ad"})],t.prototype,"autoSlideDelay",void 0),__decorate([l({displayName:"\u968f\u673a\u9ad8\u4eae\u95f4\u9694(s)",tooltip:"0\u8868\u793a\u4e0d\u968f\u673a\u9ad8\u4eae"})],t.prototype,"autoZoomDelay",void 0),__decorate([l({displayName:"\u81ea\u52a8\u79fb\u52a8\u901f\u5ea6",tooltip:"0\u8868\u793a\u4e0d\u81ea\u52a8\u79fb\u52a8\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u8be5\u503c\uff0c\u5219\u4f1a\u5ffd\u7565\u81ea\u52a8\u8f6e\u64ad\u3001\u968f\u673a\u9ad8\u4eae\u5c5e\u6027"})],t.prototype,"moveSpeed",void 0),__decorate([l({type:cc.Prefab,displayName:"\u5355\u4e2a\u5e7f\u544a\u9884\u5236\u4f53"})],t.prototype,"adItemPrefab",void 0),t=__decorate([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../scripts/gamecore/deer/DeerSDK":"DeerSDK","../../../scripts/gamecore/deer/DeerSDKEventNames":"DeerSDKEventNames","../../../scripts/gamecore/xiaoyaoji/XYJAPI":"XYJAPI","../base/IconAdBase":"IconAdBase"}],RecommendAdsPanelMain:[function(e,t,n){"use strict";cc._RF.push(t,"06b11QVaC1OSrL27BuCqAut","RecommendAdsPanelMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./RecommendAdListMain"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.recommendAdList=null,t.locationFlg="",t}return __extends(t,e),t.prototype.onLoad=function(){this.recommendAdList.locationFlg=this.locationFlg},t.prototype.start=function(){},__decorate([r({type:o.default,displayName:"\u5e7f\u544a\u5217\u8868"})],t.prototype,"recommendAdList",void 0),__decorate([r({type:String,displayName:"\u4f4d\u7f6e\u6807\u8bc6"})],t.prototype,"locationFlg",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./RecommendAdListMain":"RecommendAdListMain"}],ResManager1:[function(e,t,n){"use strict";cc._RF.push(t,"64422i24S1K/pbi8umo1PAg","ResManager1"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.array_panel=[],t.bg_array_audio=[],t.cube_array_audio=[],t.prfabs_array=[],t._load_count=0,t._total_count=0,t.loadFinsh=!1,t.loadProgressBar=null,t.tempCount=0,t.onLoad=function(){n.instance=this,this.loadProgressBar.progress=0,this.loadProgressBar.node.active=!0},t.setText=function(e){this.text="<b>"+e+"</b>"},t}var n;return __extends(t,e),n=t,t.instance=null,t=n=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],ResManager:[function(e,t,n){"use strict";cc._RF.push(t,"e3cc5LhZVZLxIlXa2sl4tdK","ResManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/GameValues"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){this.dataLen=0,this.mapLen=0,this.data=new Object,this.dataAry=new Array,this.otherAry=new Array,this.readyData=new Array}return e.prototype.show=function(e,t,n){this.complete=t,this.caller=n,this.loadConfig(e)},e.prototype.loadConfig=function(e){var t=this;cc.loader.loadRes(e,function(e,n){try{t.dataAry=n.json.resources,t.mapAry=n.json.map,t.otherAry=n.json.res,t.dataLen=t.dataAry.length,t.mapLen=t.mapAry.length,t.loaderFile(0)}catch(e){}})},e.prototype.loaderFile=function(e){var t=this;switch(e){case 0:var n=this.dataAry[0];this.getSkeleton(n,function(o){t.data[n]=o,t.dataAry.shift(),t.dataAry.length>0?t.loaderFile(e):t.effectComplete()});break;case 1:n=this.mapAry[0];this.getLoadRes(n,function(o){t.data[n]=o,t.mapAry.shift(),t.mapAry.length>0?t.loaderFile(e):t.loadComplete()});break;case 2:n=this.otherAry[0];this.getLoadRes(n,function(o){t.data[n]=o,t.otherAry.shift(),t.otherAry.length>0&&t.loaderFile(e)});break;case 3:var o=this.readyData[0];1==o.type?this.getSkeleton(o.url,function(e){t.data[o.url]=e,t.readyData.shift(),t.readyData.length>0?t.loaderFile(3):t.readyBack()}):2==o.type&&this.getLoadRes(o.url,function(e){t.data[o.url]=e,t.readyData.shift(),t.readyData.length>0?t.loaderFile(3):t.readyBack()})}},e.prototype.effectComplete=function(){this.loaderFile(1)},e.prototype.loadComplete=function(){this.complete&&this.complete.apply(this.caller),this.loaderFile(2)},e.prototype.getLoadRes=function(e,t){if(void 0!==e){var n=e+"?vesion="+o.default.gameVersion;cc.loader.load({url:n,type:"png"},function(e,n){e?cc.error(e):t(n)})}},e.prototype.getServerImage=function(e,t){var n=this,o=this.data[e];o&&void 0!==o&&""!=o&&null!=o?t(o):this.getLoadRes(e,function(o){n.data[e]=o,t(o)})},e.prototype.getConfig=function(e,t){var n=this,o=this.data[e];o&&void 0!==o&&""!=o&&null!=o?t(o):this.getSkeleton(e,function(o){n.data[e]=o,t(o)})},e.prototype.getSkeleton=function(e,t){var n=[e+".png?vesion="+o.default.gameVersion,e+".atlas?vesion="+o.default.gameVersion,e+".json?vesion="+o.default.gameVersion];null!=n[0].match(/^https?:\/\//i)?cc.loader.load(n,function(n,a){if(n)for(var i=0;i<n.length;i++)cc.log("Error url ["+n[i]+"]: "+a.getError(n[i]));else{var r=new sp.SkeletonData,s=e.split("/");r.textureNames=[s[s.length-1]+".png"],r.textures=[a.getContent(e+".png?vesion="+o.default.gameVersion)],r.atlasText=a.getContent(e+".atlas?vesion="+o.default.gameVersion),r.skeletonJson=a.getContent(e+".json?vesion="+o.default.gameVersion),t(r)}}):cc.loader.loadRes(e,sp.SkeletonData,function(e,n){e?cc.error(e.message||e):t(n)})},e.prototype.readyRes=function(e,t){this.readyData=e,this.readyBack=t,this.loaderFile(3)},e.prototype.getAtlas=function(e,t){var n=this,o=this.data[e];o&&void 0!==o&&""!=o&&null!=o?t(o):cc.loader.loadRes(e,cc.SpriteAtlas,function(o,a){o?cc.error(o):(n.data[e]=a,t(a))})},e.prototype.getRes=function(e,t){var n=this,o=this.data[e];o&&void 0!==o&&""!=o&&null!=o?t(o):cc.loader.loadRes(e,cc.SpriteFrame,function(o,a){o?cc.error(o):(n.data[e]=a,t(a))})},e=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../base/GameValues":"GameValues"}],RoleController:[function(e,t,n){"use strict";cc._RF.push(t,"05ddfD3+m9GAb8wsmroPIQw","RoleController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftFootBody=null,t.rightFootBody=null,t.leftFootBody2=null,t.rightFootBody2=null,t.roleBody=null,t.isRoadDead=!1,t.isHit=!1,t.hitJointRgBody=null,t.hitDir=null,t.hitPoint=null,t.trigger=null,t.isTrigger=!1,t.triggerType=1,t.grendaBoomNodeName="",t}return __extends(t,e),t.prototype.start=function(){},t.prototype.hitEffct=function(){this.leftFootBody.gravityScale=1,this.rightFootBody.gravityScale=1,this.leftFootBody2.gravityScale=1,this.rightFootBody2.gravityScale=1,this.hitJointRgBody.applyLinearImpulse(this.hitDir.mul(6e3),this.hitPoint,!0),this.runTrigger()},t.prototype.tntEffct=function(){this.leftFootBody.gravityScale=1,this.rightFootBody.gravityScale=1,this.leftFootBody2.gravityScale=1,this.rightFootBody2.gravityScale=1,this.hitJointRgBody.applyLinearImpulse(this.hitDir.mul(6e3),this.hitPoint,!0)},t.prototype.runTrigger=function(){this.trigger&&!this.isTrigger&&(this.isTrigger=!0,this.scheduleOnce(function(){this.trigger.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,this.trigger.getComponent(cc.PhysicsCircleCollider).tag=o.default.Tag.tagCircle,this.trigger.getComponent(cc.PhysicsCircleCollider).apply()},0))},__decorate([r(cc.RigidBody)],t.prototype,"leftFootBody",void 0),__decorate([r(cc.RigidBody)],t.prototype,"rightFootBody",void 0),__decorate([r(cc.RigidBody)],t.prototype,"leftFootBody2",void 0),__decorate([r(cc.RigidBody)],t.prototype,"rightFootBody2",void 0),__decorate([r(cc.RigidBody)],t.prototype,"roleBody",void 0),__decorate([r(Boolean)],t.prototype,"isRoadDead",void 0),__decorate([r(cc.Node)],t.prototype,"trigger",void 0),__decorate([r(Number)],t.prototype,"triggerType",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"./Common":"Common"}],RoleJointController:[function(e,t,n){"use strict";cc._RF.push(t,"c6982scuhFF/qzqcCrtfvC/","RoleJointController"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("./PrfabsManager"),r=e("../../module/data/StageDataMgr"),s=e("./GameConfig"),c=e("./RoleController"),l=e("./CubeBox"),d=e("./GrenadeController"),u=e("./TNTBox"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBlood=!1,t.blood=null,t.tntTrigger=!1,t.playBloodEffct=function(e,t){if(!this.isBlood){this.isBlood=!0;var n=t.signAngle(cc.v2(1,0));n=cc.misc.radiansToDegrees(n),this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem();var o=this.node.parent.convertToNodeSpaceAR(e);this.blood.position=o,this.blood.rotation=n,this.node.parent.addChild(this.blood,1e3)}},t}return __extends(t,e),t.prototype.start=function(){},t.prototype.onBeginContact=function(e,t,n){var r=this;if(0!=n.enabled){var s=e.getWorldManifold().points;if(n.tag==o.default.Tag.tagBullet)e.disabled=!0,t.node.parent.getComponent(c.default).isHit||(a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0))),t.name.indexOf("hand")<0&&s[0]&&this.playBloodEffct(s[0],n.node.getComponent(cc.RigidBody).linearVelocity),t.node.parent.getComponent(c.default).isHit=!0,t.node.parent.getComponent(c.default).hitJointRgBody=t.node.getComponent(cc.RigidBody),t.node.parent.getComponent(c.default).hitDir=n.node.getComponent(cc.RigidBody).linearVelocity.normalize(),t.node.parent.getComponent(c.default).hitPoint=e.getWorldManifold().points[0],s[0]&&t.node.parent.getComponent(c.default).hitEffct();else if(n.tag==o.default.Tag.tagCubeBox)n.node.getComponent(l.default).isCollider||t.node.parent.getComponent(c.default).isHit||(n.node.getComponent(l.default).isCollider=!0,t.node.parent.getComponent(c.default).isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0)),s[0]&&this.playBloodEffct(s[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagCircle)t.node.parent.getComponent(c.default).isHit||(t.node.parent.getComponent(c.default).isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0)),this.playBloodEffct(s[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagMoveBox)n.node.getComponent(l.default).isCollider||(n.node.getComponent(l.default).isCollider=!0,a.default.instance.playSound("scream"),this.scheduleOnce(function(){r.node&&(r.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0)),n.node.getComponent(cc.RigidBody).linearDamping=1)},.5),this.playBloodEffct(s[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagPlat)t.node.parent.getComponent(c.default).isRoadDead&&!t.node.parent.getComponent(c.default).isHit&&(t.node.parent.getComponent(c.default).isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0)),this.playBloodEffct(s[0],n.node.getComponent(cc.RigidBody).linearVelocity));else if(n.tag==o.default.Tag.tagTNT){if((f=t.node.parent.getComponent(c.default)).isHit||(f.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0))),!this.tntTrigger){this.tntTrigger=!0;var h=n.node.parent.convertToWorldSpaceAR(n.node.position),p=f.roleBody.node.parent.convertToWorldSpaceAR(f.roleBody.node.position).sub(h).normalize();n.node.getComponent(u.default).isLink?f.roleBody.applyLinearImpulse(cc.v2(0,1e4),f.roleBody.getWorldCenter(),!0):f.roleBody.applyLinearImpulse(p.mul(6e3),f.roleBody.getWorldCenter(),!0)}this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3))}else if(n.tag==o.default.Tag.tagGrenade&&n.node.parent.getComponent(d.default).isBoom){var f;if((f=t.node.parent.getComponent(c.default)).isHit||(f.isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0))),-1==f.grendaBoomNodeName.indexOf(n.node.parent.name)){f.grendaBoomNodeName+=n.node.parent.name+",",h=n.node.parent.convertToWorldSpaceAR(n.node.position),p=f.roleBody.node.parent.convertToWorldSpaceAR(f.roleBody.node.position).sub(h).normalize();var g=f.grendaBoomNodeName.split(",").length;2==g?f.roleBody.applyLinearImpulse(p.mul(5e4),f.roleBody.getWorldCenter(),!0):f.roleBody.applyLinearImpulse(p.mul(5e4*g),f.roleBody.getWorldCenter(),!0)}this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3))}else n.tag==o.default.Tag.tagDeath&&t.tag==o.default.Tag.tagBodyJoint?(t.node.parent.getComponent(c.default).isHit||(t.node.parent.getComponent(c.default).isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0))),this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3))):n.tag==o.default.Tag.tagMoveCube&&(t.node.parent.getComponent(c.default).isHit||n.node.getComponent(cc.RigidBody).linearVelocity.mag()>1e3&&(t.node.parent.getComponent(c.default).isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0)),this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.position,this.node.parent.addChild(this.blood,1e3))))}},t.prototype.update=function(e){this.blood&&(this.blood.position=this.node.position),80==r.default.CUR_LEVEL&&r.default.CUR_MODE==s.MODE_TYPE_STRUCT.MODE3&&this.node.parent.getChildByName("role_head").getComponent(cc.RigidBody).linearVelocity.mag()>150&&(this.node.parent.getComponent(c.default).isHit||(this.node.parent.getComponent(c.default).isHit=!0,this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0)))),128==r.default.CUR_LEVEL&&r.default.CUR_MODE==s.MODE_TYPE_STRUCT.MODE1&&this.node.parent.getChildByName("role_left_foot_bottom").getComponent(cc.RigidBody).linearVelocity.mag()>300&&(this.node.parent.getComponent(c.default).isHit||(this.node.parent.getComponent(c.default).isHit=!0,a.default.instance.playSound("scream"),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.enemyDie,!0)),this.isBlood||(this.isBlood=!0,this.blood=cc.instantiate(i.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem(),this.blood.position=this.node.parent.getChildByName("role_head").position,this.node.parent.getChildByName("role_head").addChild(this.blood,1e3))))},t=__decorate([p],t)}(cc.Component));n.RoleJointController=f,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./Common":"Common","./CubeBox":"CubeBox","./GameConfig":"GameConfig","./GrenadeController":"GrenadeController","./PrfabsManager":"PrfabsManager","./RoleController":"RoleController","./TNTBox":"TNTBox"}],RoleMgr:[function(e,t,n){"use strict";cc._RF.push(t,"afdddxhY/pJ4bG712Wjfc1A","RoleMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../module/data/MainDataMgr"),a=e("../../module/data/StageDataMgr"),i=e("../stageMode/GameConfig"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function e(){}var t;return t=e,e.calcuRoleData=function(){var e=a.default.instance.getAllModeStars(),n=o.default.instance.getData(o.default.KEY_ROLE_SKIN_ARR);if(e==t.bestStageNum)return n;t.bestStageNum=e;for(var r=i.default.instance.gameMeta.imageUpgradeMeta,s=1;s<r.length&&e>=r[s].starsNum;s++)n[s]||(n[s]={id:s,state:0,equip:!1});return o.default.instance.setData(o.default.KEY_ROLE_SKIN_ARR,n),n},e.bestStageNum=null,e=t=__decorate([s],e)}());n.default=c,cc._RF.pop()},{"../../module/data/MainDataMgr":"MainDataMgr","../../module/data/StageDataMgr":"StageDataMgr","../stageMode/GameConfig":"GameConfig"}],RoleSelectItem:[function(e,t,n){"use strict";cc._RF.push(t,"07541PwyCxDY5emvgu/6jkO","RoleSelectItem"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../module/data/MainDataMgr"),a=e("./RoleSelect"),i=e("../../GameUtils"),r=e("../../gamecore/wechat/WXUtils"),s=e("../../SoundMgr"),c=e("./Role"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtName=null,t.btn=null,t.head=null,t.roleSkinInfo=null,t.finalStage=null,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.updateInfo=function(e,t){this.updateBtnState(e,t)},t.prototype.updateBtnState=function(e,t){var n=this;this.roleSkinInfo=e,e?(i.default.loadRes("textures/heroHead/"+t.imageId,cc.SpriteFrame,!0,function(e){try{n.head.node.scale=1,n.head.spriteFrame=e}catch(e){}}),this.btn.getComponent(cc.Sprite).spriteFrame=a.default.btnSpfmArr[e.state],0==this.roleSkinInfo.state?this.btn.getChildByName("txt").getComponent(cc.Label).string="\u53ef\u89e3\u9501":this.btn.getChildByName("txt").getComponent(cc.Label).string="\u5df2\u62e5\u6709",this.txtName.string=t.name):(i.default.loadRes("textures/heroHead/role_xxx",cc.SpriteFrame,!0,function(e){try{n.head.node.scale=379/93,n.head.spriteFrame=e}catch(e){}}),this.btn.getComponent(cc.Sprite).spriteFrame=a.default.btnSpfmArr[2],this.btn.getChildByName("txt").getComponent(cc.Label).string="\u83b7\u5f97"+t.starsNum+"\u661f",this.txtName.string="???",this.finalStage=t.starsNum)},t.prototype.onClickEvent=function(){if(s.default.instance.playTapSound(),null!=this.roleSkinInfo){if(0==this.roleSkinInfo.state){this.roleSkinInfo.state=1;for(var e=o.default.instance.getData(o.default.KEY_ROLE_SKIN_ARR),t=0;t<e.length;t++)if(e[t].state=1,1==e[t].equip)e[t].equip=!1;else if(e[t].id==this.roleSkinInfo.id){e[t].equip=!0;break}o.default.instance.setData(o.default.KEY_ROLE_SKIN_ARR,e),r.default.showToast("\u606d\u559c\u89e3\u9501\u65b0\u5f62\u8c61\uff0c\u5df2\u4e3a\u60a8\u81ea\u52a8\u66ff\u6362\u8be5\u5f62\u8c61");var n=new cc.Event.EventCustom(c.default.UPDATE_ROLE_SKIN_EVENT,!0);this.node.dispatchEvent(n);var i=new cc.Event.EventCustom(a.default.STATE_CHANGE_EVENT,!0);this.node.dispatchEvent(i)}}else r.default.showToast("\u7d2f\u8ba1\u83b7\u5f97"+this.finalStage+"\u661f\u89e3\u9501")},__decorate([u(cc.Label)],t.prototype,"txtName",void 0),__decorate([u(cc.Node)],t.prototype,"btn",void 0),__decorate([u(cc.Sprite)],t.prototype,"head",void 0),t=__decorate([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../gamecore/wechat/WXUtils":"WXUtils","../../module/data/MainDataMgr":"MainDataMgr","./Role":"Role","./RoleSelect":"RoleSelect"}],RoleSelect:[function(e,t,n){"use strict";cc._RF.push(t,"d1ca2unER5ICqVSaIcZQHyB","RoleSelect"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/BasePanelComp"),a=e("./RoleSelectItem"),i=e("../stageMode/GameConfig"),r=e("./RoleMgr"),s=e("../../GameUtils"),c=e("../../module/data/StageDataMgr"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnSpfmArr=[],t.item=null,t.content=null,t.txtTotalStars=null,t}var n;return __extends(t,e),n=t,t.prototype.onLoad=function(){n.btnSpfmArr=this.btnSpfmArr,this.updateInfo(),this.node.on(n.STATE_CHANGE_EVENT,this.onStateChangedEvent,this)},t.prototype.start=function(){this.init(),s.default.buriedPoint(12),this.txtTotalStars.string=c.default.instance.getAllModeStars()+""},t.prototype.updateInfo=function(){var e=this,t=r.default.calcuRoleData();this.item.getComponent(a.default).updateInfo(t[0],i.default.instance.gameMeta.imageUpgradeMeta[0]);var n=1;this.schedule(function(){if(e.content){var o=cc.instantiate(e.item);e.content.addChild(o),o.getComponent(a.default).updateInfo(t[n]?t[n]:null,i.default.instance.gameMeta.imageUpgradeMeta[n]),n++}},.1,i.default.instance.gameMeta.imageUpgradeMeta.length-2)},t.prototype.onStateChangedEvent=function(){for(var e=r.default.calcuRoleData(),t=1;t<this.content.childrenCount;t++)this.content.children[t].getComponent(a.default).updateBtnState(e[t],i.default.instance.gameMeta.imageUpgradeMeta[t])},t.prototype.onCloseClickEvent=function(e){this.close()},t.STATE_CHANGE_EVENT="stateChangeEvent",t.btnSpfmArr=[],__decorate([u(cc.SpriteFrame)],t.prototype,"btnSpfmArr",void 0),__decorate([u(cc.Node)],t.prototype,"item",void 0),__decorate([u(cc.Node)],t.prototype,"content",void 0),__decorate([u(cc.Label)],t.prototype,"txtTotalStars",void 0),t=n=__decorate([d],t)}(o.default);n.default=h,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../module/data/StageDataMgr":"StageDataMgr","../base/BasePanelComp":"BasePanelComp","../stageMode/GameConfig":"GameConfig","./RoleMgr":"RoleMgr","./RoleSelectItem":"RoleSelectItem"}],Role:[function(e,t,n){"use strict";cc._RF.push(t,"22246QIbu1IQoG+w2+j4n4d","Role"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../module/data/StageDataMgr"),a=e("../stageMode/GameConfig"),i=e("../../module/data/MainDataMgr"),r=e("../../gamecore/wechat/WXUtils"),s=e("../../gamecore/managers/GameManager"),c=e("../../GameUtils"),l=e("./RoleMgr"),d=e("./Player"),u=e("../stageMode/PrfabsManager"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtUnlockLevel=null,t.startGameBtn=null,t.spfmArr=[],t.roleTitle=null,t.bg=null,t.bottomBg=null,t.playerComp=null,t.redPot=null,t.lockNode=null,t.needRoleUpdate=!1,t.locked=!1,t}var n;return __extends(t,e),n=t,t.prototype.onLoad=function(){var e=this;this.node.on(n.UPDATE_ROLE_SKIN_EVENT,this.updateRoleSkinInfo,this),this.startGameBtn.on(cc.Node.EventType.TOUCH_END,function(t){if(1==e.needRoleUpdate){for(var o=i.default.instance.getData(i.default.KEY_ROLE_SKIN_ARR),a=-1,s=0;s<o.length;s++)1!=o[s].state&&-1==a&&(a=s,o[s].state=1),1==o[s].equip&&(o[s].equip=!1);if(-1!=a){o[a].equip=!0,i.default.instance.setData(i.default.KEY_ROLE_SKIN_ARR,o),r.default.showToast("\u606d\u559c\u89e3\u9501\u65b0\u5f62\u8c61\uff0c\u5df2\u4e3a\u60a8\u81ea\u52a8\u66ff\u6362\u8be5\u5f62\u8c61"),c.default.buriedPoint(16);var d=new cc.Event.EventCustom(n.UPDATE_ROLE_SKIN_EVENT,!0);e.node.dispatchEvent(d),e.checkNeedUpdate(l.default.calcuRoleData())}else e.onStartGameClickEvent(t)}else e.onStartGameClickEvent(t)},this)},t.prototype.onStartGameClickEvent=function(e){s.default.soundsManager.playTapSound(),this.onStartGame()},t.prototype.onStartGame=function(){if(c.default.buriedPoint(15),1==i.default.instance.newPlayer){if(o.default.CUR_MODE=a.MODE_TYPE_STRUCT.MODE1,o.default.CUR_LEVEL=1,this.locked?c.default.showToast("\u5173\u5361\u6b63\u5728\u52a0\u8f7d\u4e2d"):(this.locked=!0,o.default.NEED_SUB_HP=!0),!u.default.instance.allResLoaded)return void c.default.showToast("\u8d44\u6e90\u6b63\u5728\u52a0\u8f7d\u4e2d");c.default.instance.loadSceneWithOperate("map"),i.default.instance.setData(i.default.KEY_NEW_PLAYER,!1)}else c.default.instance.loadSceneWithOperate("modeSelectScene"),i.default.instance.setData(i.default.KEY_NEW_PLAYER,!1)},t.prototype.start=function(){for(var e=o.default.instance.getAllModeStars(),t=0,n=0;n<a.default.instance.gameMeta.imageUpgradeMeta.length;n++)if(e<a.default.instance.gameMeta.imageUpgradeMeta[n].starsNum){t=a.default.instance.gameMeta.imageUpgradeMeta[n].starsNum;break}0==t?this.txtUnlockLevel.node.parent.active=!1:this.txtUnlockLevel.string=t-e+"",this.updateRoleSkinInfo()},t.prototype.checkNeedUpdate=function(e){for(var t=1;t<e.length;t++)if(0==e[t].state)return this.needRoleUpdate=!0,this.startGameBtn.getComponent(cc.Sprite).spriteFrame=this.spfmArr[1],this.redPot.active=!0,this.lockNode.active=!1,void this.startGameBtn.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1))));this.needRoleUpdate=!1,this.lockNode.active=!0,this.startGameBtn.stopAllActions(),this.startGameBtn.scale=1,this.startGameBtn.getComponent(cc.Sprite).spriteFrame=this.spfmArr[0],this.redPot.active=!1},t.prototype.updateRoleSkinInfo=function(){var e=this,t=l.default.calcuRoleData();this.checkNeedUpdate(t);var n=a.default.instance.getCurRoleSKinInfo();this.roleTitle.string=n.name;var o=Number(n.backgroundId.slice(n.backgroundId.indexOf("_")+1));o>1010&&(o=1010),c.default.loadRes("textures/background/bg_"+o,cc.SpriteFrame,!1,function(t){try{e.bg.spriteFrame=t}catch(e){t=null}}),c.default.loadRes("textures/background/bg_"+o+"_bottom",cc.SpriteFrame,!1,function(t){try{e.bottomBg.spriteFrame=t}catch(e){t=null}}),this.playerComp.updateSkin(n.imageId)},t.UPDATE_ROLE_SKIN_EVENT="updateRoleSkinEvent",__decorate([f(cc.Label)],t.prototype,"txtUnlockLevel",void 0),__decorate([f(cc.Node)],t.prototype,"startGameBtn",void 0),__decorate([f(cc.SpriteFrame)],t.prototype,"spfmArr",void 0),__decorate([f(cc.Label)],t.prototype,"roleTitle",void 0),__decorate([f(cc.Sprite)],t.prototype,"bg",void 0),__decorate([f(cc.Sprite)],t.prototype,"bottomBg",void 0),__decorate([f(d.default)],t.prototype,"playerComp",void 0),__decorate([f(cc.Node)],t.prototype,"redPot",void 0),__decorate([f(cc.Node)],t.prototype,"lockNode",void 0),t=n=__decorate([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../gamecore/managers/GameManager":"GameManager","../../gamecore/wechat/WXUtils":"WXUtils","../../module/data/MainDataMgr":"MainDataMgr","../../module/data/StageDataMgr":"StageDataMgr","../stageMode/GameConfig":"GameConfig","../stageMode/PrfabsManager":"PrfabsManager","./Player":"Player","./RoleMgr":"RoleMgr"}],RopeCollider:[function(e,t,n){"use strict";cc._RF.push(t,"dfeffxxy4VJVoOZaDjkYwRp","RopeCollider"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.jointBody=null,t.isDestroy=!1,t}return __extends(t,e),t.prototype.update=function(e){this.jointBody&&this.jointBody.getComponent(cc.PhysicsCollider).sensor&&!this.isDestroy&&(this.isDestroy=!0,this.node.runAction(cc.sequence(cc.fadeOut(.3),cc.removeSelf())))},__decorate([i(cc.RigidBody)],t.prototype,"jointBody",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],RotateBox:[function(e,t,n){"use strict";cc._RF.push(t,"0558bKRItdNwqkjly6dTrIo","RotateBox"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameConfig"),a=e("../../module/data/StageDataMgr"),i=cc._decorator,r=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dir=1,t}return __extends(t,e),t.prototype.start=function(){73==a.default.CUR_LEVEL&&a.default.CUR_MODE==o.MODE_TYPE_STRUCT.MODE2?this.node.runAction(cc.rotateBy(3,360*this.dir).repeatForever()):117==a.default.CUR_LEVEL&&a.default.CUR_MODE==o.MODE_TYPE_STRUCT.MODE2?this.node.runAction(cc.rotateBy(4,360*this.dir).repeatForever()):195==a.default.CUR_LEVEL&&a.default.CUR_MODE==o.MODE_TYPE_STRUCT.MODE2?this.node.runAction(cc.sequence(cc.rotateTo(1,-41),cc.rotateTo(1,56)).repeatForever()):96==a.default.CUR_LEVEL&&a.default.CUR_MODE==o.MODE_TYPE_STRUCT.MODE2?this.node.runAction(cc.sequence(cc.rotateTo(.6,120),cc.rotateTo(.6,32)).repeatForever()):68==a.default.CUR_LEVEL&&a.default.CUR_MODE==o.MODE_TYPE_STRUCT.MODE4?this.node.runAction(cc.rotateBy(3,360).repeatForever()):89==a.default.CUR_LEVEL&&a.default.CUR_MODE==o.MODE_TYPE_STRUCT.MODE4?this.node.runAction(cc.rotateBy(2,360).repeatForever()):this.node.runAction(cc.rotateBy(2,360*this.dir).repeatForever())},t=__decorate([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./GameConfig":"GameConfig"}],SceneManager:[function(e,t,n){"use strict";cc._RF.push(t,"ddac7RZgRZNE4KZKupiSmvK","SceneManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),a=e("../components/Comp_LoadingSceneMain"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){this._sceneStack=[],this._startLoadingTime=0}var t;return t=e,Object.defineProperty(e.prototype,"currentSceneName",{get:function(){return this._currentSceneName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentScene",{set:function(e){this._sceneStack=[e],this._currentSceneName=e,this.loadScene(e)},enumerable:!0,configurable:!0}),e.prototype.pushScene=function(e){this._sceneStack.push(e),this.loadScene(e)},e.prototype.preloadScene=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),cc.director.preloadScene(e,function(e,t,n){},function(a){console.log("\u9884\u52a0\u8f7d\u573a\u666f\u5b8c\u6210",e,a),a?(console.log("\u573a\u666f"+o.default.sceneManager.currentSceneName+"\u52a0\u8f7d\u5931\u8d25"),null!=n&&n()):null!=t&&t()})},e.prototype.popScene=function(){if(this._sceneStack.length>1){var e=this._sceneStack.pop(),t=this._sceneStack[this._sceneStack.length-1];return this.loadScene(t),e}return null},e.prototype.dropScene=function(e){var t=this._sceneStack.indexOf(e);t>-1&&(t==this._sceneStack.length-1?this.popScene():this._sceneStack.splice(t,1))},e.prototype.reset=function(){this._sceneStack=[],this._currentSceneName=null},e.prototype.loadScene=function(e){if(this.loadingSceneName){if(this._isLoading)return;this._currentSceneName=e,this.showLoadingScene(),cc.director.preloadScene(e,function(t){console.log("err",t),t?(console.log("\u573a\u666f"+o.default.sceneManager.currentSceneName+"\u52a0\u8f7d\u5931\u8d25"),o.default.sceneManager._isLoading=!1,o.default.sceneManager.popScene()):o.default.sceneManager.sceneLoadedCallback(e)})}else this._currentSceneName=e,cc.director.loadScene(e)},e.prototype.sceneLoadedCallback=function(e){if(this._currentSceneName==e){var n=(new Date).getTime();if(console.log("\u3010SceneManager\u3011sceneLoadedCallback",n-this._startLoadingTime),this.loadingSceneName&&n-this._startLoadingTime<t.MIN_LOADING_TIME)setTimeout(function(){o.default.sceneManager.sceneLoadedCallback(e)},1e3);else{var i=cc.find("Canvas");if(i){var r=i.getComponent(a.default);if(r)return console.log("\u3010sceneLoadedCallback\u3011\u91ca\u653e\u52a0\u8f7d\u573a\u666f"),r.doPreDestory(.3),void setTimeout(function(){o.default.sceneManager.showCurrentScene()},400)}this.showCurrentScene()}}},e.prototype.showCurrentScene=function(){this._isLoading=!1,cc.director.loadScene(this._currentSceneName)},Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!0,configurable:!0}),e.prototype.showLoadingScene=function(){this._startLoadingTime=(new Date).getTime(),this._isLoading||(this._isLoading=!0,cc.director.loadScene(this.loadingSceneName))},e.prototype.lockSence=function(){o.default.lockScene()},e.prototype.unlockSence=function(e){o.default.unlockScene()},e.MIN_LOADING_TIME=2e3,e=t=__decorate([r],e)}());n.default=s,cc._RF.pop()},{"../components/Comp_LoadingSceneMain":"Comp_LoadingSceneMain","./GameManager":"GameManager"}],SelfFrame:[function(e,t,n){"use strict";cc._RF.push(t,"e02c0Xc1DNFWKxio3RvkUaq","SelfFrame"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.interval=.2,t.loop=!1,t.playTimes=1,t.frames=[],t.curTime=0,t.curIdx=0,t.isPlay=!1,t}return __extends(t,e),t.prototype.start=function(){this.curTime=0,this.curIdx=0,this.play()},t.prototype.update=function(e){if(this.isPlay&&(this.curTime+=e,this.curTime>=this.interval)){if(this.hideAll(),this.curTime=0,this.curIdx++,this.curIdx>=this.frames.length){if(-1!=this.playTimes)return void this.stop();this.curIdx=0}this.frames[this.curIdx].node.active=!0}},t.prototype.play=function(){this.isPlay=!0},t.prototype.stop=function(){this.isPlay=!1},t.prototype.hideAll=function(){for(var e=0;e<this.frames.length;e++)this.frames[e].node.active=!1},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],ShareDataTypes:[function(e,t,n){"use strict";cc._RF.push(t,"d917evRiQxEcITnhnxsSiEK","ShareDataTypes"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.DATA_TYPE_RELAY=1,e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],ShareTypes:[function(e,t,n){"use strict";cc._RF.push(t,"67c0a0IyOlGaY36qJgTparY","ShareTypes"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.NORMAL="normal",e.LIFE_CARD="lifeCard",e.GAME_OVER="gameOver",e.SHARE_APP="shareApp",e.RELAY="relay",e.PK="pk",e.SEND_ITEM="sendItem",e.HONG_BAO="hongBao",e.ADD_BASE_SCORE="addBaseScore",e.ADD_SCORE="addScore",e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],SimulationNode:[function(e,t,n){"use strict";cc._RF.push(t,"e2e4ailPi1FYa5B8TVdIW5J","SimulationNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../module/data/StageDataMgr"),a=e("./GameConfig"),i=e("./Common"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rigidBody=null,t.onBeginContact=function(e,t,n){if(n.tag==i.default.Tag.tagBullet){var r=5e5,s=e.getWorldManifold().points[0],c=n.getComponent(cc.RigidBody).linearVelocity.normalize(),l=this;83==o.default.CUR_LEVEL&&o.default.CUR_MODE==a.MODE_TYPE_STRUCT.MODE1?(r=2e6,this.scheduleOnce(function(){l.rigidBody.applyForce(c.mul(r),l.rigidBody.getWorldCenter(),!0)},0)):121==o.default.CUR_LEVEL&&o.default.CUR_MODE==a.MODE_TYPE_STRUCT.MODE3?this.scheduleOnce(function(){l.rigidBody.applyForce(c.mul(r),l.rigidBody.getWorldCenter(),!0)},0):this.scheduleOnce(function(){s&&l.rigidBody.applyForce(c.mul(r),s,!0)},0)}else if(n.tag==i.default.Tag.tagGrenade&&n.node.parent.getComponent("GrenadeController").isBoom){var d=t.node.parent.convertToWorldSpaceAR(t.node.position),u=n.node.parent.convertToWorldSpaceAR(n.node.position),h=d.sub(u).normalize(),p=this;this.scheduleOnce(function(){p.rigidBody.applyForce(h.mul(5e5),t.getComponent(cc.RigidBody).getWorldCenter(),!0)},0)}},t}return __extends(t,e),t.prototype.start=function(){this.rigidBody=this.node.getComponent(cc.RigidBody)},t=__decorate([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./Common":"Common","./GameConfig":"GameConfig"}],SkipPanelComp:[function(e,t,n){"use strict";cc._RF.push(t,"55566gpUt9B8b3aWy9kCoVE","SkipPanelComp"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/BasePanelComp"),a=e("../../module/data/StageDataMgr"),i=e("../../SoundMgr"),r=e("./GameMainMgr"),s=e("../../GameUtils"),c=e("./GameConfig"),l=e("./PrfabsManager"),d=cc._decorator,u=d.ccclass,h=d.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtInfo=null,t.btnSpfmArr=[],t.skipBtnSprite=null,t.nowKeyNum=0,t.needKeyNum=1,t}return __extends(t,e),t.prototype.start=function(){a.default.CUR_MODE==c.MODE_TYPE_STRUCT.MODE1&&a.default.CUR_LEVEL<=32&&(this.node.setContentSize(new cc.Size(750,1334)),this.node.scale=1,this.node.getComponent(cc.Widget).right=0,this.node.getComponent(cc.Widget).left=0,this.node.getComponent(cc.Widget).top=0,this.node.getComponent(cc.Widget).bottom=0),this.init(),this.updateInfo()},t.prototype.updateInfo=function(){this.txtInfo&&this.skipBtnSprite&&(this.nowKeyNum=a.default.instance.getData(a.default.KEY_USER_DIMOND_NUM),this.txtInfo.string=this.nowKeyNum+" / "+this.needKeyNum,this.nowKeyNum<this.needKeyNum?this.skipBtnSprite.spriteFrame=this.btnSpfmArr[1]:this.skipBtnSprite.spriteFrame=this.btnSpfmArr[0])},t.prototype.onSkipConfirmClickEvent=function(e){if(e&&i.default.instance.playTapSound(),this.nowKeyNum<this.needKeyNum)return s.default.showToast("\u94a5\u5319\u5e93\u5b58\u4e0d\u8db3\uff0c\u5df2\u4e3a\u60a8\u5f00\u542f\u8865\u7ed9"),void this.showVideo();if(r.default.curGameState!==r.default.gameState.LOST&&r.default.curGameState!==r.default.gameState.WIN){r.default.curGameState=r.default.gameState.WIN,a.default.instance.savePassStage(a.default.CUR_LEVEL,c.STAGE_STATE_STRUCT.SKIP,0,a.default.CUR_MODE),a.default.instance.setData(a.default.KEY_USER_DIMOND_NUM,this.nowKeyNum-1);var t=cc.instantiate(l.default.instance.prfabsAry.gameWinPanel);r.default.curEarnStars=0,cc.find("Canvas").addChild(t),s.default.buriedPoint(22),this.close()}else s.default.showToast("\u5f53\u524d\u5173\u5361\u5df2\u7ed3\u675f")},t.prototype.onCloseClickEvent=function(e){e&&i.default.instance.playTapSound(),this.close()},t.prototype.showVideo=function(){var e=this;s.default.instance.showVideoAd(function(){a.default.instance.setData(a.default.KEY_USER_DIMOND_NUM,e.nowKeyNum+c.default.instance.gameMeta.keyRewardMeta[0].num),e.updateInfo(),s.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97\u4e07\u80fd\u94a5\u5319x"+c.default.instance.gameMeta.keyRewardMeta[0].num),e.onSkipConfirmClickEvent(null)},function(){s.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u83b7\u5f97\u4e07\u80fd\u94a5\u5319X"+c.default.instance.gameMeta.keyRewardMeta[0].num,function(){e.showVideo()},function(){})},function(){s.default.instance.playFailOnShare(function(t){switch(t){case 1:a.default.instance.setData(a.default.KEY_USER_DIMOND_NUM,e.nowKeyNum+c.default.instance.gameMeta.keyRewardMeta[0].num),e.updateInfo(),s.default.showToast("\u606d\u559c\u60a8\u83b7\u5f97\u4e07\u80fd\u94a5\u5319x"+c.default.instance.gameMeta.keyRewardMeta[0].num),e.onSkipConfirmClickEvent(null)}},"skipPanel")})},__decorate([h(cc.Label)],t.prototype,"txtInfo",void 0),__decorate([h(cc.SpriteFrame)],t.prototype,"btnSpfmArr",void 0),__decorate([h(cc.Sprite)],t.prototype,"skipBtnSprite",void 0),t=__decorate([u],t)}(o.default);n.default=p,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../module/data/StageDataMgr":"StageDataMgr","../base/BasePanelComp":"BasePanelComp","./GameConfig":"GameConfig","./GameMainMgr":"GameMainMgr","./PrfabsManager":"PrfabsManager"}],SoundMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2568dRtE0JGXo7/d1aVOKmO","SoundMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./gamecore/managers/GameManager"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){this.soundsArr={}}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||(t._instance=new t,cc.audioEngine.setMaxAudioInstance(4)),t._instance},enumerable:!0,configurable:!0}),e.prototype.playTapSound=function(){this.playSound("sounds/dianji")},e.prototype.playSound=function(e,t,n,a){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===a&&(a=NaN),o.default.soundsManager.soundMuted||(this.soundsArr[e]?t?this.soundsArr[e].audioID=cc.audioEngine.play(this.soundsArr[e].audio,t,1):cc.audioEngine.play(this.soundsArr[e].audio,t,1):this.loadSoundRes(e,t,a))},e.prototype.playMenuBg=function(){this.playSound("menu.MP3",!0)},e.prototype.playGameBg=function(){this.playSound("bigrock.mp3",!0)},e.prototype.playWinBg=function(){this.playSound("victory.MP3",!0)},e.prototype.playLoseBg=function(){this.playSound("sudden_defeat.MP3",!0)},e.prototype.stopSoundByName=function(e){this.soundsArr[e]&&this.soundsArr[e].audioID?(cc.audioEngine.stop(this.soundsArr[e].audioID),this.soundsArr[e].audioID=null):console.log("\u58f0\u97f3\u4e0d\u5b58\u5728")},e.prototype.playBgMusic=function(e){cc.loader.loadRes(e,cc.AudioClip,function(t,n){t?console.log("sourceURL error",e):cc.audioEngine.playMusic(n,!0)})},e.prototype.loadSoundRes=function(e,t,n){var o=this;void 0===n&&(n=NaN),cc.loader.loadRes(e,cc.AudioClip,function(a,i){a||(o.soundsArr[e]={audio:i,loop:t},o.playSound(e,t,n))})},e._instance=null,e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"./gamecore/managers/GameManager":"GameManager"}],SoundsManager:[function(e,t,n){"use strict";cc._RF.push(t,"154cevcE7hBhZdNbocxIlb0","SoundsManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),a=e("../base/GameValues"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){this.popUpSoundSource=null,this.tapSoundSource=null,this.sceneBgSounds=[],this.sceneBgSoundURLs=[],this._originalMusicMuted=!1,this._musicMuted=!1,this._soundMuted=!1,this._musicVolume=1,this._soundVolume=1,this._audioClipMap={},this._groupMap={},setTimeout(this.init.bind(this),500)}return e.prototype.init=function(){var e=o.default.dataManager.getData("__deer__soundMuted");!0===e&&this.muteSound(),!0===(e=o.default.dataManager.getData("__deer__musicMuted"))&&this.muteMusic(),setTimeout(this.initForWXModule.bind(this),2e3)},e.prototype.initForWXModule=function(){var e=this;"undefined"!=typeof wx?(wx.onHide(function(){e._originalMusicMuted=e._musicMuted,e.muteMusic()}),wx.onShow(function(){e._originalMusicMuted||e.unmuteMusic(),a.default.currentPlatform==a.PlatformName.QQCM&&e.musicContext.play()}),wx.onAudioInterruptionEnd(function(){cc.audioEngine.pauseMusic(),e._originalMusicMuted||e.unmuteMusic(),a.default.currentPlatform==a.PlatformName.QQCM&&e.musicContext.play()})):setTimeout(this.initForWXModule.bind(this),2e3)},e.prototype.pushSceneBgMusic=function(e){var t,n=this;if(this.sceneBgSoundURLs.length>0&&(t=this.sceneBgSoundURLs[this.sceneBgSoundURLs.length-1]),t!=e){if(this.sceneBgSoundURLs.length>0){var o=this.sceneBgSounds[this.sceneBgSounds.length-1];console.log("\u6682\u505c\u80cc\u666f\u97f3\u4e50",this.sceneBgSoundURLs[this.sceneBgSoundURLs.length-1]),o&&o.pause()}if(this.sceneBgSounds.push(null),this.sceneBgSoundURLs.push(e),null!=e.match(/^https?:\/\//i)){var i=e+".mp3?vesion="+a.default.gameVersion;cc.loader.load({url:i,type:"mp3"},function(t,o){n.sceneBgLoadedCallback(e,o)})}else{var r=e.replace(/^\/?resources\//,"");r=r.replace(/\.mp3$/,""),cc.loader.loadRes(r,function(t,o){n.sceneBgLoadedCallback(e,o)})}}},e.prototype.sceneBgLoadedCallback=function(e,t){if(t){var n=new cc.AudioSource;a.default.currentPlatform==a.PlatformName.QQCM&&"undefined"!=typeof BK?(this.musicContext||(this.musicContext=BK.createAudioContext()),null==e.match(/\.mp3$/i)&&(e+=".mp3"),this.musicContext.src="GameRes://"+cc.url.raw("resources/"+e),console.log("\u3010\u64ad\u653e\u97f3\u4e50\u3011GameRes://"+cc.url.raw("resources/"+e)),this.musicContext.loop=!0,this.musicContext.play()):(n.clip=t,n.loop=!0,this._musicMuted&&(n.volume=0),n.play());var o=this.sceneBgSoundURLs.indexOf(e);-1==o?n.stop():(o>=0&&(this.sceneBgSounds[o]=n),o!=this.sceneBgSoundURLs.length-1&&n.pause()),this._musicMuted&&this.refreshBgMusic()}},e.prototype.popSceneBgMusic=function(){if(!(this.sceneBgSoundURLs.length<=1)){var e=this.sceneBgSounds.pop();e&&e.stop(),this.sceneBgSoundURLs.pop(),this.refreshBgMusic()}},e.prototype.refreshBgMusic=function(){if(0!=this.sceneBgSoundURLs.length){var e=this.sceneBgSounds[this.sceneBgSounds.length-1];e&&(console.log("\u3010SoundsManager\u3011refreshBgMusic"),console.log("\tbgAudio.isPlaying="+e.isPlaying),console.log("\tbgAudio.volume="+e.volume),this._musicMuted?(e.volume=0,a.default.currentPlatform==a.PlatformName.QQCM?(console.log("####### QQQQQQQQQQQ #######",this.musicContext,this.musicContext.muted),this.musicContext&&(this.musicContext.volume=0)):e.pause()):(e.volume=this._musicVolume,a.default.currentPlatform==a.PlatformName.QQCM?(console.log("####### QQQQQQQQQQQ #######"),this.musicContext&&(this.musicContext.volume=this._musicVolume)):e.resume()),console.log("bgAudio.volume="+e.volume))}},Object.defineProperty(e.prototype,"musicMuted",{get:function(){return this._musicMuted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"soundMuted",{get:function(){return this._soundMuted},enumerable:!0,configurable:!0}),e.prototype.muteMusic=function(){this._musicMuted||(this._musicMuted=!0,this.refreshBgMusic(),o.default.dataManager.setData("__deer__musicMuted",this._musicMuted,!0))},e.prototype.unmuteMusic=function(){this._musicMuted&&(this._musicMuted=!1,this.refreshBgMusic(),o.default.dataManager.setData("__deer__musicMuted",this._musicMuted,!0))},Object.defineProperty(e.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(e){e>=0&&this._musicVolume!=e&&(this._musicVolume=e,this.refreshBgMusic())},enumerable:!0,configurable:!0}),e.prototype.muteSound=function(){this._soundMuted||(this._soundMuted=!0,o.default.dataManager.setData("__deer__soundMuted",this._soundMuted,!0))},e.prototype.unmuteSound=function(){this._soundMuted&&(this._soundMuted=!1,o.default.dataManager.setData("__deer__soundMuted",this._soundMuted,!0))},Object.defineProperty(e.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(e){e>=0&&this._soundVolume!=e&&(this._soundVolume=e)},enumerable:!0,configurable:!0}),e.prototype.playSound=function(e,t,n,o){(void 0===t&&(t=!1),void 0===n&&(n=null),void 0===o&&(o=NaN),e)&&(this._soundMuted||console.log(e,"playSound"))},e.prototype.playSound_do=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null);var o=this._audioClipMap[e];if(o){var a=o.audio;if(a){this.stopSound(e);var i=new cc.AudioSource;if(i.clip=a,t&&(i.loop=!0,n||(n="loop__"+Math.random())),"string"==typeof n&&n.length>0){var r=this._groupMap[n];r&&r.stop(),this._groupMap[n]=i}isNaN(o.volume)?i.volume=this._soundVolume:i.volume=o.volume,i.play()}}},e.prototype.stopSound=function(e){var t=this._audioClipMap[e];if(t&&t.audio)for(var n in this._groupMap){var o=this._groupMap[n];o&&o.clip==t.audio&&(o.stop(),delete this._groupMap[n])}var a=this._groupMap[e];a&&(a.stop(),delete this._groupMap[e])},e.prototype.reset=function(){this._audioClipMap={};for(var e in this._groupMap){var t=this._groupMap[e];t&&t.stop()}this._groupMap={}},e.prototype.playTapSound=function(){this.tapSoundSource&&this.playSound(this.tapSoundSource)},e=__decorate([r],e)}());n.default=s,cc._RF.pop()},{"../base/GameValues":"GameValues","./GameManager":"GameManager"}],SplashMain:[function(e,t,n){"use strict";cc._RF.push(t,"3b9744RK3ZDcLqAxhu4jb84","SplashMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../scripts/gamecore/deer/DeerSDK"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=5,t.wxAppID="",t.img=null,t.clickBtn=null,t.callBack=null,t._started=!1,t._completed=!1,t._time=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.node.opacity=0,this.wxAppID&&(o.default.instance._appID=this.wxAppID,o.default.instance.ad_getAdData(o.DeerAdType.SPLASH,function(t){if(e.node&&t&&t.length>0){var n=t[Math.floor(Math.random()*t.length)];e.setData(n)}}))},Object.defineProperty(t.prototype,"stated",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.setData=function(e,t){var n=this;void 0===t&&(t=null),this.node.opacity=255,this._started=!0,this.callBack=t,this.data=e,cc.loader.load({url:this.data.splashImg,type:"png"},function(e,t){if(t&&n.node&&n.img){n.img.spriteFrame=new cc.SpriteFrame(t);var o=Math.min(cc.winSize.width/t.width,cc.winSize.height/t.height);n.img.node.width=t.width*o,n.img.node.height=t.height*o}n.data&&n.data.reportShown()}),this.addEvends()},Object.defineProperty(t.prototype,"completed",{get:function(){return this._completed},enumerable:!0,configurable:!0}),t.prototype.doAdComplete=function(){this._completed||(this._completed=!0,this.node.dispatchEvent(new cc.Event.EventCustom("aaa",!0)),null!=this.callBack&&this.callBack())},t.prototype.adClickBtnBack=function(){this.doAdComplete()},t.prototype.adClickBack=function(){void 0!==this.data.appID&&this.data.navigate()},t.prototype.addEvends=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.adClickBack,this),this.clickBtn.on(cc.Node.EventType.TOUCH_START,this.adClickBtnBack,this)},t.prototype.removeEvends=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.adClickBack,this),this.clickBtn.off(cc.Node.EventType.TOUCH_START,this.adClickBtnBack,this)},t.prototype.onDestroy=function(){this.removeEvends()},t.prototype.update=function(e){this._time+=e,this.completed||this._time>=1&&(this._time=0,this.duration--,this.duration<=0&&this.doAdComplete(),this.clickBtn.getChildByName("txt").getComponent(cc.Label).string="\u8df3\u8fc7\u5e7f\u544a("+this.duration+"\u79d2)")},__decorate([r({displayName:"\u65f6\u957f(\u79d2)"})],t.prototype,"duration",void 0),__decorate([r({type:String,displayName:"\u5fae\u4fe1AppID"})],t.prototype,"wxAppID",void 0),__decorate([r(cc.Sprite)],t.prototype,"img",void 0),__decorate([r(cc.Node)],t.prototype,"clickBtn",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../../scripts/gamecore/deer/DeerSDK":"DeerSDK"}],StageDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"e99062MkzVCBr+hG9lENEtc","StageDataMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/managers/GameManager"),a=e("../../view/stageMode/GameConfig"),i=e("../../gamecore/deer/DeerSDK"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function e(){this.curStageNum=1,this.bestStageNum=0,this.userStarNum=0,this.userGoldNum=0,this.userDimondNum=0,this.userHpNum=20,this.userHpAddTime=0,this._goldEggLimit=0,this.last_egg_day="",this.earnRefreshCountInfo={curMode:-1,curStageNum:-1,refreshCount:-1},this.passStageArr=[[],[],[],[],[]],this.tryStageCountArr=[[],[],[],[],[]],this.refreshCountArr=[[],[],[],[],[]],this.localKey={},this.tempTime=0,this.totalStage=0}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t,n){void 0===n&&(n=!1),this[e]=t,o.default.dataManager.setData(e,null,!0,n,!0),o.default.dataManager.setData(e,t,!0,n,!0)},Object.defineProperty(e.prototype,"goldEggLimit",{get:function(){return t.instance.getData("aaaa")!=(new Date).getDate()&&(this._goldEggLimit=0),this._goldEggLimit},set:function(e){console.log(t.instance.setData("aaaa",(new Date).getDate())),this._goldEggLimit=e},enumerable:!0,configurable:!0}),e.prototype.getData=function(e){if(this.localKey[e])return this[e];var t=o.default.dataManager.getData(e);return void 0==t||null==t?this[e]:(this[e]=t,this.localKey[e]=!0,t)},e.prototype.savePassStage=function(e,n,o,i){var r=t.instance.getData(t.KEY_PASS_STAGE_ARR),s=r[i];if(s.length<e-1){for(var c=0;c<e-1;c++)s[c]||(s[c]={index:c+1,skip:a.STAGE_STATE_STRUCT.SKIP,star:0});s.push({index:e,skip:n,star:o})}else if(s.length>=e){if(s[e-1].star>=o)return;s[e-1]={index:e,skip:n,star:o}}else s.push({index:e,skip:n,star:o});r[i]=s,t.instance.setData(t.KEY_PASS_STAGE_ARR,r)},e.prototype.getStarsByMode=function(e){for(var n=0,o=t.instance.passStageArr,a=!1,i=0;i<o.length;i++)if(0!=o[i].length){a=!0;break}a||(o=t.instance.getData(t.KEY_PASS_STAGE_ARR));var r=o[e];for(i=0;i<r.length;i++)n+=r[i].star;return n},e.prototype.getAllModeStars=function(){for(var e=0,n=t.instance.passStageArr,o=!1,i=0;i<n.length;i++)if(0!=n[i].length){o=!0;break}o||(n=t.instance.getData(t.KEY_PASS_STAGE_ARR));for(i=0;i<a.MODE_TYPE_STRUCT.MODE4+1;i++)for(var r=n[i],s=0;s<r.length;s++)e+=r[s].star;return e},e.prototype.isNewMode=function(e){for(var n=t.instance.passStageArr,o=!1,a=0;a<n.length;a++)if(0!=n[a].length){o=!0;break}return o||(n=t.instance.getData(t.KEY_PASS_STAGE_ARR)),0==n[e].length},e.prototype.getHighestStageByMode=function(e){for(var n=t.instance.passStageArr,o=!1,i=0;i<n.length;i++)if(0!=n[i].length){o=!0;break}o||(n=t.instance.getData(t.KEY_PASS_STAGE_ARR));var r=n[e];if(e==a.MODE_TYPE_STRUCT.MODE1){if(r.length+1>a.default.instance.gameMeta.classicalModeLevelMeta.length)return r.length}else if(e==a.MODE_TYPE_STRUCT.MODE2){if(r.length+1>a.default.instance.gameMeta.grenadeModeLevelMeta.length)return r.length}else if(e==a.MODE_TYPE_STRUCT.MODE3){if(r.length+1>a.default.instance.gameMeta.hostageModeLevelMeta.length)return r.length}else if(e==a.MODE_TYPE_STRUCT.MODE4&&r.length+1>a.default.instance.gameMeta.survivalModeLevelMeta.length)return r.length;return r.length+1},e.prototype.getInfoByMode=function(e){for(var n=t.instance.passStageArr,o=!1,a=0;a<n.length;a++)if(0!=n[a].length){o=!0;break}o||(n=t.instance.getData(t.KEY_PASS_STAGE_ARR));var i=[];for(a=0;a<n[e].length;a++)i.push(n[e][a]);return i},e.prototype.hpLimitEvent=function(e){e-this.tempTime>=50?(t.instance.setData(t.KEY_USER_HP_ADD_TIME,e),this.tempTime=e):t.instance.userHpAddTime=e},e.prototype.initHpTimer=function(){var e=a.default.instance.gameMeta.energyMeta[0],n=function(){var o=20==t.instance.userHpNum?t.instance.getData(t.KEY_USER_HP_NUM):t.instance.userHpNum,a=i.default.instance.serverTime.getTime();if(o>=e.upperLimit)t.instance.hpLimitEvent(a),t.HP_TIMER=1e3*e.recoverInterval;else{var r=0==t.instance.userHpAddTime?t.instance.getData(t.KEY_USER_HP_ADD_TIME):t.instance.userHpAddTime;t.HP_TIMER=a-r;var s=Math.floor(t.HP_TIMER/(1e3*e.recoverInterval))*e.recoverNum+o;s>e.upperLimit&&(s=e.upperLimit),r=a-t.HP_TIMER%(1e3*e.recoverInterval),t.instance.hpLimitEvent(r),t.instance.setData(t.KEY_USER_HP_NUM,s)}setTimeout(function(){n()},1e3)};n()},e.prototype.getRefreshCount=function(e,n){0==t.instance.refreshCountArr[e].length&&t.instance.getData(t.KEY_REFRESH_COUNT_ARR);var o=t.instance.refreshCountArr[e][n-1];if(!o&&0!==o){var a=i.default.instance.game_config;void 0!=a?(t.instance.refreshCountArr[e][n-1]=a.refreshNumLimit,o=a.refreshNumLimit):o=1}return o},e.prototype.setRefreshCount=function(e,n,o){0==t.instance.refreshCountArr[e].length&&t.instance.getData(t.KEY_REFRESH_COUNT_ARR),t.instance.refreshCountArr[e][n-1]=o,t.instance.setData(t.KEY_REFRESH_COUNT_ARR,t.instance.refreshCountArr)},e.prototype.getBestStageNum=function(){var e=0;if(0==this.totalStage){for(var n=t.instance.getData(t.KEY_PASS_STAGE_ARR),o=0;o<n.length;o++)for(var a=0;a<n[o].length;a++)e+=1;this.totalStage=e}else e=this.totalStage;return e},e.prototype.judgeIsFreeStage=function(e,t){return e==a.MODE_TYPE_STRUCT.MODE1&&t<=16},e.KEY_USER_GOLD_NUM="userGoldNum",e.KEY_USER_DIMOND_NUM="userDimondNum",e.KEY_CUR_STAGE_NUM="curStageNum",e.KEY_PASS_STAGE_ARR="passStageArr",e.KEY_BEST_STAGE_NUM="bestStageNum",e.KEY_USER_STAR_NUM="userStarNum",e.KEY_USER_HP_NUM="userHpNum",e.KEY_USER_HP_ADD_TIME="userHpAddTime",e.KEY_TRY_STAGE_COUNT_ARR="tryStageCountArr",e.KEY_REFRESH_COUNT_ARR="refreshCountArr",e.KEY_EARN_REFRESH_COUNT_INFO="earnRefreshCountInfo",e.KEY_GOLD_EGG_LIMIT="_goldEggLimit",e.CUR_MODE=null,e.CUR_LEVEL=0,e.IS_NEW_STAGE=!1,e.CUR_STARS=0,e.MAP_POS=cc.v2(0,0),e.HP_TIMER=0,e.IS_REVIVE_STATE=!1,e.IS_FROM_EGGLAYER=!1,e.IS_EGG_SUCC=!1,e.NEED_SUB_HP=!1,e.SHOW_HELP_BTN=!0,e.IS_ANI=!1,e.USER_OP={mode:0,level:1,beginTime:0,time:[],location:[]},e._instance=null,e=t=__decorate([s],e)}());n.default=c;var l=function(){return function(){}}();n.REFRESH_INFO=l,cc._RF.pop()},{"../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/managers/GameManager":"GameManager","../../view/stageMode/GameConfig":"GameConfig"}],StageEnd:[function(e,t,n){"use strict";cc._RF.push(t,"4aabeFbgZBBpZFCqbzbdqI1","StageEnd"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../gamecore/deer/DeerSDK"),a=e("../../GameUtils"),i=e("../../module/data/StageDataMgr"),r=e("../base/CoinAnimComp"),s=e("./GameMainMgr"),c=e("./GameConfig"),l=e("../../SoundMgr"),d=e("../../gamecore/wechat/WXUtils"),u=e("../../module/data/MainDataMgr"),h=e("../../gamecore/managers/GameManager"),p=e("../../gamecore/GameCoreEventNames"),f=e("../../control/WXScreenAdMgr"),g=cc._decorator,m=g.ccclass,_=g.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.starPanel=null,t.txtCurCoinTitle=null,t.txtCurCoin=null,t.starArr=[],t.starSpfm=null,t.shareBtn=null,t.restartBtn=null,t.gameFail=null,t.gameWin=null,t.txtFail=null,t.addStarBtn=null,t.moreRewardBtn=null,t.txtVideoEarn=null,t.ADpanelArr=[],t.goldtext=null,t.coinbg=null,t.hpContent=null,t.adContent=null,t.winParticle=null,t.continueBtn=null,t.FailhomeBtn=null,t.restartSpfm=null,t.hpIcon=null,t.firendSpace=null,t.earnGoldNum=0,t.locked=!1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;if(o.default.instance.isOnline||this.adContent.destroy(),i.default.instance.judgeIsFreeStage(i.default.CUR_MODE,i.default.CUR_LEVEL)&&(this.restartBtn.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.restartSpfm),i.default.instance.judgeIsFreeStage(i.default.CUR_MODE,i.default.CUR_LEVEL+1)&&(this.hpIcon.active=!1),0==u.default.CUR_DEATH_AD_TYPE?(this.ADpanelArr[1].destroy(),u.default.CUR_DEATH_AD_TYPE=1):(this.ADpanelArr[0].destroy(),u.default.CUR_DEATH_AD_TYPE=0),i.default.CUR_MODE==c.MODE_TYPE_STRUCT.MODE1&&i.default.CUR_LEVEL<=32){var t=this.node.getChildByName("content");t.setContentSize(new cc.Size(750,1334)),t.scale=1,t.getComponent(cc.Widget).right=0,t.getComponent(cc.Widget).left=0,t.getComponent(cc.Widget).top=0,t.getComponent(cc.Widget).bottom=0,this.scheduleOnce(function(){e.hpContent.setScale(1,1),e.hpContent.active=!0,e.coinbg.scaleX=1,e.coinbg.scaleY=1})}else this.hpContent.scaleX=1.45,this.hpContent.scaleY=1.45,this.hpContent.active=!0,this.coinbg.scaleX=1.45,this.coinbg.scaleY=1.45;this.updateData(),h.default.eventManager.addEventListener(p.default.DATA_CHANGE,this.onDataChange,this)},t.prototype.onDataChange=function(e){e.data!=i.default.KEY_USER_GOLD_NUM||this.refreshGold()},t.prototype.refreshGold=function(){var e=i.default.instance.getData(i.default.KEY_USER_GOLD_NUM);this.goldtext.string=e+""},t.prototype.updateData=function(){var e=this,t=i.default.instance.getData(i.default.KEY_USER_GOLD_NUM);if(s.default.curEarnStars<=i.default.CUR_STARS?this.earnGoldNum=0:this.earnGoldNum=c.default.instance.gameMeta.settlementRewardMeta[0].oneStarsReward*(s.default.curEarnStars-i.default.CUR_STARS),s.default.curGameState==s.default.gameState.LOST)this.starPanel.active=!1,this.txtFail.string="\u901a\u5173\u5931\u8d25",this.gameWin.active=!1,this.gameFail.active=!0;else{this.calcuScreenAd(),this.node&&(this.gameFail.active=!1,this.gameWin.active=!0,this.txtCurCoin.string=""+this.earnGoldNum),this.earnGoldNum>0&&this.scheduleOnce(function(){e.goldtext&&e.goldtext.node&&e.showFlyGoldEvent(e.txtCurCoin.node,e.goldtext.node,1)},.05),this.scheduleOnce(function(){var n=t+e.earnGoldNum;i.default.instance.setData(i.default.KEY_USER_GOLD_NUM,n),e.goldtext&&(e.goldtext.string=n+"")},.25);for(var n=function(t){o.scheduleOnce(function(){e.starArr[t]&&(e.starArr[t].getComponent(cc.Sprite).spriteFrame=e.starSpfm,t==s.default.curEarnStars-1&&(e.winParticle.active=!0,e.winParticle.getComponent(cc.ParticleSystem).resetSystem()))},.1*t+.2)},o=this,a=0;a<s.default.curEarnStars;a++)n(a);if(!this.node)return;2==s.default.curEarnStars?(this.txtCurCoinTitle.string="\u8fd8\u5dee\u4e00\u70b9",this.addStarBtn.active=!0,this.moreRewardBtn.active=!1,this.shareBtn.active=!1):1==s.default.curEarnStars?(this.txtCurCoinTitle.string="\u518d\u52a0\u628a\u52b2",this.addStarBtn.active=!0,this.moreRewardBtn.active=!1,this.shareBtn.active=!1):0==s.default.curEarnStars?(this.txtCurCoinTitle.string="\u9a6c\u9a6c\u864e\u864e",this.addStarBtn.active=!0,this.moreRewardBtn.active=!1,this.shareBtn.active=!1):(this.txtCurCoinTitle.string="\u8eab\u7ecf\u767e\u6218",this.restartBtn.active=!1,this.shareBtn.active=!0,this.addStarBtn.active=!1,this.moreRewardBtn.active=!0,this.txtVideoEarn.string=c.default.instance.gameMeta.settlementRewardMeta[0].extraBonus+"")}this.goldtext.string=t+""},t.prototype.calcuScreenAd=function(){var e=o.default.instance.game_config;void 0!=e&&e.winInterstitialInterval&&i.default.CUR_LEVEL%e.winInterstitialInterval==0&&(console.log("\u5fae\u4fe1\u63d2\u5c4f\u5e7f\u544acalcuScreenAd"),f.default.instance.showRandAd())},t.prototype.onDoubleReceiveDiamondBtn=function(e){l.default.instance.playTapSound(),this.watchVideoAd()},t.prototype.watchVideoAd=function(){var e=this;a.default.instance.showVideoAd(function(){e.onReceiveDiamondBtn(null)},function(){a.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u83b7\u5f97"+c.default.instance.gameMeta.settlementRewardMeta[0].extraBonus+"\u91d1\u5e01",function(){e.watchVideoAd()})},function(){a.default.instance.playFailOnShare(function(t){switch(t){case 1:e.onReceiveDiamondBtn(null)}},"moreRewardGoldNum")})},t.prototype.onReceiveDiamondBtn=function(e){var t=this,n=i.default.instance.getData(i.default.KEY_USER_GOLD_NUM)+c.default.instance.gameMeta.settlementRewardMeta[0].extraBonus;i.default.instance.setData(i.default.KEY_USER_GOLD_NUM,n),a.default.showToast("\u606d\u559c\u4f60\u83b7\u5f97"+c.default.instance.gameMeta.settlementRewardMeta[0].extraBonus+"\u91d1\u5e01"),this.scheduleOnce(function(){t.goldtext&&(t.goldtext.string=n+"")},1.2),this.node&&this.moreRewardBtn&&this.showFlyGoldEvent(this.moreRewardBtn,this.goldtext.node,1)},t.prototype.showFlyGoldEvent=function(e,t,n){void 0===n&&(n=1);var o=new cc.Event.EventCustom(r.default.SHOW_FLY_ANI,!0),a=new r.FlyStruct;a.start=e.convertToWorldSpaceAR(cc.v2(0,0)),a.start=cc.find("Canvas").getChildByName("stageEndPanel").convertToNodeSpaceAR(a.start),a.end=t.convertToWorldSpaceAR(cc.v2(0,0)),a.end=cc.find("Canvas").getChildByName("stageEndPanel").convertToNodeSpaceAR(a.end),a.type=n,o.detail=a,this.node.dispatchEvent(o)},t.prototype.close=function(){l.default.instance.playTapSound(),a.default.instance.loadSceneWithOperate("modeSelectScene"),console.log("\u5fae\u4fe1\u63d2\u5c4f\u5e7f\u544a"),f.default.instance.showRandAd(),a.default.buriedPoint(23)},t.prototype.retry=function(e){l.default.instance.playTapSound(),i.default.instance.getData(i.default.KEY_USER_HP_NUM)<=0&&!i.default.instance.judgeIsFreeStage(i.default.CUR_MODE,i.default.CUR_LEVEL)?a.default.instance.openKeyGiftEvent(this.hpContent,1001):(this.locked||(this.locked=!0,i.default.NEED_SUB_HP=!0),a.default.instance.loadSceneWithOperate("map"),a.default.buriedPoint(24))},t.prototype.continue=function(e){l.default.instance.playTapSound(),i.default.instance.getData(i.default.KEY_USER_HP_NUM)<=0&&!i.default.instance.judgeIsFreeStage(i.default.CUR_MODE,i.default.CUR_LEVEL+1)?a.default.instance.openKeyGiftEvent(this.hpContent,1001):(this.locked||(i.default.NEED_SUB_HP=!0,this.locked=!0,i.default.CUR_LEVEL+=1),i.default.CUR_MODE==c.MODE_TYPE_STRUCT.MODE1?i.default.CUR_LEVEL>c.default.instance.gameMeta.classicalModeLevelMeta.length&&(i.default.CUR_LEVEL=c.default.instance.gameMeta.classicalModeLevelMeta.length):i.default.CUR_MODE==c.MODE_TYPE_STRUCT.MODE2?i.default.CUR_LEVEL>c.default.instance.gameMeta.grenadeModeLevelMeta.length&&(i.default.CUR_LEVEL=c.default.instance.gameMeta.grenadeModeLevelMeta.length):i.default.CUR_MODE==c.MODE_TYPE_STRUCT.MODE3?i.default.CUR_LEVEL>c.default.instance.gameMeta.hostageModeLevelMeta.length&&(i.default.CUR_LEVEL=c.default.instance.gameMeta.hostageModeLevelMeta.length):i.default.CUR_MODE==c.MODE_TYPE_STRUCT.MODE4&&i.default.CUR_LEVEL>c.default.instance.gameMeta.survivalModeLevelMeta.length&&(i.default.CUR_LEVEL=c.default.instance.gameMeta.survivalModeLevelMeta.length),a.default.instance.loadSceneWithOperate("map"),a.default.buriedPoint(27))},t.prototype.shareClickEvent=function(e){l.default.instance.playTapSound(),a.default.instance.onShare(function(){},function(){}),a.default.buriedPoint(28)},t.prototype.addStarClickEvent=function(e){l.default.instance.playTapSound(),this.showAddStarVideo(),a.default.buriedPoint(25)},t.prototype.showAddStarVideo=function(){var e=this;a.default.instance.showVideoAd(function(){s.default.curEarnStars=3,i.default.instance.setData(i.default.KEY_USER_GOLD_NUM,i.default.instance.getData(i.default.KEY_USER_GOLD_NUM)-e.earnGoldNum),e.updateData(),i.default.instance.savePassStage(i.default.CUR_LEVEL,c.STAGE_STATE_STRUCT.UNLOCK,3,i.default.CUR_MODE)},function(){a.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u83b7\u5f97\u6ee1\u661f\u5956\u52b1",function(){e.showAddStarVideo()})},function(){a.default.instance.playFailOnShare(function(t){switch(t){case 1:s.default.curEarnStars=3,i.default.instance.setData(i.default.KEY_USER_GOLD_NUM,i.default.instance.getData(i.default.KEY_USER_GOLD_NUM)-e.earnGoldNum),e.updateData(),i.default.instance.savePassStage(i.default.CUR_LEVEL,c.STAGE_STATE_STRUCT.UNLOCK,3,i.default.CUR_MODE)}},"addStarVideo")})},t.prototype.addKeyClickEvent=function(e){l.default.instance.playTapSound(),this.showReviveVideo()},t.prototype.revive=function(){i.default.IS_REVIVE_STATE=!0,a.default.buriedPoint(26),a.default.instance.loadSceneWithOperate("map")},t.prototype.showReviveVideo=function(){var e=this;a.default.instance.showVideoAd(function(){e.revive()},function(){a.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u7ee7\u7eed\u6e38\u620f",function(){e.showReviveVideo()})},function(){a.default.instance.playFailOnShare(function(t){switch(t){case 1:e.revive()}},"addBulletRevive")})},t.prototype.showEggReward=function(){var e=this;if(i.default.IS_EGG_SUCC){i.default.IS_EGG_SUCC=!1;var t=o.default.instance.game_config;void 0!=t&&t.goldenEggEnergyBonus&&this.scheduleOnce(function(){d.default.showToast("\u606d\u559c\u83b7\u5f97"+t.goldenEggEnergyBonus+"\u4f53\u529b"),i.default.instance.setData(i.default.KEY_USER_HP_NUM,i.default.instance.getData(i.default.KEY_USER_HP_NUM)+t.goldenEggEnergyBonus),e.node&&e.hpContent&&e.showFlyGoldEvent(e.node,e.hpContent,2)},.2)}},t.prototype.onDestroy=function(){h.default.eventManager.removeEventListener(p.default.DATA_CHANGE,this.onDataChange,this)},t.prototype.update=function(e){1==this.FailhomeBtn.active&&(this.restartBtn.y=this.FailhomeBtn.y)},t.prototype.start=function(){o.default.instance.game_config&&o.default.instance.game_config.friendCircle?this.firendSpace.active=!0:this.firendSpace.destroy()},__decorate([_(cc.Node)],t.prototype,"starPanel",void 0),__decorate([_(cc.Label)],t.prototype,"txtCurCoinTitle",void 0),__decorate([_(cc.Label)],t.prototype,"txtCurCoin",void 0),__decorate([_(cc.Node)],t.prototype,"starArr",void 0),__decorate([_(cc.SpriteFrame)],t.prototype,"starSpfm",void 0),__decorate([_(cc.Node)],t.prototype,"shareBtn",void 0),__decorate([_(cc.Node)],t.prototype,"restartBtn",void 0),__decorate([_(cc.Node)],t.prototype,"gameFail",void 0),__decorate([_(cc.Node)],t.prototype,"gameWin",void 0),__decorate([_(cc.Label)],t.prototype,"txtFail",void 0),__decorate([_(cc.Node)],t.prototype,"addStarBtn",void 0),__decorate([_(cc.Node)],t.prototype,"moreRewardBtn",void 0),__decorate([_(cc.Label)],t.prototype,"txtVideoEarn",void 0),__decorate([_(cc.Node)],t.prototype,"ADpanelArr",void 0),__decorate([_(cc.Label)],t.prototype,"goldtext",void 0),__decorate([_(cc.Node)],t.prototype,"coinbg",void 0),__decorate([_(cc.Node)],t.prototype,"hpContent",void 0),__decorate([_(cc.Node)],t.prototype,"adContent",void 0),__decorate([_(cc.Node)],t.prototype,"winParticle",void 0),__decorate([_(cc.Node)],t.prototype,"continueBtn",void 0),__decorate([_(cc.Node)],t.prototype,"FailhomeBtn",void 0),__decorate([_(cc.SpriteFrame)],t.prototype,"restartSpfm",void 0),__decorate([_(cc.Node)],t.prototype,"hpIcon",void 0),__decorate([_(cc.Node)],t.prototype,"firendSpace",void 0),t=__decorate([m],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../control/WXScreenAdMgr":"WXScreenAdMgr","../../gamecore/GameCoreEventNames":"GameCoreEventNames","../../gamecore/deer/DeerSDK":"DeerSDK","../../gamecore/managers/GameManager":"GameManager","../../gamecore/wechat/WXUtils":"WXUtils","../../module/data/MainDataMgr":"MainDataMgr","../../module/data/StageDataMgr":"StageDataMgr","../base/CoinAnimComp":"CoinAnimComp","./GameConfig":"GameConfig","./GameMainMgr":"GameMainMgr"}],StageModeMain:[function(e,t,n){"use strict";cc._RF.push(t,"29e9aXaZPRAWLiFC/Dz8Y68","StageModeMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t=__decorate([a],t)}(cc.Component));n.default=i,cc._RF.pop()},{}],StageModeMgr:[function(e,t,n){"use strict";cc._RF.push(t,"d5afcw9dCdGi5cZCVygjNcS","StageModeMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=(o.ccclass,o.property,function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e._instance=null,e}());n.default=a,cc._RF.pop()},{}],SyncDataToServerByDeerSDK:[function(e,t,n){"use strict";cc._RF.push(t,"4b496gD/OJLM6G8TBRk0JAA","SyncDataToServerByDeerSDK"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../deer/DeerSDK"),a=e("../deer/DeerSDKEventNames"),i=e("../managers/GameManager"),r=e("../GameCoreEventNames"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function e(){if(this._forbidToSyncDataFromService=!1,this._isReady=!1,this._lastSyncTime=0,t._instance)throw new Error("Please use static instance property");t._instance=this,this.doInit()}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||new t,t._instance},enumerable:!0,configurable:!0}),e.prototype.doInit=function(){var e=this;o.default.instance.isHandshakeCompleted?e.doInit2():o.default.instance.addEventListener(a.default.HANDSHAKE_COMPLETE,function(t){e.doInit2()},this,0,!0)},e.prototype.forbidToSyncDataFromService=function(){this._forbidToSyncDataFromService=!0},e.prototype.doInit2=function(){this._forbidToSyncDataFromService||o.default.instance.isNewUser?(this._isReady=!0,i.default.eventManager.addEventListener(r.default.DATA_REMOTE_CHANGE,this.dataManagerSerializeHandler,this)):this.syncDataFromServiceToDataManager();var e=this;"undefined"!=typeof wx&&(wx.onHide(function(){e.syncDataFromDataManagerToService()}),wx.onClose&&wx.onClose(function(){e.syncDataFromDataManagerToService()}))},Object.defineProperty(e.prototype,"isReady",{get:function(){return this._isReady},enumerable:!0,configurable:!0}),e.prototype.syncDataFromServiceToDataManager=function(){var e=this;o.default.instance.game_getDataFromService(function(t){try{e._lastSyncValue=t;var n=JSON.parse(e._lastSyncValue);for(var o in n)i.default.dataManager.setData(o,n[o],!0,!1,!0),i.default.eventManager.dispatchEventWith(r.default.DATA_REMOTE_RETRIVE)}catch(e){}e._isReady=!0,i.default.eventManager.addEventListener(r.default.DATA_REMOTE_CHANGE,e.dataManagerSerializeHandler,e)},function(){e._isReady=!0,i.default.eventManager.addEventListener(r.default.DATA_REMOTE_CHANGE,e.dataManagerSerializeHandler,e)})},e.prototype.dataManagerSerializeHandler=function(e){var t=(new Date).getTime();t-this._lastSyncTime>2e4&&(this._lastSyncTime=t,this.syncDataFromDataManagerToService())},e.prototype.syncDataFromDataManagerToService=function(){this._lastTrySyncValue=i.default.dataManager.getDataNeedSyncToServer(),this._lastTrySyncValue!=this._lastSyncValue&&o.default.instance.game_saveDataToServiceNow(this._lastTrySyncValue,this.syncDataFromDataManagerToService_suc.bind(this))},e.prototype.syncDataFromDataManagerToService_suc=function(){this._lastSyncValue=this._lastTrySyncValue,this._lastTrySyncValue=null},e=t=__decorate([c],e)}());n.default=l,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","../deer/DeerSDK":"DeerSDK","../deer/DeerSDKEventNames":"DeerSDKEventNames","../managers/GameManager":"GameManager"}],SyncDataToWXCloud:[function(e,t,n){"use strict";cc._RF.push(t,"9a0f9Cy+UJC5r6b7OzxgZMi","SyncDataToWXCloud"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../deer/DeerSDK"),a=e("../deer/DeerSDKEventNames"),i=e("../managers/GameManager"),r=e("../GameCoreEventNames"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function e(){if(this._cloudData={},this._forbidToSyncDataFromService=!1,this._isReady=!1,this._lastSyncTime=0,t._instance)throw new Error("Please use static instance property");t._instance=this;try{wx.cloud.init({})}catch(e){}this.doInit()}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||new t,t._instance},enumerable:!0,configurable:!0}),e.prototype.doInit=function(){var e=this;o.default.instance.isReady?this.doInit2():o.default.instance.addEventListener(a.default.READY,function(t){e.doInit2()},this,0,!0)},e.prototype.forbidToSyncDataFromService=function(){this._forbidToSyncDataFromService=!0},e.prototype.doInit2=function(){i.default.eventManager.addEventListener(r.default.DATA_REMOTE_CHANGE,this.dataManagerSerializeHandler,this),this.syncDataFromServiceToDataManager();var e=this;"undefined"!=typeof wx&&(wx.onHide(function(){e.syncDataFromDataManagerToService()}),wx.onClose&&wx.onClose(function(){e.syncDataFromDataManagerToService()}))},Object.defineProperty(e.prototype,"isReady",{get:function(){return this._isReady},enumerable:!0,configurable:!0}),e.prototype.syncDataFromServiceToDataManager=function(){var e=this,t=o.default.instance.game_dataID;if(t)try{wx.cloud.downloadFile({fileID:t,success:function(t){e.readFile(t.tempFilePath)},fail:function(e){},complete:function(){e._isReady=!0}})}catch(e){this._isReady=!0}else this._isReady=!0},e.prototype.readFile=function(e){var t=this;try{wx.getFileSystemManager().readFile({filePath:e,encoding:"utf-8",success:function(e){try{t._cloudData=JSON.parse(e.data),t._forbidToSyncDataFromService||Object.keys(t._cloudData).forEach(function(e){i.default.dataManager.setData(e,t._cloudData[e],!0,!1,!0)})}catch(e){}},fail:function(e){}})}catch(e){}},e.prototype.dataManagerSerializeHandler=function(e){var t=(new Date).getTime();t-this._lastSyncTime>4e4&&(this._lastSyncTime=t,this.syncDataFromDataManagerToService())},e.prototype.syncDataFromDataManagerToService=function(){var e=this;if(this._lastTrySyncValue=i.default.dataManager.getDataNeedSyncToServer(),this._lastTrySyncValue!=this._lastSyncValue)try{this._cloudData||(this._cloudData={});var t=JSON.parse(this._lastTrySyncValue);Object.keys(t).forEach(function(n){e._cloudData[n]=t[n]});var n=wx.env.USER_DATA_PATH+"/temp_file_to_wx_cloud.json";wx.getFileSystemManager().writeFile({filePath:n,data:JSON.stringify(this._cloudData),encoding:"utf-8",success:function(t){var a="ugd__"+o.default.instance.game_id+"_"+o.default.instance.userVO.id;try{wx.cloud.uploadFile({cloudPath:a,filePath:n,success:function(t){e._lastSyncValue=e._lastTrySyncValue,o.default.instance.game_saveDataIDToService(t.fileID)},fail:function(e){}})}catch(e){}},fail:function(e){}})}catch(e){}},e=t=__decorate([c],e)}());n.default=l,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","../deer/DeerSDK":"DeerSDK","../deer/DeerSDKEventNames":"DeerSDKEventNames","../managers/GameManager":"GameManager"}],TNTBox:[function(e,t,n){"use strict";cc._RF.push(t,"9a0c5NRHgBCtq86ZcdOmAiC","TNTBox"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./AudioManager"),i=e("./PrfabsManager"),r=e("../../module/data/StageDataMgr"),s=e("./GameConfig"),c=e("./GrenadeController"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isHit=!1,t.isBoom=!1,t.particleNode=null,t.bomImg=null,t.isLink=!1,t.circleSize=360,t.colliderSize=3.4,t.hitSwitch=!1,t.isOpenBoom=!1,t.isReboundBullet=!1,t.isRoadBoom=!1,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.onBeginContact=function(e,t,n){0!=t.enabled&&0!=n.enabled&&(t.tag==o.default.Tag.tagTNTBorder&&(n.tag==o.default.Tag.tagBullet||this.hitSwitch&&n.tag==o.default.Tag.tagBodyJoint)?r.default.CUR_MODE!=s.MODE_TYPE_STRUCT.MODE3||14!=r.default.CUR_LEVEL||this.isBoom?e.disabled=!0:this.boomEffct():n.tag!=o.default.Tag.tagTNT||this.isBoom?n.tag==o.default.Tag.tagBullet&&t.tag==o.default.Tag.tagTNT?this.isReboundBullet?this.isBoom||this.boomEffct():(e.disabled=!0,this.isBoom||(this.boomEffct(),n.node.destroy(),this.node.dispatchEvent(new cc.Event.EventCustom(o.default.eventMessage.bulletRemove,!0)))):n.tag==o.default.Tag.tagBodyJoint?this.hitSwitch&&(this.isBoom||this.boomEffct()):n.tag==o.default.Tag.tagTrigger?this.isBoom||this.boomEffct():n.tag==o.default.Tag.tagGrenade&&n.node.parent.getComponent(c.default).isBoom?this.isBoom||this.boomEffct():n.tag==o.default.Tag.tagBullet&&this.hitSwitch?this.isBoom||this.boomEffct():t.tag==o.default.Tag.tagTNTBorder&&n.tag==o.default.Tag.tagPlat&&this.isRoadBoom?this.isBoom||this.boomEffct():n.tag==o.default.Tag.tagNone&&(this.isBoom||r.default.CUR_MODE==s.MODE_TYPE_STRUCT.MODE3&&83==r.default.CUR_LEVEL&&n.node.getComponent(cc.RigidBody).linearVelocity.mag()>3.5&&this.boomEffct()):this.boomEffct())},t.prototype.boomEffct=function(){this.isBoom=!0,this.node.getComponent(cc.Sprite).spriteFrame=null,this.node.getComponent(cc.PhysicsCircleCollider).enabled=!0,this.node.getComponent(cc.PhysicsCircleCollider).apply(),this.node.getComponent(cc.PhysicsPolygonCollider)&&(this.node.getComponent(cc.PhysicsPolygonCollider).sensor=!0,this.node.getComponent(cc.PhysicsPolygonCollider).apply());var e=this;a.default.instance.playSound("bomb");var t=cc.instantiate(i.default.instance.prfabsAry.TNTEffectNode);t.getComponent(cc.ParticleSystem).resetSystem(),this.node.addChild(t),t.active=!0,this.bomImg.active=!0,this.bomImg.runAction(cc.spawn(cc.scaleTo(.3,this.colliderSize),cc.fadeOut(.2))),this.scheduleOnce(function(){e&&e.node&&e.node.destroy()},.3)},__decorate([u(cc.Node)],t.prototype,"bomImg",void 0),__decorate([u(Boolean)],t.prototype,"isLink",void 0),__decorate([u(Number)],t.prototype,"circleSize",void 0),__decorate([u(Number)],t.prototype,"colliderSize",void 0),__decorate([u(Boolean)],t.prototype,"hitSwitch",void 0),__decorate([u(Boolean)],t.prototype,"isOpenBoom",void 0),__decorate([u(Boolean)],t.prototype,"isReboundBullet",void 0),__decorate([u(Boolean)],t.prototype,"isRoadBoom",void 0),t=__decorate([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./AudioManager":"AudioManager","./Common":"Common","./GameConfig":"GameConfig","./GrenadeController":"GrenadeController","./PrfabsManager":"PrfabsManager"}],TagManager:[function(e,t,n){"use strict";cc._RF.push(t,"a57ec1PZ9lNSbs8RUtk09jZ","TagManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GameManager"),a=e("../GameCoreEventNames"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){this._channelMap={},this._channelValueMap={},this._removeForeverMap={}}return e.prototype.setTag=function(e,t){void 0===t&&(t=null),this._removeForeverMap.hasOwnProperty(e)||this._channelValueMap.hasOwnProperty(e)&&this._channelValueMap[e]==t||(this._channelValueMap[e]=t,o.default.eventManager.dispatchEventWith(a.default.TAG_CHANGE,e))},e.prototype.removeTag=function(e,t){void 0===t&&(t=!1),this._removeForeverMap.hasOwnProperty(e)||(this._channelValueMap.hasOwnProperty(e)&&(delete this._channelValueMap[e],o.default.eventManager.dispatchEventWith(a.default.TAG_CHANGE,e)),t&&(this._removeForeverMap[e]=!0))},e.prototype.hasTag=function(e){if(this._channelValueMap.hasOwnProperty(e))return!0;for(var t=this.getAllSubTagChannels(e),n=0,o=t.length;n<o;n++){var a=t[n];if(this._channelValueMap.hasOwnProperty(a))return!0}return!1},e.prototype.getAllParentTagChannels=function(e){for(var t=new Array;e&&-1==t.indexOf(e)&&this._channelMap.hasOwnProperty(e);)(e=this._channelMap[e])&&t.push(e);return t},e.prototype.getAllSubTagChannels=function(e){var t=this,n=new Array;if(!e)return n;var o=function(n,i){if(n&&!(i.indexOf(n)>=0)){var r=t._channelMap[n];i.push(n),r==e?i.forEach(function(e){a[e]=!0}):o(r,i)}},a={};return Object.keys(this._channelMap).forEach(function(t){t!=e&&o(t,new Array)}),Object.keys(a)},e.prototype.getTagData=function(e){return this._channelValueMap.hasOwnProperty(e)?this._channelValueMap[e]:null},e.prototype.registerTag=function(e,t){if(this._channelMap.hasOwnProperty(e)&&this._channelMap[e]!=t)throw new Error(e+"'s parent has set to "+this._channelMap[e]);this._channelMap[e]=t},e.prototype.registerTags=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length-1;n++)this.registerTag(e[n],e[n+1])},e.prototype.unregisterTag=function(e){this._channelMap.hasOwnProperty(e)&&(delete this._channelMap[e],o.default.eventManager.dispatchEventWith(a.default.TAG_CHANGE,e))},e.prototype.reset=function(){this._channelValueMap={},this._removeForeverMap={},o.default.eventManager.dispatchEventWith(a.default.TAG_CHANGE)},e=__decorate([r],e)}());n.default=s,cc._RF.pop()},{"../GameCoreEventNames":"GameCoreEventNames","./GameManager":"GameManager"}],TankDataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"fd6e4rQzeZNSZxbjR59WStf","TankDataMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../gamecore/managers/GameManager"),a=e("./UIManager"),i=e("./GameData"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function e(){this.curStageNum=0,this.bestStageNum=0,this.userStarNum=0,this.userGoldNum=0,this.userDimondNum=0,this.userHpNum=20,this.userHpAddTime=0,this._goldEggLimit=0,this.levelDataArr=[],this.levelDataXuediArr=[],this.levelDataGongchangArr=[],this.finish_xinshou=!0,this.totalKillNum=0,this.useFightBtn=0,this.m_score=0,this.m_playerTime=0,this.m_killNums=0,this.bulletType=1,this.levelData=[Object],this.curMaxLevel=0,this.levelDataXueDi=[Object],this.curMaxLevelXueDi=0,this.levelDataGongChang=[Object],this.curMaxLevelGongChang=0,this.totalScore=0,this.totalGameTime=0,this.bgMusic=1,this.effectMusic=1,this.bullet_one=1,this.bullet_three=!1,this.bullet_pao=0,this.bullet_fllow=0,this.bullet_power=0,this.curAdType=0,this.earnRefreshCountInfo={curMode:-1,curStageNum:-1,refreshCount:-1},this.tryStageCountArr=[[],[],[],[],[]],this.refreshCountArr=[[],[],[],[],[]],this.localKey={},this.uiMgr=null}var t;return t=e,e.prototype.setLevelData=function(e,t,n,o,a){if(console.log("\u4fdd\u5b58\u5173\u5361\u4fe1\u606f",e,t,n,o,a),0==a){if(!(i=this.levelData[e]))return;i.unLocked=t,n>i.score&&(i.score=n),o>i.star&&(i.star=o)}else if(1==a){if(!(i=this.levelDataXueDi[e]))return;i.unLocked=t,n>i.score&&(i.score=n),o>i.star&&(i.star=o)}else if(2==a){var i;if(!(i=this.levelDataGongChang[e]))return;i.unLocked=t,n>i.score&&(i.score=n),o>i.star&&(i.star=o)}},Object.defineProperty(e,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,n,a){void 0===a&&(a=!1),e==t.KEY_CUR_STAGE_NUM&&(i.default.instance.m_curLevel=n%40),this[e]=n,o.default.dataManager.setData(e,null,!0,a,!0),o.default.dataManager.setData(e,n,!0,a,!0)},e.prototype.getData=function(e){if(this.localKey[e])return this[e];var t=o.default.dataManager.getData(e);return void 0==t||null==t?this[e]:(this[e]=t,this.localKey[e]=!0,t)},e.prototype.saveData=function(e){console.log("saveData=====",e)},e.prototype.initLevelData=function(){for(var e,t=0;40>t;t++)e={level:t,unLocked:0,score:0,star:3},this.levelData.push(e)},e.prototype.initLevelDataXueDi=function(){for(var e,t=0;40>t;t++)e={level:t,unLocked:0,score:0,star:3},this.levelDataXueDi.push(e)},e.prototype.initLevelDataGongChang=function(){for(var e,t=0;40>t;t++)e={level:t,unLocked:0,score:0,star:3},this.levelDataGongChang.push(e)},e.prototype.getUIMgr=function(){if(this.uiMgr&&1==this.uiMgr.isValid)return this.uiMgr;var e=cc.find("Canvas").getComponent(a.default);return e?(this.uiMgr=e,this.uiMgr):void 0},e.KEY_USER_GOLD_NUM="userGoldNum",e.KEY_USER_DIMOND_NUM="userDimondNum",e.KEY_CUR_STAGE_NUM="curStageNum",e.KEY_PASS_STAGE_ARR="passStageArr",e.KEY_BEST_STAGE_NUM="bestStageNum",e.KEY_USER_STAR_NUM="userStarNum",e.KEY_USER_HP_NUM="userHpNum",e.KEY_USER_HP_ADD_TIME="userHpAddTime",e.KEY_TRY_STAGE_COUNT_ARR="tryStageCountArr",e.KEY_REFRESH_COUNT_ARR="refreshCountArr",e.KEY_EARN_REFRESH_COUNT_INFO="earnRefreshCountInfo",e.KEY_GOLD_EGG_LIMIT="_goldEggLimit",e.KEY_LEVEL_DATA_ARR="levelDataArr",e.KEY_LEVEL_DATA_XUEDI_ARR="levelDataXuediArr",e.KEY_LEVEL_DATA__GONGCHANG_ARR="levelDataGongchangArr",e.CUR_LEVEL=0,e.IS_NEW_STAGE=!1,e.CUR_STARS=0,e.MAP_POS=cc.v2(0,0),e.HP_TIMER=0,e.IS_REVIVE_STATE=!1,e.IS_FROM_EGGLAYER=!1,e.IS_EGG_SUCC=!1,e.NEED_SUB_HP=!1,e.SHOW_HELP_BTN=!0,e.IS_ANI=!1,e.USER_OP={mode:0,level:1,beginTime:0,time:[],location:[]},e._instance=null,e=t=__decorate([s],e)}());n.default=c,function(e){e[e.MAP_NORMAL=0]="MAP_NORMAL",e[e.MAP_XUEDI=1]="MAP_XUEDI",e[e.MAP_GONGCHANG=2]="MAP_GONGCHANG"}(n.MAP_TYPE_STRUCT||(n.MAP_TYPE_STRUCT={}));var l=function(){return function(){}}();n.LEVEL_INFO=l;var d=function(){return function(){}}();n.REFRESH_INFO=d,cc._RF.pop()},{"../gamecore/managers/GameManager":"GameManager","./GameData":"GameData","./UIManager":"UIManager"}],TankUnlock:[function(e,t,n){"use strict";cc._RF.push(t,"01c3e+JpMJB17qQG/GHvf7I","TankUnlock"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GameUtils"),a=cc._decorator,i=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.comingSoon,this)},t.prototype.start=function(){},t.prototype.comingSoon=function(){o.default.showToast("\u656c\u8bf7\u671f\u5f85")},t=__decorate([i],t)}(cc.Component));n.default=r,cc._RF.pop()},{"../GameUtils":"GameUtils"}],Test:[function(e,t,n){"use strict";cc._RF.push(t,"d1cfbT0uU1MVI5mSE8J3H+2","Test"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}var t;return t=e,e.showNodeList=function(e){if(console.log("\n\n"),console.error(e.name,"=================node.name===================="),e.parent&&e.parent.name&&console.log(e.parent.name,"====node.parent.name======"),1!=e.active&&console.log(e.active,"==node.active=="),0==e.position.x&&0==e.position.y||console.log(e.position.x,e.position.y,"==node.position.x,node.position.y=="),0!=e.rotation&&console.log(e.rotation,"==node.rotation=="),1==e.scaleX&&1==e.scaleY||console.log(e.scaleX,e.scaleY,"==node.scaleX,node.scaleY=="),.5==e.anchorX&&.5==e.anchorY||console.log(e.anchorX,e.anchorY,"==node.anchorX,node.anchorY=="),console.log(e.width,e.height,"==node.width,node.height=="),255==e.color.getA()&&255==e.color.getB()&&255==e.color.getG()||console.log(e.color,"==node.color=="),255!=e.opacity&&console.log(e.opacity,"==node.opacity=="),0==e.skewX&&0==e.skewY||console.log(e.skewX,e.skewY,"==node.skewX,node.skewY=="),0!=e.zIndex&&console.log(e.zIndex,"==node.zIndex=="),"default"!=e.group&&console.log(e.group,"==node.group=="),0!=e._components.length)for(var n=0;n<e._components.length;n++)t.showComList(e._components[n]);if(0!=e.childrenCount){console.log(e.childrenCount,"==node.childrenCount==");for(n=0;n<e.childrenCount;n++)t.showNodeList(e.children[n])}},e.showComList=function(e){if(console.log("\n"),console.warn(e.name,"======comp.name======="),-1==e.name.indexOf("<Button>"))return-1!=e.name.indexOf("<Sprite>")?(e.spriteFrame&&(console.log(e.spriteFrame.name,e.spriteFrame._originalSize.width,e.spriteFrame._originalSize.height,"==comp.spriteFrame.name,comp._originalSize=="),console.log(e.spriteFrame._textureFilename,"==comp.spriteFrame._textureFilename==")),0!=e.type&&console.log(e,"comp.type != 0"),console.log(e.type,e.sizeMode,"==comp.type,comp.sizeMode=="),void(1!=e.trim&&console.log(e.trim,"==comp.trim=="))):-1!=e.name.indexOf("<RigidBody>")?(e.enabledContactListener&&console.log(e.enabledContactListener,"==comp.enabledContactListener=="),e.bullet&&console.log(e.bullet,"==comp.bullet=="),2!=e.type&&console.log(e.type,"==comp.type=="),e.allowSleep||console.log(e.allowSleep,"==comp.allowSleep=="),console.log(e.gravityScale,"==comp.gravityScale=="),0!=e.linearDamping&&console.log(e.linearDamping,"==comp.linearDamping=="),0!=e.angularDamping&&console.log(e.angularDamping,"==comp.angularDamping=="),0==e.linearVelocity.x&&0==e.linearVelocity.y||console.log(e.linearVelocity.x,e.linearVelocity.y,"==comp.linearVelocity=="),0!=e.angularVelocity&&console.log(e.angularVelocity,"==comp.angularVelocity=="),e.fixedRotation&&console.log(e.fixedRotation,"==comp.fixedRotation=="),void(e.awakeOnLoad||console.log(e.awakeOnLoad,"==comp.awakeOnLoad=="))):-1!=e.name.indexOf("<PhysicsCircleCollider>")?(0!=e.tag&&console.log(e.tag,"==comp.tag=="),1!=e.density&&console.log(e.density,"==comp.density=="),0!=e.sensor&&console.log(e.sensor,"==comp.sensor=="),.2!=e.friction&&console.log(e.friction,"==comp.friction=="),0!=e.restitution&&console.log(e.restitution,"==comp.restitution=="),0==e.offset.x&&0==e.offset.y||console.log(e.offset.x,e.offset.y,"==comp.offset.x,comp.offset.y=="),void console.log(e.radius,"==comp.radius==")):-1!=e.name.indexOf("<RevoluteJoint>")?(e.connectedBody&&console.log(e.connectedBody.name,"==comp.connectedBody.name=="),console.log(e.anchor.x,e.anchor.y,"==comp.anchor.x,comp.anchor.y=="),console.log(e.connectedAnchor.x,e.connectedAnchor.y,"==comp.connectedAnchor.x,comp.connectedAnchor.y=="),e.collideConnected||console.log(e.collideConnected,"==comp.collideConnected=="),0!=e.referenceAngle&&console.log(e.referenceAngle,"==comp.referenceAngle=="),0!=e.lowerAngle&&console.log(e.lowerAngle,"==comp.lowerAngle=="),0!=e.upperAngle&&console.log(e.upperAngle,"==comp.upperAngle=="),0!=e.maxMotorTorque&&console.log(e.maxMotorTorque,"==comp.maxMotorTorque=="),0!=e.motorSpeed&&console.log(e.motorSpeed,"==comp.motorSpeed=="),e.enableLimit&&console.log(e.enableLimit,"==comp.enableLimit=="),void(e.enableMotor&&console.log(e.enableMotor,"==comp.enableMotor=="))):-1!=e.name.indexOf("<PhysicsBoxCollider>")?(0!=e.tag&&console.log(e.tag,"==comp.tag=="),1!=e.density&&console.log(e.density,"==comp.density=="),0!=e.sensor&&console.log(e.sensor,"==comp.sensor=="),.2!=e.friction&&console.log(e.friction,"==comp.friction=="),0!=e.restitution&&console.log(e.restitution,"==comp.restitution=="),0==e.offset.x&&0==e.offset.y||console.log(e.offset.x,e.offset.y,"==comp.offset.x,comp.offset.y=="),void console.log(e.size.width,e.size.height,"==comp.size.width,comp.size.height==")):-1!=e.name.indexOf("<WeldJoint>")?(e.connectedBody&&console.log(e.connectedBody.name,"==comp.connectedBody.name=="),console.log(e.anchor.x,e.anchor.y,"==comp.anchor.x,comp.anchor.y=="),console.log(e.connectedAnchor.x,e.connectedAnchor.y,"==comp.connectedAnchor.x,comp.connectedAnchor.y=="),e.collideConnected||console.log(e.collideConnected,"==comp.collideConnected=="),0!=e.referenceAngle&&console.log(e.referenceAngle,"==comp.referenceAngle=="),0!=e.frequency&&console.log(e.frequency,"==comp.frequency=="),void(0!=e.dampingRatio&&console.log(e.dampingRatio,"==comp.dampingRatio=="))):void console.log(e,"\u672a\u627e\u5230\u9884\u8bbecomp==")},e.loopNode=function(e){console.log("\n\n");var t=[];t.push(e.active),t.push(e.position),t.push(e.rotation),t.push(e.scale),t.push(e.getAnchorPoint()),t.push(new cc.Rect(e.width,e.height)),t.push(e.color),t.push(e.opacity),t.push(e.skewX),t.push(e.skewY),t.push(e.zIndex),t.push(e.group),console.log(t,"iiii")},e=t=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],TextureRenderUtils:[function(e,t,n){"use strict";cc._RF.push(t,"d9561T2nZpEy5eEyczWt7cM","TextureRenderUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../wechat/WXUtils"),a=e("../wechat/WXImage"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){this._canvas=null,this.succ=null}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return this.textureRenderUtils},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this.camera=null,this._canvas=null,this.texture=null;var n=new cc.RenderTexture,o=cc.game._renderContext,a=Math.floor(t.width),i=Math.floor(t.height);n.initWithSize(a,i,o.STENCIL_INDEX8),this.camera=e,this.camera.targetTexture=n,this.texture=n},e.prototype.initImage=function(){var e=this._canvas.toDataURL("image/png");return document.createElement("img").src=e,e},e.prototype.createSprite=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,o,a,i,r,s=this;return __generator(this,function(c){return n=this.texture.width,o=this.texture.height,this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=n,this._canvas.height=o),a=this._canvas.getContext("2d"),this.camera.render(e),i=this.texture.readPixels(),r=a.createImageData(n,o),setTimeout(function(){for(var e=4*n,c=0;c<o;c++)for(var l=(o-1-c)*n*4,d=c*n*4,u=0;u<e;u++)r.data[d+u]=i[l+u];a.putImageData(r,0,0),setTimeout(function(){t(s._canvas)},.1)},.1),[2]})})},e.prototype.saveFile=function(e,t,n,a){var i=this;if(cc.sys.platform===cc.sys.WECHAT_GAME){var r={x:0,y:0,width:Math.floor(t),height:Math.floor(n),destWidth:Math.floor(t),destHeight:Math.floor(n),fileType:"png",quality:.8,success:function(e){a(e.tempFilePath),o.default.hideLoading(),i.camera=null}};e.toTempFilePath(r)}},e.prototype.startScreen=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,a,i=this;return __generator(this,function(r){return this.succ=t,o.default.showLoading("\u52a0\u8f7d\u4e2d"),n=new cc.Node,a=n.addComponent(cc.Camera),e.addChild(n),this.init(a,e),this.createSprite(e,function(t){i.saveFile(t,e.width,e.height,i.succ),e.removeChild(n)}),[2]})})},e.prototype.saveScreen=function(e){a.default.saveImageToPhotosAlbum(e)},e.prototype.clearCanvas=function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},e.prototype.readBase64File=function(e,t){wx.getFileSystemManager().readFile({filePath:this.getPhotoFromLocalByName(e),encoding:"utf8",success:function(e){console.log(e),t&&t(e.data)},fail:function(e){console.log("photo data error")}})},e.prototype.writeBase64File=function(e,t,n){var o=this.getPhotoFromLocalByName(e);wx.getFileSystemManager().writeFile({filePath:o,data:t,encoding:"utf8",success:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u6210\u529f"),n&&n()},fail:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u5931\u8d25",e)}})},e.prototype.saveFileToLocal=function(e,t,n){var o=this,a=function(){wx.getFileSystemManager().saveFile({tempFilePath:e,filePath:i,success:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u6210\u529f",i),n&&n(i)},fail:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u5931\u8d25",e)}})},i=this.getPhotoFromLocalByName(t);wx.getFileSystemManager().access({path:i,success:function(e){console.log("\u6587\u4ef6\u5b58\u5728"),o.unlinkPhotoFile(t,a)},fail:function(e){console.log("\u6587\u4ef6\u4e0d\u5b58\u5728",e),a()}})},e.prototype.judgeAccessFile=function(e,t){var n=this.getPhotoFromLocalByName(e);wx.getFileSystemManager().access({path:n,success:function(e){t&&t(!0)},fail:function(e){t&&t(!1)}})},e.prototype.getPhotoFromLocalByName=function(e){return wx.env.USER_DATA_PATH+"/"+e+".png"},e.prototype.unlinkPhotoFile=function(e,t){var n=this.getPhotoFromLocalByName(e);wx.getFileSystemManager().unlink({filePath:n,success:function(e){console.log("\u5220\u9664\u6587\u4ef6\u6210\u529f"),t&&t()},fail:function(e){console.log("\u5220\u9664\u6587\u4ef6\u5931\u8d25",e)}})},e.textureRenderUtils=new t,e=t=__decorate([r],e)}());n.default=s,cc._RF.pop()},{"../wechat/WXImage":"WXImage","../wechat/WXUtils":"WXUtils"}],TipUI:[function(e,t,n){"use strict";cc._RF.push(t,"7fac1qHzOBBS5AxzKDTsw1p","TipUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.info=null,t.okCB=null,t.cancelCB=null,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.setTip=function(e,t,n){this.info.string=e,this.okCB=t,n&&0<n.length&&(this.okBtnLabel.string=n,this.okBtnLabel2.string=n),this.okBtn1.node.active=!0,this.okBtn2.node.active=!1,this.cancelBtn.node.active=!1},t.prototype.setTipOKCancel=function(e,t,n,o,a){this.info.string=e,this.okCB=t,this.cancelCB=n,o&&0<o.length&&(this.okBtnLabel.string=o,this.okBtnLabel2.string=o),a&&0<a.length&&(this.cancelBtnLabel.string=a),this.okBtn1.node.active=!1,this.okBtn2.node.active=!0,this.cancelBtn.node.active=!0},t.prototype.clickOkBtn=function(){this.okCB&&this.okCB(),this.node.active=!1},t.prototype.clickCancelBtn=function(){this.cancelCB&&this.cancelCB(),this.node.active=!1},t.prototype.onEnable=function(){this.showBannerAd()},t.prototype.onDisable=function(){this.hideBannerAD()},t.prototype.showBannerAd=function(){},t.prototype.hideBannerAD=function(){},__decorate([i(cc.Label)],t.prototype,"info",void 0),__decorate([i(cc.Button)],t.prototype,"okBtn1",void 0),__decorate([i(cc.Button)],t.prototype,"okBtn2",void 0),__decorate([i(cc.Button)],t.prototype,"cancelBtn",void 0),__decorate([i(cc.Label)],t.prototype,"okBtnLabel",void 0),__decorate([i(cc.Label)],t.prototype,"okBtnLabel2",void 0),__decorate([i(cc.Label)],t.prototype,"cancelBtnLabel",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],ToogleButtonMain:[function(e,t,n){"use strict";cc._RF.push(t,"2c1d8UEavhBEIpcpQ3nRe+x","ToogleButtonMain"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectedNode=null,t.unselectedNode=null,t.label=null,t._selected=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.refreshUI()},t.prototype.start=function(){},Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected!=e&&(this._selected=e,this.refreshUI())},enumerable:!0,configurable:!0}),t.prototype.refreshUI=function(){this.selectedNode.active=this._selected,this.unselectedNode.active=!this._selected,this.label.node.color=this._selected?(new cc.Color).fromHEX("#ffffff"):(new cc.Color).fromHEX("#666666")},__decorate([i(cc.Node)],t.prototype,"selectedNode",void 0),__decorate([i(cc.Node)],t.prototype,"unselectedNode",void 0),__decorate([i(cc.Label)],t.prototype,"label",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],TopContent:[function(e,t,n){"use strict";cc._RF.push(t,"c7a50EZD0RDXLTZkgdskkgB","TopContent"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../GameUtils"),a=e("../../SoundMgr"),i=e("../../module/data/StageDataMgr"),r=e("./GameConfig"),s=e("../../gamecore/managers/GameManager"),c=e("../../gamecore/GameCoreEventNames"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletNormal=null,t.bulletLight=null,t.bulletPanel=null,t.skipBtn=null,t.txtStageInfo=null,t.txtShareNum=null,t.txtVideoNum=null,t.txtTryTimeNum=null,t.addNode=null,t.freshTip=null,t.helpBtnNode=null,t.canSkip=!1,t.refreshCount=0,t.locked=!1,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.bulletNormal.active=!1,this.bulletLight.active=!1,s.default.eventManager.addEventListener(c.default.DATA_CHANGE,this.onDataChange,this),this.addNode.active=!1,i.default.CUR_MODE==r.MODE_TYPE_STRUCT.MODE1&&i.default.CUR_LEVEL<=10&&(this.freshTip.active=!0,this.freshTip.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){e.freshTip.active=!1})))),this.refreshRefreshCount(),this.txtShareNum.string="+"+r.default.instance.gameMeta.settlementRewardMeta[0].shareRefreshNum,this.txtVideoNum.string="+"+r.default.instance.gameMeta.settlementRewardMeta[0].videoRefreshNum,this.helpBtnNode&&i.default.CUR_MODE==r.MODE_TYPE_STRUCT.MODE1&&(i.default.CUR_LEVEL<=16&&(1==i.default.CUR_LEVEL||2==i.default.CUR_LEVEL||5==i.default.CUR_LEVEL||4==i.default.CUR_LEVEL||7==i.default.CUR_LEVEL||6==i.default.CUR_LEVEL||15==i.default.CUR_LEVEL||16==i.default.CUR_LEVEL)?(this.helpBtnNode.active=!0,this.refreshHelpBtnState(),this.helpBtnNode.on(cc.Node.EventType.TOUCH_END,function(){i.default.SHOW_HELP_BTN=!i.default.SHOW_HELP_BTN,e.refreshHelpBtnState()},this.helpBtnNode)):this.helpBtnNode.active=!1)},t.prototype.refreshHelpBtnState=function(){this.helpBtnNode.children[0].active=i.default.SHOW_HELP_BTN,this.helpBtnNode.children[1].active=!i.default.SHOW_HELP_BTN,cc.find("Canvas/content").getChildByName("helpPanel")&&(cc.find("Canvas/content").getChildByName("helpPanel").active=i.default.SHOW_HELP_BTN)},t.prototype.start=function(){this.txtStageInfo.string="\u5f53\u524d\u5173\u5361:"+i.default.CUR_LEVEL;var e=i.default.instance.getData(i.default.KEY_PASS_STAGE_ARR)[i.default.CUR_MODE];e[i.default.CUR_LEVEL-1]?(this.canSkip=!1,this.skipBtn.getChildByName("Background").color=cc.color(100,99,99),i.default.IS_NEW_STAGE=!1,i.default.CUR_STARS=e[i.default.CUR_LEVEL-1].star):(this.canSkip=!0,this.skipBtn.getChildByName("Background").color=cc.color(255,255,255),i.default.IS_NEW_STAGE=!0,i.default.CUR_STARS=0)},t.prototype.onDataChange=function(e){var t=e.data;t!=i.default.KEY_REFRESH_COUNT_ARR&&t!=i.default.KEY_EARN_REFRESH_COUNT_INFO||this.refreshRefreshCount()},t.prototype.refreshRefreshCount=function(){var e=this;if(i.default.instance.judgeIsFreeStage(i.default.CUR_MODE,i.default.CUR_LEVEL))this.refreshCount=999,this.txtTryTimeNum.string="";else{var t=0,n=i.default.instance.getData(i.default.KEY_EARN_REFRESH_COUNT_INFO);if(n.curMode==i.default.CUR_MODE&&n.curStageNum==i.default.CUR_LEVEL)t=n.refreshCount;else{n.curMode=i.default.CUR_MODE,n.curStageNum=i.default.CUR_LEVEL,n.refreshCount=0,i.default.instance.setData(i.default.KEY_EARN_REFRESH_COUNT_INFO,{curMode:n.curMode,curStageNum:n.curStageNum,refreshCount:n.refreshCount});var o;o=r.default.instance.gameMeta.newModeUnlockMeta[i.default.CUR_MODE].refreshNum,i.default.instance.setRefreshCount(i.default.CUR_MODE,i.default.CUR_LEVEL,o)}this.refreshCount=i.default.instance.getRefreshCount(i.default.CUR_MODE,i.default.CUR_LEVEL)+t,this.txtTryTimeNum.string=this.refreshCount+""}0==this.refreshCount&&(this.freshTip.active=!1),this.refreshCount>0?this.addNode.active=!1:(this.addNode.active=!0,this.addNode.stopAllActions(),this.addNode.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.delayTime(5),cc.callFunc(function(){e.addNode.active=!1}))))},t.prototype.onShareClickEvent=function(e){var t=this;a.default.instance.playTapSound(),o.default.instance.playFailOnShare(function(e){switch(e){case 1:t.addRefreshTime(r.default.instance.gameMeta.settlementRewardMeta[0].shareRefreshNum)}},"refreshShare")},t.prototype.addRefreshTime=function(e){e>0&&o.default.showToast("\u606d\u559c\u83b7\u5f97"+e+"\u6b21\u5237\u65b0\u673a\u4f1a!");var t=i.default.instance.getData(i.default.KEY_EARN_REFRESH_COUNT_INFO);t.curMode==i.default.CUR_MODE&&t.curStageNum==i.default.CUR_LEVEL?t.refreshCount+=e:(t.curMode=i.default.CUR_MODE,t.curStageNum=i.default.CUR_LEVEL,t.refreshCount=e),i.default.instance.setData(i.default.KEY_EARN_REFRESH_COUNT_INFO,{curMode:t.curMode,curStageNum:t.curStageNum,refreshCount:t.refreshCount})},t.prototype.watchVideoAd=function(){var e=this;o.default.instance.showVideoAd(function(){e.addRefreshTime(r.default.instance.gameMeta.settlementRewardMeta[0].videoRefreshNum)},function(){o.default.showAlert("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u53ef\u83b7\u5f97"+r.default.instance.gameMeta.settlementRewardMeta[0].videoRefreshNum+"\u5237\u65b0\u673a\u4f1a",function(){e.watchVideoAd()})},function(){o.default.instance.playFailOnShare(function(t){switch(t){case 1:e.addRefreshTime(r.default.instance.gameMeta.settlementRewardMeta[0].videoRefreshNum)}},"refreshShare")})},t.prototype.refreshAllBullet=function(e,t){this.bulletPanel.removeAllChildren();for(var n=0;n<e;n++)this.addNormalBulletItem();for(n=0;n<t;n++)this.addLightBulletItem()},t.prototype.addNormalBulletItem=function(){var e=cc.instantiate(this.bulletNormal);e.active=!0,this.bulletPanel.addChild(e)},t.prototype.removeBulletItem=function(){this.bulletPanel.removeChild(this.bulletPanel.children[this.bulletPanel.childrenCount-1])},t.prototype.addLightBulletItem=function(){var e=cc.instantiate(this.bulletLight);e.active=!0,this.bulletPanel.addChild(e)},t.prototype.onBackSceneClickEvent=function(e){a.default.instance.playTapSound(),o.default.instance.loadSceneWithOperate("modeListScene"),o.default.buriedPoint(19)},t.prototype.restartClickEvent=function(e){var t=this;if(a.default.instance.playTapSound(),i.default.instance.judgeIsFreeStage(i.default.CUR_MODE,i.default.CUR_LEVEL));else{if(this.refreshCount<=0)return this.addNode.active=!0,this.addNode.stopAllActions(),this.addNode.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,1),cc.delayTime(5),cc.callFunc(function(){t.addNode.active=!1}))),void o.default.showToast("\u5237\u65b0\u6b21\u6570\u4e0d\u8db3");if(this.locked)return;this.locked=!0,this.refreshCount<=i.default.instance.getData(i.default.KEY_EARN_REFRESH_COUNT_INFO).refreshCount?this.addRefreshTime(-1):i.default.instance.setRefreshCount(i.default.CUR_MODE,i.default.CUR_LEVEL,i.default.instance.getRefreshCount(i.default.CUR_MODE,i.default.CUR_LEVEL)-1)}o.default.instance.loadSceneWithOperate("map"),o.default.buriedPoint(20)},t.prototype.share=function(){},t.prototype.skipStageClickEvent=function(e){a.default.instance.playTapSound(),this.canSkip?(o.default.loadRes("prefabs/stage/skipPanel",cc.Prefab,!0,function(e){cc.find("Canvas").addChild(cc.instantiate(e))}),o.default.buriedPoint(21)):o.default.showToast("\u6b64\u5173\u5df2\u901a\u8fc7")},t.prototype.onDestroy=function(){s.default.eventManager.removeEventListener(c.default.DATA_CHANGE,this.onDataChange,this)},__decorate([u(cc.Node)],t.prototype,"bulletNormal",void 0),__decorate([u(cc.Node)],t.prototype,"bulletLight",void 0),__decorate([u(cc.Node)],t.prototype,"bulletPanel",void 0),__decorate([u(cc.Node)],t.prototype,"skipBtn",void 0),__decorate([u(cc.Label)],t.prototype,"txtStageInfo",void 0),__decorate([u(cc.Label)],t.prototype,"txtShareNum",void 0),__decorate([u(cc.Label)],t.prototype,"txtVideoNum",void 0),__decorate([u(cc.Label)],t.prototype,"txtTryTimeNum",void 0),__decorate([u(cc.Node)],t.prototype,"addNode",void 0),__decorate([u(cc.Node)],t.prototype,"freshTip",void 0),__decorate([u(cc.Node)],t.prototype,"helpBtnNode",void 0),t=__decorate([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../GameUtils":"GameUtils","../../SoundMgr":"SoundMgr","../../gamecore/GameCoreEventNames":"GameCoreEventNames","../../gamecore/managers/GameManager":"GameManager","../../module/data/StageDataMgr":"StageDataMgr","./GameConfig":"GameConfig"}],Transparent:[function(e,t,n){"use strict";cc._RF.push(t,"ddb14dhg7lOvpzLnsaa99Ns","Transparent"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Common"),a=e("./GameConfig"),i=e("../../module/data/StageDataMgr"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPass=!1,t.rigidBody=null,t}return __extends(t,e),t.prototype.start=function(){this.rigidBody=this.node.getComponent(cc.RigidBody)},t.prototype.onBeginContact=function(e,t,n){var r=this;if(n.tag==o.default.Tag.tagBullet){if(this.bulletPass)e.disabled=!0;else if(86==i.default.CUR_LEVEL&&i.default.CUR_MODE==a.MODE_TYPE_STRUCT.MODE1){var s=e.getWorldManifold().points[0],c=n.getComponent(cc.RigidBody).linearVelocity.normalize();this.scheduleOnce(function(){r.rigidBody.applyForce(c.mul(5e6),s,!0)},0)}}else n.tag==o.default.Tag.tagCubeBox||n.tag==o.default.Tag.tagMoveCube||n.tag==o.default.Tag.tagDeath?e.disabled=!0:n.tag==o.default.Tag.tagBodyJoint&&n.node.parent.getComponent("RoleController")&&n.node.parent.getComponent("RoleController").isHit&&(e.disabled=!0)},t=__decorate([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr","./Common":"Common","./GameConfig":"GameConfig"}],UIManager:[function(e,t,n){"use strict";cc._RF.push(t,"4a096NY53lGq6MHqn+hJhDi","UIManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.listPrefab=[],t.listUI=[],t}return __extends(t,e),t.prototype.start=function(){for(var e=0;e<this.listPrefab.length;e++)this.listPrefab[e]&&cc.log(this.listPrefab[e].name)},t.prototype.showUI=function(e){if(t=this.hasUI(e))return t.active=!0,t.parent=null,t.parent=this.node,t;var t,n=this.getPrefabByName(e);return n?((t=cc.instantiate(n)).parent=this.node,t.active=!0,this.listUI.push(t),t):void cc.log("have not prefab: ",e)},t.prototype.hideUI=function(e){for(var t=0;t<this.listUI.length;t++)if(this.listUI[t].name==e)return void(this.listUI[t].active=!1)},t.prototype.hasUI=function(e){for(var t=0;t<this.listUI.length;t++)if(this.listUI[t].name==e)return this.listUI[t];return null},t.prototype.getUI=function(e){for(var t=0;t<this.listUI.length;t++)if(this.listUI[t].name==e)return this.listUI[t];return null},t.prototype.hideAll=function(){for(var e=0;e<this.listUI.length;e++)this.listUI[e].active=!1},t.prototype.getPrefabByName=function(e){for(var t=0;t<this.listPrefab.length;t++)if(this.listPrefab[t].name==e)return this.listPrefab[t];return null},t.prototype.showTip=function(e,t){var n=this.showUI("TipUI");n&&n.getComponent("TipUI").setTip(e,t)},t.prototype.showTipOKCancel=function(e,t,n,o,a){var i=this.showUI("TipUI");i&&i.getComponent("TipUI").setTipOKCancel(e,t,n,o,a)},__decorate([i(cc.Prefab)],t.prototype,"listPrefab",void 0),__decorate([i(cc.Node)],t.prototype,"listUI",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],UserHelp:[function(e,t,n){"use strict";cc._RF.push(t,"dff3dZ1SjZNXK7+REfL3rv0","UserHelp"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../module/data/StageDataMgr"),a=cc._decorator,i=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.arrow=null,t.crosshair=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.active=o.default.SHOW_HELP_BTN},t.prototype.start=function(){5==o.default.CUR_LEVEL||10==o.default.CUR_LEVEL||15==o.default.CUR_LEVEL?this.arrow.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3,cc.v2(-10,0)),cc.moveBy(.6,cc.v2(20,0)),cc.moveBy(.3,cc.v2(-10,0))))):this.arrow.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3,cc.v2(0,-10)),cc.moveBy(.6,cc.v2(0,20)),cc.moveBy(.3,cc.v2(0,-10))))),this.crosshair.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.6,10),cc.fadeTo(.6,255))))},__decorate([r(cc.Node)],t.prototype,"arrow",void 0),__decorate([r(cc.Node)],t.prototype,"crosshair",void 0),t=__decorate([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../module/data/StageDataMgr":"StageDataMgr"}],UserHpContent:[function(e,t,n){"use strict";cc._RF.push(t,"eb080j/O4VKIoUYX8ryLtC+","UserHpContent"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../module/data/StageDataMgr"),a=e("../gamecore/managers/GameManager"),i=e("../gamecore/GameCoreEventNames"),r=e("../SoundMgr"),s=e("../GameUtils"),c=e("../view/stageMode/GameConfig"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txtHp=null,t.txtTimer=null,t}return __extends(t,e),t.prototype.onLoad=function(){a.default.eventManager.addEventListener(i.default.DATA_CHANGE,this.onDataChange,this),this.refreshHpNum()},t.prototype.start=function(){var e=this;this.txtTimer&&(this.txtTimer.string=s.default.timeFormat(1e3*c.default.instance.gameMeta.energyMeta[0].recoverInterval-o.default.HP_TIMER),this.schedule(function(){o.default.instance.getData(o.default.KEY_USER_HP_NUM)>=c.default.instance.gameMeta.energyMeta[0].upperLimit?e.txtTimer.string="\u4f53\u529b\u5df2\u6ee1":(o.default.HP_TIMER>1e3*c.default.instance.gameMeta.energyMeta[0].recoverInterval&&(o.default.HP_TIMER=1e3*c.default.instance.gameMeta.energyMeta[0].recoverInterval),e.txtTimer.string=s.default.timeFormat(1e3*c.default.instance.gameMeta.energyMeta[0].recoverInterval-o.default.HP_TIMER))},1,cc.macro.REPEAT_FOREVER))},t.prototype.onDataChange=function(e){e.data!=o.default.KEY_USER_HP_NUM||this.refreshHpNum()},t.prototype.refreshHpNum=function(){var e=o.default.instance.getData(o.default.KEY_USER_HP_NUM);this.txtHp.string=e+"/"+c.default.instance.gameMeta.energyMeta[0].upperLimit},t.prototype.addHpClickEvent=function(e){if(e){if(r.default.instance.playTapSound(),o.default.instance.getData(o.default.KEY_USER_HP_NUM)>=c.default.instance.gameMeta.energyMeta[0].upperLimit)return void s.default.showToast("\u4f53\u529b\u5df2\u6ee1");s.default.buriedPoint(2)}s.default.instance.openKeyGiftEvent(this.node)},t.prototype.onDestroy=function(){a.default.eventManager.removeEventListener(i.default.DATA_CHANGE,this.onDataChange,this)},__decorate([u(cc.Label)],t.prototype,"txtHp",void 0),__decorate([u(cc.Label)],t.prototype,"txtTimer",void 0),t=__decorate([d],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../GameUtils":"GameUtils","../SoundMgr":"SoundMgr","../gamecore/GameCoreEventNames":"GameCoreEventNames","../gamecore/managers/GameManager":"GameManager","../module/data/StageDataMgr":"StageDataMgr","../view/stageMode/GameConfig":"GameConfig"}],UsersData:[function(e,t,n){"use strict";cc._RF.push(t,"99d0bxlWnpLV4rkXpYj/3DH","UsersData"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../scripts/gamecore/deer/DeerSDK"),a=e("../../../scripts/gamecore/deer/DeerSDKEventNames"),i=cc._decorator,r=i.ccclass,s=(i.property,function(){function e(){var e=this;if(this._readyCallbacks=[],t._instance)throw new Error("Please use static instance property!");t._instance=this,o.default.instance.isReady?this.loadData():o.default.instance.addEventListener(a.default.READY,function(t){e.loadData()},this,0,!0)}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||new t,t._instance},enumerable:!0,configurable:!0}),e.prototype.onReady=function(e){-1==this._readyCallbacks.indexOf(e)&&this._readyCallbacks.push(e)},e.prototype.offReady=function(e){var t=this._readyCallbacks.indexOf(e);-1!=t&&this._readyCallbacks.splice(t,1)},e.prototype.loadData=function(){o.default.instance.user_friendsAll?this.friendsUpdateHandler(null):o.default.instance.addEventListener(a.default.FRIENDS_UPDATE,this.friendsUpdateHandler,this),o.default.instance.game_getRandomUsers(this.randomUsersCallback.bind(this))},e.prototype.friendsUpdateHandler=function(e){o.default.instance.removeEventListener(a.default.FRIENDS_UPDATE,this.friendsUpdateHandler,this),this._originalFriendsData=o.default.instance.user_friendsAll,this._originalFriendsData||(this._originalFriendsData=[]),this.doDataReady()},e.prototype.randomUsersCallback=function(e){this._originalRandomUsersData=e,this._originalFriendsData||(this._originalFriendsData=[]),this.doDataReady()},e.prototype.doDataReady=function(){this._originalFriendsData&&this._originalRandomUsersData&&(this._users=this._originalFriendsData.concat(this._originalRandomUsersData),this._readyCallbacks.forEach(function(e){e()}))},e.prototype.getUsers=function(e){if(!this._users||0==this._users.length)return null;if(e>=this._users.length){var t=this._users;return this._users=[],t}var n=[];for(e=Math.min(e,this._users.length);e>0;){var o=Math.floor(Math.random()*this._users.length);n.push(this._users.splice(o,1)[0]),e--}return n},e.prototype.resetData=function(){this._users=[],this._originalFriendsData&&(this._users=this._users.concat(this._originalFriendsData)),this._originalRandomUsersData&&(this._users=this._users.concat(this._originalRandomUsersData))},e=t=__decorate([r],e)}());n.default=s,cc._RF.pop()},{"../../../scripts/gamecore/deer/DeerSDK":"DeerSDK","../../../scripts/gamecore/deer/DeerSDKEventNames":"DeerSDKEventNames"}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"9f7c0EPgJBJLb2asY1+y12v","Utils"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../wechat/WXDevice"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}var t;return t=e,Object.defineProperty(e,"iphoneXTopBarHeight",{get:function(){return 44},enumerable:!0,configurable:!0}),Object.defineProperty(e,"iphoneBottomBarHeight",{get:function(){return/iphone/gi.test(navigator.userAgent)&&devicePixelRatio&&3===devicePixelRatio&&375===screen.width&&812===screen.height?34:/iphone/gi.test(navigator.userAgent)&&devicePixelRatio&&3===devicePixelRatio&&414===screen.width&&896===screen.height?34:/iphone/gi.test(navigator.userAgent)&&devicePixelRatio&&2===devicePixelRatio&&414===screen.width&&896===screen.height?34:0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIphoneX",{get:function(){try{return/iphone/gi.test(navigator.userAgent)&&812==screen.height&&375==screen.width}catch(e){}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIphoneXR",{get:function(){try{return/iphone/gi.test(navigator.userAgent)&&896==screen.height&&414==screen.width}catch(e){}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIphone6",{get:function(){try{if(/iphone/gi.test(navigator.userAgent)&&-1!=o.default.systemInfo.model.indexOf("iPhone 6"))return!0}catch(e){}return!1},enumerable:!0,configurable:!0}),e.getSnapshot=function(){var e=new cc.Node;e.width=cc.winSize.width,e.height=cc.winSize.height;var t=e.addComponent(cc.Sprite),n=cc.Camera.findCamera(cc.director.getScene()),o=cc.game._renderContext,a=new cc.RenderTexture;return a.initWithSize(cc.winSize.width,cc.winSize.height,o.STENCIL_INDEX8),n.targetTexture=a,t.spriteFrame=new cc.SpriteFrame(a),n.render(cc.director.getScene()),n.targetTexture=null,e},e.toScreenRect=function(e){var n=cc.winSize,o=e.clone();o.x=e.xMin,o.y=n.height-o.yMax;cc.view.getFrameSize();var a=t.getCanvasScaleFactor();return o.x*=a,o.y*=a,o.width*=a,o.height*=a,o},e.fromScreenRect=function(e){if(!e)return null;cc.winSize;var n=e.clone(),o=cc.view.getFrameSize();n.y=o.height-n.y-n.height;var a=t.getCanvasScaleFactor();return n.x/=a,n.y/=a,n.width/=a,n.height/=a,new cc.Rect(n.x,n.y,n.width,n.height)},e.toInt=function(e){var t=parseInt(""+e);return isNaN(t)&&(t=0),t},e.scaleContentAuto=function(e){var t=cc.winSize;t.height/t.width>1334/750&&(e.scale=t.width/750)},e.getCanvasScaleFactor=function(){var e=!0;try{e=cc.director.getScene().children[0].getComponent(cc.Canvas).fitHeight}catch(e){}var t=cc.view.getFrameSize();return e?t.height/cc.winSize.height:t.width/cc.winSize.width},e.labelStringToValue=function(e,n,o){if(void 0===o&&(o=.5),!isNaN(n)){var a=parseInt(e.string);if((isNaN(a)||a<0)&&(a=0),a!=n){var i=e.uuid;clearInterval(this._labelToValueMap[i]);var r=(n-a)/10,s=0;this._labelToValueMap[i]=setInterval(function(){10==++s?(e.string=""+n,clearInterval(t._labelToValueMap[i])):e.string=""+(a+Math.floor(r*s))},50)}}},e.newPoint=function(e){void 0===e&&(e=!1);var t=new cc.Node;if(t.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame("https://deer-cdn.youkongwan.com/common/blank_debug.png"),t.width=2,t.height=2,e){var n=t.addComponent(cc.Widget);n.isAlignTop=!0,n.top=0,n.isAlignLeft=!0,n.left=0,n.isAlignRight=!0,n.right=0,n.isAlignBottom=!0,n.bottom=0,n.alignMode=cc.Widget.AlignMode.ALWAYS}return t},e.positionToPosition=function(e,t,n){return(e=new cc.Vec2(e.x,e.x)).x+=t.width*t.anchorX,e.y+=t.height*t.anchorY,e=t.convertToWorldSpace(e),n&&((e=n.convertToNodeSpace(e)).x-=n.width*n.anchorX,e.y-=n.height*n.anchorY),e},e._labelToValueMap={},e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../wechat/WXDevice":"WXDevice"}],WXBannerAdBase:[function(e,t,n){"use strict";cc._RF.push(t,"c638d0HKrdLZb5HG1hKjbE7","WXBannerAdBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GameCoreLocation"),a=e("../managers/event/EventDispacher"),i=cc._decorator,r=i.ccclass,s=(i.property,function(e){function t(t,a,i,r,s,c){void 0===a&&(a=o.GameCoreLocation.BOTTOM_CENTER),void 0===i&&(i=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===c&&(c=0);var l=e.call(this)||this;return l._maxHeight=0,l._maxWidth=0,l.borderWeight=2,l._vertialIndent=0,l._horizontalIndent=0,l._isShowing=!1,n._ads.push(l),l._adID=t,l._location=a,l._vertialIndent=i,l._horizontalIndent=r,l._maxHeight=s,l._maxWidth=c,l.createAd(),l}var n;return __extends(t,e),n=t,Object.defineProperty(t,"currentAd",{get:function(){return 0==n._ads.length?null:n._ads[n._ads.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bannerAd",{get:function(){return this._bannerAd},enumerable:!0,configurable:!0}),t.prototype.createAd=function(){},Object.defineProperty(t.prototype,"adRect",{get:function(){return this._adRect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"adWidth",{get:function(){return this._adRect?this._adRect.width:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"adHeight",{get:function(){return this._adRect?this._adRect.height:0},enumerable:!0,configurable:!0}),t.prototype.relayout=function(){},Object.defineProperty(t.prototype,"isShowing",{get:function(){return this._isShowing},enumerable:!0,configurable:!0}),t.prototype.next=function(){},t.prototype.show=function(){},t.prototype.hide=function(){},t.prototype.destory=function(){if(!this._destoried){this._destoried=!0;var t=n._ads.indexOf(this);t>=0&&n._ads.splice(t,1),e.prototype.destory.call(this)}},t._ads=[],t=n=__decorate([r],t)}(a.default));n.default=s,cc._RF.pop()},{"../GameCoreLocation":"GameCoreLocation","../managers/event/EventDispacher":"EventDispacher"}],WXBannerAd:[function(e,t,n){"use strict";cc._RF.push(t,"c1ef1RWepZEF4nKQFISyIOt","WXBannerAd"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./WXEventNames"),a=e("../managers/Utils"),i=e("../GameCoreLocation"),r=e("./WXBannerAdBase"),s=e("../deer/DeerSDK"),c=cc._decorator,l=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._firstResizeDone=!1,t}return __extends(t,e),Object.defineProperty(t,"currentAd",{get:function(){return 0==r.default._ads.length?null:r.default._ads[r.default._ads.length-1]},enumerable:!0,configurable:!0}),t.prototype.createAd=function(){var e=this;if("undefined"!=typeof wx){if(null==this._bannerAd){var t=cc.view.getFrameSize(),n=cc.winSize,o=0;o=this._maxHeight>0?960/334*this._maxHeight:n.width,o*=a.default.getCanvasScaleFactor(),o=Math.min(t.width-2*this.borderWeight,o);var r=0,s=0;switch(this._location){case i.GameCoreLocation.BOTTOM_CENTER:r=(t.width-o)/2,s=t.height;break;case i.GameCoreLocation.TOP_CENTER:r=(t.width-o)/2,s=0}r+=this.borderWeight,s+=this.borderWeight,o-=2*this.borderWeight;var c={left:r,top:s};c.width=o,this._bannerAd=wx.createBannerAd({adUnitId:this._adID,style:c})}this._bannerAd&&(this._bannerAd.onLoad(function(){e._destoried||e.adLoadCallback()}),this._bannerAd.onResize(function(t){e._destoried||e.adResizeCallback(t)}),this._bannerAd.onError(function(t){e._destoried||e.adErrorCallback(t)}),"undefined"!=typeof wx&&wx.onHide(this.wxOnHide.bind(this)))}},t.prototype.wxOnHide=function(e){if(e)if(this._destoried)wx.offHide(this.wxOnHide.bind(this));else{var t=e.targetAction,n=e.targetPagePath;if((-1==t||8==t||9==t||n)&&this._bannerAd&&this._isShowing){if(s.DeerAdVO.lastNavigateTime){var o=(new Date).getTime()-s.DeerAdVO.lastNavigateTime.getTime();if(console.log("DeerAdVO.lastNavigateTime delay(ms)",o),o<5e3)return}s.default.instance.track(s.DeerTrackAction.WX_BAD_CLICK,null,!0)}}},t.prototype.relayout=function(){if(this._bannerAd&&this._bannerAd.style){var e=this._bannerAd.style.realWidth,t=this._bannerAd.style.realHeight,n=this._bannerAd.style.width;if(isNaN(n)||n<=0||isNaN(e)||isNaN(t))return this.dispatchEventWith(o.default.BANNER_AD_ERROR),void this.destory();var r=cc.view.getFrameSize(),s=(cc.winSize,0),c=0;switch(this._location){case i.GameCoreLocation.BOTTOM_CENTER:s=(r.width-e)/2,c=r.height-t-this.borderWeight;break;case i.GameCoreLocation.TOP_CENTER:s=(r.width-e)/2,c=this.borderWeight}s+=this._horizontalIndent,c+=this._vertialIndent,c-=a.default.iphoneBottomBarHeight,s=Math.floor(s),c=Math.floor(c),this._bannerAd&&(this._bannerAd.style.left=s,this._bannerAd.style.top=c),this._adRect=new cc.Rect(s-this.borderWeight,c-this.borderWeight,e+2*this.borderWeight,t+2*this.borderWeight),this.dispatchEventWith(o.default.BANNER_AD_RESIZE)}},t.prototype.next=function(){this.dispatchEventWith(o.default.BANNER_AD_NEXT)},t.prototype.show=function(){this._destoried||(this._bannerAd&&this._firstResizeDone&&(this._bannerAd.show(),s.default.instance.track(s.DeerTrackAction.WX_BAD_SHOW)),this._isShowing=!0,this.dispatchEventWith(o.default.BANNER_AD_SHOW))},t.prototype.hide=function(){this._destoried||(this._bannerAd&&this._firstResizeDone&&this._bannerAd.hide(),this._isShowing=!1,this.dispatchEventWith(o.default.BANNER_AD_HIDE,this))},t.prototype.destory=function(){this._destoried||(e.prototype.destory.call(this),this._bannerAd&&(this._bannerAd.destroy(),this._bannerAd=null),"undefined"!=typeof wx&&wx.offHide(this.wxOnHide.bind(this)))},t.prototype.adLoadCallback=function(){},t.prototype.adResizeCallback=function(e){0==this._firstResizeDone&&(this._firstResizeDone=!0,this._isShowing?(this._bannerAd.show(),s.default.instance.track(s.DeerTrackAction.WX_BAD_SHOW)):this._bannerAd.hide()),setTimeout(this.relayout.bind(this),1e3)},t.prototype.adErrorCallback=function(e){this.dispatchEventWith(o.default.BANNER_AD_ERROR)},t=__decorate([l],t)}(r.default));n.default=d,cc._RF.pop()},{"../GameCoreLocation":"GameCoreLocation","../deer/DeerSDK":"DeerSDK","../managers/Utils":"Utils","./WXBannerAdBase":"WXBannerAdBase","./WXEventNames":"WXEventNames"}],WXCore:[function(e,t,n){"use strict";cc._RF.push(t,"f2441WgjFRCrqfwvisHCs6E","WXCore"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],WXData:[function(e,t,n){"use strict";cc._RF.push(t,"adbb5qUndVOR70qcZ/h6lOy","WXData"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return Object.defineProperty(e,"fromAppID",{get:function(){if(console.log("----  WXData ----"),console.log("-  fromAppID  -"),"undefined"==typeof wx)return null;if(void 0==this._fromAppID){var e=wx.getLaunchOptionsSync();if(e&&e.referrerInfo){var t=e.referrerInfo;this._fromAppID=t.appId}}return this._fromAppID},enumerable:!0,configurable:!0}),Object.defineProperty(e,"dataFromPath",{get:function(){if(console.log("----  WXData ----"),console.log("-  dataFromPath  -"),"undefined"==typeof wx)return null;if(!this._dataFromPath){var e=wx.getLaunchOptionsSync();e&&e.query?this._dataFromPath=e.query:this._dataFromPath={}}return this._dataFromPath},enumerable:!0,configurable:!0}),Object.defineProperty(e,"dataFromApp",{get:function(){if(console.log("----  WXData ----"),console.log("-  dataFromApp  -"),"undefined"==typeof wx)return null;if(!this._dataFromApp){var e=wx.getLaunchOptionsSync();if(e&&e.referrerInfo){var t=e.referrerInfo;this._dataFromApp=t.extraData}else this._dataFromApp={}}return this._dataFromApp},enumerable:!0,configurable:!0}),e._fromAppID=void 0,e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],WXDevice:[function(e,t,n){"use strict";cc._RF.push(t,"86599K1rahAUqop7Obco3Cn","WXDevice"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}var t;return t=e,e.getSystemInfo=function(){if(console.log("----  WXDevice ----"),console.log("-  getSystemInfo  -"),"undefined"!=typeof wx){var e=wx.getSystemInfoSync();if(e&&void 0!=e.benchmarkLevel){var n=parseInt(""+e.benchmarkLevel);!isNaN(n)&&n>0&&(t._benchmarkLevel=n)}t._systemInfo=e}},Object.defineProperty(e,"systemInfo",{get:function(){return t._systemInfo||t.getSystemInfo(),t._systemInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SDKVersion",{get:function(){return t._systemInfo||t.getSystemInfo(),t._systemInfo?t._systemInfo.SDKVersion:null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"benchmarkLevel",{get:function(){return t._benchmarkLevel},enumerable:!0,configurable:!0}),e.vibrateShort=function(){if(o.default.canVibrate){if("undefined"!=typeof wx)try{wx.vibrateShort({})}catch(e){console.log("catch a error from wx:"),console.log(e)}}else console.log("\u5df2\u8bbe\u7f6e\u4e0d\u53ef\u9707\u52a8(GameManager.canVibrate")},e.vibrateLong=function(){if(console.log("----  WXDevice  ----"),console.log("-  vibrateLong  -"),o.default.canVibrate){if("undefined"!=typeof wx)try{wx.vibrateLong({})}catch(e){console.log("catch a error from wx:"),console.log(e)}}else console.log("\u5df2\u8bbe\u7f6e\u4e0d\u53ef\u9707\u52a8(GameManager.canVibrate")},e._benchmarkLevel=-1,e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../managers/GameManager":"GameManager"}],WXEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"a11f0FzqodOqLijwEeUJizD","WXEventNames"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.BANNER_AD_RESIZE="bannerAdResize",e.BANNER_AD_SHOW="bannerAdShow",e.BANNER_AD_HIDE="bannerAdHide",e.BANNER_AD_NEXT="bannerAdNext",e.BANNER_AD_ERROR="bannerAdError",e.REWARD_VIDEO_AD_CLOSE="rewardVideoAdClose",e.REWARD_VIDEO_AD_COMPLETE="rewardVideoAdComplete",e.REWARD_VIDEO_AD_READY="rewardVideoAdReady",e.REWARD_VIDEO_AD_ERROR="rewardVideoAdError",e.INTERSTITIAL_AD_CLOSE="interstitialAdClose",e.INTERSTITIAL_AD_ERROR="interstitialAdComplete",e.INTERSTITIAL_AD_READY="interstitialAdReady",e.IMAGE_SNAPSHOT_START="imageSnapshotStart",e.IMAGE_SNAPSHOT_END="imageSnapshotEnd",e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],WXImage:[function(e,t,n){"use strict";cc._RF.push(t,"13a2a3Pz/ZP8piSWpMpBEVU","WXImage"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=e("../platforms/QQCM_getAvatarFromOpenId"),i=e("../base/GameValues"),r=e("./WXEventNames"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function e(){}var t;return t=e,e.createImage=function(e){if(console.log("----  WXImage ----"),console.log("-  createImage  -"),!e)return null;e.length<1e3&&console.log(e);var t=new cc.SpriteFrame;if(i.default.currentPlatform==i.PlatformName.IOS||"undefined"==typeof wx)cc.loader.load(e,function(e,n){n&&t.setTexture(n)});else if(i.default.currentPlatform==i.PlatformName.QQCM&&-1==e.indexOf("/"))a.QQCM_getAvatarFromOpenId(e,function(e){cc.loader.load(e,function(e,n){t.setTexture(n)})});else if("undefined"!=typeof wx){var n=new cc.Texture2D,o=wx.createImage();o.src=e,o.onload=function(){n.initWithElement(o),n.handleLoadedTexture()},t.setTexture(n)}return t},e.saveImageToPhotosAlbum=function(e,t,n,o){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),console.log("----  WXImage ----"),console.log("-  saveImageToPhotosAlbum  -"),console.log(e),"undefined"!=typeof wx)try{wx.saveImageToPhotosAlbum({filePath:e,success:t,fail:n,complete:o})}catch(e){}},e.previewImage=function(e){if(console.log("----  WXImage ----"),console.log("-  previewImage  -"),console.log(e),"undefined"!=typeof wx)try{wx.previewImage({urls:e})}catch(e){}},e.getSnapshotFile=function(e,n,a,i){void 0===e&&(e=null),void 0===n&&(n=1),void 0===a&&(a=null),void 0===i&&(i=null),console.log("----  WXImage ----"),console.log("-  getSnapshotFile  -"),"undefined"!=typeof wx?(t._getSnapshotRect=e,t._getSnapshotScale=n,t._getSnapshotCallback=a,t._getSnapshotCanvas=i,o.default.eventManager.dispatchEventWith(r.default.IMAGE_SNAPSHOT_START),cc.director.on(cc.Director.EVENT_AFTER_DRAW,t.drawHandler,t)):null!=a&&a(null)},e.drawHandler=function(e){cc.director.off(cc.Director.EVENT_AFTER_DRAW,t.drawHandler,t);var n=t._getSnapshotCanvas||i.default.canvas,a=t._getSnapshotRect,s=t._getSnapshotScale,c=t._getSnapshotCallback;if(null==a)if(n!=i.default.canvas)a=new cc.Rect(0,0,n.width,n.height);else{var l=cc.view.getFrameSize();a=new cc.Rect(0,0,l.width,l.height)}if(console.log("@@@@@@@ cc.view.getFrameSize() = "+JSON.stringify(cc.view.getFrameSize())),console.log("@@@@@@@ cc.view.getDevicePixelRatio() = "+cc.view.getDevicePixelRatio()),n==i.default.canvas){var d=cc.view.getDevicePixelRatio();a.x*=d,a.y*=d,a.width*=d,a.height*=d}t._getSnapshotRect=null,t._getSnapshotScale=1,t._getSnapshotCallback=null,t._getSnapshotCanvas=null,n.toTempFilePath({x:a.x,y:a.y,width:a.width,height:a.height,destWidth:a.width*s,destHeight:a.height*s,success:function(e){c&&c(e?e.tempFilePath:null)},fail:function(){c&&c(null)},complete:function(){o.default.eventManager.dispatchEventWith(r.default.IMAGE_SNAPSHOT_END)}})},e.readSnapshotFileAsSpriteFrame=function(e){console.log("----  WXImage ----"),console.log("-  readSnapshotFileAsSpriteFrame  -");try{var n=wx.getFileSystemManager().readFileSync(e,"base64");return t.createImage("data:image/jpg;base64,"+n)}catch(e){console.log(e)}return null},e.getSnapshotImage=function(){if(console.log("----  WXImage ----"),console.log("-  getSnapshotImage  -"),"undefined"==typeof wx)return null;var e=i.default.canvas.toDataURL();return t.createImage(e)},e=t=__decorate([c],e)}());n.default=l,cc._RF.pop()},{"../base/GameValues":"GameValues","../managers/GameManager":"GameManager","../platforms/QQCM_getAvatarFromOpenId":"QQCM_getAvatarFromOpenId","./WXEventNames":"WXEventNames"}],WXInterstitialAd:[function(e,t,n){"use strict";cc._RF.push(t,"6d3e63im5hO3bGjQkrkr/Xt","WXInterstitialAd"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=e("./WXEventNames"),i=e("../managers/event/EventDispacher"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(t){var n=e.call(this)||this;return n._isReady=!1,n._isShowing=!1,n._adID=t,n.createAd(),n}return __extends(t,e),Object.defineProperty(t.prototype,"interstitalAd",{get:function(){return this._interstitalAd},enumerable:!0,configurable:!0}),t.prototype.createAd=function(){try{this._interstitalAd=wx.createInterstitialAd({adUnitId:this._adID}),this._interstitalAd.onLoad(this.adLoadCallback.bind(this)),this._interstitalAd.onClose(this.adCloseCallback.bind(this)),this._interstitalAd.onError(this.adErrorCallback.bind(this))}catch(e){console.log("\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25",e)}},Object.defineProperty(t.prototype,"isReady",{get:function(){return this._isReady},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isShowing",{get:function(){return this._isShowing},enumerable:!0,configurable:!0}),t.prototype.show=function(){this._isShowing=!0;try{this._isReady&&this._interstitalAd.show()}catch(e){this._isShowing=!1}},t.prototype.hide=function(){},t.prototype.adLoadCallback=function(){this._isReady=!0,this._isShowing&&this._interstitalAd.show(),o.default.eventManager.dispatchEventWith(a.default.INTERSTITIAL_AD_READY)},t.prototype.adCloseCallback=function(e){void 0===e&&(e=null),this._isShowing=!1,o.default.eventManager.dispatchEventWith(a.default.INTERSTITIAL_AD_CLOSE)},t.prototype.adErrorCallback=function(e){this._isShowing=!1,o.default.eventManager.dispatchEventWith(a.default.INTERSTITIAL_AD_ERROR)},t.prototype.destory=function(){this._destoried||(this._destoried=!0,this._interstitalAd&&(this._interstitalAd.offLoad(this.adLoadCallback.bind(this)),this._interstitalAd.offClose(this.adCloseCallback.bind(this)),this._interstitalAd.offError(this.adErrorCallback.bind(this)),this._interstitalAd=null),this._isReady=!1,this._isShowing=!1,e.prototype.destory.call(this))},t=__decorate([s],t)}(i.default));n.default=c,cc._RF.pop()},{"../managers/GameManager":"GameManager","../managers/event/EventDispacher":"EventDispacher","./WXEventNames":"WXEventNames"}],WXOpenData:[function(e,t,n){"use strict";cc._RF.push(t,"31b33l+MVhHrIjtiM2a54Ls","WXOpenData"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../deer/DeerSDK"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}var t;return t=e,e.postMessage=function(e){if("undefined"==typeof wx)return null;wx.getOpenDataContext().postMessage(e)},e.saveUserScoreToCloud=function(e){t.saveUserDataToCloud("score",""+e),o.default.instance.isReady&&o.default.instance.game_saveScoreToService(e)},e.saveUserDataToCloud=function(e,n){if("undefined"!=typeof wx){var o=Math.floor((new Date).getTime()/1e3);"score"==e&&(t.postMessage({action:"__rdm__myScore",value:parseInt(n)}),n='{"wxgame":{"score":'+n+', "update_time":'+o+"}}");try{wx.setUserCloudStorage({KVDataList:[{key:e,value:n}],success:function(e){console.log(e)},fail:function(e){console.log(e)}})}catch(e){}}},e=t=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../deer/DeerSDK":"DeerSDK"}],WXRankDataManager:[function(e,t,n){"use strict";cc._RF.push(t,"d58eelXEchO3538OB+XKyy5","WXRankDataManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./WXRankVO"),a=e("./WXRankEventNames"),i=cc._decorator,r=i.ccclass,s=(i.property,function(e){function t(){var t=e.call(this)||this;if(t._friendRankData=[],t._myIndex=-1,t._myScore=0,console.log("\u3010WXRankDataManager\u3011\u521d\u59cb\u5316"),n._instance)throw new Error("Please use WXRankDataManager.instance");n._instance=t,t.getUserInfo();try{wx.onMessage(function(e){if(console.log("\u3010WXRankDataManager\u3011constructor, wx.onMessage"),console.log(e),e)switch(e.action){case"__rdm__myScore":t.myScore=e.value}})}catch(e){}return t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return n._instance||new n,n._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"friendRankData",{get:function(){return this._friendRankData.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"friendRankNext",{get:function(){return this._friendRankNext},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"friendRankPrevious",{get:function(){return this._friendRankPrevious},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"friendRankMine",{get:function(){return this._friendRankMine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"myIndex",{get:function(){return this._myIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"myScore",{get:function(){return this._myScore},set:function(e){this._myScore!=e&&(this._myScore=e,n._instance.dispatchEvent(new cc.Event(a.default.MY_SCORE_CHANGE,!1)),this.refreshAllData())},enumerable:!0,configurable:!0}),t.prototype.getUserInfo=function(){var e=this;try{wx.getUserInfo({openIdList:["selfOpenId"],success:function(t){console.log("user info"),console.log(t);try{var n=t.data;e._userInfo=n[0]}catch(n){e._userInfo=t.userInfo}},fail:function(){},complete:function(){e.refreshRankingData()}})}catch(e){}},t.prototype.refreshAllData=function(){if(this._userInfo){var e=this._userInfo.openId,t=this._userInfo.avatarUrl;t=t.replace(/\/\d+$/,""),console.log("my avatar url = ",t),console.log("my open id = ",e);for(var o=this._friendRankData.length,i=0;i<o;i++){var r=this._friendRankData[i],s=r.avatar;s=s.replace(/\/\d+$/,""),console.log("vo.isSelf="+r.isSelf,r.nickname,r.score,r.avatar),(!0===r.isSelf||e&&r.openID==e||t&&s==t)&&(this._friendRankMine=r,this._myScore>r.score&&(r.score=this._myScore,this.sortFriendRankData()))}if(this._friendRankData){var c=this._friendRankData.concat(),l=c.indexOf(this._friendRankMine);this._myIndex>=0&&c.splice(l,1),this._friendRankPrevious=null,this._friendRankNext=null;for(i=c.length-1;i>=0;i--)if(this._myScore<c[i].score){this._friendRankNext=c[i],i<c.length-1&&(this._friendRankPrevious=c[i+1]);break}console.log("my rank is "+this._myIndex,", total is "+o),n._instance.dispatchEvent(new cc.Event(a.default.FRIEND_RANK_CHANGE,!1))}}else this.getUserInfo()},t.prototype.sortFriendRankData=function(){this._friendRankData.sort(function(e,t){return t.score-e.score});for(var e=this._friendRankData.length,t=0;t<e;t++)this._friendRankData[t].rank=t+1},t.prototype.refreshRankingData=function(){var e=this;console.log("\u83b7\u53d6\u6392\u884c\u699c\u6570\u636e\u3002\u3002\u3002\u3002\u3002"),"undefined"!=typeof wx&&wx.getFriendCloudStorage({keyList:["score","userPropVIP"],success:function(t){console.log("=================@@@@@@@@@@@@@@@@@@@@@@@@================="),console.log(t),console.log(e._userInfo);for(var n=[],a=t.data,i=0;i<a.length;i++){var r=a[i],s=new o.default;s.nickname=r.nickname,s.avatar=r.avatarUrl,s.openID=r.openid,s.isSelf=!0===r.isSelf;for(var c=r.KVDataList,l=c.length,d=0;d<l;d++){var u=c[d],h=u.key,p=u.value;if(console.log("\u3010KVData\u3011",d,"key="+h,"value="+p),"userPropVIP"==h)s.isVIP="1"==p;else if("score"==h)try{var f=JSON.parse(p);s.score=parseInt(f.wxgame.score)}catch(e){}}n.push(s)}e._friendRankData=n,e.sortFriendRankData(),e.refreshAllData()}})},t=n=__decorate([r],t)}(cc.Node));n.default=s;var c=function(e){function t(t,n){void 0===n&&(n=null);var o=e.call(this)||this;if("undefined"==typeof wx)return null;var a=new cc.Texture2D,i=wx.createImage();return i.src=t,i.onload=function(){a.initWithElement(i),a.handleLoadedTexture(),n&&n()},o.setTexture(a),o}return __extends(t,e),t}(cc.SpriteFrame);n.AWXImage=c,cc._RF.pop()},{"./WXRankEventNames":"WXRankEventNames","./WXRankVO":"WXRankVO"}],WXRankEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"bd39d1ZA5tP9JqD3MmT7zYX","WXRankEventNames"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.FRIEND_RANK_CHANGE="friendRankChange",e.MY_SCORE_CHANGE="myScoreChange",e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],WXRankVO:[function(e,t,n){"use strict";cc._RF.push(t,"25afa5mSc9DX69Aogxf55xw","WXRankVO"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this.rank=0,this.nickname=null,this.avatar=null,this.openID=null,this.score=0,this.isSelf=!1,this.isVIP=!1}return e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],WXRewardVideoAdCloseComfirm:[function(e,t,n){"use strict";cc._RF.push(t,"d2ac4rbPc5CVoJH963MIfqy","WXRewardVideoAdCloseComfirm"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=e("./WXEventNames"),i=e("./WXUtils"),r=e("./WXRewardVideoAd"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function e(){}return e.reset=function(){o.default.eventManager.removeEventListener(a.default.REWARD_VIDEO_AD_CLOSE,this.videoAdEventsHandler,this),o.default.eventManager.removeEventListener(a.default.REWARD_VIDEO_AD_COMPLETE,this.videoAdEventsHandler,this),o.default.eventManager.removeEventListener(a.default.REWARD_VIDEO_AD_ERROR,this.videoAdEventsHandler,this)},e.init=function(e,t,n,i){void 0===n&&(n="\u4e0b\u6b21\u518d\u8bf4"),void 0===i&&(i="\u89c2\u770b\u89c6\u9891"),this._alertTitle=e,this._alertConent=t,this._alertCancel=n,this._alertConfirmLabel=i,this.reset(),o.default.eventManager.addEventListener(a.default.REWARD_VIDEO_AD_CLOSE,this.videoAdEventsHandler,this,100),o.default.eventManager.addEventListener(a.default.REWARD_VIDEO_AD_COMPLETE,this.videoAdEventsHandler,this,100),o.default.eventManager.addEventListener(a.default.REWARD_VIDEO_AD_ERROR,this.videoAdEventsHandler,this,100)},e.videoAdEventsHandler=function(e){if(this.reset(),e.type==a.default.REWARD_VIDEO_AD_CLOSE){if(!r.default.isReady)return;e.stopPropagation(),i.default.showAlert(this._alertTitle,this._alertConent,this._alertConfirmLabel,this._alertCancel,this.alertConfirmCallback.bind(this))}},e.alertConfirmCallback=function(){r.default.show(),null!=this.closeAlertPlayAgainCallback&&this.closeAlertPlayAgainCallback()},e.closeAlertPlayAgainCallback=null,e=__decorate([c],e)}());n.default=l,cc._RF.pop()},{"../managers/GameManager":"GameManager","./WXEventNames":"WXEventNames","./WXRewardVideoAd":"WXRewardVideoAd","./WXUtils":"WXUtils"}],WXRewardVideoAd:[function(e,t,n){"use strict";cc._RF.push(t,"49ddbGjBlpLhaUOcmKhj7i6","WXRewardVideoAd"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=e("./WXEventNames"),i=e("./WXUtils"),r=e("../deer/DeerSDK"),s=e("./WXBannerAd"),c=cc._decorator,l=c.ccclass,d=(c.property,function(){function e(){}var t;return t=e,Object.defineProperty(e,"adID",{get:function(){return t._adID},set:function(e){t._adID!=e&&(t._adID=e,t.reset())},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isReady",{get:function(){return t._isReady},enumerable:!0,configurable:!0}),Object.defineProperty(e,"lastVideoAdTime",{get:function(){return t._lastVideoAdTime},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPlaying",{get:function(){return t._isPlaying},enumerable:!0,configurable:!0}),e.show=function(){if(t.shutTimeOut&&i.default.showToast("\u89c6\u9891\u6b63\u5728\u51c6\u5907\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),!t._isReady)return!1;if(t._isPlaying)return!1;t._originalBGMMuted=o.default.soundsManager.musicMuted,o.default.soundsManager.muteMusic(),s.default.currentAd?(t._originalBannerAdIsShowing=s.default.currentAd.isShowing,s.default.currentAd.hide()):t._originalBannerAdIsShowing=!1;try{return t._ad&&t._ad.show(),t._isPlaying=!0,this.shutTimeOut&&(clearTimeout(this.shutTimeOut),this.shutTimeOut=null),this.shutTimeOut=setTimeout(function(){console.log("\u624b\u52a8\u6807\u8bb0\u89c6\u9891\u5e7f\u544a\u64ad\u653e\u5b8c\u6bd5"),t._isPlaying=!1},2e4),!0}catch(e){t._isPlaying=!1,this.shutTimeOut&&(clearTimeout(this.shutTimeOut),this.shutTimeOut=null)}return!1},e.reset=function(){t._ad&&(t._ad.offLoad(t.adLoadCallback),t._ad.offClose(t.adCloseCallback),t._ad.offError(t.adErrorCallback),t._ad=null),t._isReady=!1,t._isPlaying=!1,this.shutTimeOut&&(clearTimeout(this.shutTimeOut),this.shutTimeOut=null),t._adID&&"undefined"!=typeof wx&&(t._ad=r.default.instance.wx.createRewardedVideoAd({adUnitId:t._adID}),t._ad&&(t._ad.onLoad(t.adLoadCallback),t._ad.onClose(t.adCloseCallback),t._ad.onError(t.adErrorCallback),t._ad.load()))},e.adLoadCallback=function(){t._isReady=!0,o.default.eventManager.dispatchEventWith(a.default.REWARD_VIDEO_AD_READY)},e.adCloseCallback=function(e){void 0===e&&(e=null),t._originalBGMMuted||(o.default.soundsManager.unmuteMusic(),t._originalBGMMuted=!1),s.default.currentAd&&t._originalBannerAdIsShowing&&(s.default.currentAd.show(),t._originalBannerAdIsShowing=!1),t._isPlaying=!1,this.shutTimeOut&&(clearTimeout(this.shutTimeOut),this.shutTimeOut=null),e&&1==e.isEnded?(t._lastVideoAdTime=(new Date).getTime(),o.default.eventManager.dispatchEventWith(a.default.REWARD_VIDEO_AD_COMPLETE)):(i.default.showToast("\u8bf7\u770b\u5b8c\u6574\u6bb5\u89c6\u9891"),o.default.eventManager.dispatchEventWith(a.default.REWARD_VIDEO_AD_CLOSE))},e.adErrorCallback=function(e){t._originalBGMMuted||(o.default.soundsManager.unmuteMusic(),t._originalBGMMuted=!1),s.default.currentAd&&t._originalBannerAdIsShowing&&(s.default.currentAd.show(),t._originalBannerAdIsShowing=!1),t._isPlaying=!1,this.shutTimeOut&&(clearTimeout(this.shutTimeOut),this.shutTimeOut=null),o.default.eventManager.dispatchEventWith(a.default.REWARD_VIDEO_AD_ERROR)},e._isReady=!1,e._lastVideoAdTime=0,e._originalBannerAdIsShowing=!1,e.shutTimeOut=null,e=t=__decorate([l],e)}());n.default=d,cc._RF.pop()},{"../deer/DeerSDK":"DeerSDK","../managers/GameManager":"GameManager","./WXBannerAd":"WXBannerAd","./WXEventNames":"WXEventNames","./WXUtils":"WXUtils"}],WXScreenAdMgr:[function(e,t,n){"use strict";cc._RF.push(t,"e1879QC5S1EcrwRCx6MkArw","WXScreenAdMgr"),Object.defineProperty(n,"__esModule",{value:!0});e("../gamecore/wechat/WXInterstitialAd"),e("../module/data/StageDataMgr"),e("../gamecore/deer/DeerSDK"),e("../module/data/MainDataMgr");var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){this._adList=[]}var t;return t=e,Object.defineProperty(e,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adList",{get:function(){return this._adList},set:function(e){if(this._adList&&0!=this._adList.length)console.error(this._adList,"\u5df2\u5b58\u5728");else for(var t=0;t<e.length;t++)this._adList.push(e[t])},enumerable:!0,configurable:!0}),e.prototype.showRandAd=function(){},e._instance=null,e=t=__decorate([a],e)}());n.default=i,cc._RF.pop()},{"../gamecore/deer/DeerSDK":"DeerSDK","../gamecore/wechat/WXInterstitialAd":"WXInterstitialAd","../module/data/MainDataMgr":"MainDataMgr","../module/data/StageDataMgr":"StageDataMgr"}],WXShare:[function(e,t,n){"use strict";cc._RF.push(t,"afa72AvAepLAKhpKXFMijpO","WXShare"),Object.defineProperty(n,"__esModule",{value:!0});var o,a=e("../base/GameValues"),i=e("../deer/DeerSDK"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function e(){}var t;return t=e,e.setOnShareAppMessage=function(e,n,o){if(void 0===o&&(o=null),console.log("----  WXShare ----"),console.log("-  setOnShareAppMessage  -"),"undefined"!=typeof wx){if(console.log(e,n,o),e&&(t._onShareAppMessageData.title=e),n&&(t._onShareAppMessageData.imageUrl=n),o){var a="";Object.keys(o).forEach(function(e){""!=a&&(a+="&"),a+=e+"="+encodeURIComponent(o[e])}),""!=a&&(t._onShareAppMessageData.query=a)}i.default.instance.wx.onShareAppMessage(function(){return t._onShareAppMessageData})}},e.shareApp=function(e,n,r,s,c,l,d){if(void 0===r&&(r=null),void 0===s&&(s=null),void 0===c&&(c=null),void 0===l&&(l=!0),void 0===d&&(d=null),"undefined"!=typeof wx){if(a.default.currentPlatform!=a.PlatformName.WECHAT&&(l=!1),d||(d=o.REQUEST),t._shareAppTime=(new Date).getTime(),t._shareAppData={title:e,imageUrl:n,intent:d,success:function(e){t._shareAppData=null,s&&s(e)},fail:function(e){t._shareAppData=null,c&&c(e)},__us__:l},wx.onShow(t.shareAppBackCallback.bind(t)),r){var u="";Object.keys(r).forEach(function(e){""!=u&&(u+="&"),u+=e+"="+encodeURIComponent(r[e])}),""!=u&&(t._shareAppData.query=u)}i.default.instance.wx.shareAppMessage(t._shareAppData)}},e.shareAppBackCallback=function(){wx.offShow(t.shareAppBackCallback.bind(t)),setTimeout(function(){if(t._shareAppData){var e=t._shareAppData.success,n=t._shareAppData.fail;if(!1!==t._shareAppData.__us__){var o=function(){t._mustFailCounter=Math.floor(2+3*Math.random());var e=["\u8bf7\u5206\u4eab\u5230\u7fa4","\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7684\u7fa4","\u8bf7\u6362\u4e2a\u597d\u53cb\u5206\u4eab\u8bd5\u8bd5"],o=e[Math.floor(Math.random()*e.length)];wx.showToast({title:o}),n()};if((new Date).getTime()-t._shareAppTime<2e3)n();else{t._shareTimes++;var a=t._shareTimes;if(1==a)o();else if(2==a)e();else{t._mustFailRate;i.default.instance.canUseEasingPolicy||.1,Math.random()<=t._mustFailRate?o():t._mustFailCounter<=0?o():(t._mustFailCounter--,e())}}}else e()}},500)},e.shareAppToGroup=function(e,t,n,o){if(void 0===n&&(n=null),void 0===o&&(o=null),console.log("----  WXShare ----"),console.log("-  shareAppToGroup  -"),"undefined"!=typeof wx)try{var a={title:e,imageUrl:t};if(null!=o&&(a.success=function(e){var t=null;e&&e.shareTickets&&(t=e.shareTickets[0]),o.call(null,t)}),n){var r="";Object.keys(n).forEach(function(e){""!=r&&(r+="&"),r+=e+"="+encodeURIComponent(n[e])}),""!=r&&(a.query=r)}i.default.instance.wx.shareAppMessage(a)}catch(e){}},e.getQueryData=function(){if(console.log("----  WXShare ----"),console.log("-  getQueryData  -"),"undefined"==typeof wx)return{};var e=wx.getLaunchOptionsSync();return e?e.query:{}},e._onShareAppMessageData={fail:function(){wx.showToast({title:"\u5206\u4eab\u5931\u8d25"})}},e._shareAppTime=0,e._mustFailRate=.5,e._mustFailCounter=3,e._shareTimes=0,e=t=__decorate([s],e)}());n.default=c,function(e){e.REQUEST="REQUEST",e.INVITE="INVITE",e.CHALLENGE="CHALLENGE",e.SHARE="SHARE"}(o=n.ShareIntent||(n.ShareIntent={})),cc._RF.pop()},{"../base/GameValues":"GameValues","../deer/DeerSDK":"DeerSDK"}],WXUser:[function(e,t,n){"use strict";cc._RF.push(t,"2aa85l/HZ9H972gaL+zqd6m","WXUser"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../base/GameValues"),a=e("./WXOpenData"),i=e("../deer/DeerSDK"),r=cc._decorator,s=r.ccclass;r.property;n.USER_PROP_VIP="userPropVIP";var c=function(){function e(){}var t;return t=e,Object.defineProperty(e,"lastCode",{get:function(){return this._lastCode},enumerable:!0,configurable:!0}),e.login=function(){!0!==t._isLogining&&"undefined"!=typeof wx&&(console.log("----  WXUser ----"),console.log("-  login  -"),t._isLogining=!0,wx.login({success:function(e){console.log("login success"),console.log(e),t._lastCode=e.code,t.doLoginCallback(),t.tryToGetUserInfo()},fail:function(e){t._isLogining=!1},complete:function(){t._isLogining=!1}}))},e.onLogin=function(e){-1==t._loginCallbacks.indexOf(e)&&t._loginCallbacks.push(e)},e.offLogin=function(e){var n=t._loginCallbacks.indexOf(e);n>=0&&t._loginCallbacks.splice(n,1)},e.doLoginCallback=function(){t._lastCode&&t._loginCallbacks.length>0&&(this._loginCallbacks.forEach(function(e){e(t._lastCode)}),this._loginCallbacks=[])},e.setUserInfoData=function(e){if(console.log("------setUserInfoData-------"),console.log(e),e&&e.userInfo){t._userInfo=e.userInfo,t.iv=e.iv,t.rawData=e.rawData,t.encryptedData=e.encryptedData,t.signature=e.signature;try{t._userInfoCallbacks.length>0&&(this._userInfoCallbacks.forEach(function(e){e()}),this._userInfoCallbacks=[])}catch(e){}t.destroyAllUserInfoButtons(),i.default.instance.getWXUserInfo()}},e.onUserInfo=function(e){t._userInfo?e():(-1==t._userInfoCallbacks.indexOf(e)&&t._userInfoCallbacks.push(e),t.tryToGetUserInfo())},e.offUserInfo=function(e){var n=t._userInfoCallbacks.indexOf(e);n>=0&&t._userInfoCallbacks.splice(n,1)},e.tryToGetUserInfo=function(){t._userInfo||"undefined"!=typeof wx&&(t._isTryingToGetUserInfo||(t._isTryingToGetUserInfo=!0,wx.getSetting({success:function(e){console.log("wx.getSetting",JSON.stringify(e)),e.authSetting["scope.userInfo"]&&wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(e){t.setUserInfoData(e)}})},complete:function(){t._isTryingToGetUserInfo=!1}})))},Object.defineProperty(e,"userInfo",{get:function(){return t._userInfo},enumerable:!0,configurable:!0}),e.createUserInfoButton=function(e,n,a){if(void 0===a&&(a=null),"undefined"!=typeof wx){var i=wx.createUserInfoButton({type:"image",image:e,withCredentials:!0,lang:"zh_CN",style:{left:n.xMin,top:n.yMin,width:n.width,height:n.height,lineHeight:40}});return i&&(t._userInfoButtons.push(i),i.onTap(function(e){console.log("user info button on tap"),console.log(e),t.setUserInfoData(e),null!=a&&a(e)})),o.default.currentPlatform==o.PlatformName.QQCM&&(t._userInfo||wx.getUserInfo({withCredentials:!0,lang:"zh_CN",from:"#wx user#",success:function(e){console.log("\u3010\u7528\u6237\u4fe1\u606f\u6309\u94ae\u3011\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f"),t.setUserInfoData(e)}})),i}},e.destroyUserInfoButton=function(e){try{e.destroy()}catch(e){}var n=t._userInfoButtons.indexOf(e);n>=0&&t._userInfoButtons.splice(n,1)},e.destroyAllUserInfoButtons=function(){t._userInfoButtons.forEach(function(e){e.destroy()}),t._userInfoButtons=[]},e.setVIP=function(e){void 0===e&&(e=!0),a.default.saveUserDataToCloud(n.USER_PROP_VIP,e?"1":"0"),i.default.instance.isReady&&i.default.instance.user_setVIP(e)},e._isLogining=!1,e._loginCallbacks=[],e._userInfo=null,e._userInfoCallbacks=[],e._isTryingToGetUserInfo=!1,e._userInfoButtons=[],e=t=__decorate([s],e)}();n.default=c,cc._RF.pop()},{"../base/GameValues":"GameValues","../deer/DeerSDK":"DeerSDK","./WXOpenData":"WXOpenData"}],WXUtils:[function(e,t,n){"use strict";cc._RF.push(t,"7e684/+2gBEHYHLNGaPGa7/","WXUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/Utils"),a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return e.showToast=function(e,t){void 0===t&&(t=1500),console.log("----  WX Utils ----"),console.log("-  showToast  -"),console.log(e),t<10&&(t*=1e3),"undefined"!=typeof wx&&wx.showToast({title:e,icon:"none",duration:t,mask:!1})},e.showLoading=function(e){if(void 0===e&&(e=""),console.log("----  WX Utils ----"),console.log("-  showLoading  -"),console.log(e),"undefined"!=typeof wx)try{wx.showLoading({title:e})}catch(e){}},e.hideLoading=function(){if(console.log("----  WX Utils ----"),console.log("-  hideLoading  -"),"undefined"!=typeof wx)try{wx.hideLoading()}catch(e){}},e.navigateToMiniProgram=function(e,t,n,o,a){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null),console.log("----  WX Utils ----"),console.log("-  navigateToMiniProgram  -"),console.log(e,t),"undefined"!=typeof wx)try{wx.navigateToMiniProgram({appId:e,path:t,extraData:n,success:o,fail:a})}catch(e){}else a&&a()},e.getLaunchOptionsSync=function(){return console.log("----  WX Utils ----"),console.log("-  getLaunchOptionsSync  -"),"undefined"==typeof wx?null:wx.getLaunchOptionsSync()},e.getMenuButtonLayout=function(){if(console.log("----  WX Utils ----"),console.log("-  getMenuButtonLayout  -"),"undefined"==typeof wx)return null;var e=wx.getMenuButtonBoundingClientRect(),t=new cc.Rect(e.left,e.top,e.width,e.height);return t=o.default.fromScreenRect(t),console.log("in game is",t),t},e.openCustomerServiceConversation=function(){if(console.log("----  WX Utils ----"),console.log("-  openCustomerServiceConversation  -"),"undefined"==typeof wx)return null;wx.openCustomerServiceConversation()},e.showAlert=function(e,t,n,o,a,i){if(void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===i&&(i=null),console.log("----  WX Utils ----"),console.log("-  showAlert  -"),"undefined"==typeof wx)return null!=i?i():null!=a&&a(),null;var r={};r.title=e,r.content=t,o?(r.showCancel=!0,r.cancelText=o):r.showCancel=!1,n&&(r.confirmText=n),r.success=function(e){e&&(e.confirm?a&&a():e.cancel&&i&&i())},wx.showModal(r)},e=__decorate([i],e)}());n.default=r,cc._RF.pop()},{"../managers/Utils":"Utils"}],WaitingUI:[function(e,t,n){"use strict";cc._RF.push(t,"be005ryY3FG9rOxgM/me/T6","WaitingUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quan=null,t}return __extends(t,e),t.prototype.update=function(e){this.quan&&(this.quan.rotation+=90*e)},__decorate([i(cc.Node)],t.prototype,"quan",void 0),t=__decorate([a],t)}(cc.Component);n.default=r,cc._RF.pop()},{}],XYJAPI:[function(e,t,n){"use strict";cc._RF.push(t,"a38d5Eiy5BKm5JdG9C4Evdc","XYJAPI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=e("../libs/md5"),i=e("./XYJEventNames"),r=e("../wechat/WXUser"),s=e("../base/GameValues"),c=e("../deer/DeerSDK"),l=e("../wechat/WXImage"),d=e("../wechat/WXData"),u=cc._decorator,h=u.ccclass,p=(u.property,function(){function e(){}var t;return t=e,Object.defineProperty(e,"baseURL",{get:function(){return t._baseURL},enumerable:!0,configurable:!0}),Object.defineProperty(e,"flg",{get:function(){return t._flg},enumerable:!0,configurable:!0}),Object.defineProperty(e,"userInfo",{get:function(){return t._userInfo},enumerable:!0,configurable:!0}),e.init=function(e){if(!t._initialized){t._initialized=!0,t._flg=e,s.default.isDebug,t._baseURL="https://api.yz061.com",console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  init   -"),console.log(t._baseURL);var n=o.default.dataManager.getData("XYJChannel");if(n&&"null"!=n&&"undefined"!=n&&(t.inviterChannel=n),"undefined"!=typeof wx){var a=wx.getLaunchOptionsSync();console.log("\u3010XYJAPI\u3011launchOptions",a);var i=a.query;i.openID&&(t.inviterOpenID=i.openID),i.userID&&(t.inviterUserID=i.userID),i.nickname&&(t.inviterNickname=decodeURIComponent(i.nickname)),i.time&&(t.inviterTime=parseInt(i.time),isNaN(t.inviterTime)&&(t.inviterTime=0)),t.gameStartTime=Math.floor((new Date).getTime()/1e3),i.action&&(t.inviterAction=i.action),i.channel&&"null"!=i.channel&&"undefined"!=i.channel&&(t.inviterChannel=i.channel,o.default.dataManager.setData("XYJChannel",t.inviterChannel,!0)),i.recordID&&(t.inviterGameRecordID=i.recordID)}t.enabled=!0,t.login()}},e.login=function(){r.default.onLogin(t.wxLoginHandler.bind(t)),r.default.login()},e.wxLoginHandler=function(e){t._code=e,console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  wxLoginHandler   -"),t.loginToPlatform()},e.loginToPlatform=function(){if(console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  loginToPlatform   -"),"undefined"!=typeof wx){var e={code:t._code,opId:t.inviterOpenID,channel:t.inviterChannel,flg:t._flg},n=d.default.fromAppID;n&&(e.appid=n),console.log("the data is",e),console.log("request Ball.Api.Auth.WechatLogin"),console.log("url is "+t._baseURL+"/auth"),wx.request({url:t._baseURL+"/auth",data:e,method:"POST",success:t.loginFeedbackCallback,fail:function(e){console.log("failed to call Ball.Api.Auth.WechatLogin"),console.log(e),o.default.eventManager.dispatchEventWith(i.default.EVENT_INIT_FAILED)}})}},e.loginFeedbackCallback=function(e){if(console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  loginFeedbackCallback   -"),console.log(e),e.data){try{t.userOpenID=e.data.result.openid,t.userToken=e.data.result.token,console.log("userOpenID="+t.userOpenID),console.log("userToken="+t.userToken),o.default.eventManager.dispatchEventWith(i.default.EVENT_USER_READY),t.sendFeedbackDaily(),t.bindingToPlatform()}catch(e){console.log("\u3010ERROR\u3011",e),o.default.eventManager.dispatchEventWith(i.default.EVENT_INIT_FAILED)}"undefined"!=typeof wx&&wx.onHide(function(){t.ad_reportShownNow()})}else console.log("loginFeedbackCallback \u6570\u636e\u9519\u8bef")},e.bindingToPlatform=function(){console.log("----  \u5c0f\u5e7a\u9e21 API ----"),console.log("-  bindingToPlatform   -"),r.default.offUserInfo(t.bindingToPlatform.bind(t)),r.default.encryptedData?(t.encryptedData=r.default.encryptedData,t.iv=r.default.iv,t._userInfo=r.default.userInfo,console.log("encryptedData="+t.encryptedData),console.log("iv="+t.iv),console.log("userInfo=",t._userInfo),wx.request({url:t._baseURL+"/binding",data:{flg:t._flg,token:t.userToken,enc:t.encryptedData,iv:t.iv},method:"POST",success:t.loginBindingCallback,fail:function(e){console.log("failed to call Ball.Api.Auth.Binding"),console.log(e),o.default.eventManager.dispatchEventWith(i.default.EVENT_INIT_FAILED)}})):r.default.onUserInfo(t.bindingToPlatform.bind(t))},e.getAffairs=function(e){void 0===e&&(e=null),t._affairs?e&&e(t._affairs.concat()):wx.request({url:t._baseURL+"/additional?flg="+t.flg,data:{},method:"GET",success:function(n){try{var o=n.data.result.affairs;t._affairs=o.concat(),e&&e(o)}catch(e){}},fail:function(e){}})},e.loginBindingCallback=function(e){try{t.userUnionID=e.data.data.unionId}catch(e){}o.default.eventManager.dispatchEventWith(i.default.EVENT_ALL_READY)},e.sendFeedbackDaily=function(){wx.request({url:t._baseURL+"/daily",data:{flg:t._flg,uid:t.userOpenID,channel:t.inviterChannel},method:"POST",success:function(e){},fail:function(e){}})},e.sendFeedbackShare=function(e){void 0===e&&(e=null),wx.request({url:t._baseURL+"/stat",data:{flg:t._flg,uid:t.userOpenID,channel:t.inviterChannel,loc:"share",shareType:e},method:"POST",success:function(e){},fail:function(e){}})},e.sendFeedbackVideo=function(){wx.request({url:t._baseURL+"/stat",data:{flg:t._flg,uid:t.userOpenID,channel:t.inviterChannel,loc:"video"},method:"POST",success:function(e){},fail:function(e){}})},Object.defineProperty(e,"enabled",{get:function(){return t._enabled},set:function(e){t._enabled!=e&&(t._enabled=e,t._enabled?(null==t._original_ad_getAdData&&(t._original_ad_getAdData=c.default.instance.ad_getAdData.bind(c.default.instance)),c.default.instance.ad_getAdData=t.ad_getAdData.bind(t)):c.default.instance.ad_getAdData=t._original_ad_getAdData,c.default.instance.trackProxyFun=t.track.bind(t))},enumerable:!0,configurable:!0}),e.disenable=function(){t._enabled&&(t._enabled=!1)},e.track=function(e,n){void 0===n&&(n=null);var o={flg:t.flg,uid:t.userOpenID};if(t.inviterChannel&&(o.channel=t.inviterChannel),e==c.DeerTrackAction.SHOW_REWARD_AD_SUC)o.loc="video";else{if(e!=c.DeerTrackAction.SHARE_IMG_SHOW)return;o.loc="share",n&&n.share_id&&(o.sid=n.share_id)}wx.request({url:"https://api.yz061.com/stat",data:o,method:"GET",success:function(e){},fail:function(e){}})},e.ad_getAdData=function(e,n,o,a){if(void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=null),t.userOpenID)if(-1!=t.proxyAdTypes.indexOf(e)){var i=c.default.instance.ad_getAds(e,a);if(i)null!=n&&n(i);else{var r=t._adTypeCallbacks["ad_"+e];r||(r={success:[],fail:[],flag:[]},t._adTypeCallbacks["ad_"+e]=r),r.success.push(n),r.fail.push(o),r.flag.push(a),t._isRequestingAdData||(t._isRequestingAdData=!0,wx.request({url:"https://api.yz061.com/game/"+t.flg,method:"GET",success:t.ad_getAdData_success.bind(t),fail:t.ad_getAdData_fail.bind(t)}))}}else t._original_ad_getAdData(e,n,o,a);else o&&o(null)},e.ad_getAdData_success=function(e){t._isRequestingAdData=!1;try{var n=e.data;if(1!=n.status)return void t.ad_getAdData_fail(null);n.result.forEach(function(e){var n=e.location_name,o=e.location_flg,a=e.url;-1!=a.indexOf("?")?a+="&uid="+t.userOpenID:a+="?uid="+t.userOpenID,wx.request({url:a,success:function(a){var i=a.data;if(i&&i.result)if(2==e.matter_type){var r=i.result;r.forEach(function(e){e.share_info=e.share_title,delete e.share_title}),c.default.instance._shareData=r}else if(1==e.matter_type){var l=i.result;if(l&&l.length>0){for(var d=[],u=0;u<l.length;u++){var h=l[u],p=!0,f=new c.DeerAdVO;if(f.id=parseInt(h.ad_id),f.appID=h.ad_appid,f.name=h.ad_name,f.path=h.ad_path,f.desc=h.desc,f.icon=h.ad_img,f.previewImg=h.ad_qrimg,f.flag=o,f.ad_count=h.ad_count,f.ad_dot=h.ad_dot,f.navigate=t.ad_navigate.bind(f),f.reportShown=t.ad_reportShown.bind(f),f.__loc=e,f.img_256_129=h.ad_img,f.img_1000_840=h.ad_img,f.bannerImg=h.ad_img,void 0!=h.ad_device){var g=""+h.ad_device;"1"==g?f.device=c.DeerDeviceType.ANDROID:"2"==g&&(f.device=c.DeerDeviceType.IOS),(f.device!=c.DeerDeviceType.ANDROID||s.default.isAndroid)&&(f.device!=c.DeerDeviceType.IOS||s.default.isIOS)||(p=!1)}p&&d.push(f)}var m=void 0;-1!=n.indexOf("\u731c\u4f60\u559c\u6b22")?m=c.DeerAdType.RECOMMEND:-1!=n.indexOf("\u7206\u6b3e\u6e38\u620f")?m=c.DeerAdType.HOT:-1!=n.indexOf("banner")?m=c.DeerAdType.BANNER:"\u6b7b\u4ea1\u63a8\u8350"==n?m=c.DeerAdType.GAME_OVER:"\u62bd\u5c49"==n?m=c.DeerAdType.BOARD:-1!=n.indexOf("\u5927\u56fe")?m=c.DeerAdType.RICH:"\u5f39\u7a97"==n&&(m=c.DeerAdType.POP),m&&c.default.instance.ad_addAds(m,d);var _=t._adTypeCallbacks["ad_"+m];if(delete t._adTypeCallbacks["ad_"+m],_){var y=_.success,v=_.flag;for(u=0;u<y.length;u++){var M=v[u],C=c.default.instance.ad_getAds(m,M),E=y[u];E&&E(C)}}}}}})})}catch(e){}},e.ad_getAdData_fail=function(e){Object.keys(t._adTypeCallbacks).forEach(function(e){var n=t._adTypeCallbacks[e];if(n){var o=n.fail;o&&o.forEach(function(e){e&&e()})}}),t._isRequestingAdData=!1},e.ad_navigate=function(){var e=this,n=e.__loc.game_flg,o=""+e.id,a=e.__loc.location_id,i={gflg:n,uid:t.userOpenID,ad_id:o,location_id:a};t.inviterChannel&&(i.channel=t.inviterChannel),wx.request({url:"https://api.yz061.com/reportad",data:i,method:"GET",success:function(e){},fail:function(e){}});try{wx.navigateToMiniProgram({appId:e.appID,path:e.path,fail:function(t){e.previewImg&&l.default.previewImage([e.previewImg])},success:function(){i.status="cb",wx.request({url:"https://api.yz061.com/reportad",data:i,method:"GET"})}})}catch(e){console.log("########################",e)}},e.ad_reportShown=function(){void 0==this.__shownTimes&&(this.__shownTimes=0),this.__shownTimes++;this.__loc.game_flg;var e=""+this.id,n=this.__loc.location_id,o=e+"_"+n;t._ad_ShownData[o]||(t._ad_ShownData[o]={ad_id:e,location_id:n,num:0}),t._ad_ShownData[o].num++},e.ad_reportShownNow=function(){var e={gflg:t.flg,flg:t.flg,uid:t.userOpenID};e.data=Object.keys(t._ad_ShownData).map(function(e){return t._ad_ShownData[e]}),0!=e.data.length&&(t._ad_ShownData={},t.inviterChannel&&(e.channel=t.inviterChannel),wx.request({url:"https://api.yz061.com/exposure",data:e,method:"POST",success:function(e){},fail:function(e){}}))},e.createSign=function(e){var n=[];for(var o in e){var i=e[o];void 0!=i&&""!=i&&n.push(""+o)}n.sort();for(var r="",s=0;s<n.length;s++){var c=n[s];s>0&&(r+="&"),r+=c+"="+e[c]}return r+="&key="+t.flg,r=(r=a.md5(r)).toUpperCase()},e._flg=null,e.proxyAdTypes=[c.DeerAdType.BANNER,c.DeerAdType.RECOMMEND,c.DeerAdType.HOT,c.DeerAdType.BOARD,c.DeerAdType.GAME_OVER,c.DeerAdType.RICH],e.gameVersion=null,e.inviterOpenID=null,e.inviterUserID=null,e.inviterNickname=null,e.inviterTime=0,e.gameStartTime=0,e.inviterAction=null,e.inviterGameRecordID=null,e.inviterChannel=null,e.relayLimitedTime=30,e.userOpenID=null,e.userUnionID=null,e.userNickname=null,e.userToken=null,e.encryptedData=null,e.iv=null,e._userInfo=null,e._enabled=!1,e._original_ad_getAdData=null,e._isRequestingAdData=!1,e._adTypeCallbacks={},e._ad_ShownData={},e=t=__decorate([h],e)}());n.default=p,cc._RF.pop()},{"../base/GameValues":"GameValues","../deer/DeerSDK":"DeerSDK","../libs/md5":"md5","../managers/GameManager":"GameManager","../wechat/WXData":"WXData","../wechat/WXImage":"WXImage","../wechat/WXUser":"WXUser","./XYJEventNames":"XYJEventNames"}],XYJEventNames:[function(e,t,n){"use strict";cc._RF.push(t,"4dfd2UAvoVDWKw8AptodUR+","XYJEventNames"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,i=(o.property,function(){function e(){}return e.EVENT_USER_READY="xyj_userReady",e.EVENT_ALL_READY="xyj_allReady",e.EVENT_INIT_FAILED="xyj_initFailed",e=__decorate([a],e)}());n.default=i,cc._RF.pop()},{}],XYJMoreGameButton:[function(e,t,n){"use strict";cc._RF.push(t,"5fcb1YhOTJADJxplhnYTTcy","XYJMoreGameButton"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../managers/GameManager"),a=e("../wechat/WXUtils"),i=e("../wechat/WXImage"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wxAppID="wx269f9d2cb8130024",t.wxAppPath="",t.previewImage="",t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.tapHandler,this)},t.prototype.tapHandler=function(e){var t=this;this.node.opacity<10||(o.default.soundsManager.playTapSound(),a.default.navigateToMiniProgram(this.wxAppID,this.wxAppPath,null,null,function(e){t.wxAppPath&&i.default.previewImage([t.previewImage])}))},t.prototype.onDestroy=function(){},__decorate([c({displayName:"\u5fae\u4fe1AppID"})],t.prototype,"wxAppID",void 0),__decorate([c({displayName:"\u8df3\u8f6c\u9875\u9762"})],t.prototype,"wxAppPath",void 0),__decorate([c({displayName:"\u9884\u89c8\u56fe"})],t.prototype,"previewImage",void 0),t=__decorate([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../managers/GameManager":"GameManager","../wechat/WXImage":"WXImage","../wechat/WXUtils":"WXUtils"}],XinShou:[function(e,t,n){"use strict";cc._RF.push(t,"e7e6fEfbZxPuJEfZyKDvfP/","XinShou"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./TankDataMgr"),a=e("./GameData"),i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clickCircle=null,t.hand=null,t.ctrl=null,t}return __extends(t,e),t.prototype.start=function(){if(1!=o.default.instance.finish_xinshou){a.default.instance.curStep=0;var e=cc.find("Canvas");this.ctrl=e.getComponent("GameCtrl"),this.clickCircle.active=!1,this.hand.active=!1,this.scheduleOnce(this.refresh,.5),this.refresh()}else this.node.active=!1},t.prototype.refresh=function(){this.clickCircle.active=!0,this.hand.active=!0,0==a.default.instance.curStep?(this.clickCircle.setPosition(cc.v2(410,-149)),this.hand.setPosition(cc.v2(532,-176)),this.hand.scaleX=-1):1==a.default.instance.curStep&&(this.clickCircle.setPosition(cc.v2(-20,-149)),this.hand.setPosition(cc.v2(-146,-176)),this.hand.scaleX=1)},t.prototype.onClick=function(e){var t=cc.find("Canvas");return t.getComponent("GameCtrl").onTouch(e),a.default.instance.curStep++,2<=a.default.instance.curStep?(o.default.instance.setData("finish_xinshou",1),t.getComponent("UIManager").showTip("\u70b9\u51fb\u5c4f\u5e55 \u4efb\u610f\u4f4d\u7f6e \n\u5373\u53ef\u53d1\u5c04\u70ae\u5f39\uff01",function(){o.default.instance.finish_xinshou=!0;var e=cc.find("Canvas/GameUI");if(e){var t=e.getComponent("GameUI");t&&t.countDownAni()}}.bind(this)),void(this.node.active=!1)):void this.scheduleOnce(this.refresh,1)},__decorate([s(cc.Node)],t.prototype,"clickCircle",void 0),__decorate([s(cc.Node)],t.prototype,"hand",void 0),t=__decorate([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{"./GameData":"GameData","./TankDataMgr":"TankDataMgr"}],"ald-game-conf":[function(e,t,n){"use strict";cc._RF.push(t,"1ca85SUv7dI9YuKuVlmZh3R","ald-game-conf"),n.app_key="84fcdc310be06b50d52b37524052c3e0",n.getLocation=!1,cc._RF.pop()},{}],"ald-game":[function(e,t,n){"use strict";cc._RF.push(t,"1deb92I05tJ+qDkfOWGvsCb","ald-game");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){if("undefined"!=typeof wx){var t="2.0.0",n="glog",a=e("./ald-game-conf");""===a.app_key&&console.error("\u8bf7\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u586b\u5199\u60a8\u7684app_key"),a.app_key=a.app_key.replace(/\s/g,""),wx.request({url:"https://"+n+".aldwx.com/config/app.json",method:"GET",success:function(e){200===e.statusCode&&(e.data.version!=t&&console.warn("\u60a8\u7684SDK\u4e0d\u662f\u6700\u65b0\u7248\u672c\uff0c\u8bf7\u5c3d\u5feb\u5347\u7ea7\uff01"),e.data.warn&&console.warn(e.data.warn),e.data.error&&console.error(e.data.error))}});var i="",r=function(){var e="";try{e=wx.getStorageSync("aldstat_uuid"),wx.setStorageSync("ald_ifo",!0)}catch(t){e="uuid_getstoragesync"}if(e)i=!1;else{e=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}(),i=!0;try{wx.setStorageSync("aldstat_uuid",e)}catch(e){wx.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return e}(),s={},c="",l="",d=0,u="",h=wx.getLaunchOptionsSync(),p=Date.now(),f=""+Date.now()+Math.floor(1e7*Math.random()),g=""+Date.now()+Math.floor(1e7*Math.random()),m=0,_="",y="",v=!0,M=!1,C=["aldSendEvent","aldOnShareAppMessage","aldShareAppMessage","aldSendSession","aldSendOpenid","aldLevelEvent"],E=["payStart","paySuccess","payFail","die","revive","tools","award"],b=["complete","fail"];void 0===wx.Queue&&(wx.Queue=new function(){this.concurrency=4,this.queue=[],this.tasks=[],this.activeCount=0;var e=this;this.push=function(t){this.tasks.push(new Promise(function(n,o){var a=function(){e.activeCount++,t().then(function(e){n(e)}).then(function(){e.next()})};e.activeCount<e.concurrency?a():e.queue.push(a)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){e.activeCount--,e.queue.length>0&&e.queue.shift()()}},wx.Queue.all()),Promise.all([new Promise(function(e,t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){y=B(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e,t){a.getLocation?wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}):wx.getSetting({success:function(t){t.authSetting["scope.userLocation"]?(wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")):e("")},fail:function(){e("")}})})]).then(function(e){""!==e[2]?(s.lat=e[2].latitude||"",s.lng=e[2].longitude||"",s.spd=e[2].speed||""):(s.lat="",s.lng="",s.spd=""),""!==e[1]?s.nt=e[1].networkType||"":s.nt="";var t=w(s);""!==e[0]&&(t.ufo=e[0],_=e[0]),A(t,"init")}),wx.onShow(function(e){if(h=e,m=Date.now(),!v&&!M){f=""+Date.now()+Math.floor(1e7*Math.random()),i=!1;try{wx.setStorageSync("ald_ifo",!1)}catch(e){}}v=!1,M=!1;var t=w(s),n=w(s);t.sm=m-p,e.query.ald_share_src&&e.shareTicket&&"1044"===e.scene?(n.tp="ald_share_click",new Promise(function(e,t){"1044"==h.scene?wx.getShareInfo({shareTicket:h.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(e){n.ct=e,A(n,"event")})):e.query.ald_share_src&&(n.tp="ald_share_click",n.ct="1",A(n,"event")),A(t,"show")}),wx.onHide(function(){var e=w(s);e.dr=Date.now()-m,""===_?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,_=t,y=B(t.userInfo.avatarUrl.split("/")),A(e,"hide")}}):A(e,"hide")}}):A(e,"hide")}),wx.onError(function(e){var t=w(s);t.tp="ald_error_message",t.ct=e,d++,A(t,"event")});var S={aldSendEvent:function(e,t){var n=w(s);""!==e&&"string"==typeof e&&e.length<=255?(n.tp=e,"string"==typeof t&&t.length<=255?(n.ct=String(t),A(n,"event")):"object"==(void 0===t?"undefined":o(t))?(JSON.stringify(t).length>=255&&console.error("\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u53c2\u6570\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26"),n.ct=JSON.stringify(t),A(n,"event")):void 0===t||""===t?A(n,"event"):console.error("\u4e8b\u4ef6\u53c2\u6570\u5fc5\u987b\u4e3aString,Object\u7c7b\u578b,\u4e14\u53c2\u6570\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")):console.error("\u4e8b\u4ef6\u540d\u79f0\u5fc5\u987b\u4e3aString\u7c7b\u578b\u4e14\u4e0d\u80fd\u8d85\u8fc7255\u4e2a\u5b57\u7b26")},aldOnShareAppMessage:function(e){wx.onShareAppMessage(function(){M=!0;var t=e(),n="";n=void 0!==h.query.ald_share_src?void 0!==t.query?(h.query.ald_share_src.indexOf(r),t.query+"&ald_share_src="+h.query.ald_share_src+","+r):(h.query.ald_share_src.indexOf(r),"ald_share_src="+h.query.ald_share_src+","+r):void 0!==t.query?t.query+"&ald_share_src="+r:"ald_share_src="+r,"undefined"!=D(t.ald_desc)&&(n+="&ald_desc="+t.ald_desc),t.query=n;var o=w(s);return o.ct=t,o.ct.sho=1,o.tp="ald_share_chain",A(o,"event"),t})},aldShareAppMessage:function(e){M=!0;var t=e,n="";n=void 0!==h.query.ald_share_src?void 0!==t.query?(h.query.ald_share_src.indexOf(r),t.query+"&ald_share_src="+h.query.ald_share_src+","+r):(h.query.ald_share_src.indexOf(r),"ald_share_src="+h.query.ald_share_src+","+r):void 0!==t.query?t.query+"&ald_share_src="+r:"ald_share_src="+r;var o=w(s);"undefined"!=D(t.ald_desc)&&(n+="&ald_desc="+t.ald_desc),t.query=n,o.ct=t,o.tp="ald_share_chain",A(o,"event"),wx.shareAppMessage(t)},aldSendSession:function(e){if(""!==e&&e){var t=w(s);t.tp="session",t.ct="session",c=e,""===_?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){t.ufo=e,A(t,"event")}}):A(t,"event")}}):(t.ufo=_,""!==_&&(t.gid=""),A(t,"event"))}else console.error("\u8bf7\u4f20\u5165\u4ece\u540e\u53f0\u83b7\u53d6\u7684session_key")},aldSendOpenid:function(e){if(""!==e&&e){l=e;var t=w(s);t.tp="openid",t.ct="openid",A(t,"event")}else console.error("openID\u4e0d\u80fd\u4e3a\u7a7a")}};wx.aldStage=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.stageId)||e.stageId.length>32?(console.warn("\u5173\u5361stageId\u5fc5\u987b\u7b26\u5408\u4f20\u53c2\u89c4\u5219,\u8bf7\u53c2\u8003\u6587\u6863\u3002"),!1):!("string"!==D(e.stageName)||e.stageName.length>32)||(console.warn("\u5173\u5361\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5,\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26,\u8bf7\u53c2\u8003\u6587\u6863"),!1)}var t="",n="",o=0;this.onStart=function(a){if(e(a)){var i={};o=Date.now(),i.sid=a.stageId,i.snm=a.stageName,i.state="start",n=""+Date.now()+Math.floor(1e7*Math.random()),t=i,("string"===D(a.userId)&&a.userId)<32&&(this.uid=a.uid),this.request()}},this.onRunning=function(n){if(e(n)){var o={params:{}};if(("string"===D(n.userId)&&n.userId)<32&&(this.uid=n.uid),!D(n.event)&&-1!=E.join(",").indexOf(n.event+","))return void E.join(",");if(o.event=n.event,"object"===D(n.params)){if("string"!==D(n.params.itemName)||n.params.itemName.length>32)return void console.warn("\u9053\u5177/\u5546\u54c1\u540d\u79f0\u4e3a\u5fc5\u4f20\u5b57\u6bb5\uff0c\u4e14\u957f\u5ea6\u5c0f\u4e8e32\u4e2a\u5b57\u7b26\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\u6587\u6863");o.params.itnm=n.params.itemName,"string"===D(n.params.itemId)&&n.params.itemId.length<32&&(o.params.itid=n.params.itemId),"number"===D(n.params.itemCount)&&n.params.itemCount.length<32?o.params.itco=n.params.itemCount:o.params.itco=1,-1!==n.event.indexOf("pay")&&("number"===D(n.params.itemMoney)&&n.params.itemMoney.length<32?o.params.money=n.params.itemMoney:o.params.money=0),"string"===D(n.params.desc)&&n.params.desc.length<64&&(o.params.desc=n.params.desc),o.state="running",o.sid=n.stageId,o.snm=n.stageName,t=o,this.request()}}},this.onEnd=function(n){if(e(n)){var a={};if(a.state="end",("string"===D(n.userId)&&n.userId)<32&&(this.uid=n.uid),!D(n.event)&&-1!==b.join(",").indexOf(n.event+","))return void b.join(",");a.sid=n.stageId,a.snm=n.stageName,a.event=n.event,a.sdr=0!==o?Date.now()-o:"",a.params={},"object"===D(n.params)&&"string"===D(n.params.desc)&&n.params.desc.length<64&&(a.params.desc=n.params.desc),t=a,this.request()}},this.request=function(){var e=w(s);t.ss=n,e.ct=t,A(e,"screen")}};for(var R=0;R<C.length;R++)!function(e,t){Object.defineProperty(wx,e,{value:t,writable:!1,enumerable:!0,configurable:!0})}(C[R],S[C[R]]);try{var T=wx.getSystemInfoSync();s.br=T.brand||"",s.md=T.model,s.pr=T.pixelRatio,s.sw=T.screenWidth,s.sh=T.screenHeight,s.ww=T.windowWidth,s.wh=T.windowHeight,s.lang=T.language,s.wv=T.version,s.sv=T.system,s.wvv=T.platform,s.fs=T.fontSizeSetting,s.wsdk=T.SDKVersion,s.bh=T.benchmarkLevel||"",s.bt=T.battery||"",s.wf=T.wifiSignal||"",s.lng="",s.lat="",s.nt="",s.spd="",s.ufo=""}catch(e){}}function D(e){var t={};return"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e,n){t["[object "+e+"]"]=e.toLowerCase()}),null==e?e:"object"==(void 0===e?"undefined":o(e))||"function"==typeof e?t[function(e){return Object.prototype.toString.call(e)}.call(e)]||"object":void 0===e?"undefined":o(e)}function A(e,o){u++,e.as=g,e.at=f,e.rq_c=u,e.ifo=i,e.ak=a.app_key,e.uu=r,e.v=t,e.st=Date.now(),e.ev=o,e.wsr=h,""!==function(e){if(void 0===e||""===e)return"";var t={};for(var n in e)"rawData"!=n&&"errMsg"!=n&&(t[n]=e[n]);return t}(e.ufo)&&(e.ufo=e.ufo),e.ec=d,wx.Queue.push(function(){return new Promise(function(t,o){wx.request({url:"https://"+n+".aldwx.com/d.html",data:e,header:{se:c||"",op:l||"",img:y||""},method:"GET",fail:function(){t("")},success:function(e){t(200==e.statusCode?"":"status error")}})})})}function w(e){var t={};for(var n in e)t[n]=e[n];return t}function B(e){for(var t="",n=0;n<e.length;n++)e[n].length>t.length&&(t=e[n]);return t}}(),cc._RF.pop()},{"./ald-game-conf":"ald-game-conf"}],goldMan:[function(e,t,n){"use strict";cc._RF.push(t,"295a4FsZKlPkKgbXS6gYoNW","goldMan"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../stageMode/Common"),a=e("../stageMode/RoleController"),i=e("../stageMode/AudioManager"),r=e("../stageMode/PrfabsManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBlood=!1,t.blood=null,t.tntTrigger=!1,t.timeReset=0,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.onBeginContact=function(e,t,n){if(0!=n.enabled){var r=e.getWorldManifold().points;n.tag==o.default.Tag.tagBullet?(e.disabled=!0,t.node.parent.getComponent(a.default).isHit||i.default.instance.playSound("scream"),t.name.indexOf("hand")<0&&r[0]&&this.playBloodEffct(r[0],n.node.getComponent(cc.RigidBody).linearVelocity),t.node.parent.getComponent(a.default).isHit=!0,t.node.parent.getComponent(a.default).hitJointRgBody=t.node.getComponent(cc.RigidBody),t.node.parent.getComponent(a.default).hitDir=n.node.getComponent(cc.RigidBody).linearVelocity.normalize(),t.node.parent.getComponent(a.default).hitPoint=e.getWorldManifold().points[0],r[0]&&t.node.parent.getComponent(a.default).hitEffct()):n.tag==o.default.Tag.tagPlat&&t.node.parent.getComponent(a.default).isRoadDead&&!t.node.parent.getComponent(a.default).isHit&&(t.node.parent.getComponent(a.default).isHit=!0,i.default.instance.playSound("scream"),this.playBloodEffct(r[0],n.node.getComponent(cc.RigidBody).linearVelocity))}},t.prototype.playBloodEffct=function(e,t){var n=(new Date).getTime();if(this.isBlood)n-this.timeReset>1300&&(this.timeReset=n,this.blood.getComponent(cc.ParticleSystem).resetSystem(),i.default.instance.playSound("scream"));else{this.isBlood=!0;var o=t.signAngle(cc.v2(1,0));o=cc.misc.radiansToDegrees(o),this.blood=cc.instantiate(r.default.instance.prfabsAry.Blood_2),this.blood.getComponent(cc.ParticleSystem).resetSystem();var a=this.node.parent.convertToNodeSpaceAR(e);this.blood.position=a,this.blood.rotation=o,this.node.parent.addChild(this.blood,1e3)}},t.prototype.update=function(e){this.blood&&(this.blood.position=this.node.position)},t=__decorate([c],t)}(cc.Component));n.goldMan=l,cc._RF.pop()},{"../stageMode/AudioManager":"AudioManager","../stageMode/Common":"Common","../stageMode/PrfabsManager":"PrfabsManager","../stageMode/RoleController":"RoleController"}],long:[function(e,t,n){"use strict";cc._RF.push(t,"f4c9aIKl1NFuoBcTXe5nFhk","long");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,a){"object"==(void 0===n?"undefined":o(n))&&"object"==(void 0===t?"undefined":o(t))?t.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==(void 0===n?"undefined":o(n))?n.Long=a():e.Long=a()}("undefined"!=typeof self?self:void 0,function(){return function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function o(e){return!0===(e&&e.__isLong__)}function a(e,t){var n,o,a;return t?(a=0<=(e>>>=0)&&e<256)&&(o=u[e])?o:(n=r(e,(0|e)<0?-1:0,!0),a&&(u[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(o=d[e])?o:(n=r(e,e<0?-1:0,!1),a&&(d[e]=n),n)}function i(e,t){if(isNaN(e))return t?y:_;if(t){if(e<0)return y;if(e>=f)return b}else{if(e<=-g)return S;if(e+1>=g)return E}return e<0?i(-e,t).neg():r(e%p|0,e/p|0,t)}function r(e,t,o){return new n(e,t,o)}function s(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return _;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return s(e.substring(1),t,n).neg();for(var a=i(h(n,8)),r=_,c=0;c<e.length;c+=8){var l=Math.min(8,e.length-c),d=parseInt(e.substring(c,c+l),n);if(l<8){var u=i(h(n,l));r=r.mul(u).add(i(d))}else r=r.mul(a),r=r.add(i(d))}return r.unsigned=t,r}function c(e,t){return"number"==typeof e?i(e,t):"string"==typeof e?s(e,t):r(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}e.exports=n;var l=null;try{l=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=o;var d={},u={};n.fromInt=a,n.fromNumber=i,n.fromBits=r;var h=Math.pow;n.fromString=s,n.fromValue=c;var p=4294967296,f=p*p,g=f/2,m=a(1<<24),_=a(0);n.ZERO=_;var y=a(0,!0);n.UZERO=y;var v=a(1);n.ONE=v;var M=a(1,!0);n.UONE=M;var C=a(-1);n.NEG_ONE=C;var E=r(-1,2147483647,!1);n.MAX_VALUE=E;var b=r(-1,-1,!0);n.MAX_UNSIGNED_VALUE=b;var S=r(0,-2147483648,!1);n.MIN_VALUE=S;var R=n.prototype;R.toInt=function(){return this.unsigned?this.low>>>0:this.low},R.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},R.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=i(e),n=this.div(t),o=n.mul(t).sub(this);return n.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=i(h(e,6),this.unsigned),r=this,s="";;){var c=r.div(a),l=(r.sub(c.mul(a)).toInt()>>>0).toString(e);if((r=c).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},R.getHighBits=function(){return this.high},R.getHighBitsUnsigned=function(){return this.high>>>0},R.getLowBits=function(){return this.low},R.getLowBitsUnsigned=function(){return this.low>>>0},R.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},R.isZero=function(){return 0===this.high&&0===this.low},R.eqz=R.isZero,R.isNegative=function(){return!this.unsigned&&this.high<0},R.isPositive=function(){return this.unsigned||this.high>=0},R.isOdd=function(){return 1==(1&this.low)},R.isEven=function(){return 0==(1&this.low)},R.equals=function(e){return o(e)||(e=c(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},R.eq=R.equals,R.notEquals=function(e){return!this.eq(e)},R.neq=R.notEquals,R.ne=R.notEquals,R.lessThan=function(e){return this.comp(e)<0},R.lt=R.lessThan,R.lessThanOrEqual=function(e){return this.comp(e)<=0},R.lte=R.lessThanOrEqual,R.le=R.lessThanOrEqual,R.greaterThan=function(e){return this.comp(e)>0},R.gt=R.greaterThan,R.greaterThanOrEqual=function(e){return this.comp(e)>=0},R.gte=R.greaterThanOrEqual,R.ge=R.greaterThanOrEqual,R.compare=function(e){if(o(e)||(e=c(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},R.comp=R.compare,R.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(v)},R.neg=R.negate,R.add=function(e){o(e)||(e=c(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,s=e.high>>>16,l=65535&e.high,d=e.low>>>16,u=0,h=0,p=0,f=0;return p+=(f+=i+(65535&e.low))>>>16,h+=(p+=a+d)>>>16,u+=(h+=n+l)>>>16,u+=t+s,r((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},R.subtract=function(e){return o(e)||(e=c(e)),this.add(e.neg())},R.sub=R.subtract,R.multiply=function(e){if(this.isZero())return _;if(o(e)||(e=c(e)),l)return r(l.mul(this.low,this.high,e.low,e.high),l.get_high(),this.unsigned);if(e.isZero())return _;if(this.eq(S))return e.isOdd()?S:_;if(e.eq(S))return this.isOdd()?S:_;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return i(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,s=65535&this.low,d=e.high>>>16,u=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,g=0,y=0,v=0;return y+=(v+=s*p)>>>16,g+=(y+=a*p)>>>16,y&=65535,g+=(y+=s*h)>>>16,f+=(g+=n*p)>>>16,g&=65535,f+=(g+=a*h)>>>16,g&=65535,f+=(g+=s*u)>>>16,f+=t*p+n*h+a*u+s*d,r((y&=65535)<<16|(v&=65535),(f&=65535)<<16|(g&=65535),this.unsigned)},R.mul=R.multiply,R.divide=function(e){if(o(e)||(e=c(e)),e.isZero())throw Error("division by zero");if(l)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?r((this.unsigned?l.div_u:l.div_s)(this.low,this.high,e.low,e.high),l.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:_;var t,n,a;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return M;a=y}else{if(this.eq(S))return e.eq(v)||e.eq(C)?S:e.eq(S)?v:(t=this.shr(1).div(e).shl(1)).eq(_)?e.isNegative()?v:C:(n=this.sub(e.mul(t)),a=t.add(n.div(e)));if(e.eq(S))return this.unsigned?y:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=_}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),d=s<=48?1:h(2,s-48),u=i(t),p=u.mul(e);p.isNegative()||p.gt(n);)p=(u=i(t-=d,this.unsigned)).mul(e);u.isZero()&&(u=v),a=a.add(u),n=n.sub(p)}return a},R.div=R.divide,R.modulo=function(e){return o(e)||(e=c(e)),l?r((this.unsigned?l.rem_u:l.rem_s)(this.low,this.high,e.low,e.high),l.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},R.mod=R.modulo,R.rem=R.modulo,R.not=function(){return r(~this.low,~this.high,this.unsigned)},R.and=function(e){return o(e)||(e=c(e)),r(this.low&e.low,this.high&e.high,this.unsigned)},R.or=function(e){return o(e)||(e=c(e)),r(this.low|e.low,this.high|e.high,this.unsigned)},R.xor=function(e){return o(e)||(e=c(e)),r(this.low^e.low,this.high^e.high,this.unsigned)},R.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):r(0,this.low<<e-32,this.unsigned)},R.shl=R.shiftLeft,R.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},R.shr=R.shiftRight,R.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?r(this.low>>>e|t<<32-e,t>>>e,this.unsigned):r(32===e?t:t>>>e-32,0,this.unsigned)},R.shru=R.shiftRightUnsigned,R.shr_u=R.shiftRightUnsigned,R.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},R.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},R.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},R.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},R.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,o){return o?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}])}),cc._RF.pop()},{}],md5:[function(e,t,n){"use strict";cc._RF.push(t,"0564fYJ+pdCQ4bVz/tt7vZN","md5"),Object.defineProperty(n,"__esModule",{value:!0}),n.md5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,o,a,i,r;return a=2147483648&e,i=2147483648&t,r=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(o=1073741824&t)?2147483648^r^a^i:n|o?1073741824&r?3221225472^r^a^i:1073741824^r^a^i:r^a^i}function o(e,o,a,i,r,s,c){return n(t(e=n(e,n(n(function(e,t,n){return e&t|~e&n}(o,a,i),r),c)),s),o)}function a(e,o,a,i,r,s,c){return n(t(e=n(e,n(n(function(e,t,n){return e&n|t&~n}(o,a,i),r),c)),s),o)}function i(e,o,a,i,r,s,c){return n(t(e=n(e,n(n(function(e,t,n){return e^t^n}(o,a,i),r),c)),s),o)}function r(e,o,a,i,r,s,c){return n(t(e=n(e,n(n(function(e,t,n){return t^(e|~n)}(o,a,i),r),c)),s),o)}function s(e){var t,n="",o="";for(t=0;t<=3;t++)n+=(o="0"+(e>>>8*t&255).toString(16)).substr(o.length-2,2);return n}var c,l,d,u,h,p,f,g,m,_=Array();for(_=function(e){for(var t,n=e.length,o=n+8,a=16*((o-o%64)/64+1),i=Array(a-1),r=0,s=0;s<n;)r=s%4*8,i[t=(s-s%4)/4]=i[t]|e.charCodeAt(s)<<r,s++;return r=s%4*8,i[t=(s-s%4)/4]=i[t]|128<<r,i[a-2]=n<<3,i[a-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}(e)),p=1732584193,f=4023233417,g=2562383102,m=271733878,c=0;c<_.length;c+=16)l=p,d=f,u=g,h=m,f=r(f=r(f=r(f=r(f=i(f=i(f=i(f=i(f=a(f=a(f=a(f=a(f=o(f=o(f=o(f=o(f,g=o(g,m=o(m,p=o(p,f,g,m,_[c+0],7,3614090360),f,g,_[c+1],12,3905402710),p,f,_[c+2],17,606105819),m,p,_[c+3],22,3250441966),g=o(g,m=o(m,p=o(p,f,g,m,_[c+4],7,4118548399),f,g,_[c+5],12,1200080426),p,f,_[c+6],17,2821735955),m,p,_[c+7],22,4249261313),g=o(g,m=o(m,p=o(p,f,g,m,_[c+8],7,1770035416),f,g,_[c+9],12,2336552879),p,f,_[c+10],17,4294925233),m,p,_[c+11],22,2304563134),g=o(g,m=o(m,p=o(p,f,g,m,_[c+12],7,1804603682),f,g,_[c+13],12,4254626195),p,f,_[c+14],17,2792965006),m,p,_[c+15],22,1236535329),g=a(g,m=a(m,p=a(p,f,g,m,_[c+1],5,4129170786),f,g,_[c+6],9,3225465664),p,f,_[c+11],14,643717713),m,p,_[c+0],20,3921069994),g=a(g,m=a(m,p=a(p,f,g,m,_[c+5],5,3593408605),f,g,_[c+10],9,38016083),p,f,_[c+15],14,3634488961),m,p,_[c+4],20,3889429448),g=a(g,m=a(m,p=a(p,f,g,m,_[c+9],5,568446438),f,g,_[c+14],9,3275163606),p,f,_[c+3],14,4107603335),m,p,_[c+8],20,1163531501),g=a(g,m=a(m,p=a(p,f,g,m,_[c+13],5,2850285829),f,g,_[c+2],9,4243563512),p,f,_[c+7],14,1735328473),m,p,_[c+12],20,2368359562),g=i(g,m=i(m,p=i(p,f,g,m,_[c+5],4,4294588738),f,g,_[c+8],11,2272392833),p,f,_[c+11],16,1839030562),m,p,_[c+14],23,4259657740),g=i(g,m=i(m,p=i(p,f,g,m,_[c+1],4,2763975236),f,g,_[c+4],11,1272893353),p,f,_[c+7],16,4139469664),m,p,_[c+10],23,3200236656),g=i(g,m=i(m,p=i(p,f,g,m,_[c+13],4,681279174),f,g,_[c+0],11,3936430074),p,f,_[c+3],16,3572445317),m,p,_[c+6],23,76029189),g=i(g,m=i(m,p=i(p,f,g,m,_[c+9],4,3654602809),f,g,_[c+12],11,3873151461),p,f,_[c+15],16,530742520),m,p,_[c+2],23,3299628645),g=r(g,m=r(m,p=r(p,f,g,m,_[c+0],6,4096336452),f,g,_[c+7],10,1126891415),p,f,_[c+14],15,2878612391),m,p,_[c+5],21,4237533241),g=r(g,m=r(m,p=r(p,f,g,m,_[c+12],6,1700485571),f,g,_[c+3],10,2399980690),p,f,_[c+10],15,4293915773),m,p,_[c+1],21,2240044497),g=r(g,m=r(m,p=r(p,f,g,m,_[c+8],6,1873313359),f,g,_[c+15],10,4264355552),p,f,_[c+6],15,2734768916),m,p,_[c+13],21,1309151649),g=r(g,m=r(m,p=r(p,f,g,m,_[c+4],6,4149444226),f,g,_[c+11],10,3174756917),p,f,_[c+2],15,718787259),m,p,_[c+9],21,3951481745),p=n(p,l),f=n(f,d),g=n(g,u),m=n(m,h);return(s(p)+s(f)+s(g)+s(m)).toLowerCase()},cc._RF.pop()},{}],minimal:[function(require,module,exports){(function(global){"use strict";cc._RF.push(module,"52885MjfK1Jo6ipwkaEtsza","minimal");var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(b){var r,u,t,n;r={1:[function(e,t){t.exports=function(e,t){for(var n=Array(arguments.length-1),o=0,a=2,i=!0;a<arguments.length;)n[o++]=arguments[a++];return new Promise(function(a,r){n[o]=function(e){if(i)if(i=!1,e)r(e);else{for(var t=Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];a.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,r(e))}})}},{}],2:[function(e,t,n){var o=n;o.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var a=Array(64),i=Array(123),r=0;r<64;)i[a[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;o.encode=function(e,t,n){for(var o,i=null,r=[],s=0,c=0;t<n;){var l=e[t++];switch(c){case 0:r[s++]=a[l>>2],o=(3&l)<<4,c=1;break;case 1:r[s++]=a[o|l>>4],o=(15&l)<<2,c=2;break;case 2:r[s++]=a[o|l>>6],r[s++]=a[63&l],c=0}8191<s&&((i||(i=[])).push(String.fromCharCode.apply(String,r)),s=0)}return c&&(r[s++]=a[o],r[s++]=61,1===c&&(r[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,r.slice(0,s))),i.join("")):String.fromCharCode.apply(String,r.slice(0,s))};var s="invalid encoding";o.decode=function(e,t,n){for(var o,a=n,r=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&1<r)break;if((l=i[l])===b)throw Error(s);switch(r){case 0:o=l,r=1;break;case 1:t[n++]=o<<2|(48&l)>>4,o=l,r=2;break;case 2:t[n++]=(15&o)<<4|(60&l)>>2,o=l,r=3;break;case 3:t[n++]=(3&o)<<6|l,r=0}}if(1===r)throw Error(s);return n-a},o.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t){function n(){this.t={}}(t.exports=n).prototype.on=function(e,t,n){return(this.t[e]||(this.t[e]=[])).push({fn:t,ctx:n||this}),this},n.prototype.off=function(e,t){if(e===b)this.t={};else if(t===b)this.t[e]=[];else for(var n=this.t[e],o=0;o<n.length;)n[o].fn===t?n.splice(o,1):++o;return this},n.prototype.emit=function(e){var t=this.t[e];if(t){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,n)}return this}},{}],4:[function(e,t){function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),o=128===n[3];function a(e,o,a){t[0]=e,o[a]=n[0],o[a+1]=n[1],o[a+2]=n[2],o[a+3]=n[3]}function i(e,o,a){t[0]=e,o[a]=n[3],o[a+1]=n[2],o[a+2]=n[1],o[a+3]=n[0]}function r(e,o){return n[0]=e[o],n[1]=e[o+1],n[2]=e[o+2],n[3]=e[o+3],t[0]}function s(e,o){return n[3]=e[o],n[2]=e[o+1],n[1]=e[o+2],n[0]=e[o+3],t[0]}e.writeFloatLE=o?a:i,e.writeFloatBE=o?i:a,e.readFloatLE=o?r:s,e.readFloatBE=o?s:r}():function(){function t(e,t,n,o){var a=t<0?1:0;if(a&&(t=-t),0===t)e(0<1/t?0:2147483648,n,o);else if(isNaN(t))e(2143289344,n,o);else if(3.4028234663852886e38<t)e((a<<31|2139095040)>>>0,n,o);else if(t<1.1754943508222875e-38)e((a<<31|Math.round(t/1.401298464324817e-45))>>>0,n,o);else{var i=Math.floor(Math.log(t)/Math.LN2);e((a<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,o)}}function n(e,t,n){var o=e(t,n),a=2*(o>>31)+1,i=o>>>23&255,r=8388607&o;return 255===i?r?NaN:a*(1/0):0===i?1.401298464324817e-45*a*r:a*Math.pow(2,i-150)*(r+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,a),e.readFloatLE=n.bind(null,i),e.readFloatBE=n.bind(null,r)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),o=128===n[7];function a(e,o,a){t[0]=e,o[a]=n[0],o[a+1]=n[1],o[a+2]=n[2],o[a+3]=n[3],o[a+4]=n[4],o[a+5]=n[5],o[a+6]=n[6],o[a+7]=n[7]}function i(e,o,a){t[0]=e,o[a]=n[7],o[a+1]=n[6],o[a+2]=n[5],o[a+3]=n[4],o[a+4]=n[3],o[a+5]=n[2],o[a+6]=n[1],o[a+7]=n[0]}function r(e,o){return n[0]=e[o],n[1]=e[o+1],n[2]=e[o+2],n[3]=e[o+3],n[4]=e[o+4],n[5]=e[o+5],n[6]=e[o+6],n[7]=e[o+7],t[0]}function s(e,o){return n[7]=e[o],n[6]=e[o+1],n[5]=e[o+2],n[4]=e[o+3],n[3]=e[o+4],n[2]=e[o+5],n[1]=e[o+6],n[0]=e[o+7],t[0]}e.writeDoubleLE=o?a:i,e.writeDoubleBE=o?i:a,e.readDoubleLE=o?r:s,e.readDoubleBE=o?s:r}():function(){function t(e,t,n,o,a,i){var r=o<0?1:0;if(r&&(o=-o),0===o)e(0,a,i+t),e(0<1/o?0:2147483648,a,i+n);else if(isNaN(o))e(0,a,i+t),e(2146959360,a,i+n);else if(1.7976931348623157e308<o)e(0,a,i+t),e((r<<31|2146435072)>>>0,a,i+n);else{var s;if(o<2.2250738585072014e-308)e((s=o/5e-324)>>>0,a,i+t),e((r<<31|s/4294967296)>>>0,a,i+n);else{var c=Math.floor(Math.log(o)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=o*Math.pow(2,-c))>>>0,a,i+t),e((r<<31|c+1023<<20|1048576*s&1048575)>>>0,a,i+n)}}}function n(e,t,n,o,a){var i=e(o,a+t),r=e(o,a+n),s=2*(r>>31)+1,c=r>>>20&2047,l=4294967296*(1048575&r)+i;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,a,4,0),e.readDoubleLE=n.bind(null,i,0,4),e.readDoubleBE=n.bind(null,r,4,0)}(),e}function o(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function a(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function r(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=n(n)},{}],5:[function(t,n,i){function r(t){try{var n=eval("require")(t);if(n&&(n.length||Object.keys(n).length))return n}catch(t){}return null}n.exports=r},{}],6:[function(e,t){t.exports=function(e,t,n){var o=n||8192,a=o>>>1,i=null,r=o;return function(n){if(n<1||a<n)return e(n);o<r+n&&(i=e(o),r=0);var s=t.call(i,r,r+=n);return 7&r&&(r=1+(7|r)),s}}},{}],7:[function(e,t,n){var o=n;o.length=function(e){for(var t=0,n=0,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(o+1))?(++o,t+=4):t+=3;return t},o.read=function(e,t,n){if(n-t<1)return"";for(var o,a=null,i=[],r=0;t<n;)(o=e[t++])<128?i[r++]=o:191<o&&o<224?i[r++]=(31&o)<<6|63&e[t++]:239<o&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[r++]=55296+(o>>10),i[r++]=56320+(1023&o)):i[r++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],8191<r&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),r=0);return a?(r&&a.push(String.fromCharCode.apply(String,i.slice(0,r))),a.join("")):String.fromCharCode.apply(String,i.slice(0,r))},o.write=function(e,t,n){for(var o,a,i=n,r=0;r<e.length;++r)(o=e.charCodeAt(r))<128?t[n++]=o:(o<2048?t[n++]=o>>6|192:(55296==(64512&o)&&56320==(64512&(a=e.charCodeAt(r+1)))?(o=65536+((1023&o)<<10)+(1023&a),++r,t[n++]=o>>18|240,t[n++]=o>>12&63|128):t[n++]=o>>12|224,t[n++]=o>>6&63|128),t[n++]=63&o|128);return n-i}},{}],8:[function(e,t,n){var o=n;function a(){o.Reader.n(o.BufferReader),o.util.n()}o.build="minimal",o.Writer=e(16),o.BufferWriter=e(17),o.Reader=e(9),o.BufferReader=e(10),o.util=e(15),o.rpc=e(12),o.roots=e(11),o.configure=a,o.Writer.n(o.BufferWriter),a()},{10:10,11:11,12:12,15:15,16:16,17:17,9:9}],9:[function(e,t){t.exports=s;var n,o=e(15),a=o.LongBits,i=o.utf8;function r(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function s(e){this.buf=e,this.pos=0,this.len=e.length}var c,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new s(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new s(e);throw Error("illegal buffer")};function d(){var e=new a(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw r(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw r(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function u(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw r(this,8);return new a(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}s.create=o.Buffer?function(e){return(s.create=function(e){return o.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l,s.prototype.i=o.Array.prototype.subarray||o.Array.prototype.slice,s.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,r(this,10);return c}),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw r(this,4);return u(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw r(this,4);return 0|u(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw r(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},s.prototype.double=function(){if(this.pos+8>this.len)throw r(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},s.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw r(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this.i.call(this.buf,t,n)},s.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},s.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw r(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw r(this)}while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},s.n=function(e){n=e;var t=o.Long?"toLong":"toNumber";o.merge(s.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},{15:15}],10:[function(e,t){t.exports=a;var n=e(9);(a.prototype=Object.create(n.prototype)).constructor=a;var o=e(15);function a(e){n.call(this,e)}o.Buffer&&(a.prototype.i=o.Buffer.prototype.slice),a.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},{15:15,9:9}],11:[function(e,t){t.exports={}},{}],12:[function(e,t,n){n.Service=e(13)},{13:13}],13:[function(e,t){t.exports=o;var n=e(15);function o(e,t,o){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!o}((o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o).prototype.rpcCall=function e(t,o,a,i,r){if(!i)throw TypeError("request must be specified");var s=this;if(!r)return n.asPromise(e,s,t,o,a,i);if(!s.rpcImpl)return setTimeout(function(){r(Error("already ended"))},0),b;try{return s.rpcImpl(t,o[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(e,n){if(e)return s.emit("error",e,t),r(e);if(null===n)return s.end(!0),b;if(!(n instanceof a))try{n=a[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),r(e)}return s.emit("data",n,t),r(null,n)})}catch(e){return s.emit("error",e,t),setTimeout(function(){r(e)},0),b}},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{15:15}],14:[function(e,t){t.exports=o;var n=e(15);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var a=o.zero=new o(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var i=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return a;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++i&&(i=0))),new o(n,i)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):a},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var r=String.prototype.charCodeAt;o.fromHash=function(e){return e===i?a:new o((r.call(e,0)|r.call(e,1)<<8|r.call(e,2)<<16|r.call(e,3)<<24)>>>0,(r.call(e,4)|r.call(e,5)<<8|r.call(e,6)<<16|r.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},{15:15}],15:[function(e,t,n){var o=n;function a(e,t,n){for(var o=Object.keys(t),a=0;a<o.length;++a)e[o[a]]!==b&&n||(e[o[a]]=t[o[a]]);return e}function i(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),n&&a(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=e(1),o.base64=e(2),o.EventEmitter=e(3),o.float=e(4),o.inquire=e(5),o.utf8=e(7),o.pool=e(6),o.LongBits=e(14),o.global="undefined"!=typeof window&&window||void 0!==global&&global||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isNode=!!(o.global.process&&o.global.process.versions&&o.global.process.versions.node),o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==(void 0===e?"undefined":_typeof(e))},o.isset=o.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=(void 0===n?"undefined":_typeof(n))||0<(Array.isArray(n)?n.length:Object.keys(n).length))},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o.r=null,o.u=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o.u(e):new o.Array(e):o.Buffer?o.r(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var n=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(n.lo,n.hi,t):n.toNumber(!!t)},o.merge=a,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=i,o.ProtocolError=i("ProtocolError"),o.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;-1<n;--n)if(1===t[e[n]]&&this[e[n]]!==b&&null!==this[e[n]])return e[n]}},o.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o.n=function(){var e=o.Buffer;e?(o.r=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},o.u=e.allocUnsafe||function(t){return new e(t)}):o.r=o.u=null}},{1:1,14:14,2:2,3:3,4:4,5:5,6:6,7:7}],16:[function(e,t){t.exports=l;var n,o=e(15),a=o.LongBits,i=o.base64,r=o.utf8;function s(e,t,n){this.fn=e,this.len=t,this.next=b,this.val=n}function c(){}function l(){this.len=0,this.head=new s(c,0,0),this.tail=this.head,this.states=null}function d(e,t,n){t[n]=255&e}function u(e,t){this.len=e,this.next=b,this.val=t}function h(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function p(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}l.create=o.Buffer?function(){return(l.create=function(){return new n})()}:function(){return new l},l.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(l.alloc=o.pool(l.alloc,o.Array.prototype.subarray)),l.prototype.e=function(e,t,n){return this.tail=this.tail.next=new s(e,t,n),this.len+=t,this},(u.prototype=Object.create(s.prototype)).fn=function(e,t,n){for(;127<e;)t[n++]=127&e|128,e>>>=7;t[n]=e},l.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new u((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},l.prototype.int32=function(e){return e<0?this.e(h,10,a.fromNumber(e)):this.uint32(e)},l.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},l.prototype.int64=l.prototype.uint64=function(e){var t=a.from(e);return this.e(h,t.length(),t)},l.prototype.sint64=function(e){var t=a.from(e).zzEncode();return this.e(h,t.length(),t)},l.prototype.bool=function(e){return this.e(d,1,e?1:0)},l.prototype.sfixed32=l.prototype.fixed32=function(e){return this.e(p,4,e>>>0)},l.prototype.sfixed64=l.prototype.fixed64=function(e){var t=a.from(e);return this.e(p,4,t.lo).e(p,4,t.hi)},l.prototype.float=function(e){return this.e(o.float.writeFloatLE,4,e)},l.prototype.double=function(e){return this.e(o.float.writeDoubleLE,8,e)};var f=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var o=0;o<e.length;++o)t[n+o]=e[o]};l.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this.e(d,1,0);if(o.isString(e)){var n=l.alloc(t=i.length(e));i.decode(e,n,0),e=n}return this.uint32(t).e(f,t,e)},l.prototype.string=function(e){var t=r.length(e);return t?this.uint32(t).e(r.write,t,e):this.e(d,1,0)},l.prototype.fork=function(){return this.states=new function(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}(this),this.head=this.tail=new s(c,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(c,0,0),this.len=0),this},l.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},l.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},l.n=function(e){n=e}},{15:15}],17:[function(e,t){t.exports=i;var n=e(16);(i.prototype=Object.create(n.prototype)).constructor=i;var o=e(15),a=o.Buffer;function i(){n.call(this)}i.alloc=function(e){return(i.alloc=o.u)(e)};var r=a&&a.prototype instanceof Uint8Array&&"set"===a.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var o=0;o<e.length;)t[n++]=e[o++]};function s(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write(e,n)}i.prototype.bytes=function(e){o.isString(e)&&(e=o.r(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this.e(r,t,e),this},i.prototype.string=function(e){var t=a.byteLength(e);return this.uint32(t),t&&this.e(s,t,e),this}},{15:15,16:16}]},u={},t=[8],n=function e(t){var n=u[t];return n||r[t][0].call(n=u[t]={exports:{}},e,n,n.exports),n.exports}(t[0]),n.util.global.protobuf=n,"function"==typeof define&&define.amd&&define(["long"],function(e){return e&&e.isLong&&(n.util.Long=e,n.configure()),n}),"object"==(void 0===module?"undefined":_typeof(module))&&module&&module.exports&&(module.exports=n)}(),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],pbcus:[function(e,t,n){"use strict";cc._RF.push(t,"72494mvz2xOyasb4z2hsEAS","pbcus"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.SurvivalModeLevelMeta=n.HostageModeLevelMeta=n.GrenadeModeLevelMeta=n.NewModeUnlockMeta=n.KeyRewardMeta=n.WelfareCentreMeta=n.MiniGameMeta=n.SettlementRewardMeta=n.ImageUpgradeMeta=n.SignInMeta=n.GameMeta=n.EnergyMeta=n.CoinRewardMeta=n.ClassicalModeLevelMeta=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./protobufjs/minimal"));var i=a.Reader,r=a.Writer,s=a.util,c=a.roots.default||(a.roots.default={});n.ClassicalModeLevelMeta=c.ClassicalModeLevelMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.level=0,e.prototype.goldBulletNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.level),t.uint32(16).int32(e.goldBulletNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.ClassicalModeLevelMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.level=e.int32();break;case 2:o.goldBulletNum=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("level"))throw s.ProtocolError("missing required 'level'",{instance:o});if(!o.hasOwnProperty("goldBulletNum"))throw s.ProtocolError("missing required 'goldBulletNum'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.level)?s.isInteger(e.goldBulletNum)?null:"goldBulletNum: integer expected":"level: integer expected"},e.fromObject=function(e){if(e instanceof c.ClassicalModeLevelMeta)return e;var t=new c.ClassicalModeLevelMeta;return null!=e.level&&(t.level=0|e.level),null!=e.goldBulletNum&&(t.goldBulletNum=0|e.goldBulletNum),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.level=0,n.goldBulletNum=0),null!=e.level&&e.hasOwnProperty("level")&&(n.level=e.level),null!=e.goldBulletNum&&e.hasOwnProperty("goldBulletNum")&&(n.goldBulletNum=e.goldBulletNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.CoinRewardMeta=c.CoinRewardMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.rewardNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.rewardNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.CoinRewardMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.rewardNum=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("rewardNum"))throw s.ProtocolError("missing required 'rewardNum'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.rewardNum)?null:"rewardNum: integer expected"},e.fromObject=function(e){if(e instanceof c.CoinRewardMeta)return e;var t=new c.CoinRewardMeta;return null!=e.rewardNum&&(t.rewardNum=0|e.rewardNum),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.rewardNum=0),null!=e.rewardNum&&e.hasOwnProperty("rewardNum")&&(n.rewardNum=e.rewardNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.EnergyMeta=c.EnergyMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.initialNum=0,e.prototype.upperLimit=0,e.prototype.recoverInterval=0,e.prototype.recoverNum=0,e.prototype.energyExchange=0,e.prototype.goldenergyExchange=0,e.prototype.goldPrice=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.initialNum),t.uint32(16).int32(e.upperLimit),t.uint32(24).int32(e.recoverInterval),t.uint32(32).int32(e.recoverNum),t.uint32(40).int32(e.energyExchange),t.uint32(48).int32(e.goldenergyExchange),t.uint32(56).int32(e.goldPrice),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.EnergyMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.initialNum=e.int32();break;case 2:o.upperLimit=e.int32();break;case 3:o.recoverInterval=e.int32();break;case 4:o.recoverNum=e.int32();break;case 5:o.energyExchange=e.int32();break;case 6:o.goldenergyExchange=e.int32();break;case 7:o.goldPrice=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("initialNum"))throw s.ProtocolError("missing required 'initialNum'",{instance:o});if(!o.hasOwnProperty("upperLimit"))throw s.ProtocolError("missing required 'upperLimit'",{instance:o});if(!o.hasOwnProperty("recoverInterval"))throw s.ProtocolError("missing required 'recoverInterval'",{instance:o});if(!o.hasOwnProperty("recoverNum"))throw s.ProtocolError("missing required 'recoverNum'",{instance:o});if(!o.hasOwnProperty("energyExchange"))throw s.ProtocolError("missing required 'energyExchange'",{instance:o});if(!o.hasOwnProperty("goldenergyExchange"))throw s.ProtocolError("missing required 'goldenergyExchange'",{instance:o});if(!o.hasOwnProperty("goldPrice"))throw s.ProtocolError("missing required 'goldPrice'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.initialNum)?s.isInteger(e.upperLimit)?s.isInteger(e.recoverInterval)?s.isInteger(e.recoverNum)?s.isInteger(e.energyExchange)?s.isInteger(e.goldenergyExchange)?s.isInteger(e.goldPrice)?null:"goldPrice: integer expected":"goldenergyExchange: integer expected":"energyExchange: integer expected":"recoverNum: integer expected":"recoverInterval: integer expected":"upperLimit: integer expected":"initialNum: integer expected"},e.fromObject=function(e){if(e instanceof c.EnergyMeta)return e;var t=new c.EnergyMeta;return null!=e.initialNum&&(t.initialNum=0|e.initialNum),null!=e.upperLimit&&(t.upperLimit=0|e.upperLimit),null!=e.recoverInterval&&(t.recoverInterval=0|e.recoverInterval),null!=e.recoverNum&&(t.recoverNum=0|e.recoverNum),null!=e.energyExchange&&(t.energyExchange=0|e.energyExchange),null!=e.goldenergyExchange&&(t.goldenergyExchange=0|e.goldenergyExchange),null!=e.goldPrice&&(t.goldPrice=0|e.goldPrice),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.initialNum=0,n.upperLimit=0,n.recoverInterval=0,n.recoverNum=0,n.energyExchange=0,n.goldenergyExchange=0,n.goldPrice=0),null!=e.initialNum&&e.hasOwnProperty("initialNum")&&(n.initialNum=e.initialNum),null!=e.upperLimit&&e.hasOwnProperty("upperLimit")&&(n.upperLimit=e.upperLimit),null!=e.recoverInterval&&e.hasOwnProperty("recoverInterval")&&(n.recoverInterval=e.recoverInterval),null!=e.recoverNum&&e.hasOwnProperty("recoverNum")&&(n.recoverNum=e.recoverNum),null!=e.energyExchange&&e.hasOwnProperty("energyExchange")&&(n.energyExchange=e.energyExchange),null!=e.goldenergyExchange&&e.hasOwnProperty("goldenergyExchange")&&(n.goldenergyExchange=e.goldenergyExchange),null!=e.goldPrice&&e.hasOwnProperty("goldPrice")&&(n.goldPrice=e.goldPrice),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.GameMeta=c.GameMeta=function(){function e(e){if(this.classicalModeLevelMeta=[],this.signInMeta=[],this.coinRewardMeta=[],this.imageUpgradeMeta=[],this.settlementRewardMeta=[],this.miniGameMeta=[],this.welfareCentreMeta=[],this.keyRewardMeta=[],this.newModeUnlockMeta=[],this.energyMeta=[],this.grenadeModeLevelMeta=[],this.hostageModeLevelMeta=[],this.survivalModeLevelMeta=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.classicalModeLevelMeta=s.emptyArray,e.prototype.metaVer=s.Long?s.Long.fromBits(0,0,!1):0,e.prototype.signInMeta=s.emptyArray,e.prototype.coinRewardMeta=s.emptyArray,e.prototype.imageUpgradeMeta=s.emptyArray,e.prototype.settlementRewardMeta=s.emptyArray,e.prototype.miniGameMeta=s.emptyArray,e.prototype.welfareCentreMeta=s.emptyArray,e.prototype.keyRewardMeta=s.emptyArray,e.prototype.newModeUnlockMeta=s.emptyArray,e.prototype.energyMeta=s.emptyArray,e.prototype.grenadeModeLevelMeta=s.emptyArray,e.prototype.hostageModeLevelMeta=s.emptyArray,e.prototype.survivalModeLevelMeta=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=r.create()),null!=e.classicalModeLevelMeta&&e.classicalModeLevelMeta.length)for(var n=0;n<e.classicalModeLevelMeta.length;++n)c.ClassicalModeLevelMeta.encode(e.classicalModeLevelMeta[n],t.uint32(10).fork()).ldelim();if(t.uint32(16).int64(e.metaVer),null!=e.signInMeta&&e.signInMeta.length)for(var o=0;o<e.signInMeta.length;++o)c.SignInMeta.encode(e.signInMeta[o],t.uint32(26).fork()).ldelim();if(null!=e.coinRewardMeta&&e.coinRewardMeta.length)for(var a=0;a<e.coinRewardMeta.length;++a)c.CoinRewardMeta.encode(e.coinRewardMeta[a],t.uint32(34).fork()).ldelim();if(null!=e.imageUpgradeMeta&&e.imageUpgradeMeta.length)for(var i=0;i<e.imageUpgradeMeta.length;++i)c.ImageUpgradeMeta.encode(e.imageUpgradeMeta[i],t.uint32(42).fork()).ldelim();if(null!=e.settlementRewardMeta&&e.settlementRewardMeta.length)for(var s=0;s<e.settlementRewardMeta.length;++s)c.SettlementRewardMeta.encode(e.settlementRewardMeta[s],t.uint32(50).fork()).ldelim();if(null!=e.miniGameMeta&&e.miniGameMeta.length)for(var l=0;l<e.miniGameMeta.length;++l)c.MiniGameMeta.encode(e.miniGameMeta[l],t.uint32(58).fork()).ldelim();if(null!=e.welfareCentreMeta&&e.welfareCentreMeta.length)for(var d=0;d<e.welfareCentreMeta.length;++d)c.WelfareCentreMeta.encode(e.welfareCentreMeta[d],t.uint32(66).fork()).ldelim();if(null!=e.keyRewardMeta&&e.keyRewardMeta.length)for(var u=0;u<e.keyRewardMeta.length;++u)c.KeyRewardMeta.encode(e.keyRewardMeta[u],t.uint32(74).fork()).ldelim();if(null!=e.newModeUnlockMeta&&e.newModeUnlockMeta.length)for(var h=0;h<e.newModeUnlockMeta.length;++h)c.NewModeUnlockMeta.encode(e.newModeUnlockMeta[h],t.uint32(82).fork()).ldelim();if(null!=e.energyMeta&&e.energyMeta.length)for(var p=0;p<e.energyMeta.length;++p)c.EnergyMeta.encode(e.energyMeta[p],t.uint32(90).fork()).ldelim();if(null!=e.grenadeModeLevelMeta&&e.grenadeModeLevelMeta.length)for(var f=0;f<e.grenadeModeLevelMeta.length;++f)c.GrenadeModeLevelMeta.encode(e.grenadeModeLevelMeta[f],t.uint32(98).fork()).ldelim();if(null!=e.hostageModeLevelMeta&&e.hostageModeLevelMeta.length)for(var g=0;g<e.hostageModeLevelMeta.length;++g)c.HostageModeLevelMeta.encode(e.hostageModeLevelMeta[g],t.uint32(106).fork()).ldelim();if(null!=e.survivalModeLevelMeta&&e.survivalModeLevelMeta.length)for(var m=0;m<e.survivalModeLevelMeta.length;++m)c.SurvivalModeLevelMeta.encode(e.survivalModeLevelMeta[m],t.uint32(114).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.GameMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.classicalModeLevelMeta&&o.classicalModeLevelMeta.length||(o.classicalModeLevelMeta=[]),o.classicalModeLevelMeta.push(c.ClassicalModeLevelMeta.decode(e,e.uint32()));break;case 2:o.metaVer=e.int64();break;case 3:o.signInMeta&&o.signInMeta.length||(o.signInMeta=[]),o.signInMeta.push(c.SignInMeta.decode(e,e.uint32()));break;case 4:o.coinRewardMeta&&o.coinRewardMeta.length||(o.coinRewardMeta=[]),o.coinRewardMeta.push(c.CoinRewardMeta.decode(e,e.uint32()));break;case 5:o.imageUpgradeMeta&&o.imageUpgradeMeta.length||(o.imageUpgradeMeta=[]),o.imageUpgradeMeta.push(c.ImageUpgradeMeta.decode(e,e.uint32()));break;case 6:o.settlementRewardMeta&&o.settlementRewardMeta.length||(o.settlementRewardMeta=[]),o.settlementRewardMeta.push(c.SettlementRewardMeta.decode(e,e.uint32()));break;case 7:o.miniGameMeta&&o.miniGameMeta.length||(o.miniGameMeta=[]),o.miniGameMeta.push(c.MiniGameMeta.decode(e,e.uint32()));break;case 8:o.welfareCentreMeta&&o.welfareCentreMeta.length||(o.welfareCentreMeta=[]),o.welfareCentreMeta.push(c.WelfareCentreMeta.decode(e,e.uint32()));break;case 9:o.keyRewardMeta&&o.keyRewardMeta.length||(o.keyRewardMeta=[]),o.keyRewardMeta.push(c.KeyRewardMeta.decode(e,e.uint32()));break;case 10:o.newModeUnlockMeta&&o.newModeUnlockMeta.length||(o.newModeUnlockMeta=[]),o.newModeUnlockMeta.push(c.NewModeUnlockMeta.decode(e,e.uint32()));break;case 11:o.energyMeta&&o.energyMeta.length||(o.energyMeta=[]),o.energyMeta.push(c.EnergyMeta.decode(e,e.uint32()));break;case 12:o.grenadeModeLevelMeta&&o.grenadeModeLevelMeta.length||(o.grenadeModeLevelMeta=[]),o.grenadeModeLevelMeta.push(c.GrenadeModeLevelMeta.decode(e,e.uint32()));break;case 13:o.hostageModeLevelMeta&&o.hostageModeLevelMeta.length||(o.hostageModeLevelMeta=[]),o.hostageModeLevelMeta.push(c.HostageModeLevelMeta.decode(e,e.uint32()));break;case 14:o.survivalModeLevelMeta&&o.survivalModeLevelMeta.length||(o.survivalModeLevelMeta=[]),o.survivalModeLevelMeta.push(c.SurvivalModeLevelMeta.decode(e,e.uint32()));break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("metaVer"))throw s.ProtocolError("missing required 'metaVer'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(void 0===e?"undefined":o(e))||null===e)return"object expected";if(null!=e.classicalModeLevelMeta&&e.hasOwnProperty("classicalModeLevelMeta")){if(!Array.isArray(e.classicalModeLevelMeta))return"classicalModeLevelMeta: array expected";for(var t=0;t<e.classicalModeLevelMeta.length;++t){var n=c.ClassicalModeLevelMeta.verify(e.classicalModeLevelMeta[t]);if(n)return"classicalModeLevelMeta."+n}}if(!(s.isInteger(e.metaVer)||e.metaVer&&s.isInteger(e.metaVer.low)&&s.isInteger(e.metaVer.high)))return"metaVer: integer|Long expected";if(null!=e.signInMeta&&e.hasOwnProperty("signInMeta")){if(!Array.isArray(e.signInMeta))return"signInMeta: array expected";for(var a=0;a<e.signInMeta.length;++a){var i=c.SignInMeta.verify(e.signInMeta[a]);if(i)return"signInMeta."+i}}if(null!=e.coinRewardMeta&&e.hasOwnProperty("coinRewardMeta")){if(!Array.isArray(e.coinRewardMeta))return"coinRewardMeta: array expected";for(var r=0;r<e.coinRewardMeta.length;++r){var l=c.CoinRewardMeta.verify(e.coinRewardMeta[r]);if(l)return"coinRewardMeta."+l}}if(null!=e.imageUpgradeMeta&&e.hasOwnProperty("imageUpgradeMeta")){if(!Array.isArray(e.imageUpgradeMeta))return"imageUpgradeMeta: array expected";for(var d=0;d<e.imageUpgradeMeta.length;++d){var u=c.ImageUpgradeMeta.verify(e.imageUpgradeMeta[d]);if(u)return"imageUpgradeMeta."+u}}if(null!=e.settlementRewardMeta&&e.hasOwnProperty("settlementRewardMeta")){if(!Array.isArray(e.settlementRewardMeta))return"settlementRewardMeta: array expected";for(var h=0;h<e.settlementRewardMeta.length;++h){var p=c.SettlementRewardMeta.verify(e.settlementRewardMeta[h]);if(p)return"settlementRewardMeta."+p}}if(null!=e.miniGameMeta&&e.hasOwnProperty("miniGameMeta")){if(!Array.isArray(e.miniGameMeta))return"miniGameMeta: array expected";for(var f=0;f<e.miniGameMeta.length;++f){var g=c.MiniGameMeta.verify(e.miniGameMeta[f]);if(g)return"miniGameMeta."+g}}if(null!=e.welfareCentreMeta&&e.hasOwnProperty("welfareCentreMeta")){if(!Array.isArray(e.welfareCentreMeta))return"welfareCentreMeta: array expected";for(var m=0;m<e.welfareCentreMeta.length;++m){var _=c.WelfareCentreMeta.verify(e.welfareCentreMeta[m]);if(_)return"welfareCentreMeta."+_}}if(null!=e.keyRewardMeta&&e.hasOwnProperty("keyRewardMeta")){if(!Array.isArray(e.keyRewardMeta))return"keyRewardMeta: array expected";for(var y=0;y<e.keyRewardMeta.length;++y){var v=c.KeyRewardMeta.verify(e.keyRewardMeta[y]);if(v)return"keyRewardMeta."+v}}if(null!=e.newModeUnlockMeta&&e.hasOwnProperty("newModeUnlockMeta")){if(!Array.isArray(e.newModeUnlockMeta))return"newModeUnlockMeta: array expected";for(var M=0;M<e.newModeUnlockMeta.length;++M){var C=c.NewModeUnlockMeta.verify(e.newModeUnlockMeta[M]);if(C)return"newModeUnlockMeta."+C}}if(null!=e.energyMeta&&e.hasOwnProperty("energyMeta")){if(!Array.isArray(e.energyMeta))return"energyMeta: array expected";for(var E=0;E<e.energyMeta.length;++E){var b=c.EnergyMeta.verify(e.energyMeta[E]);if(b)return"energyMeta."+b}}if(null!=e.grenadeModeLevelMeta&&e.hasOwnProperty("grenadeModeLevelMeta")){if(!Array.isArray(e.grenadeModeLevelMeta))return"grenadeModeLevelMeta: array expected";for(var S=0;S<e.grenadeModeLevelMeta.length;++S){var R=c.GrenadeModeLevelMeta.verify(e.grenadeModeLevelMeta[S]);if(R)return"grenadeModeLevelMeta."+R}}if(null!=e.hostageModeLevelMeta&&e.hasOwnProperty("hostageModeLevelMeta")){if(!Array.isArray(e.hostageModeLevelMeta))return"hostageModeLevelMeta: array expected";for(var T=0;T<e.hostageModeLevelMeta.length;++T){var D=c.HostageModeLevelMeta.verify(e.hostageModeLevelMeta[T]);if(D)return"hostageModeLevelMeta."+D}}if(null!=e.survivalModeLevelMeta&&e.hasOwnProperty("survivalModeLevelMeta")){if(!Array.isArray(e.survivalModeLevelMeta))return"survivalModeLevelMeta: array expected";for(var A=0;A<e.survivalModeLevelMeta.length;++A){var w=c.SurvivalModeLevelMeta.verify(e.survivalModeLevelMeta[A]);if(w)return"survivalModeLevelMeta."+w}}return null},e.fromObject=function(e){if(e instanceof c.GameMeta)return e;var t=new c.GameMeta;if(e.classicalModeLevelMeta){if(!Array.isArray(e.classicalModeLevelMeta))throw TypeError(".GameMeta.classicalModeLevelMeta: array expected");t.classicalModeLevelMeta=[];for(var n=0;n<e.classicalModeLevelMeta.length;++n){if("object"!==o(e.classicalModeLevelMeta[n]))throw TypeError(".GameMeta.classicalModeLevelMeta: object expected");t.classicalModeLevelMeta[n]=c.ClassicalModeLevelMeta.fromObject(e.classicalModeLevelMeta[n])}}if(null!=e.metaVer&&(s.Long?(t.metaVer=s.Long.fromValue(e.metaVer)).unsigned=!1:"string"==typeof e.metaVer?t.metaVer=parseInt(e.metaVer,10):"number"==typeof e.metaVer?t.metaVer=e.metaVer:"object"===o(e.metaVer)&&(t.metaVer=new s.LongBits(e.metaVer.low>>>0,e.metaVer.high>>>0).toNumber())),e.signInMeta){if(!Array.isArray(e.signInMeta))throw TypeError(".GameMeta.signInMeta: array expected");t.signInMeta=[];for(var a=0;a<e.signInMeta.length;++a){if("object"!==o(e.signInMeta[a]))throw TypeError(".GameMeta.signInMeta: object expected");t.signInMeta[a]=c.SignInMeta.fromObject(e.signInMeta[a])}}if(e.coinRewardMeta){if(!Array.isArray(e.coinRewardMeta))throw TypeError(".GameMeta.coinRewardMeta: array expected");t.coinRewardMeta=[];for(var i=0;i<e.coinRewardMeta.length;++i){if("object"!==o(e.coinRewardMeta[i]))throw TypeError(".GameMeta.coinRewardMeta: object expected");t.coinRewardMeta[i]=c.CoinRewardMeta.fromObject(e.coinRewardMeta[i])}}if(e.imageUpgradeMeta){if(!Array.isArray(e.imageUpgradeMeta))throw TypeError(".GameMeta.imageUpgradeMeta: array expected");t.imageUpgradeMeta=[];for(var r=0;r<e.imageUpgradeMeta.length;++r){if("object"!==o(e.imageUpgradeMeta[r]))throw TypeError(".GameMeta.imageUpgradeMeta: object expected");t.imageUpgradeMeta[r]=c.ImageUpgradeMeta.fromObject(e.imageUpgradeMeta[r])}}if(e.settlementRewardMeta){if(!Array.isArray(e.settlementRewardMeta))throw TypeError(".GameMeta.settlementRewardMeta: array expected");t.settlementRewardMeta=[];for(var l=0;l<e.settlementRewardMeta.length;++l){if("object"!==o(e.settlementRewardMeta[l]))throw TypeError(".GameMeta.settlementRewardMeta: object expected");t.settlementRewardMeta[l]=c.SettlementRewardMeta.fromObject(e.settlementRewardMeta[l])}}if(e.miniGameMeta){if(!Array.isArray(e.miniGameMeta))throw TypeError(".GameMeta.miniGameMeta: array expected");t.miniGameMeta=[];for(var d=0;d<e.miniGameMeta.length;++d){if("object"!==o(e.miniGameMeta[d]))throw TypeError(".GameMeta.miniGameMeta: object expected");t.miniGameMeta[d]=c.MiniGameMeta.fromObject(e.miniGameMeta[d])}}if(e.welfareCentreMeta){if(!Array.isArray(e.welfareCentreMeta))throw TypeError(".GameMeta.welfareCentreMeta: array expected");t.welfareCentreMeta=[];for(var u=0;u<e.welfareCentreMeta.length;++u){if("object"!==o(e.welfareCentreMeta[u]))throw TypeError(".GameMeta.welfareCentreMeta: object expected");t.welfareCentreMeta[u]=c.WelfareCentreMeta.fromObject(e.welfareCentreMeta[u])}}if(e.keyRewardMeta){if(!Array.isArray(e.keyRewardMeta))throw TypeError(".GameMeta.keyRewardMeta: array expected");t.keyRewardMeta=[];for(var h=0;h<e.keyRewardMeta.length;++h){if("object"!==o(e.keyRewardMeta[h]))throw TypeError(".GameMeta.keyRewardMeta: object expected");t.keyRewardMeta[h]=c.KeyRewardMeta.fromObject(e.keyRewardMeta[h])}}if(e.newModeUnlockMeta){if(!Array.isArray(e.newModeUnlockMeta))throw TypeError(".GameMeta.newModeUnlockMeta: array expected");t.newModeUnlockMeta=[];for(var p=0;p<e.newModeUnlockMeta.length;++p){if("object"!==o(e.newModeUnlockMeta[p]))throw TypeError(".GameMeta.newModeUnlockMeta: object expected");t.newModeUnlockMeta[p]=c.NewModeUnlockMeta.fromObject(e.newModeUnlockMeta[p])}}if(e.energyMeta){if(!Array.isArray(e.energyMeta))throw TypeError(".GameMeta.energyMeta: array expected");t.energyMeta=[];for(var f=0;f<e.energyMeta.length;++f){if("object"!==o(e.energyMeta[f]))throw TypeError(".GameMeta.energyMeta: object expected");t.energyMeta[f]=c.EnergyMeta.fromObject(e.energyMeta[f])}}if(e.grenadeModeLevelMeta){if(!Array.isArray(e.grenadeModeLevelMeta))throw TypeError(".GameMeta.grenadeModeLevelMeta: array expected");t.grenadeModeLevelMeta=[];for(var g=0;g<e.grenadeModeLevelMeta.length;++g){if("object"!==o(e.grenadeModeLevelMeta[g]))throw TypeError(".GameMeta.grenadeModeLevelMeta: object expected");t.grenadeModeLevelMeta[g]=c.GrenadeModeLevelMeta.fromObject(e.grenadeModeLevelMeta[g])}}if(e.hostageModeLevelMeta){if(!Array.isArray(e.hostageModeLevelMeta))throw TypeError(".GameMeta.hostageModeLevelMeta: array expected");t.hostageModeLevelMeta=[];for(var m=0;m<e.hostageModeLevelMeta.length;++m){if("object"!==o(e.hostageModeLevelMeta[m]))throw TypeError(".GameMeta.hostageModeLevelMeta: object expected");t.hostageModeLevelMeta[m]=c.HostageModeLevelMeta.fromObject(e.hostageModeLevelMeta[m])}}if(e.survivalModeLevelMeta){if(!Array.isArray(e.survivalModeLevelMeta))throw TypeError(".GameMeta.survivalModeLevelMeta: array expected");t.survivalModeLevelMeta=[];for(var _=0;_<e.survivalModeLevelMeta.length;++_){if("object"!==o(e.survivalModeLevelMeta[_]))throw TypeError(".GameMeta.survivalModeLevelMeta: object expected");t.survivalModeLevelMeta[_]=c.SurvivalModeLevelMeta.fromObject(e.survivalModeLevelMeta[_])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.classicalModeLevelMeta=[],n.signInMeta=[],n.coinRewardMeta=[],n.imageUpgradeMeta=[],n.settlementRewardMeta=[],n.miniGameMeta=[],n.welfareCentreMeta=[],n.keyRewardMeta=[],n.newModeUnlockMeta=[],n.energyMeta=[],n.grenadeModeLevelMeta=[],n.hostageModeLevelMeta=[],n.survivalModeLevelMeta=[]),t.defaults)if(s.Long){var o=new s.Long(0,0,!1);n.metaVer=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.metaVer=t.longs===String?"0":0;if(e.classicalModeLevelMeta&&e.classicalModeLevelMeta.length){n.classicalModeLevelMeta=[];for(var a=0;a<e.classicalModeLevelMeta.length;++a)n.classicalModeLevelMeta[a]=c.ClassicalModeLevelMeta.toObject(e.classicalModeLevelMeta[a],t)}if(null!=e.metaVer&&e.hasOwnProperty("metaVer")&&("number"==typeof e.metaVer?n.metaVer=t.longs===String?String(e.metaVer):e.metaVer:n.metaVer=t.longs===String?s.Long.prototype.toString.call(e.metaVer):t.longs===Number?new s.LongBits(e.metaVer.low>>>0,e.metaVer.high>>>0).toNumber():e.metaVer),e.signInMeta&&e.signInMeta.length){n.signInMeta=[];for(var i=0;i<e.signInMeta.length;++i)n.signInMeta[i]=c.SignInMeta.toObject(e.signInMeta[i],t)}if(e.coinRewardMeta&&e.coinRewardMeta.length){n.coinRewardMeta=[];for(var r=0;r<e.coinRewardMeta.length;++r)n.coinRewardMeta[r]=c.CoinRewardMeta.toObject(e.coinRewardMeta[r],t)}if(e.imageUpgradeMeta&&e.imageUpgradeMeta.length){n.imageUpgradeMeta=[];for(var l=0;l<e.imageUpgradeMeta.length;++l)n.imageUpgradeMeta[l]=c.ImageUpgradeMeta.toObject(e.imageUpgradeMeta[l],t)}if(e.settlementRewardMeta&&e.settlementRewardMeta.length){n.settlementRewardMeta=[];for(var d=0;d<e.settlementRewardMeta.length;++d)n.settlementRewardMeta[d]=c.SettlementRewardMeta.toObject(e.settlementRewardMeta[d],t)}if(e.miniGameMeta&&e.miniGameMeta.length){n.miniGameMeta=[];for(var u=0;u<e.miniGameMeta.length;++u)n.miniGameMeta[u]=c.MiniGameMeta.toObject(e.miniGameMeta[u],t)}if(e.welfareCentreMeta&&e.welfareCentreMeta.length){n.welfareCentreMeta=[];for(var h=0;h<e.welfareCentreMeta.length;++h)n.welfareCentreMeta[h]=c.WelfareCentreMeta.toObject(e.welfareCentreMeta[h],t)}if(e.keyRewardMeta&&e.keyRewardMeta.length){n.keyRewardMeta=[];for(var p=0;p<e.keyRewardMeta.length;++p)n.keyRewardMeta[p]=c.KeyRewardMeta.toObject(e.keyRewardMeta[p],t)}if(e.newModeUnlockMeta&&e.newModeUnlockMeta.length){n.newModeUnlockMeta=[];for(var f=0;f<e.newModeUnlockMeta.length;++f)n.newModeUnlockMeta[f]=c.NewModeUnlockMeta.toObject(e.newModeUnlockMeta[f],t)}if(e.energyMeta&&e.energyMeta.length){n.energyMeta=[];for(var g=0;g<e.energyMeta.length;++g)n.energyMeta[g]=c.EnergyMeta.toObject(e.energyMeta[g],t)}if(e.grenadeModeLevelMeta&&e.grenadeModeLevelMeta.length){n.grenadeModeLevelMeta=[];for(var m=0;m<e.grenadeModeLevelMeta.length;++m)n.grenadeModeLevelMeta[m]=c.GrenadeModeLevelMeta.toObject(e.grenadeModeLevelMeta[m],t)}if(e.hostageModeLevelMeta&&e.hostageModeLevelMeta.length){n.hostageModeLevelMeta=[];for(var _=0;_<e.hostageModeLevelMeta.length;++_)n.hostageModeLevelMeta[_]=c.HostageModeLevelMeta.toObject(e.hostageModeLevelMeta[_],t)}if(e.survivalModeLevelMeta&&e.survivalModeLevelMeta.length){n.survivalModeLevelMeta=[];for(var y=0;y<e.survivalModeLevelMeta.length;++y)n.survivalModeLevelMeta[y]=c.SurvivalModeLevelMeta.toObject(e.survivalModeLevelMeta[y],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.SignInMeta=c.SignInMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.days=0,e.prototype.coinNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.days),t.uint32(16).int32(e.coinNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.SignInMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.days=e.int32();break;case 2:o.coinNum=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("days"))throw s.ProtocolError("missing required 'days'",{instance:o});if(!o.hasOwnProperty("coinNum"))throw s.ProtocolError("missing required 'coinNum'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.days)?s.isInteger(e.coinNum)?null:"coinNum: integer expected":"days: integer expected"},e.fromObject=function(e){if(e instanceof c.SignInMeta)return e;var t=new c.SignInMeta;return null!=e.days&&(t.days=0|e.days),null!=e.coinNum&&(t.coinNum=0|e.coinNum),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.days=0,n.coinNum=0),null!=e.days&&e.hasOwnProperty("days")&&(n.days=e.days),null!=e.coinNum&&e.hasOwnProperty("coinNum")&&(n.coinNum=e.coinNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.ImageUpgradeMeta=c.ImageUpgradeMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.grade=0,e.prototype.imageId="",e.prototype.name="",e.prototype.backgroundId="",e.prototype.starsNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.grade),t.uint32(18).string(e.imageId),t.uint32(26).string(e.name),t.uint32(34).string(e.backgroundId),t.uint32(40).int32(e.starsNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.ImageUpgradeMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.grade=e.int32();break;case 2:o.imageId=e.string();break;case 3:o.name=e.string();break;case 4:o.backgroundId=e.string();break;case 5:o.starsNum=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("grade"))throw s.ProtocolError("missing required 'grade'",{instance:o});if(!o.hasOwnProperty("imageId"))throw s.ProtocolError("missing required 'imageId'",{instance:o});if(!o.hasOwnProperty("name"))throw s.ProtocolError("missing required 'name'",{instance:o});if(!o.hasOwnProperty("backgroundId"))throw s.ProtocolError("missing required 'backgroundId'",{instance:o});if(!o.hasOwnProperty("starsNum"))throw s.ProtocolError("missing required 'starsNum'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.grade)?s.isString(e.imageId)?s.isString(e.name)?s.isString(e.backgroundId)?s.isInteger(e.starsNum)?null:"starsNum: integer expected":"backgroundId: string expected":"name: string expected":"imageId: string expected":"grade: integer expected"},e.fromObject=function(e){if(e instanceof c.ImageUpgradeMeta)return e;var t=new c.ImageUpgradeMeta;return null!=e.grade&&(t.grade=0|e.grade),null!=e.imageId&&(t.imageId=String(e.imageId)),null!=e.name&&(t.name=String(e.name)),null!=e.backgroundId&&(t.backgroundId=String(e.backgroundId)),null!=e.starsNum&&(t.starsNum=0|e.starsNum),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.grade=0,n.imageId="",n.name="",n.backgroundId="",n.starsNum=0),null!=e.grade&&e.hasOwnProperty("grade")&&(n.grade=e.grade),null!=e.imageId&&e.hasOwnProperty("imageId")&&(n.imageId=e.imageId),null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.backgroundId&&e.hasOwnProperty("backgroundId")&&(n.backgroundId=e.backgroundId),null!=e.starsNum&&e.hasOwnProperty("starsNum")&&(n.starsNum=e.starsNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.SettlementRewardMeta=c.SettlementRewardMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.lose=0,e.prototype.oneStarsReward=0,e.prototype.extraBonus=0,e.prototype.videoRefreshNum=0,e.prototype.shareRefreshNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.lose),t.uint32(16).int32(e.oneStarsReward),t.uint32(24).int32(e.extraBonus),t.uint32(32).int32(e.videoRefreshNum),t.uint32(40).int32(e.shareRefreshNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.SettlementRewardMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.lose=e.int32();break;case 2:o.oneStarsReward=e.int32();break;case 3:o.extraBonus=e.int32();break;case 4:o.videoRefreshNum=e.int32();break;case 5:o.shareRefreshNum=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("lose"))throw s.ProtocolError("missing required 'lose'",{instance:o});if(!o.hasOwnProperty("oneStarsReward"))throw s.ProtocolError("missing required 'oneStarsReward'",{instance:o});if(!o.hasOwnProperty("extraBonus"))throw s.ProtocolError("missing required 'extraBonus'",{instance:o});if(!o.hasOwnProperty("videoRefreshNum"))throw s.ProtocolError("missing required 'videoRefreshNum'",{instance:o});if(!o.hasOwnProperty("shareRefreshNum"))throw s.ProtocolError("missing required 'shareRefreshNum'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.lose)?s.isInteger(e.oneStarsReward)?s.isInteger(e.extraBonus)?s.isInteger(e.videoRefreshNum)?s.isInteger(e.shareRefreshNum)?null:"shareRefreshNum: integer expected":"videoRefreshNum: integer expected":"extraBonus: integer expected":"oneStarsReward: integer expected":"lose: integer expected"},e.fromObject=function(e){if(e instanceof c.SettlementRewardMeta)return e;var t=new c.SettlementRewardMeta;return null!=e.lose&&(t.lose=0|e.lose),null!=e.oneStarsReward&&(t.oneStarsReward=0|e.oneStarsReward),null!=e.extraBonus&&(t.extraBonus=0|e.extraBonus),null!=e.videoRefreshNum&&(t.videoRefreshNum=0|e.videoRefreshNum),null!=e.shareRefreshNum&&(t.shareRefreshNum=0|e.shareRefreshNum),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.lose=0,n.oneStarsReward=0,n.extraBonus=0,n.videoRefreshNum=0,n.shareRefreshNum=0),null!=e.lose&&e.hasOwnProperty("lose")&&(n.lose=e.lose),null!=e.oneStarsReward&&e.hasOwnProperty("oneStarsReward")&&(n.oneStarsReward=e.oneStarsReward),null!=e.extraBonus&&e.hasOwnProperty("extraBonus")&&(n.extraBonus=e.extraBonus),null!=e.videoRefreshNum&&e.hasOwnProperty("videoRefreshNum")&&(n.videoRefreshNum=e.videoRefreshNum),null!=e.shareRefreshNum&&e.hasOwnProperty("shareRefreshNum")&&(n.shareRefreshNum=e.shareRefreshNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.MiniGameMeta=c.MiniGameMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.num=0,e.prototype.probability=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.type),t.uint32(16).int32(e.num),t.uint32(24).int32(e.probability),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.MiniGameMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.type=e.int32();break;case 2:o.num=e.int32();break;case 3:o.probability=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("type"))throw s.ProtocolError("missing required 'type'",{instance:o});if(!o.hasOwnProperty("num"))throw s.ProtocolError("missing required 'num'",{instance:o});if(!o.hasOwnProperty("probability"))throw s.ProtocolError("missing required 'probability'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.type)?s.isInteger(e.num)?s.isInteger(e.probability)?null:"probability: integer expected":"num: integer expected":"type: integer expected"},e.fromObject=function(e){if(e instanceof c.MiniGameMeta)return e;var t=new c.MiniGameMeta;return null!=e.type&&(t.type=0|e.type),null!=e.num&&(t.num=0|e.num),null!=e.probability&&(t.probability=0|e.probability),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type=0,n.num=0,n.probability=0),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.num&&e.hasOwnProperty("num")&&(n.num=e.num),null!=e.probability&&e.hasOwnProperty("probability")&&(n.probability=e.probability),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.WelfareCentreMeta=c.WelfareCentreMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.coinReward=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.coinReward),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.WelfareCentreMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.coinReward=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("coinReward"))throw s.ProtocolError("missing required 'coinReward'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.coinReward)?null:"coinReward: integer expected"},e.fromObject=function(e){if(e instanceof c.WelfareCentreMeta)return e;var t=new c.WelfareCentreMeta;return null!=e.coinReward&&(t.coinReward=0|e.coinReward),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.coinReward=0),null!=e.coinReward&&e.hasOwnProperty("coinReward")&&(n.coinReward=e.coinReward),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.KeyRewardMeta=c.KeyRewardMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.num=0,e.prototype.price=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.num),t.uint32(16).int32(e.price),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.KeyRewardMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.num=e.int32();break;case 2:o.price=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("num"))throw s.ProtocolError("missing required 'num'",{instance:o});if(!o.hasOwnProperty("price"))throw s.ProtocolError("missing required 'price'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.num)?s.isInteger(e.price)?null:"price: integer expected":"num: integer expected"},e.fromObject=function(e){if(e instanceof c.KeyRewardMeta)return e;var t=new c.KeyRewardMeta;return null!=e.num&&(t.num=0|e.num),null!=e.price&&(t.price=0|e.price),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.num=0,n.price=0),null!=e.num&&e.hasOwnProperty("num")&&(n.num=e.num),null!=e.price&&e.hasOwnProperty("price")&&(n.price=e.price),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.NewModeUnlockMeta=c.NewModeUnlockMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.modeName="",e.prototype.starsNum=0,e.prototype.refreshNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(10).string(e.modeName),t.uint32(16).int32(e.starsNum),t.uint32(24).int32(e.refreshNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.NewModeUnlockMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.modeName=e.string();break;case 2:o.starsNum=e.int32();break;case 3:o.refreshNum=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("modeName"))throw s.ProtocolError("missing required 'modeName'",{instance:o});if(!o.hasOwnProperty("starsNum"))throw s.ProtocolError("missing required 'starsNum'",{instance:o});if(!o.hasOwnProperty("refreshNum"))throw s.ProtocolError("missing required 'refreshNum'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isString(e.modeName)?s.isInteger(e.starsNum)?s.isInteger(e.refreshNum)?null:"refreshNum: integer expected":"starsNum: integer expected":"modeName: string expected"},e.fromObject=function(e){if(e instanceof c.NewModeUnlockMeta)return e;var t=new c.NewModeUnlockMeta;return null!=e.modeName&&(t.modeName=String(e.modeName)),null!=e.starsNum&&(t.starsNum=0|e.starsNum),null!=e.refreshNum&&(t.refreshNum=0|e.refreshNum),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.modeName="",n.starsNum=0,n.refreshNum=0),null!=e.modeName&&e.hasOwnProperty("modeName")&&(n.modeName=e.modeName),null!=e.starsNum&&e.hasOwnProperty("starsNum")&&(n.starsNum=e.starsNum),null!=e.refreshNum&&e.hasOwnProperty("refreshNum")&&(n.refreshNum=e.refreshNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.GrenadeModeLevelMeta=c.GrenadeModeLevelMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.level=0,e.prototype.goldBulletNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.level),t.uint32(16).int32(e.goldBulletNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.GrenadeModeLevelMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.level=e.int32();break;case 2:o.goldBulletNum=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("level"))throw s.ProtocolError("missing required 'level'",{instance:o});if(!o.hasOwnProperty("goldBulletNum"))throw s.ProtocolError("missing required 'goldBulletNum'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.level)?s.isInteger(e.goldBulletNum)?null:"goldBulletNum: integer expected":"level: integer expected"},e.fromObject=function(e){if(e instanceof c.GrenadeModeLevelMeta)return e;var t=new c.GrenadeModeLevelMeta;return null!=e.level&&(t.level=0|e.level),null!=e.goldBulletNum&&(t.goldBulletNum=0|e.goldBulletNum),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.level=0,n.goldBulletNum=0),null!=e.level&&e.hasOwnProperty("level")&&(n.level=e.level),null!=e.goldBulletNum&&e.hasOwnProperty("goldBulletNum")&&(n.goldBulletNum=e.goldBulletNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.HostageModeLevelMeta=c.HostageModeLevelMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.level=0,e.prototype.goldBulletNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.level),t.uint32(16).int32(e.goldBulletNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.HostageModeLevelMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.level=e.int32();break;case 2:o.goldBulletNum=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("level"))throw s.ProtocolError("missing required 'level'",{instance:o});if(!o.hasOwnProperty("goldBulletNum"))throw s.ProtocolError("missing required 'goldBulletNum'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.level)?s.isInteger(e.goldBulletNum)?null:"goldBulletNum: integer expected":"level: integer expected"},e.fromObject=function(e){if(e instanceof c.HostageModeLevelMeta)return e;var t=new c.HostageModeLevelMeta;return null!=e.level&&(t.level=0|e.level),null!=e.goldBulletNum&&(t.goldBulletNum=0|e.goldBulletNum),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.level=0,n.goldBulletNum=0),null!=e.level&&e.hasOwnProperty("level")&&(n.level=e.level),null!=e.goldBulletNum&&e.hasOwnProperty("goldBulletNum")&&(n.goldBulletNum=e.goldBulletNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),n.SurvivalModeLevelMeta=c.SurvivalModeLevelMeta=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.level=0,e.prototype.goldBulletNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.level),t.uint32(16).int32(e.goldBulletNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof i||(e=i.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new c.SurvivalModeLevelMeta;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:o.level=e.int32();break;case 2:o.goldBulletNum=e.int32();break;default:e.skipType(7&a)}}if(!o.hasOwnProperty("level"))throw s.ProtocolError("missing required 'level'",{instance:o});if(!o.hasOwnProperty("goldBulletNum"))throw s.ProtocolError("missing required 'goldBulletNum'",{instance:o});return o},e.decodeDelimited=function(e){return e instanceof i||(e=new i(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(void 0===e?"undefined":o(e))||null===e?"object expected":s.isInteger(e.level)?s.isInteger(e.goldBulletNum)?null:"goldBulletNum: integer expected":"level: integer expected"},e.fromObject=function(e){if(e instanceof c.SurvivalModeLevelMeta)return e;var t=new c.SurvivalModeLevelMeta;return null!=e.level&&(t.level=0|e.level),null!=e.goldBulletNum&&(t.goldBulletNum=0|e.goldBulletNum),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.level=0,n.goldBulletNum=0),null!=e.level&&e.hasOwnProperty("level")&&(n.level=e.level),null!=e.goldBulletNum&&e.hasOwnProperty("goldBulletNum")&&(n.goldBulletNum=e.goldBulletNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}();n.default=c,cc._RF.pop()},{"./protobufjs/minimal":"minimal"}]},{},["CircleAvatarItemMain","GameCoreUIConfig","IconAdBase","OpenDataProject","ToogleButtonMain","UsersData","BoardAdsItem","BoardAdsPanel","GameOverAdItemMain","GameOverAdsPanelMain","HotAdsPanelMain","RecommendAdItemMain","RecommendAdListMain","RecommendAdsPanelMain","SplashMain","GameStart","GameSystem","GameUtils","SoundMgr","Test","BannerAuto","BannerAuto1","CrossAdItemMain","CrossAdPanelMain","HpTip","UserHpContent","MoveAction","NodePoolMgr","OnlineTimerMgr","WXScreenAdMgr","BuriedPoints","ald-game-conf","ald-game","ForLaya","GameCoreEventNames","GameCoreLocation","Callback","DeerLoading","Dictionary","GameValues","SyncDataToServerByDeerSDK","SyncDataToWXCloud","Comp_AvatarImage","Comp_EffectFadeInAndOut","Comp_EffectFloat","Comp_EffectFlyTo","Comp_EffectShake","Comp_EffectZoom","Comp_GameClubButton","Comp_List","Comp_ListRenderer","Comp_LoadingSceneMain","Comp_MoveButton","Comp_MusicButton","Comp_PlatformContent","Comp_RemoteImage","Comp_SoundButton","Comp_SplashScreen","Comp_SubDomainContent","Comp_UserInfoButton","Comp_VibrateButton","DailyTaskBase","DailyTaskConfig","DailyTaskEventType","DailyTaskManager","Comp_DeerIconAd","Comp_DeerRecommendAdList","Comp_DeerSpineAd","DeerRequest","DeerSDK","DeerSDKEventNames","md5","DataManager","GameManager","GestureManager","PopUpManager","PopUpType","ResManager","SceneManager","SoundsManager","TagManager","Utils","EventCallBack","EventData","EventDispacher","ItemBase","ItemManager","ItemProp","Command","Context","Base","IOS","JRTT","Oppo","QQCM","QQCM_gameInfo","QQCM_getAvatarFromOpenId","TextureRenderUtils","Comp_NearToMenuButton","Comp_NearToWXBannerAd","Comp_WXBannerAd","DeerBannerAd","WXBannerAd","WXBannerAdBase","WXCore","WXData","WXDevice","WXEventNames","WXImage","WXInterstitialAd","WXOpenData","WXRewardVideoAd","WXRewardVideoAdCloseComfirm","WXShare","WXUser","WXUtils","WXRankDataManager","WXRankEventNames","WXRankVO","ShareDataTypes","ShareTypes","XYJAPI","XYJEventNames","XYJMoreGameButton","Load","TankUnlock","MainDataMgr","StageDataMgr","PBManager","pbcus","long","minimal","Bullet","Bullet_fllow","Bullet_pao","Bullet_pao_target","Bullet_power","EffManager","Enemy","EnemyGeneratePoint","EnemyItem","EnemyManager","FirstUI","FrameAni","GameCtrl","GameData","GameEndUI","GameUI","Globaldef","Hero","Hero_physic","HisDataUI","Joystick","JoystickBG","JoystickCommon","LevelItem","LevelListUI","LevelTypeUI","OtherGameUI","RayEnemy","Raycast","RebornUI","SelfFrame","TankDataMgr","TipUI","UIManager","WaitingUI","XinShou","PrefabMgr","BasePanelComp","CoinAnimComp","GoldenEgg","GoldenEggReceive","goldMan","HpGift","KeyGift","MainFeedBack","MainGoldGift","MainScene","MainSetting","MainWelfare","Player","Role","RoleMgr","RoleSelect","RoleSelectItem","RankEventName","RankItemRender","RankManage","RankRender","MainSigin","MainSiginitem","ModeList","ModeListItem","ModeSelect","ModeSelectItem","AudioManager","BoomBox","BulletController","CircleNode","Common","CubeBox","DeathItem","GameConfig","GameMain","GameMain1","GameMainMgr","GrenadeCollider","GrenadeController","Guide","HostageController","HostageJointController","LinkSwitch","LoadMap","LoadMap1","MoveCollider","MoveNode","PeopleMgr","PhysicPlayer","PhysicsPlayerLocal","PrfabsManager","ResManager1","RoleController","RoleJointController","RopeCollider","RotateBox","SimulationNode","SkipPanelComp","StageEnd","StageModeMain","StageModeMgr","TNTBox","TopContent","Transparent","UserHelp"]);